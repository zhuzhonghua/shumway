/*
 * Copyright 2013 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

// This file is automatically generated

(function(a){function e(a,b,e,r,v){void 0===r&&d("Missing required offset argument");(0>r||r+e>a.byteLength)&&d("Invalid index: "+r);if(1===e||!!v===g){if(0===(a.byteOffset+r)%e)return(new b(a.buffer,a.byteOffset+r,1))[0];for(v=0;v<e;v++)f[v]=a._bytes[r+v];return(new b(f.buffer))[0]}for(v=0;v<e;v++)f[e-v-1]=a._bytes[r+v];return(new b(f.buffer))[0]}function b(a,b,e,r,v,u){void 0===r&&d("Missing required offset argument");void 0===v&&d("Missing required value argument");(0>r||r+e>a.byteLength)&&d("Invalid index: "+
r);if(1===e||!!u===g)if(0===(a.byteOffset+r)%e)(new b(a.buffer,a.byteOffset+r,1))[0]=v;else{(new b(f.buffer))[0]=v;for(b=0;b<e;b++)a._bytes[b+r]=f[b]}else{(new b(f.buffer))[0]=v;for(b=0;b<e;b++)a._bytes[r+b]=f[e-1-b]}}function d(a){throw Error(a);}if(!a.DataView){a.ArrayBuffer||d("ArrayBuffer not supported");Object.defineProperties||d("This module requires ECMAScript 5");var g=1===(new Int8Array((new Int32Array([1])).buffer))[0],f=new Uint8Array(8);a.DataView=function(a,b,e){a instanceof ArrayBuffer||
d("Bad ArrayBuffer");b=b||0;e=e||a.byteLength-b;(0>b||0>e||b+e>a.byteLength)&&d("Illegal offset and/or length");Object.defineProperties(this,{buffer:{value:a,enumerable:!1,writable:!1,configurable:!1},byteOffset:{value:b,enumerable:!1,writable:!1,configurable:!1},byteLength:{value:e,enumerable:!1,writable:!1,configurable:!1},_bytes:{value:new Uint8Array(a,b,e),enumerable:!1,writable:!1,configurable:!1}})};a.DataView.prototype={constructor:DataView,getInt8:function(a){return e(this,Int8Array,1,a)},
getUint8:function(a){return e(this,Uint8Array,1,a)},getInt16:function(a,b){return e(this,Int16Array,2,a,b)},getUint16:function(a,b){return e(this,Uint16Array,2,a,b)},getInt32:function(a,b){return e(this,Int32Array,4,a,b)},getUint32:function(a,b){return e(this,Uint32Array,4,a,b)},getFloat32:function(a,b){return e(this,Float32Array,4,a,b)},getFloat64:function(a,b){return e(this,Float64Array,8,a,b)},setInt8:function(a,e){b(this,Int8Array,1,a,e)},setUint8:function(a,e){b(this,Uint8Array,1,a,e)},setInt16:function(a,
e,d){b(this,Int16Array,2,a,e,d)},setUint16:function(a,e,d){b(this,Uint16Array,2,a,e,d)},setInt32:function(a,e,d){b(this,Int32Array,4,a,e,d)},setUint32:function(a,e,d){b(this,Uint32Array,4,a,e,d)},setFloat32:function(a,e,d){b(this,Float32Array,4,a,e,d)},setFloat64:function(a,e,d){b(this,Float64Array,8,a,e,d)}}}})(this);
var ByteArray=ByteArray||function(){function a(b){if(b instanceof ByteArray)return b;(b=b||this.symbol&&this.symbol.data)?(this.a=new ArrayBuffer(b.length),this.length=b.length,(new Uint8Array(this.a)).set(b)):(this.a=new ArrayBuffer(a.INITIAL_SIZE),this.length=0);this.position=0;this.cacheViews();this.le=this.nativele=1===(new Int8Array((new Int32Array([])).buffer))[0];this.objectEncoding=a.DEFAULT_OBJECT_ENCODING;this.bitLength=this.bitBuffer=0}function e(){runtime.throwErrorFromVM("flash.errors.EOFError",
"End of file was encountered.")}function b(){var a=Errors.ParamRangeError;runtime.throwErrorFromVM("RangeError",getErrorMessage(a.code),a.code)}function d(){var a=Errors.CompressedDataError;runtime.throwErrorFromVM("CompressedDataError",getErrorMessage(a.code),a.code)}function g(a,b,d){a.position+d>a.length&&e();b=a.view[b](a.position,a.le);a.position+=d;return b}function f(a,b,e,d){e=a.position+e;a.ensureCapacity(e);a.view[b](a.position,d,a.le);a.position=e;e>a.length&&(a.length=e)}function l(a){for(var b=
Math.max.apply(null,a),e=a.length,d=1<<b,g=new Uint32Array(d),f=0,l=1,m=2;l<=b;f<<=1,++l,m<<=1)for(var r=0;r<e;++r)if(a[r]===l){for(var p=0,s=0;s<l;++s)p=2*p+(f>>s&1);for(s=p;s<d;s+=m)g[s]=l<<16|r;++f}return{codes:g,maxBits:b}}function m(a,b){for(var e=a.bitBuffer,d=a.bitLength;b>d;)e|=a.readUnsignedByte()<<d,d+=8;a.bitBuffer=e>>>b;a.bitLength=d-b;return e&(1<<b)-1}function p(a,b,e,d){for(var g;256!==(g=r(a,e));)if(256>g)b.writeUnsignedByte(g);else{g-=257;var f=C[g]+m(a,E[g]);g=r(a,d);g=A[g]+m(a,
z[g]);b.writeBytes(b,b.position-g,f)}}function r(a,b){for(var e=a.bitBuffer,g=a.bitLength,f=b.maxBits;f>g;)e|=a.readUnsignedByte()<<g,g+=8;var f=b.codes[e&(1<<f)-1],l=f>>16;l||d();a.bitBuffer=e>>>l;a.bitLength=g-l;return f&65535}function v(a,b,e){for(var d=1,g=0;b<e;++b)d=(d+(a[b]&255))%65521,g=(g+d)%65521;return g<<16|d}a.INITIAL_SIZE=128;a.DEFAULT_OBJECT_ENCODING=3;var u=a.prototype;u.cacheViews=function(){var a=this.a;this.int8v=new Int8Array(a);this.uint8v=new Uint8Array(a);this.view=new DataView(a)};
u.getBytes=function(){return new Uint8Array(this.a,0,this.length)};u.ensureCapacity=function(a){var b=this.a;if(b.byteLength<a){for(b=b.byteLength;b<a;)b*=2;a=new ArrayBuffer(b);b=this.int8v;this.a=a;this.cacheViews();this.int8v.set(b)}};u.clear=function(){this.position=this.length=0};u.readBoolean=function(){this.position+1>this.length&&e();return 0!==this.int8v[this.position++]};u.readByte=function(){this.position+1>this.length&&e();return this.int8v[this.position++]};u.readUnsignedByte=function(){this.position+
1>this.length&&e();return this.uint8v[this.position++]};u.readBytes=function(a,b,d){var g=this.position;b||(b=0);d||(d=this.length-g);g+d>this.length&&e();a.length<b+d&&(a.ensureCapacity(b+d),a.length=b+d);a.int8v.set(new Int8Array(this.a,g,d),b);this.position+=d};u.writeBoolean=function(a){var b=this.position+1;this.ensureCapacity(b);this.int8v[this.position++]=a?1:0;b>this.length&&(this.length=b)};u.writeByte=function(a){var b=this.position+1;this.ensureCapacity(b);this.int8v[this.position++]=a;
b>this.length&&(this.length=b)};u.writeUnsignedByte=function(a){var b=this.position+1;this.ensureCapacity(b);this.uint8v[this.position++]=a;b>this.length&&(this.length=b)};u.writeRawBytes=function(a){var b=this.position+a.length;this.ensureCapacity(b);this.int8v.set(a,this.position);this.position=b;b>this.length&&(this.length=b)};u.readRawBytes=function(){return new Int8Array(this.a,0,this.length)};u.writeBytes=function(a,e,d){2>arguments.length&&(e=0);3>arguments.length&&(d=0);e!==clamp(e,0,a.length)&&
b();var g=e+d;g!==clamp(g,0,a.length)&&b();0===d&&(d=a.length-e);this.writeRawBytes(new Int8Array(a.a,e,d))};u.readDouble=function(){return g(this,"getFloat64",8)};u.readFloat=function(){return g(this,"getFloat32",4)};u.readInt=function(){return g(this,"getInt32",4)};u.readShort=function(){return g(this,"getInt16",2)};u.readUnsignedInt=function(){return g(this,"getUint32",4)};u.readUnsignedShort=function(){return g(this,"getUint16",2)};u.writeDouble=function(a){f(this,"setFloat64",8,a)};u.writeFloat=
function(a){f(this,"setFloat32",4,a)};u.writeInt=function(a){f(this,"setInt32",4,a)};u.writeShort=function(a){f(this,"setInt16",2,a)};u.writeUnsignedInt=function(a){f(this,"setUint32",4,a)};u.writeUnsignedShort=function(a){f(this,"setUint16",2,a)};for(var w=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],A=[],z=[],s=0,B=0,y=1;30>s;++s)A[s]=y,y+=1<<(z[s]=~~((B+=2<s?1:0)/2));for(var D=[],s=0;32>s;++s)D[s]=5;for(var G=l(D),C=[],E=[],B=s=0,y=3;29>s;++s)C[s]=y-(28==s?1:0),y+=1<<(E[s]=~~((B+=4<s?1:0)/
4%6));for(s=0;288>s;++s)D[s]=144>s||279<s?8:256>s?9:7;var I=l(D);u.compress=function(a){this.position=0;var b=new ByteArray;switch(a){case "zlib":b.writeUnsignedByte(120),b.writeUnsignedByte(156);case "deflate":b.le=!0;var e=this.length;for(b.ensureCapacity(e+5*Math.ceil(e/65535)+4);65535<e;)b.writeUnsignedByte(0),b.writeUnsignedShort(65535),b.writeUnsignedShort(0),b.writeBytes(this,this.position,65535),this.position+=65535,e-=65535;b.writeUnsignedByte(0);b.writeUnsignedShort(e);b.writeUnsignedShort(~e&
65535);b.writeBytes(this,this.position,e);"zlib"===a&&b.writeUnsignedInt(v(this.uint8v,0,this.length));break;default:return}this.ensureCapacity(b.uint8v.length);this.uint8v.set(b.uint8v);this.length=b.length;this.position=0};u.uncompress=function(a){var b=new ByteArray;switch(a){case "zlib":a=this.readUnsignedShort(),(2048!==(a&3840)||0!==a%31||a&32)&&d();case "deflate":a=this.le;for(this.le=!0;this.position<this.length-6;){var e=b;switch(m(this,3)>>1){case 0:this.bitBuffer=this.bitLength=0;var g=
this.readUnsignedShort();(~this.readUnsignedShort()&65535)!==g&&d();e.writeBytes(this,this.position,g);this.position+=g;break;case 1:p(this,e,I,G);break;case 2:for(var g=[],f=m(this,5)+257,s=m(this,5)+1,v=f+s,A=m(this,4)+4,u=0;19>u;++u)g[w[u]]=u<A?m(this,3):0;for(var A=l(g),g=[],z=u=0;u<v;){var y=1,B=r(this,A);switch(B){case 16:y=m(this,2)+3;B=z;break;case 17:y=m(this,3)+3;B=0;break;case 18:y=m(this,7)+11;B=0;break;default:z=B}for(;y--;)g[u++]=B}f=l(g.splice(f,s));g=l(g);p(this,e,g,f);break;default:fail("unknown block type",
"inflate")}}this.le=a;break;default:return}this.ensureCapacity(b.uint8v.length);this.uint8v.set(b.uint8v);this.length=b.length;this.position=0};return a}();
(function(a){var e=function(){this.args=[]},b=function(a,b,e,d){this.shortName=a;this.longName=b;this.type=e;d=d||{};this.positional=d.positional;this.parseFn=d.parse;this.value=d.defaultValue};b.prototype.parse=function(a){"boolean"===this.type?(!0,this.value=a):"number"===this.type?(!0,this.value=parseInt(a,10)):this.value=a;this.parseFn&&this.parseFn(this.value)};e.prototype.addArgument=function(a,e,d,g){a=new b(a,e,d,g);this.args.push(a);return a};e.prototype.addBoundOption=function(a){this.args.push(new b(a.shortName,
a.longName,a.type,{parse:function(b){a.value=b}}))};e.prototype.addBoundOptionSet=function(a){var b=this;a.options.forEach(function(a){a instanceof d?b.addBoundOptionSet(a):(!0,b.addBoundOption(a))})};e.prototype.getUsage=function(){var a="";this.args.forEach(function(b){a=b.positional?a+b.longName:a+("[-"+b.shortName+"|--"+b.longName+("boolean"===b.type?"":" "+b.type[0].toUpperCase())+"]");a+=" "});return a};e.prototype.parse=function(a){var b={},e=[];this.args.forEach(function(a){a.positional?e.push(a):
(b["-"+a.shortName]=a,b["--"+a.longName]=a)});for(var d=[];a.length;){var g=a.shift(),v=null,u=g;if("--"==g){d=d.concat(a);break}else if("-"==g.slice(0,1)||"--"==g.slice(0,2)){v=b[g];!0;if(!v)continue;"boolean"!==v.type?(u=a.shift(),!0):u=!0}else e.length?v=e.shift():d.push(u);v&&v.parse(u)}!0;return d};var d,g=function(a){this.name=a;this.options=[]};g.prototype.register=function(a){this.options.push(a);return a};g.prototype.trace=function(a){a.enter(this.name+" {");this.options.forEach(function(b){b.trace(a)});
a.leave("}")};d=g;g=function(a,b,e,d,g){this.longName=b;this.shortName=a;this.type=e;this.value=this.defaultValue=d;this.description=g};g.prototype.parse=function(a){this.value=a};g.prototype.trace=function(a){a.writeLn(("-"+this.shortName+"|--"+this.longName).padRight(" ",30)+" = "+this.type+" "+this.value+" ["+this.defaultValue+"] ("+this.description+")")};a.Option=g;a.OptionSet=d;a.ArgumentParser=e})("undefined"===typeof exports?options={}:exports);
var Option=options.Option,OptionSet=options.OptionSet,coreOptions=new OptionSet("Core Options"),Timeline=function(){function a(a){this.index=this.start=this.depth=0;this.marks=new CircularBuffer(Int32Array);this.times=new CircularBuffer(Float64Array);this.frameRate=12;this.maxFrameTime=2E3/this.frameRate;this.refreshFrequency=10;this.count=this.refreshCounter=0;this.kinds=createEmptyObject();this.kindCount=0;this.canvas=a;this.context=a.getContext("2d",{original:!0});this.fillStyles=["rgb(85, 152, 213)",
"#bfd8a7","#d906d7"];window.addEventListener("resize",this.resizeHandler.bind(this),!1);this.resizeHandler()}a.prototype.setFrameRate=function(a){this.frameRate=a;this.maxFrameTime=2E3/a};a.prototype.refreshEvery=function(a){this.refreshFrequency=a;this.refreshCounter=0};a.prototype.registerKind=function(a,b){void 0===this.kinds[a]?(this.fillStyles[this.kindCount]=b,this.kinds[a]=this.kindCount++):this.fillStyles[this.kinds[a]]=b};a.prototype.getKind=function(a){void 0===this.kinds[a]&&(this.kinds[a]=
this.kindCount++,this.kindCount>this.fillStyles.length&&this.fillStyles.push(randomStyle()));return this.kinds[a]};a.prototype.enter=function(a){this.depth++;this.marks.write(-1091633152|this.getKind(a));this.times.write(performance.now())};a.prototype.leave=function(a){this.marks.write(-559087616|this.getKind(a));this.times.write(performance.now());this.depth--;0===this.depth&&(this.count++,++this.refreshCounter==this.refreshFrequency&&(this.refreshCounter=0,this.paint()))};a.prototype.gatherFrames=
function(a){var b=[],d=[],g=this.times;a++;this.marks.forEachInReverse(function(f,l){var m=g.get(l);if(-1091633152===(f&4294901760)){var p=b.pop();p.startTime=m;b.length?(m=b.top(),m.children?m.children.push(p):m.children=[p]):(d.length&&!d[0].total&&(d[0].total=d[0].startTime-m),d.unshift(p))}else if(-559087616===(f&4294901760)){if(d.length>a)return!0;b.push({kind:f&65535,endTime:m})}});return d};a.prototype.resizeHandler=function(){var a=this.canvas.parentElement;this.cw=a.offsetWidth;this.ch=a.offsetHeight-
1;var a=window.devicePixelRatio||1,b=this.context.webkitBackingStorePixelRatio||this.context.mozBackingStorePixelRatio||this.context.msBackingStorePixelRatio||this.context.oBackingStorePixelRatio||this.context.backingStorePixelRatio||1;a!==b?(a/=b,this.canvas.width=this.cw*a,this.canvas.height=this.ch*a,this.canvas.style.width=this.cw+"px",this.canvas.style.height=this.ch+"px",this.context.scale(a,a)):(this.canvas.width=this.cw,this.canvas.height=this.ch);this.context.font='10px Consolas, "Liberation Mono", Courier, monospace'};
a.prototype.paint=function(){function a(d,f){var m=d.endTime-d.startTime,r=d.startTime-f;g.fillStyle=l[d.kind];g.fillRect(u,r,b,m);if(d.children)for(var m=d.children,r=0,p=m.length;r<p;r++)a(m[r],f)}var b=10,d=this.gatherFrames(this.cw/(b+1)|0),g=this.context,f=this.maxFrameTime,l=this.fillStyles;g.clearRect(0,0,this.cw,this.ch);var m=0,p=0,r=0,v=0,u;g.save();g.translate(0,this.ch);g.scale(1,-this.ch/f);for(f=0;f<d.length-1;f++){var w=d[f],m=m+(w.endTime-w.startTime);p++;w.total&&(r+=w.total,v++);
u=f*(b+1);g.fillStyle="rgba(255,255,255, 0.075)";g.fillRect(u,0,b,d[f+1].startTime-w.startTime);a(w,w.startTime)}d=1E3/this.frameRate;g.beginPath();g.lineWidth=0.5;g.moveTo(0,d);g.lineTo(this.cw,d);g.strokeStyle="rgb(255,64,0)";g.stroke();g.restore();g.fillStyle="rgba(0,0,0, 0.85)";g.fillRect(0,0,this.cw,20);d=this.count;m=Math.round(1E3*p/m);v=Math.round(1E3*v/r);r=5;g.fillStyle="#ccc";g.fillText(d,r,13);r+=g.measureText(d).width+5;g.fillText(m,r,13);r+=g.measureText(m).width+5;g.fillText(v,r,13);
var v=r+g.measureText(v).width+5,r=this.cw,A;for(A in this.kinds)g.fillStyle=this.fillStyles[this.getKind(A)],r-=g.measureText(A).width+5,r>v&&this.context.fillText(A,r,13)};return a}(),create=Object.create,defineProperty=Object.defineProperty,keys=Object.keys,isArray=Array.isArray,fromCharCode=String.fromCharCode,logE=Math.log,max=Math.max,min=Math.min,pow=Math.pow,push=Array.prototype.push,slice=Array.prototype.slice,splice=Array.prototype.splice;
function fail(a,e){throw Error((e?e+": ":"")+a);}function assert(a,e,b){a||fail(e,b)}function scriptProperties(a,e){return e.reduce(function(b,d){b[d]=a+" "+d;return b},{})}function cloneObject(a){var e=Object.create(null),b;for(b in a)e[b]=a[b];return e}function sortNumeric(a,e){return a-e}function sortByZindex(a,e){return a._zindex-e._zindex}function rgbaObjToStr(a){return"rgba("+a.red+","+a.green+","+a.blue+","+a.alpha/255+")"}
function rgbIntAlphaToStr(a,e){a|=0;if(1<=e){for(var b=a.toString(16);6>b.length;)b="0"+b;return"#"+b}return"rgba("+(a>>16&255)+","+(a>>8&255)+","+(a&255)+","+e+")"}function argbUintToStr(a){return"rgba("+(a>>>16&255)+","+(a>>>8&255)+","+(a&255)+","+(a>>>24&255)/255+")"}
(function(){eval("function t() {} t.name === 't'")||Object.defineProperty(Function.prototype,"name",{get:function(){if(this.__name)return this.__name;var a=/function\s([^\(]+)/.exec(this.toString());return this.__name=a=a&&"anonymous"!==a[1]?a[1]:null},configurable:!0,enumerable:!1})})();var randomStyleCache,nextStyle=0;
function randomStyle(){randomStyleCache||(randomStyleCache="#ff5e3a #ff9500 #ffdb4c #87fc70 #52edc7 #1ad6fd #c644fc #ef4db6 #4a4a4a #dbddde #ff3b30 #ff9500 #ffcc00 #4cd964 #34aadc #007aff #5856d6 #ff2d55 #8e8e93 #c7c7cc #5ad427 #c86edf #d1eefc #e0f8d8 #fb2b69 #f7f7f7 #1d77ef #d6cec3 #55efcb #ff4981 #ffd3e0 #f7f7f7 #ff1300 #1f1f21 #bdbec2 #ff3a2d".split(" "));return randomStyleCache[nextStyle++%randomStyleCache.length]}
(function(){function a(a){if("function"!==typeof a)throw new TypeError("Invalid deferred constructor");var b,d=function(a,b){d.resolve=a;d.reject=b};b=d;a=new a(b);var e=b.resolve;if("function"!==typeof e)throw new TypeError("Invalid resolve construction function");b=b.reject;if("function"!==typeof b)throw new TypeError("Invalid reject construction function");return{promise:a,resolve:e,reject:b}}function e(a,b){if("object"!==typeof a||null===a)return!1;try{var d=a.then;if("function"!==typeof d)return!1;
d.call(a,b.resolve,b.reject)}catch(e){d=b.reject,d(e)}return!0}function b(a){return"object"===typeof a&&null!==a&&"undefined"!==typeof a.promiseStatus}function d(a,b){if("unresolved"===a.promiseStatus){var d=a.rejectReactions;a.result=b;a.resolveReactions=void 0;a.rejectReactions=void 0;a.promiseStatus="has-rejection";g(d,b)}}function g(a,b){for(var d=0;d<a.length;d++)f({reaction:a[d],argument:b})}function f(a){0===w.length&&setTimeout(m,0);w.push(a)}function l(a,b){var d=a.deferred,g=a.handler,f,
l;try{f=g(b)}catch(m){return d=d.reject,d(m)}if(f===d.promise)return d=d.reject,d(new TypeError("Self resolution"));try{if(l=e(f,d),!l){var r=d.resolve;return r(f)}}catch(p){return d=d.reject,d(p)}}function m(){for(;0<w.length;){var a=w[0];try{l(a.reaction,a.argument)}catch(b){if("function"===typeof v.onerror)v.onerror(b)}w.shift()}}function p(a){throw a;}function r(a){return a}function v(a){if("function"!==typeof a)throw new TypeError("resolver is not a function");if("object"!==typeof this)throw new TypeError("Promise to initialize is not an object");
this.promiseStatus="unresolved";this.resolveReactions=[];this.rejectReactions=[];this.result=void 0;var b,e=this;b=function(a){if("unresolved"===e.promiseStatus){var b=e.resolveReactions;e.result=a;e.resolveReactions=void 0;e.rejectReactions=void 0;e.promiseStatus="has-resolution";g(b,a)}};var f,l=this;f=function(a){d(l,a)};try{a(b,f)}catch(m){d(this,m)}this.promiseConstructor=v;return this}var u=Function("return this")();if(u.Promise)"function"!==typeof u.Promise.all&&(u.Promise.all=function(a){var b=
0,d=[],e,g,f=new u.Promise(function(a,b){e=a;g=b});a.forEach(function(a,f){b++;a.then(function(a){d[f]=a;b--;0===b&&e(d)},g)});0===b&&e(d);return f}),"function"!==typeof u.Promise.resolve&&(u.Promise.resolve=function(a){return new u.Promise(function(b){b(a)})});else{var w=[];v.all=function(b){var d=a(this),e=[],g=0,f=0;b.forEach(function(a){a=this.cast(a);var b=f;a.then(function(a){e[b]=a;g--;0===g&&d.resolve(e)},d.reject);f++;g++},this);0===f&&d.resolve(e);return d.promise};v.cast=function(d){if(b(d))return d;
var e=a(this);e.resolve(d);return e.promise};v.reject=function(b){var d=a(this);d.reject(b);return d.promise};v.resolve=function(b){var d=a(this);d.resolve(b);return d.promise};v.prototype={"catch":function(a){this.then(void 0,a)},then:function(d,g){if(!b(this))throw new TypeError("this is not a Promises");var l=a(this.promiseConstructor),m="function"===typeof g?g:p,v=this,u="function"===typeof d?d:r,w={deferred:l,handler:function(d){if(d===v)return m(new TypeError("Self resolution"));var g=v.promiseConstructor;
if(b(d)&&d.promiseConstructor===g)return d.then(u,m);g=a(g);return e(d,g)?g.promise.then(u,m):u(d)}},C={deferred:l,handler:m};switch(this.promiseStatus){case "unresolved":this.resolveReactions.push(w);this.rejectReactions.push(C);break;case "has-resolution":f({reaction:w,argument:this.result});break;case "has-rejection":f({reaction:C,argument:this.result})}return l.promise}};u.Promise=v}})();
var QuadTree=function(a,e,b,d,g){this.x=a|0;this.y=e|0;this.width=b|0;this.height=d|0;g?(this.root=g.root,this.parent=g,this.level=g.level+1):(this.root=this,this.parent=null,this.level=0);this.reset()};QuadTree.prototype.reset=function(){this.objects=this.stuckObjects=null;this.nodes=[]};QuadTree.prototype._findIndex=function(a,e,b,d){var g=this.x+(this.width/2|0),f=this.y+(this.height/2|0);d=b<f&&d<f;b=b>f;if(a<g&&e<g){if(d)return 1;if(b)return 2}else if(a>g){if(d)return 0;if(b)return 3}return-1};
QuadTree.prototype.insert=function(a){var e=this.nodes;if(e.length){var b=this._findIndex(a.xMin,a.xMax,a.yMin,a.yMax);-1<b?e[b].insert(a):(a.prev=null,this.stuckObjects?(a.next=this.stuckObjects,this.stuckObjects.prev=a):a.next=null,this.stuckObjects=a,a.parent=this)}else{b=1;if(e=this.objects){for(;e.next;)b++,e=e.next;a.prev=e;a.next=null;e.next=a}else a.prev=null,a.next=null,this.objects=a;if(4<b&&10>this.level){this._subdivide();for(e=this.objects;e;)a=e.next,this.insert(e),e=a;this.objects=
null}else a.parent=this}};QuadTree.prototype.update=function(a){var e=a.parent;if(e){if(a.xMin>=e.x&&a.xMax<=e.x+e.width&&a.yMin>=e.y&&a.yMax<=e.y+e.height){if(e.nodes.length){var b=this._findIndex(a.xMin,a.xMax,a.yMin,a.yMax);-1<b&&(e.remove(a),e=this.nodes[b],e.insert(a))}else e.remove(a),e.insert(a);return}e.remove(a)}this.root.insert(a)};
QuadTree.prototype.remove=function(a){var e=a.prev,b=a.next;if(e)e.next=b,a.prev=null;else{var d=a.parent;d.objects===a?d.objects=b:d.stuckObjects===a&&(d.stuckObjects=b)}b&&(b.prev=e,a.next=null);a.parent=null};
QuadTree.prototype.retrieve=function(a,e,b,d){var g=[],f=[],l=this;do{if(l.nodes.length){var m=l._findIndex(a,e,b,d);-1<m?g.push(l.nodes[m]):g.push.apply(g,l.nodes)}for(var m=l.objects,p=0;2>p;p++){for(;m;)m.xMin>e||(m.xMax<a||m.yMin>d||m.yMax<b)||f.push(m),m=m.next;m=l.stuckObjects}l=g.pop()}while(l);return f};
QuadTree.prototype._subdivide=function(){var a=this.width/2|0,e=this.height/2|0,b=this.x+a,d=this.y+e;this.nodes[0]=new QuadTree(b,this.y,a,e,this);this.nodes[1]=new QuadTree(this.x,this.y,a,e,this);this.nodes[2]=new QuadTree(this.x,d,a,e,this);this.nodes[3]=new QuadTree(b,d,a,e,this)};var RegionCluster=function(){this.regions=[]};RegionCluster.prototype.reset=function(){this.regions.length=0};
RegionCluster.prototype.insert=function(a){var e=this.regions;if(3>e.length)e.push({xMin:a.xMin,xMax:a.xMax,yMin:a.yMin,yMax:a.yMax});else{var b=e[0],d=e[1],g=e[2],f=(max(a.xMax,b.xMax)-min(a.xMin,b.xMin))*(max(a.yMax,b.yMax)-min(a.yMin,b.yMin)),l=e[0],m=(max(a.xMax,d.xMax)-min(a.xMin,d.xMin))*(max(a.yMax,d.yMax)-min(a.yMin,d.yMin)),p=(max(a.xMax,g.xMax)-min(a.xMin,g.xMin))*(max(a.yMax,g.yMax)-min(a.yMin,g.yMin));m<f&&(f=m,l=d);p<f&&(f=p,l=g);m=(max(b.xMax,d.xMax)-min(b.xMin,d.xMin))*(max(b.yMax,
d.yMax)-min(b.yMin,d.yMin));b=(max(b.xMax,g.xMax)-min(b.xMin,g.xMin))*(max(b.yMax,g.yMax)-min(b.yMin,g.yMin));d=(max(d.xMax,g.xMax)-min(d.xMin,g.xMin))*(max(d.yMax,g.yMax)-min(d.yMin,g.yMin));f<m&&f<b&&f<d?(a.xMin<l.xMin&&(l.xMin=a.xMin),a.xMax>l.xMax&&(l.xMax=a.xMax),a.yMin<l.yMin&&(l.yMin=a.yMin),a.yMax>l.yMax&&(l.yMax=a.yMax)):(l=e[0],f=e[1],b<m&&(m=b,f=e[2]),d<m&&(l=e[1],f=e[2]),f.xMin<l.xMin&&(l.xMin=f.xMin),f.xMax>l.xMax&&(l.xMax=f.xMax),f.yMin<l.yMin&&(l.yMin=f.yMin),f.yMax>l.yMax&&(l.yMax=
f.yMax),f.xMin=a.xMin,f.xMax=a.xMax,f.yMin=a.yMin,f.yMax=a.yMax)}};RegionCluster.prototype.retrieve=function(){return this.regions};var EXTERNAL_INTERFACE_FEATURE=1,CLIPBOARD_FEATURE=2,SHAREDOBJECT_FEATURE=3,VIDEO_FEATURE=4,SOUND_FEATURE=5,NETCONNECTION_FEATURE=6;this.performance||(this.performance={});this.performance.now||(this.performance.now=Date.now);
var SWF_TAG_CODE_CSM_TEXT_SETTINGS=74,SWF_TAG_CODE_DEFINE_BINARY_DATA=87,SWF_TAG_CODE_DEFINE_BITS=6,SWF_TAG_CODE_DEFINE_BITS_JPEG2=21,SWF_TAG_CODE_DEFINE_BITS_JPEG3=35,SWF_TAG_CODE_DEFINE_BITS_JPEG4=90,SWF_TAG_CODE_DEFINE_BITS_LOSSLESS=20,SWF_TAG_CODE_DEFINE_BITS_LOSSLESS2=36,SWF_TAG_CODE_DEFINE_BUTTON=7,SWF_TAG_CODE_DEFINE_BUTTON2=34,SWF_TAG_CODE_DEFINE_BUTTON_CXFORM=23,SWF_TAG_CODE_DEFINE_BUTTON_SOUND=17,SWF_TAG_CODE_DEFINE_EDIT_TEXT=37,SWF_TAG_CODE_DEFINE_FONT=10,SWF_TAG_CODE_DEFINE_FONT2=48,SWF_TAG_CODE_DEFINE_FONT3=
75,SWF_TAG_CODE_DEFINE_FONT4=91,SWF_TAG_CODE_DEFINE_FONT_ALIGN_ZONES=73,SWF_TAG_CODE_DEFINE_FONT_INFO=13,SWF_TAG_CODE_DEFINE_FONT_INFO2=62,SWF_TAG_CODE_DEFINE_FONT_NAME=88,SWF_TAG_CODE_DEFINE_MORPH_SHAPE=46,SWF_TAG_CODE_DEFINE_MORPH_SHAPE2=84,SWF_TAG_CODE_DEFINE_SCALING_GRID=78,SWF_TAG_CODE_DEFINE_SCENE_AND_FRAME_LABEL_DATA=86,SWF_TAG_CODE_DEFINE_SHAPE=2,SWF_TAG_CODE_DEFINE_SHAPE2=22,SWF_TAG_CODE_DEFINE_SHAPE3=32,SWF_TAG_CODE_DEFINE_SHAPE4=83,SWF_TAG_CODE_DEFINE_SOUND=14,SWF_TAG_CODE_DEFINE_SPRITE=
39,SWF_TAG_CODE_DEFINE_TEXT=11,SWF_TAG_CODE_DEFINE_TEXT2=33,SWF_TAG_CODE_DEFINE_VIDEO_STREAM=60,SWF_TAG_CODE_DO_ABC=82,SWF_TAG_CODE_DO_ABC_=72,SWF_TAG_CODE_DO_ACTION=12,SWF_TAG_CODE_DO_INIT_ACTION=59,SWF_TAG_CODE_ENABLE_DEBUGGER=58,SWF_TAG_CODE_ENABLE_DEBUGGER2=64,SWF_TAG_CODE_END=0,SWF_TAG_CODE_EXPORT_ASSETS=56,SWF_TAG_CODE_FILE_ATTRIBUTES=69,SWF_TAG_CODE_FRAME_LABEL=43,SWF_TAG_CODE_IMPORT_ASSETS=57,SWF_TAG_CODE_IMPORT_ASSETS2=71,SWF_TAG_CODE_JPEG_TABLES=8,SWF_TAG_CODE_METADATA=77,SWF_TAG_CODE_PLACE_OBJECT=
4,SWF_TAG_CODE_PLACE_OBJECT2=26,SWF_TAG_CODE_PLACE_OBJECT3=70,SWF_TAG_CODE_PROTECT=24,SWF_TAG_CODE_REMOVE_OBJECT=5,SWF_TAG_CODE_REMOVE_OBJECT2=28,SWF_TAG_CODE_SCRIPT_LIMITS=65,SWF_TAG_CODE_SET_BACKGROUND_COLOR=9,SWF_TAG_CODE_SET_TAB_INDEX=66,SWF_TAG_CODE_SHOW_FRAME=1,SWF_TAG_CODE_SOUND_STREAM_BLOCK=19,SWF_TAG_CODE_SOUND_STREAM_HEAD=18,SWF_TAG_CODE_SOUND_STREAM_HEAD2=45,SWF_TAG_CODE_START_SOUND=15,SWF_TAG_CODE_START_SOUND2=89,SWF_TAG_CODE_SYMBOL_CLASS=76,SWF_TAG_CODE_VIDEO_FRAME=61;self.SWF={};
for(var codeLengthOrder=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],distanceCodes=[],distanceExtraBits=[],i=0,j=0,code=1;30>i;++i)distanceCodes[i]=code,code+=1<<(distanceExtraBits[i]=~~((j+=2<i?1:0)/2));for(var bitLengths=[],i=0;32>i;++i)bitLengths[i]=5;for(var fixedDistanceTable=makeHuffmanTable(bitLengths),lengthCodes=[],lengthExtraBits=[],j=i=0,code=3;29>i;++i)lengthCodes[i]=code-(28==i?1:0),code+=1<<(lengthExtraBits[i]=~~((j+=4<i?1:0)/4%6));
for(i=0;288>i;++i)bitLengths[i]=144>i||279<i?8:256>i?9:7;var fixedLiteralTable=makeHuffmanTable(bitLengths);function makeHuffmanTable(a){for(var e=max.apply(null,a),b=a.length,d=1<<e,g=new Uint32Array(d),f=0,l=1,m=2;l<=e;f<<=1,++l,m<<=1)for(var p=0;p<b;++p)if(a[p]===l){for(var r=0,v=0;v<l;++v)r=2*r+(f>>v&1);for(v=r;v<d;v+=m)g[v]=l<<16|p;++f}return{codes:g,maxBits:e}}function verifyDeflateHeader(){}
function createInflatedStream(a,e){verifyDeflateHeader(a);var b=new Stream(a,2),d={data:new Uint8Array(e),available:0,completed:!1},g={};do inflateBlock(b,d,g);while(!d.completed&&b.pos<b.end);return new Stream(d.data,0,d.available)}var InflateNoDataError={};
function inflateBlock(a,e,b){var d=b.header||(b.header=readBits(a.bytes,a,3));switch(d>>1){case 0:a.align();var g=a.pos;if(4>a.end-g)throw InflateNoDataError;var f=a.getUint16(g,!0);a.getUint16(g+2,!0);if(a.end-g<4+f)throw InflateNoDataError;var l=g+4,m=a.pos=l+f,g=a.bytes;splice.apply(e.data,[e.available,f].concat(slice.call(g,l,m)));e.available+=f;break;case 1:inflate(a,e,fixedLiteralTable,fixedDistanceTable,b);break;case 2:if(b.distanceTable)g=b.distanceTable,f=b.literalTable;else{var g=a.bytes,
l=a.pos,m=a.bitBuffer,p=a.bitLength,f=[],r,v;try{r=readBits(g,a,5)+257;v=readBits(g,a,5)+1;for(var u=r+v,w=readBits(g,a,4)+4,A=0;19>A;++A)f[codeLengthOrder[A]]=A<w?readBits(g,a,3):0;for(var z=makeHuffmanTable(f),f=[],w=A=0;A<u;){var s=1,B=readCode(g,a,z);switch(B){case 16:s=readBits(g,a,2)+3;B=w;break;case 17:s=readBits(g,a,3)+3;B=0;break;case 18:s=readBits(g,a,7)+11;B=0;break;default:w=B}for(;s--;)f[A++]=B}}catch(y){throw a.pos=l,a.bitBuffer=m,a.bitLength=p,y;}g=b.distanceTable=makeHuffmanTable(f.splice(r,
v));f=b.literalTable=makeHuffmanTable(f)}inflate(a,e,f,g,b);b.distanceTable=null;b.literalTable=null;break;default:fail("unknown block type","inflate")}b.header=null;e.completed=!!(d&1)}function readBits(a,e,b){var d=e.bitBuffer,g=e.bitLength;if(b>g){var f=e.pos,l=e.end;do{if(f>=l)throw e.pos=f,e.bitBuffer=d,e.bitLength=g,InflateNoDataError;d|=a[f++]<<g;g+=8}while(b>g);e.pos=f}e.bitBuffer=d>>>b;e.bitLength=g-b;return d&(1<<b)-1}
function inflate(a,e,b,d,g){for(var f=e.available,l=e.data,m=a.bytes,p=g.sym||readCode(m,a,b);256!==p;){if(256>p)l[f++]=p;else{g.sym=p;for(var p=p-257,p=g.len||(g.len=lengthCodes[p]+readBits(m,a,lengthExtraBits[p])),r=g.sym2||(g.sym2=readCode(m,a,d)),r=distanceCodes[r]+readBits(m,a,distanceExtraBits[r]),r=f-r;p--;)l[f++]=l[r++];g.sym2=null;g.len=null;g.sym=null}e.available=f;p=readCode(m,a,b)}}
function readCode(a,e,b){var d=e.bitBuffer,g=e.bitLength,f=b.maxBits;if(f>g){var l=e.pos,m=e.end;do{if(l>=m)throw e.pos=l,e.bitBuffer=d,e.bitLength=g,InflateNoDataError;d|=a[l++]<<g;g+=8}while(f>g);e.pos=l}a=b.codes[d&(1<<f)-1];b=a>>16;e.bitBuffer=d>>>b;e.bitLength=g-b;return a&65535}
for(var StreamNoDataError={},Stream=function(){function a(){this.bitBuffer=this.bitLength=0}function e(a){if(this.pos+a>this.end)throw StreamNoDataError;}function b(){return this.end-this.pos}function d(a,b){var d=new f(this.bytes);d.pos=a;d.end=b;return d}function g(a){var b=this.bytes,d=this.end+a.length;if(d>b.length)throw"stream buffer overfow";b.set(a,this.end);this.end=d}function f(f,m,p,r){void 0===m&&(m=0);f.buffer instanceof ArrayBuffer&&(m+=f.byteOffset,f=f.buffer);void 0===p&&(p=f.byteLength-
m);void 0===r&&(r=p);var v=new Uint8Array(f,m,r);f=new DataView(f,m,r);f.bytes=v;f.pos=0;f.end=p;f.bitBuffer=0;f.bitLength=0;f.align=a;f.ensure=e;f.remaining=b;f.substream=d;f.push=g;return f}return f}(),FORMAT_COLORMAPPED=3,FORMAT_15BPP=4,FORMAT_24BPP=5,FACTOR_5BBP=255/31,crcTable=[],i=0;256>i;i++){for(var c=i,h=0;8>h;h++)c=c&1?3988292384^c>>1&2147483647:c>>1&2147483647;crcTable[i]=c}function crc32(a,e,b){for(var d=-1;e<b;e++)d=d>>>8^crcTable[(d^a[e])&255];return d^-1}
function createPngChunk(a,e){var b=new Uint8Array(12+e.length),d=0,g=e.length;b[d]=g>>24&255;b[d+1]=g>>16&255;b[d+2]=g>>8&255;b[d+3]=g&255;b[d+4]=a.charCodeAt(0)&255;b[d+5]=a.charCodeAt(1)&255;b[d+6]=a.charCodeAt(2)&255;b[d+7]=a.charCodeAt(3)&255;e instanceof Uint8Array&&b.set(e,8);d=8+g;g=crc32(b,4,d);b[d]=g>>24&255;b[d+1]=g>>16&255;b[d+2]=g>>8&255;b[d+3]=g&255;return b}function adler32(a,e,b){for(var d=1,g=0;e<b;++e)d=(d+(a[e]&255))%65521,g=(g+d)%65521;return g<<16|d}
function defineBitmap(a){var e=a.width,b=a.height,d=a.hasAlpha,g="",f="",l,m=a.bmpData;switch(a.format){case 3:var p=3,r=e+3&-4;l=(a.colorTableSize+1)*(a.hasAlpha?4:3);var v=l+r*b,u=createInflatedStream(m,v),w=u.bytes,m=0;u.ensure(l);if(d){for(var g=new Uint8Array(3*(l/4)),A=0,f=new Uint8Array(l/4),d=0;m<l;)g[A++]=w[m],g[A++]=w[m+1],g[A++]=w[m+2],f[d++]=w[m+3],m+=4;g=createPngChunk("PLTE",g);f=createPngChunk("tRNS",f)}else g=createPngChunk("PLTE",w.subarray(m,m+l)),m+=l;l=new Uint8Array(e*b+b);for(A=
0;m<v;){u.ensure(r);var d=m,z=d+e;A++;l.set(w.subarray(d,z),A);A+=z-d;u.pos=m+=r}break;case 4:p=2;r=2*e+3&-4;u=createInflatedStream(m,r*b);m=0;l=new Uint8Array(3*e*b+b);for(v=A=0;v<b;++v){A++;u.ensure(r);for(z=0;z<e;++z)w=u.getUint16(m),m+=2,l[A++]=0|FACTOR_5BBP*(w>>10&31),l[A++]=0|FACTOR_5BBP*(w>>5&31),l[A++]=0|FACTOR_5BBP*(w&31);u.pos=m+=r}break;case 5:var s;d?(p=6,s=0,l=new Uint8Array(4*e*b+b)):(p=2,s=1,l=new Uint8Array(3*e*b+b));r=4*e;u=createInflatedStream(m,r*b);w=u.bytes;for(v=A=m=0;v<b;++v){u.ensure(r);
A++;for(z=0;z<e;++z){m+=s;if(d){var B=w[m];if(B){var y=B/255;l[A++]=0|w[m+1]/y;l[A++]=0|w[m+2]/y;l[A++]=0|w[m+3]/y;l[A++]=B}else A+=4}else l[A++]=w[m],l[A++]=w[m+1],l[A++]=w[m+2];m+=4-s}u.pos=m}break;default:fail("invalid format","bitmap")}p=new Uint8Array([e>>24&255,e>>16&255,e>>8&255,e&255,b>>24&255,b>>16&255,b>>8&255,b&255,8,p,0,0,0]);w=l.length;r=new Uint8Array(2+w+5*Math.ceil(w/65535)+4);u=0;r[u++]=120;r[u++]=156;for(m=0;65535<w;)r[u++]=0,r[u++]=255,r[u++]=255,r[u++]=0,r[u++]=0,r.set(l.subarray(m,
m+65535),u),u+=65535,m+=65535,w-=65535;r[u++]=1;r[u++]=w&255;r[u++]=w>>8&255;r[u++]=~w&255;r[u++]=(~w&65535)>>8&255;r.set(l.subarray(m),u);u+=l.length-m;m=adler32(l,0,l.length);r[u++]=m>>24&255;r[u++]=m>>16&255;r[u++]=m>>8&255;r[u++]=m&255;m=[new Uint8Array([137,80,78,71,13,10,26,10]),createPngChunk("IHDR",p),g,f,createPngChunk("IDAT",r),createPngChunk("IEND","")];return{type:"image",id:a.id,width:e,height:b,mimeType:"image/png",data:new Blob(m,{type:"image/png"})}}
function defineButton(a,e){for(var b=a.characters,d={up:{},over:{},down:{},hitTest:{}},g=0,f;(f=b[g++])&&!f.eob;){var l={symbolId:e[f.symbolId].id,hasMatrix:!!f.matrix,matrix:f.matrix};f.stateUp&&(d.up[f.depth]=l);f.stateOver&&(d.over[f.depth]=l);f.stateDown&&(d.down[f.depth]=l);f.stateHitTest&&(d.hitTest[f.depth]=l)}return{type:"button",id:a.id,buttonActions:a.buttonActions,states:d}}var nextFontId=1;function maxPower2(a){for(var e=0;2<=a;)a/=2,++e;return pow(2,e)}
function toString16(a){return fromCharCode(a>>8&255,a&255)}function toString32(a){return toString16(a>>16)+toString16(a)}
function defineFont(a){var e={},b=[],d={},g=[],f=a.glyphs,l=f.length;if(a.codes){for(var b=b.concat(a.codes),m=0,p;p=b[m];++m)d[p]=m;b.sort(function(a,b){return a-b});for(m=0;p=b[m++];){for(var r=p,v=r,u=[m-1];(p=b[m])&&v+1===p;)++v,u.push(m),++m;g.push([r,v,u])}}else{u=[];for(m=0;m<l;m++)p=57344+m,b.push(p),d[p]=m,u.push(m);g.push([57344,57344+l-1,u])}var w=a.resolution||1,u=Math.ceil(a.ascent/w)||1024,A=-Math.ceil(a.descent/w)|0,z=a.leading/w|0;e["OS/2"]="\x00\u0001\x00\x00"+toString16(a.bold?700:
400)+"\x00\u0005\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00ALF "+toString16((a.italic?1:0)|(a.bold?32:0))+toString16(b[0])+toString16(b[b.length-1])+toString16(u)+toString16(A)+toString16(z)+toString16(u)+toString16(-A)+"\x00\x00\x00\x00\x00\x00\x00\x00";for(var s="",B="",y="",D="",m=0,G;G=g[m++];)r=G[0],v=G[1],p=G[2][0],s+=toString16(r),B+=toString16(v),
y+=toString16(p-r+1&65535),D+=toString16(0);B+="\u00ff\u00ff";s+="\u00ff\u00ff";y+="\x00\u0001";D+="\x00\x00";g=g.length+1;m=2*maxPower2(g);r=2*g-m;m="\x00\x00"+toString16(2*g)+toString16(m)+toString16(logE(g)/logE(2))+toString16(r)+B+"\x00\x00"+s+y+D;e.cmap="\x00\x00\x00\u0001\x00\u0003\x00\u0001\x00\x00\x00\f\x00\u0004"+toString16(m.length+4)+m;g="\x00\u0001\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x001\x00";B="\x00\x00";s=16;y=0;r=[];v=[];G=[];for(var C=[],m=D=0;p=b[m++];){var E=f[d[p]].records;
p=1;for(var I=0,K="",S="",R="",L="",F=0,O=0,N=1024,H=-1024,P=1024,M=-1024,U=0,J;J=E[U];++U)if(J.type){if(J.isStraight)if(J.isGeneral){var S=S+"\u0001",Q=J.deltaX/w;J=-J.deltaY/w;R+=toString16(Q);L+=toString16(J);F+=Q;O+=J}else J.isVertical?(S+="\u0011",J=-J.deltaY/w,L+=toString16(J),O+=J):(S+="!",Q=J.deltaX/w,R+=toString16(Q),F+=Q);else{var S=S+"\x00",W=J.controlDeltaX/w,ga=-J.controlDeltaY/w,R=R+toString16(W),L=L+toString16(ga),S=S+"\u0001",Q=J.anchorDeltaX/w;J=-J.anchorDeltaY/w;R+=toString16(Q);
L+=toString16(J);++I;F+=W+Q;O+=ga+J}F<N&&(N=F);F>H&&(H=F);O<P&&(P=O);O>M&&(M=O);++I}else{if(J.eos)break;J.move&&(I&&(++p,K+=toString16(I-1)),S+="\u0001",W=J.moveX/w,ga=-J.moveY/w,Q=W-F,J=ga-O,R+=toString16(Q),L+=toString16(J),F=W,O=ga,I>y&&(y=I),F<N&&(N=F),F>H&&(H=F),O<P&&(P=O),O>M&&(M=O),++I)}K+=toString16((I||1)-1);U||(N=H=P=M=0,S+="1");E=toString16(p)+toString16(N)+toString16(P)+toString16(H)+toString16(M)+K+"\x00\x00"+S+R+L;E.length&1&&(E+="\x00");g+=E;B+=toString16(s/2);s+=E.length;r.push(N);
v.push(H);G.push(P);C.push(M);p>D&&(D=p);I>y&&(y=I)}B+=toString16(s/2);e.glyf=g;e.head="\x00\u0001\x00\x00\x00\u0001\x00\x00\x00\x00\x00\x00_\u000f<\u00f5\x00\v\u0004\x00\x00\x00\x00\x00"+toString32(Date.now())+"\x00\x00\x00\x00"+toString32(Date.now())+toString16(min.apply(null,r))+toString16(min.apply(null,G))+toString16(max.apply(null,v))+toString16(max.apply(null,C))+toString16((a.italic?2:0)|(a.bold?1:0))+"\x00\b\x00\u0002\x00\x00\x00\x00";f=a.advance;e.hhea="\x00\u0001\x00\x00"+toString16(u)+
toString16(A)+toString16(z)+toString16(f?max.apply(null,f):1024)+"\x00\x00\x00\x00\u0003\u00b8\x00\u0001\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"+toString16(l+1);s="\x00\x00\x00\x00";for(m=0;m<l;++m)s+=toString16(f?f[m]/w:1024)+"\x00\x00";e.hmtx=s;if(a.kerning){w=a.kerning;f=w.length;m=2*maxPower2(f);f="\x00\x00\x00\u0001\x00\x00"+toString16(14+6*f)+"\x00\u0001"+toString16(f)+toString16(m)+toString16(logE(f)/logE(2))+toString16(2*f-m);for(m=0;J=w[m++];)f+=toString16(d[J.code1])+toString16(d[J.code2])+
toString16(J.adjustment);e.kern=f}e.loca=B;e.maxp="\x00\u0001\x00\x00"+toString16(l+1)+toString16(y)+toString16(D)+"\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00";d="swf-font-"+nextFontId++;l=a.name||d;w=l.replace(/ /g,"");B=[a.copyright||"Original licence",l,"Unknown",d,l,"1.0",w,"Unknown","Unknown","Unknown"];m=B.length;f="\x00\x00"+toString16(m)+toString16(12*m+6);for(m=s=0;y=B[m++];)f+="\x00\u0001\x00\x00\x00\x00"+toString16(m-1)+toString16(y.length)+
toString16(s),s+=y.length;e.name=f+B.join("");e.post="\x00\u0003\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00";B=keys(e);m=B.length;y="\x00\u0001\x00\x00"+toString16(m)+"\x00\u0080\x00\u0003\x00 ";D="";s=16*m+y.length;for(m=0;f=B[m++];){g=e[f];r=g.length;for(y+=f+"\x00\x00\x00\x00"+toString32(s)+toString32(r);r&3;)g+="\x00",++r;for(D+=g;s&3;)++s;s+=r}return{type:"font",id:a.id,name:l,uniqueName:w+d,codes:b,metrics:{ascent:u/
1024,descent:-A/1024,leading:z/1024},bold:1===a.bold,italic:1===a.italic,data:y+D}}function getUint16(a,e){return a[e]<<8|a[e+1]}function parseJpegChunks(a,e){var b=0,d=e.length,g=[],f;do{for(var l=b;b<d&&255!==e[b];)++b;for(;b<d&&255===e[b];)++b;f=e[b++];if(218===f)b=d;else if(217===f){b+=2;continue}else if(208>f||216<f){var m=getUint16(e,b);192<=f&&195>=f&&(a.height=getUint16(e,b+3),a.width=getUint16(e,b+5));b+=m}g.push(e.subarray(l,b))}while(b<d);return g}
function defineImage(a,e){var b={type:"image",id:a.id,mimeType:a.mimeType},d=a.imgData;if("image/jpeg"===a.mimeType){var d=parseJpegChunks(b,d),g=a.alphaData;g&&(b.mask=createInflatedStream(g,b.width*b.height).bytes);if(a.incomplete&&(g=e[0].data)&&g.size)d[0]=d[0].subarray(2),d.unshift(g.slice(0,g.size-2))}else d=[d];b.data=new Blob(d,{type:a.mimeType});return b}
function defineLabel(a,e){for(var b=a.records,d=a.matrix,g=["c.save()","c.transform("+[d.a,d.b,d.c,d.d,d.tx/20,d.ty/20].join()+")","c.scale(0.05, 0.05)"],d=[],f=0,l=0,m=0,p,r;(p=b[m++])&&!p.eot;){if(p.hasFont){var v=e[p.fontId];r=v.codes;g.push('c.font="'+p.fontHeight+"px '"+v.uniqueName+"'\"");d.push(v.id)}p.hasColor?(g.push('ct.setFillStyle(c,"'+rgbaObjToStr(p.color)+'")'),g.push("ct.setAlpha(c)")):g.push("ct.setAlpha(c,true)");p.hasMoveX&&(f=p.moveX);p.hasMoveY&&(l=p.moveY);p=p.entries;for(var v=
0,u;u=p[v++];){var w=r[u.glyphIndex],w=32<=w&&34!=w&&92!=w?fromCharCode(w):"\\u"+(w+65536).toString(16).substring(1);g.push('c.fillText("'+w+'",'+f+","+l+")");f+=u.advance}}g.push("c.restore()");b={type:"label",id:a.id,bbox:a.bbox,data:g.join("\n")};d.length&&(b.require=d);return b}
var GRAPHICS_FILL_CLIPPED_BITMAP=65,GRAPHICS_FILL_FOCAL_RADIAL_GRADIENT=19,GRAPHICS_FILL_LINEAR_GRADIENT=16,GRAPHICS_FILL_NONSMOOTHED_CLIPPED_BITMAP=67,GRAPHICS_FILL_NONSMOOTHED_REPEATING_BITMAP=66,GRAPHICS_FILL_RADIAL_GRADIENT=18,GRAPHICS_FILL_REPEATING_BITMAP=64,GRAPHICS_FILL_SOLID=0;
function applySegmentToStyles(a,e,b,d,g){if(a){var f=a.commands,l=a.data;a=a.morphData;var m,p;if(e.fill0){d=d[e.fill0-1];!e.fill1&&!e.line?(m=d.head(),m.commands=[],m.data=[],m.morphData=g?[]:null):m=d.addSegment([],[],g?[]:null);d=m.commands;var r=m.data,v=m.morphData;d.push(SHAPE_MOVE_TO);var u=l.length-2;r.push(l[u],l[u+1]);g&&v.push(a[u],a[u+1]);for(p=f.length;1<p--;u-=2)m=f[p],d.push(m),r.push(l[u-2],l[u-1]),g&&v.push(a[u-2],a[u-1]),m===SHAPE_CURVE_TO&&(r.push(l[u-4],l[u-3]),g&&v.push(a[u-4],
a[u-3]),u-=2)}e.line&&e.fill1&&(d=b[e.line-1],d.addSegment(f,l,a))}}
function convertRecordsToStyledPaths(a,e,b,d,g,f,l){for(var m=null!==f,p={fill0:0,fill1:0,line:0},r=null,v,u,w=a.length-1,A=0,z=0,s=0,B=0,y,D=0,G=0;D<w;D++){var C=a[D],E;m&&(E=f[G++]);if(0===C.type)r&&applySegmentToStyles(r,p,b,e,m),C.hasNewStyles&&(v||(v=[]),push.apply(v,e),e=createPathsList(C.fillStyles,!1,d,g),push.apply(v,b),b=createPathsList(C.lineStyles,!0,d,g),u&&(v.push(u),u=null),p={fill0:0,fill1:0,line:0}),C.hasFillStyle0&&(p.fill0=C.fillStyle0),C.hasFillStyle1&&(p.fill1=C.fillStyle1),C.hasLineStyle&&
(p.line=C.lineStyle),p.fill1?y=e[p.fill1-1]:p.line?y=b[p.line-1]:p.fill0&&(y=e[p.fill0-1]),C.move&&(A=C.moveX|0,z=C.moveY|0),y&&(r=y.addSegment([],[],m?[]:null),r.commands.push(SHAPE_MOVE_TO),r.data.push(A,z),m&&(0===E.type?(s=E.moveX|0,B=E.moveY|0):(s=A,B=z,G--),r.morphData.push(s,B)));else{r||(u||(u=new SegmentedPath(null,processStyle({color:{red:0,green:0,blue:0,alpha:255},width:20},!0))),r=u.addSegment([],[],m?[]:null),r.commands.push(SHAPE_MOVE_TO),r.data.push(A,z),m&&r.morphData.push(s,B));
if(m){for(;E&&0===E.type;)E=f[G++];E||(E=C)}if(C.isStraight&&(!m||E.isStraight))A+=C.deltaX|0,z+=C.deltaY|0,r.commands.push(SHAPE_LINE_TO),r.data.push(A,z),m&&(s+=E.deltaX|0,B+=E.deltaY|0,r.morphData.push(s,B));else{var I,K,S;C.isStraight?(S=C.deltaX|0,C=C.deltaY|0,I=A+(S>>1),K=z+(C>>1),A+=S,z+=C):(I=A+C.controlDeltaX|0,K=z+C.controlDeltaY|0,A=I+C.anchorDeltaX|0,z=K+C.anchorDeltaY|0);r.commands.push(SHAPE_CURVE_TO);r.data.push(I,K,A,z);m&&(E.isStraight?(S=E.deltaX|0,C=E.deltaY|0,I=s+(S>>1),K=B+(C>>
1),s+=S,B+=C):(I=s+E.controlDeltaX|0,K=B+E.controlDeltaY|0,s=I+E.anchorDeltaX|0,B=K+E.anchorDeltaY|0),r.morphData.push(I,K,s,B))}}}applySegmentToStyles(r,p,b,e,m);v?push.apply(v,e):v=e;push.apply(v,b);u&&v.push(u);for(D=a=0;D<v.length;D++)y=v[D],y.head()?v[D-a]=segmentedPathToShapePath(y,m,l):a++;v.length-=a;return v}
function segmentedPathToShapePath(a,e,b){for(var d=a.head(),g=d,f=null,l=null,m=0,p=d.prev;d;){for(;p;)a.segmentsConnect(p,d)?(p.next!==d&&(a.removeSegment(p),a.insertSegment(p,d)),d=p,p=d.prev,m++):a.segmentsConnect(g,p)?(a.removeSegment(p),g.next=p,p=p.prev,g.next.prev=g,g.next.next=null,g=g.next,m++):p=p.prev;p=d.prev;f?(l.next=d,d.prev=l,l=g,l.next=null):(f=d,l=g);if(!p)break;d=g=p;p=d.prev}d=-m;m=-m<<1;for(p=f;p;)d+=p.commands.length,m+=p.data.length,p=p.next;a=new ShapePath(a.fillStyle,a.lineStyle,
d,m,e,b);b=a.commands;m=a.data;d=a.morphData;l=g=0;for(p=f;p;){for(var f=p.commands,r=p.data,v=p.morphData,u=+(r[0]===m[l-2]&&r[1]===m[l-1]),w=u;w<f.length;w++,g++)b[g]=f[w];for(w=u<<1;w<r.length;w++,l++)m[l]=r[w],e&&(d[l]=v[w]);p=p.next}return a}var CAPS_STYLE_TYPES=["round","none","square"],JOIN_STYLE_TYPES=["round","bevel","miter"];
function processStyle(a,e,b,d){if(e&&(a.lineCap=CAPS_STYLE_TYPES[a.endCapStyle|0],a.lineJoin=JOIN_STYLE_TYPES[a.joinStyle|0],a.miterLimit=2*(a.miterLimitFactor||1.5),!a.color&&a.hasFill)){var g=processStyle(a.fillStyle,!1,b,d);a.style=g.style;a.type=g.type;a.transform=g.transform;a.records=g.records;a.focalPoint=g.focalPoint;a.bitmapId=g.bitmapId;a.repeat=g.repeat;a.fillStyle=null;return a}if(void 0===a.type||0===a.type)return g=a.color,a.style="rgba("+g.red+","+g.green+","+g.blue+","+g.alpha/255+
")",a.color=null,a;switch(a.type){case 16:case 18:case 19:g=819.2;break;case 64:case 65:case 66:case 67:b[a.bitmapId]&&(d.push(b[a.bitmapId].id),g=0.05);break;default:fail("invalid fill style","shape")}if(!a.matrix)return a;e=a.matrix;a.transform={a:e.a*g,b:e.b*g,c:e.c*g,d:e.d*g,e:e.tx,f:e.ty};a.matrix=null;return a}function createPathsList(a,e,b,d){for(var g=[],f=0;f<a.length;f++){var l=processStyle(a[f],e,b,d);g[f]=e?new SegmentedPath(null,l):new SegmentedPath(l,null)}return g}
function defineShape(a,e){var b=[],d=[],g=createPathsList(a.fillStyles,!1,e,b),f=createPathsList(a.lineStyles,!0,e,b),g=convertRecordsToStyledPaths(a.records,g,f,e,b,a.recordsMorph||null,d);if(a.bboxMorph&&(f=a.bboxMorph,extendBoundsByPoint(a.bbox,f.xMin,f.yMin),extendBoundsByPoint(a.bbox,f.xMax,f.yMax),f=a.strokeBboxMorph))extendBoundsByPoint(a.strokeBbox,f.xMin,f.yMin),extendBoundsByPoint(a.strokeBbox,f.xMax,f.yMax);return{type:"shape",id:a.id,strokeBbox:a.strokeBbox,strokeBboxMorph:a.strokeBboxMorph,
bbox:a.bbox,bboxMorph:a.bboxMorph,isMorph:a.isMorph,paths:g,require:b.length?b:null,transferables:d}}function logShape(a,e){var b='{"bounds":'+JSON.stringify(e)+',"paths":['+a.map(function(a){return a.serialize()}).join()+"]}";console.log(b)}function SegmentedPath(a,e){this.fillStyle=a;this.lineStyle=e;this._head=null}
SegmentedPath.prototype={addSegment:function(a,e,b){a={commands:a,data:e,morphData:b,prev:this._head,next:null};this._head&&(this._head.next=a);return this._head=a},removeSegment:function(a){a.prev&&(a.prev.next=a.next);a.next&&(a.next.prev=a.prev)},insertSegment:function(a,e){var b=e.prev;a.prev=b;a.next=e;b&&(b.next=a);e.prev=a},head:function(){return this._head},segmentsConnect:function(a,e){var b=a.data.length;return a.data[b-2]===e.data[0]&&a.data[b-1]===e.data[1]}};
var SHAPE_MOVE_TO=1,SHAPE_LINE_TO=2,SHAPE_CURVE_TO=3,SHAPE_WIDE_MOVE_TO=4,SHAPE_WIDE_LINE_TO=5,SHAPE_CUBIC_CURVE_TO=6,SHAPE_CIRCLE=7,SHAPE_ELLIPSE=8;
function ShapePath(a,e,b,d,g,f){this.fillStyle=a;this.lineStyle=e;b?(this.commands=new Uint8Array(b),this.data=new Int32Array(d),this.morphData=g?new Int32Array(d):null):(this.commands=[],this.data=[]);this.strokeBounds=this.bounds=null;this.isMorph=!!g;this.fullyInitialized=!1;inWorker?(this.buffers=[this.commands.buffer,this.data.buffer],f.push(this.commands.buffer,this.data.buffer),g&&(this.buffers.push(this.morphData.buffer),f.push(this.morphData.buffer))):this.buffers=null}
ShapePath.prototype={get isEmpty(){return 0===this.commands.length},moveTo:function(a,e){1===this.commands[this.commands.length-1]?(this.data[this.data.length-2]=a,this.data[this.data.length-1]=e):(this.commands.push(1),this.data.push(a,e))},lineTo:function(a,e){this.commands.push(2);this.data.push(a,e)},curveTo:function(a,e,b,d){this.commands.push(3);this.data.push(a,e,b,d)},cubicCurveTo:function(a,e,b,d,g,f){this.commands.push(6);this.data.push(a,e,b,d,g,f)},rect:function(a,e,b,d){b=a+b;d=e+d;this.commands.push(1,
2,2,2,2);this.data.push(a,e,b,e,b,d,a,d,a,e)},circle:function(a,e,b){this.commands.push(7);this.data.push(a,e,b)},ellipse:function(a,e,b,d){this.commands.push(8);this.data.push(a,e,b,d)},draw:function(a,e,b,d){if(!e||this.fillStyle){a.beginPath();var g=this.commands,f=this.data,l=this.morphData,m=!1,p=0,r=0;if(this.isMorph)for(u=v=0;v<g.length;v++)switch(g[v]){case 1:a.moveTo(morph(f[u]/20,l[u++]/20,b),morph(f[u]/20,l[u++]/20,b));break;case 2:a.lineTo(morph(f[u]/20,l[u++]/20,b),morph(f[u]/20,l[u++]/
20,b));break;case 3:a.quadraticCurveTo(morph(f[u]/20,l[u++]/20,b),morph(f[u]/20,l[u++]/20,b),morph(f[u]/20,l[u++]/20,b),morph(f[u]/20,l[u++]/20,b));break;default:console.warn("Drawing command not supported for morph shapes: "+g[v])}else for(var v=0,u=0;v<g.length;v++)switch(g[v]){case 1:m=!0;p=f[u++]/20;r=f[u++]/20;a.moveTo(p,r);break;case 4:a.moveTo(f[u++]/20,f[u++]/20);u+=2;break;case 2:a.lineTo(f[u++]/20,f[u++]/20);break;case 5:a.lineTo(f[u++]/20,f[u++]/20);u+=2;break;case 3:a.quadraticCurveTo(f[u++]/
20,f[u++]/20,f[u++]/20,f[u++]/20);break;case 6:a.bezierCurveTo(f[u++]/20,f[u++]/20,f[u++]/20,f[u++]/20,f[u++]/20,f[u++]/20);break;case 7:m&&(a.lineTo(p,r),m=!1);a.moveTo((f[u]+f[u+2])/20,f[u+1]/20);a.arc(f[u++]/20,f[u++]/20,f[u++]/20,0,2*Math.PI,!1);break;case 8:m&&(a.lineTo(p,r),m=!1);b=f[u++];var l=f[u++],w=f[u++],A=f[u++],z;if(w!==A){a.save();var s;w>A?(s=w/A,z=A,b/=s,a.scale(s,1)):(s=A/w,z=w,l/=s,a.scale(1,s))}a.moveTo((b+z)/20,l/20);a.arc(b/20,l/20,z/20,0,2*Math.PI,!1);w!==A&&a.restore();break;
default:if(0===g[v]&&v===g.length-1)break;console.warn("Unknown drawing command encountered: "+g[v])}if(e)a.fill();else{if(e=this.fillStyle)d.setFillStyle(a,e.style),a.imageSmoothingEnabled=a.mozImageSmoothingEnabled=e.smooth,e=e.transform,a.save(),d.setAlpha(a),e&&a.transform(e.a,e.b,e.c,e.d,e.e/20,e.f/20),a.fill(),a.restore();if(e=this.lineStyle)d.setStrokeStyle(a,e.style),a.save(),d.setAlpha(a),a.lineWidth=Math.max(e.width/20,1),a.lineCap=e.lineCap,a.lineJoin=e.lineJoin,a.miterLimit=e.miterLimit,
a.stroke(),a.restore()}a.closePath()}},isPointInPath:function(a,e){if(!this.fillStyle&&!this.lineStyle)return!1;var b=this.strokeBounds||this.bounds||this._calculateBounds();return a<b.xMin||a>b.xMax||e<b.yMin||e>b.yMax?!1:this.fillStyle&&this.isPointInFill(a,e)?!0:this.lineStyle&&void 0!==this.lineStyle.width&&this.isPointInStroke(a,e)},isPointInFill:function(a,e){for(var b=this.commands,d=this.data,g=b.length,f=!1,l=0,m=0,p=0,r=0,v,u,w=!1,A=0,z=0,s=0,B=0;s<g;s++){switch(b[s]){case 4:B+=2;case 1:p=
d[B++];r=d[B++];w&&intersectsLine(a,e,l,m,A,z)&&(f=!f);w=!0;A=p;z=r;break;case 5:B+=2;case 2:p=d[B++];r=d[B++];intersectsLine(a,e,l,m,p,r)&&(f=!f);break;case 3:v=d[B++];u=d[B++];p=d[B++];r=d[B++];if(u>e===m>e&&r>e===m>e)break;if(l>=a&&v>=a&&p>=a){f=!f;break}var y=m-2*u+r;u=2*(u-m);var D=u*u-4*y*(m-e);if(0>D)break;D=Math.sqrt(D);y=1/(y+y);m=(D-u)*y;u=(-u-D)*y;0<=m&&(1>=m&&quadraticBezier(l,v,p,m)>a)&&(f=!f);0<=u&&(1>=u&&quadraticBezier(l,v,p,u)>a)&&(f=!f);break;case 6:v=d[B++];u=d[B++];y=d[B++];D=
d[B++];p=d[B++];r=d[B++];if(u>e===m>e&&D>e===m>e&&r>e===m>e)break;if(l>=a&&v>=a&&y>=a&&p>=a){f=!f;break}v=cubicXAtY(l,m,v,u,y,D,p,r,e);for(l=v.length;l--;)v[l]>=a&&(f=!f);break;case 7:p=d[B++];r=d[B++];v=d[B++];l=a-p;m=e-r;l*l+m*m<v*v&&(f=!f);p+=v;break;case 8:v=d[B++];u=d[B++];p=d[B++];r=d[B++];l=a-v;m=e-u;1>=l*l/(p*p)+m*m/(r*r)&&(f=!f);p=v+p;r=u;break;default:inWorker||console.warn("Drawing command not handled in isPointInPath: "+b[s])}l=p;m=r}w&&intersectsLine(a,e,l,m,A,z)&&(f=!f);return f},isPointInStroke:function(a,
e){for(var b=this.commands,d=this.data,g=b.length,f=this.lineStyle.width,l=f/2,m=l*l,p=a-l,r=a+l,v=e-l,u=e+l,w=0,A=0,z=0,s=0,B,y,D,G,C,E=0,I=0;E<g;E++){switch(b[E]){case 4:I+=2;case 1:z=d[I++];s=d[I++];break;case 5:I+=2;case 2:z=d[I++];s=d[I++];if(w===z&&A===s)break;if(r<w&&r<z||p>w&&p>z||u<A&&u<s||v>A&&v>s)break;if(z===w||s===A)return!0;C=((a-w)*(z-w)+(e-A)*(s-A))/distanceSq(w,A,z,s);if(0>C){if(distanceSq(a,e,w,A)<=m)return!0;break}if(1<C){if(distanceSq(a,e,z,s)<=m)return!0;break}if(distanceSq(a,
e,w+C*(z-w),A+C*(s-A))<=m)return!0;break;case 3:B=d[I++];y=d[I++];var z=d[I++],s=d[I++],K=quadraticBezierExtreme(w,B,z);if(r<w&&r<K&&r<z||p>w&&p>K&&p>z)break;K=quadraticBezierExtreme(A,y,s);if(u<A&&u<K&&u<s||v>A&&v>K&&v>s)break;for(C=0;1>C;C+=0.02)if(D=quadraticBezier(w,B,z,C),!(D<p||D>r))if(G=quadraticBezier(A,y,s,C),!(G<v||G>u)&&(a-D)*(a-D)+(e-G)*(e-G)<m)return!0;break;case 6:B=d[I++];y=d[I++];var K=d[I++],S=d[I++],z=d[I++],s=d[I++];for(D=cubicBezierExtremes(w,B,K,z);2>D.length;)D.push(z);if(r<
w&&r<z&&r<D[0]&&r<D[1]||p>w&&p>z&&p>D[0]&&p>D[1])break;for(D=cubicBezierExtremes(A,y,S,s);2>D.length;)D.push(s);if(u<A&&u<s&&u<D[0]&&u<D[1]||v>A&&v>s&&v>D[0]&&v>D[1])break;for(C=0;1>C;C+=0.02)if(D=cubicBezier(w,B,K,z,C),!(D<p||D>r))if(G=cubicBezier(A,y,S,s,C),!(G<v||G>u)&&(a-D)*(a-D)+(e-G)*(e-G)<m)return!0;break;case 7:B=d[I++];y=d[I++];w=d[I++];z=B+w;s=y;if(r<B-w||p>B+w||u<y-w||v>y+w)break;B=a-B;y=e-y;A=w-l;w+=l;y=B*B+y*y;if(y>=A*A&&y<=w*w)return!0;break;case 8:B=d[I++];y=d[I++];w=d[I++];A=d[I++];
z=B+w;s=y;B=Math.abs(a-B);y=Math.abs(e-y);B-=l;y-=l;if(1<B*B/(w*w)+y*y/(A*A))break;B+=f;y+=f;if(1<B*B/(w*w)+y*y/(A*A))return!0;break;default:inWorker||console.warn("Drawing command not handled in isPointInPath: "+b[E])}w=z;A=s}return!1},getBounds:function(a){var e=a?this.strokeBounds:this.bounds;e||(this._calculateBounds(),e=a?this.strokeBounds:this.bounds);return e},_calculateBounds:function(){var a=this.commands,e=this.data,b=a.length,d;d=1===a[0]||6<a[0]?{xMin:e[0],yMin:e[1]}:{xMin:0,yMin:0};d.xMax=
d.xMin;d.yMax=d.yMin;for(var g=d.xMin,f=d.yMin,l=0,m=0;l<b;l++){var p,r,v,u;switch(a[l]){case 4:m+=2;case 1:p=e[m++];r=e[m++];extendBoundsByPoint(d,p,r);break;case 5:m+=2;case 2:p=e[m++];r=e[m++];extendBoundsByPoint(d,p,r);break;case 3:v=e[m++];u=e[m++];p=e[m++];r=e[m++];extendBoundsByPoint(d,p,r);(v<g||v>p)&&extendBoundsByX(d,quadraticBezierExtreme(g,v,p));(u<f||u>r)&&extendBoundsByY(d,quadraticBezierExtreme(f,u,r));break;case 6:v=e[m++];u=e[m++];var w=e[m++],A=e[m++];p=e[m++];r=e[m++];extendBoundsByPoint(d,
p,r);if(v<g||w<g||v>p||w>p){g=cubicBezierExtremes(g,v,w,p);for(v=g.length;v--;)extendBoundsByX(d,g[v])}if(u<f||A<f||u>r||A>r){g=cubicBezierExtremes(f,u,A,r);for(v=g.length;v--;)extendBoundsByY(d,g[v])}break;case 7:p=e[m++];r=e[m++];f=e[m++];extendBoundsByPoint(d,p-f,r-f);extendBoundsByPoint(d,p+f,r+f);p+=f;break;case 8:p=e[m++];r=e[m++];f=e[m++];u=e[m++];extendBoundsByPoint(d,p-f,r-u);extendBoundsByPoint(d,p+f,r+u);p+=f;break;default:inWorker||console.warn("Drawing command not handled in bounds calculation: "+
a[l])}g=p;f=r}this.bounds=d;return this.lineStyle?(a=this.lineStyle.width/2,this.strokeBounds={xMin:d.xMin-a,yMin:d.yMin-a,xMax:d.xMax+a,yMax:d.yMax+a}):this.strokeBounds=d},serialize:function(){var a="{";this.fillStyle&&(a+='"fill":'+JSON.stringify(this.fillStyle)+",");this.lineStyle&&(a+='"stroke":'+JSON.stringify(this.lineStyle)+",");a+='"commands":['+Array.apply([],this.commands).join()+"],";a+='"data":['+Array.apply([],this.data).join()+"]";return a+"}"}};
ShapePath.fromPlainObject=function(a){var e=new ShapePath(a.fill||null,a.stroke||null);e.commands=new Uint8Array(a.commands);e.data=new Int32Array(a.data);inWorker||finishShapePath(e);return e};function distanceSq(a,e,b,d){a=b-a;e=d-e;return a*a+e*e}function intersectsLine(a,e,b,d,g,f){return f>e!==d>e&&a<(b-g)*(e-f)/(d-f)+g}function quadraticBezier(a,e,b,d){var g=1-d;return a*g*g+2*e*g*d+b*d*d}
function quadraticBezierExtreme(a,e,b){var d=(a-e)/(a-2*e+b);return 0>d?a:1<d?b:quadraticBezier(a,e,b,d)}function cubicBezier(a,e,b,d,g){var f=g*g,l=1-g,m=l*l;return a*l*m+3*e*g*m+3*b*l*f+d*g*f}function cubicBezierExtremes(a,e,b,d){var g=e-a,f;f=2*(b-e);var l=d-b;g+l===f&&(l*=1.0001);var m=2*g-f,p=f-2*g,p=Math.sqrt(p*p-4*g*(g-f+l));f=2*(g-f+l);g=(m+p)/f;m=(m-p)/f;p=[];0<=g&&1>=g&&p.push(cubicBezier(a,e,b,d,g));0<=m&&1>=m&&p.push(cubicBezier(a,e,b,d,m));return p}
function cubicXAtY(a,e,b,d,g,f,l,m,p){function r(a){return a*(A+a*(s+a*y))+e-p}function v(b){0>b?b=0:1<b&&(b=1);return a+b*(w+b*(z+b*B))}function u(a,b,d,e){if(!(Math.abs(d-b)<=e)){var g=0.5*(b+d);0>=a(b)*a(d)?(D=b,G=d):(u(a,b,g,e),u(a,g,d,e))}}var w=3*(b-a),A=3*(d-e),z=3*(g-b)-w,s=3*(f-d)-A,B=l-a-w-z,y=m-e-A-s,D=0,G=1;u(r,0,1,0.05);f=findRoot(D,G,r,50,1E-6);if(1E-5<Math.abs(r(f)))return[];b=[];1>=f&&b.push(v(f));d=y;g=f*d+s;l=g*g-4*d*(f*g+A);if(0>l)return b;l=Math.sqrt(l);d=1/(d+d);f=(l-g)*d;d*=
-g-l;0<=f&&1>=f&&b.push(v(f));0<=d&&1>=d&&b.push(v(d));return b}function findRoot(a,e,b,d,g){var f,l,m,p,r,v,u=a;l=b(a);if(0===l)return a;p=b(e);if(0===p)return e;if(0<p*l)return a;for(var w=0,A=0;A<d;++A){w++;f=0.5*(e+a);m=b(f);if(0===m)break;if(Math.abs(f-a)<g)break;0<m*l&&(a=e,e=l,l=p,p=e);e=m-l;v=p-m;r=p-l;if(p*r<2*m*e)e=f,p=m;else{p=(f-a)/e;e=(e-v)/(v*r);e=a-p*l*(1-e*m);p=b(e);if(0===p||Math.abs(e-u)<g)return e;u=e;0>p*l||(a=e,l=p,e=f,p=m)}}return f}
function extendBoundsByPoint(a,e,b){e<a.xMin?a.xMin=e:e>a.xMax&&(a.xMax=e);b<a.yMin?a.yMin=b:b>a.yMax&&(a.yMax=b)}function extendBoundsByX(a,e){e<a.xMin?a.xMin=e:e>a.xMax&&(a.xMax=e)}function extendBoundsByY(a,e){e<a.yMin?a.yMin=e:e>a.yMax&&(a.yMax=e)}function morph(a,e,b){return a+(e-a)*b}
function finishShapePath(a,e){if(a.fullyInitialized)return a;if(!(a instanceof ShapePath)){var b=a;a=new ShapePath(a.fillStyle,a.lineStyle,0,0,a.isMorph);a.commands=new Uint8Array(b.buffers[0]);a.data=new Int32Array(b.buffers[1]);b.isMorph&&(a.morphData=new Int32Array(b.buffers[2]));a.buffers=null}a.fillStyle&&initStyle(a.fillStyle,e);a.lineStyle&&initStyle(a.lineStyle,e);a.fullyInitialized=!0;return a}
var inWorker="undefined"===typeof window,factoryCtx=!inWorker?document.createElement("canvas").getContext("2d"):null;function buildLinearGradientFactory(a){for(var e=factoryCtx.createLinearGradient(-1,0,1,0),b=0;b<a.length;b++)e.addColorStop(a[b].ratio,a[b].color);b=function(b,e){for(var f=b.createLinearGradient(-1,0,1,0),l=0;l<a.length;l++)e.addGradientColorStop(f,a[l].ratio,a[l].color);return f};b.defaultFillStyle=e;return b}
function buildRadialGradientFactory(a,e){for(var b=factoryCtx.createRadialGradient(a,0,0,0,0,1),d=0;d<e.length;d++)b.addColorStop(e[d].ratio,e[d].color);d=function(b,d){for(var l=b.createRadialGradient(a,0,0,0,0,1),m=0;m<e.length;m++)d.addGradientColorStop(l,e[m].ratio,e[m].color);return l};d.defaultFillStyle=b;return d}
function buildBitmapPatternFactory(a,e){var b=factoryCtx.createPattern(a,e),d,g,f=function(f,m){if(!m.mode)return b;var p=m.getTransformFingerprint();if(p===g)return d;var r=document.createElement("canvas");r.width=a.width;r.height=a.height;f=r.getContext("2d");m.setAlpha(f,!0);f.drawImage(a,0,0);d=f.createPattern(r,e);g=p;return d};f.defaultFillStyle=b;return f}
function initStyle(a,e){if(void 0!==a.type)switch(a.type){case 0:break;case 16:case 18:case 19:for(var b=a.records,d=[],g=0,f=b.length;g<f;g++){var l=b[g],m=rgbaObjToStr(l.color);d.push({ratio:l.ratio/255,color:m})}b=16===a.type?buildLinearGradientFactory(d):buildRadialGradientFactory((a.focalPoint|0)/20,d);a.style=b;break;case 64:case 65:case 66:case 67:a.style=buildBitmapPatternFactory(e[a.bitmapId].props.img,64===a.type||66===a.type?"repeat":"no-repeat");break;default:fail("invalid fill style",
"shape")}}var SOUND_SIZE_8_BIT=0,SOUND_SIZE_16_BIT=1,SOUND_TYPE_MONO=0,SOUND_TYPE_STEREO=1,SOUND_FORMAT_PCM_BE=0,SOUND_FORMAT_ADPCM=1,SOUND_FORMAT_MP3=2,SOUND_FORMAT_PCM_LE=3,SOUND_FORMAT_NELLYMOSER_16=4,SOUND_FORMAT_NELLYMOSER_8=5,SOUND_FORMAT_NELLYMOSER=6,SOUND_FORMAT_SPEEX=11,SOUND_RATES=[5512,11250,22500,44100],WaveHeader=new Uint8Array([82,73,70,70,0,0,0,0,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,0,0,0,0]);
function packageWave(a,e,b,d,g){var f=d>>3,l=b*e*f,f=b*f,m=a.length+(a.length&1),p=new ArrayBuffer(WaveHeader.length+m),r=new Uint8Array(p);r.set(WaveHeader);if(g){g=0;for(var v=WaveHeader.length;g<a.length;g+=2,v+=2)r[v]=a[g+1],r[v+1]=a[g]}else r.set(a,WaveHeader.length);a=new DataView(p);a.setUint32(4,m+36,!0);a.setUint16(22,b,!0);a.setUint32(24,e,!0);a.setUint32(28,l,!0);a.setUint16(32,f,!0);a.setUint16(34,d,!0);a.setUint32(40,m,!0);return{data:r,mimeType:"audio/wav"}}
function defineSound(a){var e=1==a.soundType?2:1,b=a.samplesCount,d=SOUND_RATES[a.soundRate],g=a.soundData,f;switch(a.soundFormat){case 0:f=new Float32Array(b*e);if(1==a.soundSize){for(var l=b=0;b<f.length;b++,l+=2)f[b]=(g[l]<<24|g[l+1]<<16)/2147483648;g=packageWave(g,d,e,16,!0)}else{for(b=0;b<f.length;b++)f[b]=(g[b]-128)/128;g=packageWave(g,d,e,8,!1)}break;case 3:f=new Float32Array(b*e);if(1==a.soundSize){for(l=b=0;b<f.length;b++,l+=2)f[b]=(g[l+1]<<24|g[l]<<16)/2147483648;g=packageWave(g,d,e,16,
!1)}else{for(b=0;b<f.length;b++)f[b]=(g[b]-128)/128;g=packageWave(g,d,e,8,!1)}break;case 2:g={data:new Uint8Array(g.subarray(2)),mimeType:"audio/mpeg"};break;case 1:l=new Int16Array(b*e);decodeACPCMSoundData(g,l,e);f=new Float32Array(b*e);for(b=0;b<f.length;b++)f[b]=l[b]/32768;g=packageWave(new Uint8Array(l.buffer),d,e,16,!(new Uint8Array((new Uint16Array([1])).buffer))[0]);break;default:throw Error("Unsupported audio format: "+a.soundFormat);}a={type:"sound",id:a.id,sampleRate:d,channels:e,pcm:f};
g&&(a.packaged=g);return a}
var ACPCMIndexTables=[[-1,2],[-1,-1,2,4],[-1,-1,-1,-1,2,4,6,8],[-1,-1,-1,-1,-1,-1,-1,-1,1,2,4,6,8,10,13,16]],ACPCMStepSizeTable=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767];
function decodeACPCMSoundData(a,e,b){function d(b){for(;l<b;)f=f<<8|a[g++],l+=8;l-=b;return f>>>l&(1<<b)-1}for(var g=0,f=0,l=0,m=0,p=d(2),r=ACPCMIndexTables[p];m<e.length;){var v=e[m++]=d(16)<<16>>16,u,w=d(6),A;1<b&&(u=e[m++]=d(16)<<16>>16,A=d(6));for(var z=1<<p+1,s=0;4095>s;s++){for(var B=d(p+2),y=ACPCMStepSizeTable[w],D=0,G=z>>1;G;G>>=1,y>>=1)B&G&&(D+=y);v+=(B&z?-1:1)*(D+y);e[m++]=v=-32768>v?-32768:32767<v?32767:v;w+=r[B&~z];w=0>w?0:88<w?88:w;if(1<b){B=d(p+2);y=ACPCMStepSizeTable[A];D=0;for(G=z>>
1;G;G>>=1,y>>=1)B&G&&(D+=y);u+=(B&z?-1:1)*(D+y);e[m++]=u=-32768>u?-32768:32767<u?32767:u;A+=r[B&~z];A=0>A?0:88<A?88:A}}}}var nextSoundStreamId=0;function SwfSoundStream(a,e,b){this.streamId=nextSoundStreamId++;this.samplesCount=a;this.sampleRate=e;this.channels=b;this.format=null;this.currentSample=0}
SwfSoundStream.prototype={get info(){return{samplesCount:this.samplesCount,sampleRate:this.sampleRate,channels:this.channels,format:this.format,streamId:this.streamId}},decode:function(){throw Error("SwfSoundStream.decode: not implemented");}};function SwfSoundStream_decode_PCM(a){for(var e=new Float32Array(a.length),b=0;b<e.length;b++)e[b]=(a[b]-128)/128;this.currentSample+=e.length/this.channels;return{streamId:this.streamId,samplesCount:e.length/this.channels,pcm:e}}
function SwfSoundStream_decode_PCM_be(a){for(var e=new Float32Array(a.length/2),b=0,d=0;b<e.length;b++,d+=2)e[b]=(a[d]<<24|a[d+1]<<16)/2147483648;this.currentSample+=e.length/this.channels;return{streamId:this.streamId,samplesCount:e.length/this.channels,pcm:e}}
function SwfSoundStream_decode_PCM_le(a){for(var e=new Float32Array(a.length/2),b=0,d=0;b<e.length;b++,d+=2)e[b]=(a[d+1]<<24|a[d]<<16)/2147483648;this.currentSample+=e.length/this.channels;return{streamId:this.streamId,samplesCount:e.length/this.channels,pcm:e}}function SwfSoundStream_decode_MP3(a){var e=a[1]<<8|a[0],b=a[3]<<8|a[2];this.currentSample+=e;return{streamId:this.streamId,samplesCount:e,data:new Uint8Array(a.subarray(4)),seek:b}}
function createSoundStream(a){var e=new SwfSoundStream(a.samplesCount,SOUND_RATES[a.streamRate],1==a.streamType?2:1);switch(a.streamCompression){case 0:e.format="wave";e.decode=1==a.soundSize?SwfSoundStream_decode_PCM_be:SwfSoundStream_decode_PCM;break;case 3:e.format="wave";e.decode=1==a.soundSize?SwfSoundStream_decode_PCM_le:SwfSoundStream_decode_PCM;break;case 2:e.format="mp3";e.decode=SwfSoundStream_decode_MP3;break;default:throw Error("Unsupported audio format: "+a.soundFormat);}return e}
function defineText(a,e){var b=[];if(a.hasFont){var d=e[a.fontId];a.font=d.uniqueName;b.push(d.id)}d={type:"text",id:a.id,variableName:a.variableName,tag:a};b.length&&(d.require=b);return d}var isWorker="undefined"===typeof window;
if(isWorker){importScripts("../../../lib/mp3/mp3.js");self.addEventListener("message",function(a){a=a.data;var e=a.sessionId;try{switch(a.action){case "create":var b=new Session(e);sessions[e]=b;break;case "close":if(b=sessions[e])b.close(),sessions[e]=null;break;case "decode":b=sessions[e];if(!b)throw Error("mp3 decoding session is unavailable");b.decode(a.data)}}catch(d){self.postMessage({sessionId:e,action:"error",message:d.message})}},!1);var sessions={},Session=function(a){this.id=a;if("undefined"===
typeof MP3Decoder)throw Error("mp3 decoder is not available");a=new MP3Decoder;a.onframedata=function(a,b,d,g){self.postMessage({sessionId:this.id,action:"frame",frameData:a,channels:b,sampleRate:d,bitRate:g})}.bind(this);a.onid3tag=function(a){self.postMessage({sessionId:this.id,action:"id3",id3Data:a})}.bind(this);this.decoder=a};Session.prototype={decode:function(a){this.decoder.push(a)},close:function(){self.postMessage({sessionId:this.id,action:"closed"})}};self.console={log:function(a){self.postMessage({action:"console",
method:"log",message:a})},error:function(a){self.postMessage({action:"console",method:"error",message:a})}}}else{var mp3Worker,createMP3Worker=function(){var a=new Worker(SHUMWAY_ROOT+"swf/mp3worker.js");a.addEventListener("message",function(a){"console"===a.data.action&&console[a.data.method].call(console,a.data.message)});return a},nextSessionId=0,MP3DecoderSession=function(){mp3Worker=mp3Worker||createMP3Worker();var a=nextSessionId++;this.id=a;this.onworkermessage=function(e){if(e.data.sessionId===
a)switch(e.data.action){case "closed":if(this.onclosed)this.onclosed();mp3Worker.removeEventListener("message",this.onworkermessage,!1);break;case "frame":this.onframedata(e.data.frameData,e.data.channels,e.data.sampleRate,e.data.bitRate);break;case "id3":if(this.onid3tag)this.onid3tag(e.data.id3Data);break;case "error":if(this.onerror)this.onerror(e.data.message)}}.bind(this);mp3Worker.addEventListener("message",this.onworkermessage,!1);mp3Worker.postMessage({sessionId:a,action:"create"})};MP3DecoderSession.prototype=
{pushAsync:function(a){mp3Worker.postMessage({sessionId:this.id,action:"decode",data:a})},close:function(){mp3Worker.postMessage({sessionId:this.id,action:"close"})}};MP3DecoderSession.processAll=function(a,e){var b=8E3,d=new Float32Array(b),g=0,f=[],l=!1,m=new MP3DecoderSession;m.onframedata=function(a){var e=a.length+g;if(e>b){do b*=2;while(e>b);e=new Float32Array(b);e.set(d);d=e}d.set(a,g);g+=a.length};m.onid3tag=function(a){f.push(a)};m.onclosed=function(){l||e(d.subarray(0,g),f)};m.onerror=function(a){l||
(l=!0,e(null,null,a))};m.pushAsync(a);m.close()}}
SWF.embed=function(a,e,b,d){function g(a,b){if(1===v)f.width=a|0,f.height=b|0;else{var d=Math.floor(a*v),e=Math.floor(b*v);f.style.width=d/v+"px";f.style.height=e/v+"px";f.width=d;f.height=e}}var f=e.createElement("canvas"),l=f.getContext("2d"),m=new flash.display.Loader,p=m._contentLoaderInfo,r=new flash.display.Stage,v=1,u=forceHidpi.value;r._loader=m;p._parameters=d.movieParams;p._url=d.url||("string"===typeof a?a:null);p._loaderURL=d.loaderURL||p._url;m._parent=r;m._stage=r;p._addEventListener("init",
function(){if(u||18<=p._swfVersion)v="devicePixelRatio"in window?window.devicePixelRatio:1;f._pixelRatio=v;r._contentsScaleFactor=v;b.clientHeight?(g(b.clientWidth,b.clientHeight),r._invalid=!0,window.addEventListener("resize",function(){g(b.clientWidth,b.clientHeight);r._invalid=!0})):g(r._stageWidth/20,r._stageHeight/20);b.setAttribute("style","position: relative");f.addEventListener("click",function(){ShumwayKeyboardListener.focus=r;r._mouseTarget._dispatchEvent("click")});f.addEventListener("dblclick",
function(){r._mouseTarget._doubleClickEnabled&&r._mouseTarget._dispatchEvent("doubleClick")});f.addEventListener("mousedown",function(){r._mouseEvents.push("mousedown")});f.addEventListener("mousemove",function(a){var b=this,d=0,e=0;if(b.offsetParent){do d+=b.offsetLeft,e+=b.offsetTop;while(b=b.offsetParent)}b=r._concatenatedTransform;d=((a.pageX-d)*v-b.tx/20)/b.a;a=((a.pageY-e)*v-b.ty/20)/b.d;if(d!==r._mouseX||a!==r._mouseY)r._mouseMoved=!0,r._mouseX=20*d,r._mouseY=20*a});f.addEventListener("mouseup",
function(){r._mouseEvents.push("mouseup")});f.addEventListener("mouseover",function(){r._mouseMoved=!0;r._mouseOver=!0});f.addEventListener("mouseout",function(){r._mouseMoved=!0;r._mouseOver=!1});window.addEventListener("message",function(a){a=a.data;if(!("object"!==typeof a||null===a)){var b=a.type;switch(b){case "mousemove":case "mouseup":case "mousedown":r._mouseMoved=!0;r._mouseOver=!0;r._mouseX=20*a.x;r._mouseY=20*a.y;"mousemove"===b||r._mouseEvents.push(b);break;case "mouseover":case "mouseout":r._mouseMoved=
!0;r._mouseOver="mouseover"===b;break;case "keyup":case "keydown":r._dispatchEvent(new flash.events.KeyboardEvent("keyup"===b?"keyUp":"keyDown",!0,!1,a.charCode,a.keyCode,a.keyLocation,a.ctrlKey||!1,a.altKey||!1,a.shiftKey||!1))}}},!1);var a=p._backgroundColor;if(d.objectParams){var e;if(d.objectParams.bgcolor&&(e=/#([0-9A-F]{6})/i.exec(d.objectParams.bgcolor)))a=parseInt(e[1],16),a={red:a>>16&255,green:a>>8&255,blue:a&255,alpha:255};"transparent"===d.objectParams.wmode&&(a={red:0,green:0,blue:0,
alpha:0})}r._color=a;l.fillStyle=rgbaObjToStr(a);l.fillRect(0,0,f.width,f.height);a=m._content;a._dispatchEvent("added",void 0,!0);a._dispatchEvent("addedToStage");b.appendChild(f);r._domContainer=b;if(d.onStageInitialized)d.onStageInitialized(r);renderStage(r,l,d)});d.onComplete&&p._addEventListener("complete",function(){d.onComplete()});m._load("string"===typeof a?new flash.net.URLRequest(a):a);return m};
var rendererOptions=coreOptions.register(new OptionSet("Renderer Options")),traceRenderer=rendererOptions.register(new Option("tr","traceRenderer","number",0,"trace renderer execution")),disableRenderVisitor=rendererOptions.register(new Option("drv","disableRenderVisitor","boolean",!1,"disable render visitor")),disableMouseVisitor=rendererOptions.register(new Option("dmv","disableMouseVisitor","boolean",!1,"disable mouse visitor")),showRedrawRegions=rendererOptions.register(new Option("rr","showRedrawRegions",
"boolean",!1,"show redraw regions")),renderAsWireframe=rendererOptions.register(new Option("raw","renderAsWireframe","boolean",!1,"render as wireframe")),showQuadTree=rendererOptions.register(new Option("qt","showQuadTree","boolean",!1,"show quad tree")),turboMode=rendererOptions.register(new Option("","turbo","boolean",!1,"turbo mode")),forceHidpi=rendererOptions.register(new Option("","forceHidpi","boolean",!1,"force hidpi")),skipFrameDraw=rendererOptions.register(new Option("","skipFrameDraw",
"boolean",!0,"skip frame when not on time")),hud=rendererOptions.register(new Option("","hud","boolean",!1,"show hud mode")),dummyAnimation=rendererOptions.register(new Option("","dummy","boolean",!1,"show test balls animation")),enableConstructChildren=rendererOptions.register(new Option("","constructChildren","boolean",!0,"Construct Children")),enableEnterFrame=rendererOptions.register(new Option("","enterFrame","boolean",!0,"Enter Frame")),enableAdvanceFrame=rendererOptions.register(new Option("",
"advanceFrame","boolean",!0,"Advance Frame")),CanvasCache={cache:[],getCanvas:function(a){var e=this.cache.shift();e||(e={canvas:document.createElement("canvas")},e.ctx=e.canvas.getContext("2d"));e.canvas.width=a.width;e.canvas.height=a.height;e.ctx.save();return e},releaseCanvas:function(a){a.ctx.restore();this.cache.push(a)}};function isCanvasVisible(a){return a.ownerDocument.hidden||!1===a.mozVisible?!1:!0}
function visitContainer(a,e,b){var d=a._children;e.childrenStart(a);for(var g=0,f=d.length;g<f;g++){var l=d[g];l&&(e.ignoreVisibleAttribute||l._visible&&!l._maskedObject)&&e.visit(l,visitContainer,b)}e.childrenEnd(a)}var BlendModeNameMap={normal:"normal",multiply:"multiply",screen:"screen",lighten:"lighten",darken:"darken",difference:"difference",overlay:"overlay",hardlight:"hard-light"};function getBlendModeName(a){return BlendModeNameMap[a]||"normal"}
function RenderVisitor(a,e,b,d){this.root=a;this.ctx=e;this.depth=0;this.invalidPath=b;this.refreshStage=d;this.clipStack=this.clipDepth=null}
RenderVisitor.prototype={ignoreVisibleAttribute:!1,start:function(){visitContainer(this.root,this,new RenderingContext(this.refreshStage,this.invalidPath))},startFragment:function(a){var e=this.root,b=e._currentTransform,d=b;a&&(d=e._currentTransform={a:a.a,b:a.b,c:a.c,d:a.d,tx:20*a.tx|0,ty:20*a.ty|0},e._invalidateTransform());var g;d&&(g=new flash.geom.Matrix(d.a,d.b,d.c,d.d,d.tx/20,d.ty/20),g.invert(),this.ctx.save(),this.ctx.transform(g.a,g.b,g.c,g.d,g.tx,g.ty));this.visit(e,visitContainer,new RenderingContext(this.refreshStage,
this.invalidPath));d&&this.ctx.restore();a&&(e._currentTransform=b,e._invalidateTransform())},childrenStart:function(){if(0===this.depth){var a=this.ctx;a.save();this.invalidPath&&(!this.refreshStage&&!renderAsWireframe.value)&&(this.invalidPath.draw(a,!1,0,null),a.clip());var e=this.root._color;e&&(255>e.alpha&&a.clearRect(0,0,a.canvas.width,a.canvas.height),0<e.alpha&&(a.fillStyle=rgbaObjToStr(e),this.invalidPath&&!this.refreshStage&&!renderAsWireframe.value?a.fill():a.fillRect(0,0,a.canvas.width,
a.canvas.height)));a.mozFillRule="evenodd"}this.depth++;this.clipDepth&&0<this.clipDepth.length&&(this.clipStack={depth:this.depth,clip:this.clipDepth,next:this.clipStack},this.clipDepth=null)},childrenEnd:function(){if(this.clipDepth){for(;0<this.clipDepth.length;){var a=this.clipDepth.pop();this.clipEnd(a);this.ctx=a.ctx}this.clipDepth=null}this.clipStack&&this.clipStack.depth===this.depth&&(this.clipDepth=this.clipStack.clip,this.clipStack=this.clipStack.next);this.depth--;0===this.depth&&(this.ctx.restore(),
this.invalidPath=null)},visit:function(a,e,b){var d=this.ctx,g=b.isClippingMask,f=b.colorTransform,l=!0===g;a._cxform&&(b.colorTransform=f.applyCXForm(a._cxform));if(!l){for(;this.clipDepth&&0<this.clipDepth.length&&a._depth>this.clipDepth[0].clipDepth;){var m=this.clipDepth.shift();this.clipEnd(m);b.parentCtxs.shift();d=this.ctx=m.ctx}this.clipDepth&&(0<this.clipDepth.length&&a._depth<=this.clipDepth[0].clipDepth)&&(d=this.ctx=this.clipDepth[0].maskee.ctx);a._clipDepth&&(b.isClippingMask=l=!0,m=
this.clipStart(a),this.clipDepth?this.clipDepth.unshift(m):this.clipDepth=[m],b.parentCtxs.unshift(d),d=this.ctx=m.mask.ctx)}if(l&&a._isContainer){d.save();renderDisplayObject(a,d,b);l=0;for(m=a._children.length;l<m;l++){var p=a._children[l];p&&(this.ignoreVisibleAttribute||p._visible&&!p._maskedObject)&&this.visit(p,e,b)}d.restore();d.fill()}else{d.save();d.globalCompositeOperation=getBlendModeName(a._blendMode);if(a._mask){var m=this.clipStart(a),p=m.mask,r=m.maskee;b.parentCtxs.push(d);var v=this.clipDepth;
this.clipDepth=null;this.ctx=p.ctx;this.visit(a._mask,e,new RenderingContext(this.refreshStage));this.ctx=d;this.clipDepth=v;renderDisplayObject(a,r.ctx,b);a._isContainer&&(this.ctx=r.ctx,e(a,this,b),this.ctx=d);b.parentCtxs.pop();this.clipEnd(m)}else renderDisplayObject(a,d,b),a._isContainer&&e(a,this,b);d.restore();l&&d.fill()}b.isClippingMask=g;b.colorTransform=f},clipStart:function(a){var e=a._parent._getConcatenatedTransform(null,!0),b=e.tx/20,d=e.ty/20,g=CanvasCache.getCanvas(this.ctx.canvas);
g.ctx.setTransform(e.a,e.b,e.c,e.d,b,d);var f=CanvasCache.getCanvas(this.ctx.canvas);f.ctx.setTransform(e.a,e.b,e.c,e.d,b,d);return{ctx:this.ctx,mask:g,maskee:f,clipDepth:a._clipDepth}},clipEnd:function(a){var e=a.ctx,b=a.mask;a=a.maskee;a.ctx.globalCompositeOperation="destination-in";a.ctx.setTransform(1,0,0,1,0,0);a.ctx.drawImage(b.canvas,0,0);e.save();e.setTransform(1,0,0,1,0,0);e.drawImage(a.canvas,0,0);e.restore();CanvasCache.releaseCanvas(b);CanvasCache.releaseCanvas(a)}};
function RenderingColorTransform(){this.mode=null;this.transform=[1,1,1,1,0,0,0,0]}
RenderingColorTransform.prototype={applyCXForm:function(a){var e=this.transform,e=[e[0]*a.redMultiplier/256,e[1]*a.greenMultiplier/256,e[2]*a.blueMultiplier/256,e[3]*a.alphaMultiplier/256,e[4]*a.redMultiplier/256+a.redOffset,e[5]*a.greenMultiplier/256+a.greenOffset,e[6]*a.blueMultiplier/256+a.blueOffset,e[7]*a.alphaMultiplier/256+a.alphaOffset];a=1E-4>Math.abs(e[0]-1)&&1E-4>Math.abs(e[1]-1)&&1E-4>Math.abs(e[2]-1)&&0<=e[3]&&1E-4>Math.abs(e[4])&&1E-4>Math.abs(e[5])&&1E-4>Math.abs(e[6])&&1E-4>Math.abs(e[7])?
1E-4>Math.abs(e[3]-1)?null:"simple":"complex";var b=Object.create(RenderingColorTransform.prototype);b.mode=a;b.transform=e;return b},setFillStyle:function(a,e){"complex"===this.mode?e="function"===typeof e?e(a,this):this.convertColor(e):"number"===typeof e?e=this.convertNumericColor(e):"function"===typeof e&&(e=e.defaultFillStyle);a.fillStyle=e},setStrokeStyle:function(a,e){"complex"===this.mode?e="function"===typeof e?e(a,this):this.convertColor(e):"number"===typeof e?e=this.convertNumericColor(e):
"function"===typeof e&&(e=e.defaultFillStyle);a.strokeStyle=e},addGradientColorStop:function(a,e,b){"complex"===this.mode?b=this.convertColor(b):"number"===typeof b&&(b=this.convertNumericColor(b));a.addColorStop(e,b)},setAlpha:function(a,e){if("simple"===this.mode||e)a.globalAlpha=Math.min(1,Math.max(0,a.globalAlpha*this.transform[3]))},convertNumericColor:function(a){return"#"+(a|16777216).toString(16).substr(1)},convertColor:function(a){var e=this.transform,b;switch(typeof a){case "string":"#"===
a[0]&&(b=[void 0,parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16),1]);b=b||/rgba\(([^,]+),([^,]+),([^,]+),([^)]+)\)/.exec(a);if(!b)return a;break;case "number":b=[a,a>>16&255,a>>8&255,a&255,1];break;default:return a}a=Math.min(255,Math.max(0,b[1]*e[0]+e[4]))|0;var d=Math.min(255,Math.max(0,b[2]*e[1]+e[5]))|0,g=Math.min(255,Math.max(0,b[3]*e[2]+e[6]))|0,e=Math.min(1,Math.max(0,b[4]*e[3]+e[7]/256));return"rgba("+a+","+d+","+g+","+e+")"},getTransformFingerprint:function(){return this.transform.join("|")}};
function RenderingContext(a,e){this.refreshStage=!0===a;this.invalidPath=e;this.isClippingMask=!1;this.colorTransform=new RenderingColorTransform;this.parentCtxs=[]}
function renderDisplayObject(a,e,b){var d=a._currentTransform;d&&e.transform(d.a,d.b,d.c,d.d,d.tx/20,d.ty/20);if(renderAsWireframe.value){if(!a._invalid&&!b.refreshStage)return;if(a.getBounds&&(b=a.getBounds(null))&&0<b.xMax-b.xMin&&0<b.yMax-b.yMin){a._wireframeStrokeStyle||(a._wireframeStrokeStyle=randomStyle());e.save();e.strokeStyle=a._wireframeStrokeStyle;var d=b.xMin/20,g=b.yMin/20;e.strokeRect(d+0.5,g+0.5,b.xMax/20-d-1,b.yMax/20-g-1);e.restore()}}else{1!==a._alpha&&(e.globalAlpha*=a._alpha);
if(b.invalidPath&&!a._invalid&&!b.refreshStage)return;a._graphics&&(d=a._graphics,d._bitmap?(e.save(),e.translate(a._bbox.xMin/20,a._bbox.yMin/20),b.colorTransform.setAlpha(e,!0),e.drawImage(d._bitmap,0,0),e.restore()):(g=a.ratio,void 0===g&&(g=0),d.draw(e,b.isClippingMask,g,b.colorTransform)));a.draw&&a.draw(e,a.ratio,b.colorTransform,b.parentCtxs)}a._invalid=!1}
function renderQuadTree(a,e){a.strokeRect(e.x/20,e.y/20,e.width/20,e.height/20);for(var b=e.nodes,d=0;d<b.length;d++)renderQuadTree(a,b[d])}var renderingTerminated=!1,samplesLeftPlusOne=0;function triggerSampling(a){samplesLeftPlusOne=-a-1}function sampleStart(){samplesLeftPlusOne&&(0>samplesLeftPlusOne&&(console.profile("Sample"),samplesLeftPlusOne*=-1),0<samplesLeftPlusOne&&console.info("Sampling Frame: "+(samplesLeftPlusOne-1)))}
function sampleEnd(){samplesLeftPlusOne&&(samplesLeftPlusOne--,1===samplesLeftPlusOne&&console.profileEnd("Sample"))}var timeline,hudTimeline;function timelineEnter(a){timeline&&timeline.enter(a);hudTimeline&&hudTimeline.enter(a)}function timelineLeave(a){timeline&&timeline.leave(a);hudTimeline&&hudTimeline.leave(a)}function timelineWrapBroadcastMessage(a,e){timelineEnter(e);a.broadcastMessage(e);timelineLeave(e)}
function initializeHUD(a,e){var b=document.createElement("canvas"),d=document.createElement("div");d.appendChild(b);d.style.position="absolute";d.style.top="0px";d.style.left="0px";d.style.width="100%";d.style.height="150px";d.style.backgroundColor="rgba(0, 0, 0, 0.4)";d.style.pointerEvents="none";e.parentElement.appendChild(d);hudTimeline=new Timeline(b);hudTimeline.setFrameRate(a._frameRate);hudTimeline.refreshEvery(10)}
function createRenderDummyBalls(a,e){var b,d=e._concatenatedTransform,g=d.a,f=d.d;b=[];for(d=0;10>d;d++)b.push({position:{x:10+Math.random()*((a.canvas.width-20)/g),y:10+Math.random()*((a.canvas.height-20)/f)},velocity:{x:1*(Math.random()-0.5),y:1*(Math.random()-0.5)}});a.fillStyle="black";a.lineWidth=2;a.fillRect(0,0,a.canvas.width,a.canvas.height);return function(){a.fillStyle="black";a.fillRect(0,0,a.canvas.width,a.canvas.height);a.strokeStyle="green";b.forEach(function(b){var d=b.position;b=b.velocity;
a.beginPath();a.arc(d.x,d.y,10,0,2*Math.PI,!0);a.stroke();var e=d.x+b.x,r=d.y+b.y;if(10>e||e>a.canvas.width/g-10)b.x*=-1;if(10>r||r>a.canvas.height/f-10)b.y*=-1;d.x+=b.x;d.y+=b.y})}}
function renderStage(a,e,b){function d(){f=e.canvas.width;l=e.canvas.height;var b=20*(f/a._stageWidth),d=20*(l/a._stageHeight);switch(a._scaleMode){case "noBorder":b>d?d=b:b=d;break;case "noScale":b=d=e.canvas._pixelRatio||1;break;case "showAll":b<d?d=b:b=d}var g=a._align,m;m=0<=g.indexOf("L")?0:0<=g.indexOf("R")?f-b*a._stageWidth/20:(f-b*a._stageWidth/20)/2;g=0<=g.indexOf("T")?0:0<=g.indexOf("B")?l-d*a._stageHeight/20:(l-d*a._stageHeight/20)/2;e.setTransform(b,0,0,d,m,g);var r=a._concatenatedTransform;
r.a=b;r.d=d;r.tx=20*m;r.ty=20*g}function g(b,g){sampleStart();var f=!1;a._invalid&&(d(),a._invalid=!1,f=!0);var l=!1;a._mouseMoved?(a._mouseMoved=!1,l=a._mouseOver):a._handleMouseButtons();if(b||f||l){FrameCounter.clear();var r=performance.now();timelineEnter("frame");traceRenderer.value&&appendToFrameTerminal("Begin Frame #"+u++,"purple");var p=avm2.systemDomain;b&&(timelineEnter("events"),v?v=!1:(enableAdvanceFrame.value&&timelineWrapBroadcastMessage(p,"advanceFrame"),enableEnterFrame.value&&timelineWrapBroadcastMessage(p,
"enterFrame"),enableConstructChildren.value&&timelineWrapBroadcastMessage(p,"constructChildren")),timelineWrapBroadcastMessage(p,"frameConstructed"),timelineWrapBroadcastMessage(p,"executeFrame"),timelineWrapBroadcastMessage(p,"exitFrame"),timelineLeave("events"));a._deferRenderEvent&&(a._deferRenderEvent=!1,p.broadcastMessage("render","render"));if((p=isCanvasVisible(e.canvas)&&(f||b)&&(A||g||!skipFrameDraw.value))&&!g&&skipFrameDraw.value&&m.shallSkipDraw)p=!1,m.skipDraw(),traceRenderer.value&&
appendToFrameTerminal("Skip Frame Draw","red");p&&(m.startDraw(),p=null,traceRenderer.value&&frameWriter.enter("> Invalidation"),timelineEnter("invalidate"),p=a._processInvalidations(f),timelineLeave("invalidate"),traceRenderer.value&&frameWriter.leave("< Invalidation"),!disableRenderVisitor.value&&!p.isEmpty&&(timelineEnter("render"),traceRenderer.value&&frameWriter.enter("> Rendering"),(new RenderVisitor(a,e,p,f)).start(),traceRenderer.value&&frameWriter.leave("< Rendering"),timelineLeave("render")),
showQuadTree.value&&(e.strokeStyle="green",renderQuadTree(e,a._qtree)),p&&(!f&&showRedrawRegions.value)&&(e.strokeStyle="red",p.draw(e),e.stroke()),m.endDraw());l&&!disableMouseVisitor.value&&(b&&timelineEnter("mouse"),traceRenderer.value&&frameWriter.enter("> Mouse Handling"),a._handleMouse(),traceRenderer.value&&frameWriter.leave("< Mouse Handling"),b&&timelineLeave("mouse"),e.canvas.style.cursor=a._cursor);if(traceRenderer.value){frameWriter.enter("> Frame Counters");for(var C in FrameCounter.counts)frameWriter.writeLn(C+
": "+FrameCounter.counts[C]);frameWriter.leave("< Frame Counters");f=performance.now()-r;l=1E3/f;w.push(l);traceRenderer.value&&appendToFrameTerminal("End Frame Time: "+f.toFixed(2)+" ("+l.toFixed(2)+" fps, "+w.average().toFixed(2)+" average fps)","purple")}timelineLeave("frame")}else traceRenderer.value&&appendToFrameTerminal("Skip Frame","black");sampleEnd()}var f,l;!timeline&&hud.value&&initializeHUD(a,e.canvas);d();var m=new FrameScheduler;a._frameScheduler=m;var p=window.requestAnimationFrame||
window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.setTimeout,r=dummyAnimation.value&&createRenderDummyBalls(e,a);console.timeEnd("Initialize Renderer");console.timeEnd("Total");var v=!0,u=0,w=new metrics.Average(120),A=!0;(function s(){var d=!0;b.onBeforeFrame&&(d={cancel:!1},b.onBeforeFrame(d),d=!d.cancel);if(r)d&&(r(),b.onAfterFrame&&b.onAfterFrame()),setTimeout(s);else{m.startFrame(a._frameRate);g(d,!1);m.endFrame();
A=!1;m.isOnTime||traceRenderer.value&&appendToFrameTerminal("Frame Is Late","red");if(d&&b.onAfterFrame)b.onAfterFrame();if(renderingTerminated){if(b.onTerminated)b.onTerminated()}else setTimeout(s,turboMode.value?0:m.nextFrameIn)}})();(function B(){renderingTerminated||(A=!0,(a._invalid||a._mouseMoved)&&!r&&g(!1,!0),p(B))})()}
var FrameScheduler=function(){function a(){this._drawStats=[];this._drawsSkipped=this._drawStarted=this._drawStatsSum=0;this._expectedNextFrameAt=performance.now();this._onTime=!0;this._trackDelta=!1;this._onTimeDelta=this._delta=0}a.prototype={get shallSkipDraw(){if(2<=this._drawsSkipped)return!1;var a=50>this._drawStats.length?0:this._drawStatsSum/this._drawStats.length;return performance.now()+a+4>this._expectedNextFrameAt},get nextFrameIn(){return Math.max(0,this._expectedNextFrameAt-performance.now())},
get isOnTime(){return this._onTime},startFrame:function(a){var b=a=1E3/a,d=this._onTimeDelta+this._delta;0!==d&&(0>d?b*=0.9:0<d&&(b/=0.9),this._onTimeDelta+=a-b);this._expectedNextFrameAt+=b;this._onTime=!0},endFrame:function(){var a=performance.now()+4;a>this._expectedNextFrameAt&&(this._trackDelta&&(this._onTimeDelta+=this._expectedNextFrameAt-a,console.log(this._onTimeDelta)),this._expectedNextFrameAt=a,this._onTime=!1)},startDraw:function(){this._drawsSkipped=0;this._drawStarted=performance.now()},
endDraw:function(){var a=performance.now()-this._drawStarted;this._drawStats.push(a);for(this._drawStatsSum+=a;50<this._drawStats.length;)this._drawStatsSum-=this._drawStats.shift()},skipDraw:function(){this._drawsSkipped++},setDelta:function(a){this._trackDelta&&(this._delta=a)},startTrackDelta:function(){this._trackDelta=!0},endTrackDelta:function(){this._trackDelta&&(this._trackDelta=!1,this._onTimeDelta=this._delta=0)}};return a}(),tagHandler=function(){function a(a,b,d,e,g){d||(d={});d.id=readUi16(a,
b);var f=d.bbox={};w(a,b,f,e,g);if(f=d.isMorph=46===g||84===g){var l=d.bboxMorph={};w(a,b,l,e,g)}if(l=d.hasStrokes=83===g||84===g){var m=d.strokeBbox={};w(a,b,m,e,g);f&&(m=d.strokeBboxMorph={},w(a,b,m,e,g));readUb(a,b,5);d.fillWinding=readUb(a,b,1);d.nonScalingStrokes=readUb(a,b,1);d.scalingStrokes=readUb(a,b,1)}if(f){d.offsetMorph=readUi32(a,b);var r=d,p,s,m=D(a,b,r,e,g,f,l),v=m.lineBits,u=m.fillBits,A=r.records=[];do{var z={},m=y(a,b,z,e,g,f,u,v,l,s);p=m.eos;u=m.fillBits;v=m.lineBits;s=m.bits;A.push(z)}while(!p);
m=G(a,b,r,e,g);u=m.fillBits;v=m.lineBits;r=r.recordsMorph=[];do A={},m=y(a,b,A,e,g,f,u,v,l,s),p=m.eos,u=m.fillBits,v=m.lineBits,s=m.bits,r.push(A);while(!p)}else{u=d;s=D(a,b,u,e,g,f,l);m=s.fillBits;v=s.lineBits;r=u.records=[];do A={},s=y(a,b,A,e,g,f,m,v,l,p),u=s.eos,m=s.fillBits,v=s.lineBits,p=s.bits,r.push(A);while(!u)}return d}function e(a,b,d,e,g){var f,m,l,r,p,v,u,A,w,z,y,C,ca;d||(d={});if(4<g){f=26<g?readUi16(a,b):readUi8(a,b);m=d.hasEvents=f>>7&1;l=d.clip=f>>6&1;r=d.hasName=f>>5&1;p=d.hasRatio=
f>>4&1;v=d.hasCxform=f>>3&1;u=d.hasMatrix=f>>2&1;A=d.place=f>>1&1;d.move=f&1;70===g?(w=d.hasBackgroundColor=f>>15&1,z=d.hasVisibility=f>>14&1,d.hasImage=f>>12&1,y=d.hasClassName=f>>11&1,C=d.cache=f>>10&1,ca=d.blend=f>>9&1,f=d.hasFilters=f>>8&1):(C=d.cache=0,ca=d.blend=0,f=d.hasFilters=0);d.depth=readUi16(a,b);y&&(d.className=readString(a,b,0));A&&(d.symbolId=readUi16(a,b));u&&(u=d.matrix={},s(a,b,u,e,g));v&&(v=d.cxform={},B(a,b,v,e,g));p&&(d.ratio=readUi16(a,b));r&&(d.name=readString(a,b,0));l&&(d.clipDepth=
readUi16(a,b));if(f){r=readUi8(a,b);for(l=d.filters=[];r--;)p={},E(a,b,p,e,g),l.push(p)}ca&&(d.blendMode=readUi8(a,b));C&&(d.bmpCache=readUi8(a,b));if(m){readUi16(a,b);6<=e?readUi32(a,b):readUi16(a,b);g=d.events=[];do m={},C=a,ca=b,l=m,v=e,r=f=void 0,f=6<=v?readUi32(C,ca):readUi16(C,ca),p=l.eoe=!f,l.onKeyUp=f>>7&1,l.onKeyDown=f>>6&1,l.onMouseUp=f>>5&1,l.onMouseDown=f>>4&1,l.onMouseMove=f>>3&1,l.onUnload=f>>2&1,l.onEnterFrame=f>>1&1,l.onLoad=f&1,6<=v&&(l.onDragOver=f>>15&1,l.onRollOut=f>>14&1,l.onRollOver=
f>>13&1,l.onReleaseOutside=f>>12&1,l.onRelease=f>>11&1,l.onPress=f>>10&1,l.onInitialize=f>>9&1,l.onData=f>>8&1,l.onConstruct=7<=v?f>>18&1:0,r=l.keyPress=f>>17&1,l.onDragOut=f>>16&1),p||(v=l.length=readUi32(C,ca),r&&(l.keyCode=readUi8(C,ca)),l.actionsData=readBinary(C,ca,v-(r?1:0))),C=p,g.push(m);while(!C)}w&&(e=d.backgroundColor={},e.alpha=readUi8(a,b),e.red=readUi8(a,b),e.green=readUi8(a,b),e.blue=readUi8(a,b));z&&(d.visibility=readUi8(a,b))}else d.place=1,d.symbolId=readUi16(a,b),d.depth=readUi16(a,
b),d.hasMatrix=1,z=d.matrix={},s(a,b,z,e,g),b.remaining()&&(d.hasCxform=1,z=d.cxform={},B(a,b,z,e,g));return d}function b(a,b,d,e,g){d||(d={});5===g&&(d.symbolId=readUi16(a,b));d.depth=readUi16(a,b);return d}function d(a,b,d,e,g){d||(d={});d.id=readUi16(a,b);21<g?(e=readUi32(a,b),90===g&&(d.deblock=readFixed8(a,b)),e=d.imgData=readBinary(a,b,e),d.alphaData=readBinary(a,b,0)):e=d.imgData=readBinary(a,b,0);switch(e[0]<<8|e[1]){case 65496:case 65497:d.mimeType="image/jpeg";break;case 35152:d.mimeType=
"image/png";break;case 18249:d.mimeType="image/gif";break;default:d.mimeType="application/octet-stream"}6===g&&(d.incomplete=1);return d}function g(a,b,d,e,g){var f,l,m,r;d||(d={});d.id=readUi16(a,b);if(7==g){r=d.characters=[];do{var p={};f=a;var v=b,u=p;l=e;m=g;var A=void 0,w=void 0,z=readUi8(f,v),y=u.eob=!z;8<=l?(w=u.blend=z>>5&1,A=u.hasFilters=z>>4&1):(w=u.blend=0,A=u.hasFilters=0);u.stateHitTest=z>>3&1;u.stateDown=z>>2&1;u.stateOver=z>>1&1;u.stateUp=z&1;y||(u.symbolId=readUi16(f,v),u.depth=readUi16(f,
v),z=u.matrix={},s(f,v,z,l,m),34===m&&(z=u.cxform={},B(f,v,z,l,m)),A&&(u.filterCount=readUi8(f,v),A=u.filters={},E(f,v,A,l,m)),w&&(u.blendMode=readUi8(f,v)));f=y;r.push(p)}while(!f);d.actionsData=readBinary(a,b,0)}else{f=readUi8(a,b);d.trackAsMenu=f>>7&1;p=readUi16(a,b);v=d.characters=[];do{u={};m=readUi8(a,b);f=u.eob=!m;8<=e?(r=u.blend=m>>5&1,l=u.hasFilters=m>>4&1):(r=u.blend=0,l=u.hasFilters=0);u.stateHitTest=m>>3&1;u.stateDown=m>>2&1;u.stateOver=m>>1&1;u.stateUp=m&1;if(!f){u.symbolId=readUi16(a,
b);u.depth=readUi16(a,b);m=u.matrix={};s(a,b,m,e,g);34===g&&(m=u.cxform={},B(a,b,m,e,g));if(l){m=readUi8(a,b);for(l=d.filters=[];m--;)w={},E(a,b,w,e,g),l.push(w)}r&&(u.blendMode=readUi8(a,b))}v.push(u)}while(!f);if(p){e=d.buttonActions=[];do g={},f=a,r=b,p=g,v=readUi16(f,r),u=readUi16(f,r),p.idleToOverDown=u>>7&1,p.outDownToIdle=u>>6&1,p.outDownToOverDown=u>>5&1,p.overDownToOutDown=u>>4&1,p.overDownToOverUp=u>>3&1,p.overUpToOverDown=u>>2&1,p.overUpToIdle=u>>1&1,p.idleToOverUp=u&1,p.mouseEventFlags=
u&511,p.keyPress=u>>9&127,p.overDownToIdle=u>>8&1,p.actionsData=v?readBinary(f,r,v-4):readBinary(f,r,0),e.push(g);while(0<b.remaining())}}return d}function f(a,b,d,e,g){var f;d||(d={});d.id=readUi16(a,b);var l=d.bbox={};w(a,b,l,e,g);l=d.matrix={};s(a,b,l,e,g);var l=d.glyphBits=readUi8(a,b),m=d.advanceBits=readUi8(a,b),r=d.records=[];do{var p={};f=a;var v=b,u=p,y=e,B=g,E=l,C=m,D=void 0;align(f,v);var ca=readUb(f,v,8),G=u.eot=!ca,D=f,ha=v,I=u,oa=y,ia=ca,ca=I.hasFont=ia>>3&1,aa=I.hasColor=ia>>2&1,ea=
I.hasMoveY=ia>>1&1,ia=I.hasMoveX=ia&1;ca&&(I.fontId=readUi16(D,ha));aa&&(33===B?(aa=I.color={},z(D,ha,aa,oa,B)):(aa=I.color={},A(D,ha,aa,oa,B)));ia&&(I.moveX=readSi16(D,ha));ea&&(I.moveY=readSi16(D,ha));ca&&(I.fontHeight=readUi16(D,ha));if(!G){D=readUi8(f,v);D=6<y?u.glyphCount=D:u.glyphCount=D&127;u=u.entries=[];for(y=D;y--;)D={},ha=f,I=v,oa=D,B=C,oa.glyphIndex=readUb(ha,I,E),oa.advance=readSb(ha,I,B),u.push(D)}f=G;r.push(p)}while(!f);return d}function l(a,b,d,e,g){d||(d={});59===g&&(d.spriteId=readUi16(a,
b));d.actionsData=readBinary(a,b,0);return d}function m(a,b,d,e,g){d||(d={});15==g&&(d.soundId=readUi16(a,b));89==g&&(d.soundClassName=readString(a,b,0));e=d.soundInfo={};readUb(a,b,2);e.stop=readUb(a,b,1);e.noMultiple=readUb(a,b,1);g=e.hasEnvelope=readUb(a,b,1);var f=e.hasLoops=readUb(a,b,1),l=e.hasOutPoint=readUb(a,b,1);if(e.hasInPoint=readUb(a,b,1))e.inPoint=readUi32(a,b);l&&(e.outPoint=readUi32(a,b));f&&(e.loopCount=readUi16(a,b));if(g){g=e.envelopeCount=readUi8(a,b);for(e=e.envelopes=[];g--;){var f=
{},l=a,m=b,r=f;r.pos44=readUi32(l,m);r.volumeLeft=readUi16(l,m);r.volumeRight=readUi16(l,m);e.push(f)}}return d}function p(a,b,d){d||(d={});var e=readUi8(a,b);d.playbackRate=e>>2&3;d.playbackSize=e>>1&1;d.playbackType=e&1;var e=readUi8(a,b),g=d.streamCompression=e>>4&15;d.streamRate=e>>2&3;d.streamSize=e>>1&1;d.streamType=e&1;d.samplesCount=readUi32(a,b);2==g&&(d.latencySeek=readSi16(a,b));return d}function r(a,b,d,e,g){d||(d={});d.id=readUi16(a,b);e=d.format=readUi8(a,b);d.width=readUi16(a,b);d.height=
readUi16(a,b);d.hasAlpha=36===g;3===e&&(d.colorTableSize=readUi8(a,b));d.bmpData=readBinary(a,b,0);return d}function v(a,b,d,e,g){d||(d={});d.id=readUi16(a,b);var f=d.hasLayout=readUb(a,b,1);5<e?d.shiftJis=readUb(a,b,1):readUb(a,b,1);d.smallText=readUb(a,b,1);d.ansi=readUb(a,b,1);var l=d.wideOffset=readUb(a,b,1),m=d.wide=readUb(a,b,1);d.italic=readUb(a,b,1);d.bold=readUb(a,b,1);5<e?d.language=readUi8(a,b):(readUi8(a,b),d.language=0);var r=readUi8(a,b);d.name=readString(a,b,r);75===g&&(d.resolution=
20);r=d.glyphCount=readUi16(a,b);if(l){for(var l=d.offsets=[],p=r;p--;)l.push(readUi32(a,b));d.mapOffset=readUi32(a,b)}else{l=d.offsets=[];for(p=r;p--;)l.push(readUi16(a,b));d.mapOffset=readUi16(a,b)}l=d.glyphs=[];for(p=r;p--;){var s={};I(a,b,s,e,g);l.push(s)}if(m){l=d.codes=[];for(p=r;p--;)l.push(readUi16(a,b))}else{l=d.codes=[];for(p=r;p--;)l.push(readUi8(a,b))}if(f){d.ascent=readUi16(a,b);d.descent=readUi16(a,b);d.leading=readSi16(a,b);f=d.advance=[];for(l=r;l--;)f.push(readSi16(a,b));for(f=d.bbox=
[];r--;)l={},w(a,b,l,e,g),f.push(l);g=readUi16(a,b);for(e=d.kerning=[];g--;)r={},f=a,l=b,p=r,m?(p.code1=readUi16(f,l),p.code2=readUi16(f,l)):(p.code1=readUi8(f,l),p.code2=readUi8(f,l)),p.adjustment=readUi16(f,l),e.push(r)}return d}function u(a,b,d,e,g){d||(d={});d.flags=82===g?readUi32(a,b):0;d.name=82===g?readString(a,b,0):"";d.data=readBinary(a,b,0);return d}function w(a,b,d){align(a,b);var e=readUb(a,b,5),g=readSb(a,b,e),f=readSb(a,b,e),l=readSb(a,b,e),e=readSb(a,b,e);d.xMin=g;d.xMax=f;d.yMin=
l;d.yMax=e;align(a,b)}function A(a,b,d){d.red=readUi8(a,b);d.green=readUi8(a,b);d.blue=readUi8(a,b);d.alpha=255}function z(a,b,d){d.red=readUi8(a,b);d.green=readUi8(a,b);d.blue=readUi8(a,b);d.alpha=readUi8(a,b)}function s(a,b,d){align(a,b);if(readUb(a,b,1)){var e=readUb(a,b,5);d.a=readFb(a,b,e);d.d=readFb(a,b,e)}else d.a=1,d.d=1;readUb(a,b,1)?(e=readUb(a,b,5),d.b=readFb(a,b,e),d.c=readFb(a,b,e)):(d.b=0,d.c=0);var e=readUb(a,b,5),g=readSb(a,b,e),e=readSb(a,b,e);d.tx=g;d.ty=e;align(a,b)}function B(a,
b,d,e,g){align(a,b);e=readUb(a,b,1);var f=readUb(a,b,1),l=readUb(a,b,4);f?(d.redMultiplier=readSb(a,b,l),d.greenMultiplier=readSb(a,b,l),d.blueMultiplier=readSb(a,b,l),d.alphaMultiplier=4<g?readSb(a,b,l):256):(d.redMultiplier=256,d.greenMultiplier=256,d.blueMultiplier=256,d.alphaMultiplier=256);e?(d.redOffset=readSb(a,b,l),d.greenOffset=readSb(a,b,l),d.blueOffset=readSb(a,b,l),d.alphaOffset=4<g?readSb(a,b,l):0):(d.redOffset=0,d.greenOffset=0,d.blueOffset=0,d.alphaOffset=0);align(a,b)}function y(a,
b,d,e,g,f,l,m,r,p){var s=d.type=readUb(a,b,1),v=readUb(a,b,5),u=d.eos=!(s||v);if(s)e=p,g=g=g=0,g=d.isStraight=v>>4,e=(v&15)+2,g?(g=d.isGeneral=readUb(a,b,1))?(d.deltaX=readSb(a,b,e),d.deltaY=readSb(a,b,e)):(g=d.isVertical=readUb(a,b,1))?d.deltaY=readSb(a,b,e):d.deltaX=readSb(a,b,e):(d.controlDeltaX=readSb(a,b,e),d.controlDeltaY=readSb(a,b,e),d.anchorDeltaX=readSb(a,b,e),d.anchorDeltaY=readSb(a,b,e)),a=e;else{var A=0,w=0,z=0,y=0,ca=0,A=2<g?d.hasNewStyles=v>>4:d.hasNewStyles=0,w=d.hasLineStyle=v>>3&
1,z=d.hasFillStyle1=v>>2&1,y=d.hasFillStyle0=v>>1&1;if(ca=d.move=v&1)p=readUb(a,b,5),d.moveX=readSb(a,b,p),d.moveY=readSb(a,b,p);y&&(d.fillStyle0=readUb(a,b,l));z&&(d.fillStyle1=readUb(a,b,l));w&&(d.lineStyle=readUb(a,b,m));A&&(a=D(a,b,d,e,g,f,r),m=a.lineBits,l=a.fillBits);a=p}return{type:s,flags:v,eos:u,fillBits:l,lineBits:m,bits:a}}function D(a,b,d,e,g,f,l){var m,r=readUi8(a,b);m=2<g&&255===r?readUi16(a,b):r;for(r=d.fillStyles=[];m--;){var p={};C(a,b,p,e,g,f);r.push(p)}r=readUi8(a,b);m=2<g&&255===
r?readUi16(a,b):r;for(r=d.lineStyles=[];m--;){var p={},s=a,v=b,u=p,w=e,y=g,B=f,E=l;u.width=readUi16(s,v);B&&(u.widthMorph=readUi16(s,v));if(E){align(s,v);u.startCapStyle=readUb(s,v,2);var E=u.joinStyle=readUb(s,v,2),ca=u.hasFill=readUb(s,v,1);u.noHscale=readUb(s,v,1);u.noVscale=readUb(s,v,1);u.pixelHinting=readUb(s,v,1);readUb(s,v,5);u.noClose=readUb(s,v,1);u.endCapStyle=readUb(s,v,2);2===E&&(u.miterLimitFactor=readFixed8(s,v));ca?(u=u.fillStyle={},C(s,v,u,w,y,B)):(E=u.color={},z(s,v,E,w,y),B&&(B=
u.colorMorph={},z(s,v,B,w,y)))}else 22<y?(E=u.color={},z(s,v,E,w,y)):(E=u.color={},A(s,v,E,w,y)),B&&(B=u.colorMorph={},z(s,v,B,w,y));r.push(p)}a=G(a,b,d,e,g);return{fillBits:a.fillBits,lineBits:a.lineBits}}function G(a,b){align(a,b);var d=readUb(a,b,4),e=readUb(a,b,4);return{fillBits:d,lineBits:e}}function C(a,b,d,e,g,f){var l=d.type=readUi8(a,b);switch(l){case 0:22<g||f?(l=d.color={},z(a,b,l,e,g)):(l=d.color={},A(a,b,l,e,g));f&&(d=d.colorMorph={},z(a,b,d,e,g));break;case 16:case 18:case 19:var m=
d.matrix={};s(a,b,m,e,g);f&&(m=d.matrixMorph={},s(a,b,m,e,g));83===g?(d.spreadMode=readUb(a,b,2),d.interpolationMode=readUb(a,b,2)):readUb(a,b,4);for(var r=d.count=readUb(a,b,4),m=d.records=[];r--;){var p={},v=a,u=b,w=p,y=e,B=g,E=f;w.ratio=readUi8(v,u);if(22<B){var C=w.color={};z(v,u,C,y,B)}else C=w.color={},A(v,u,C,y,B);E&&(w.ratioMorph=readUi8(v,u),w=w.colorMorph={},z(v,u,w,y,B));m.push(p)}19===l&&(d.focalPoint=readFixed8(a,b),f&&(d.focalPointMorph=readFixed8(a,b)));break;case 64:case 65:case 66:case 67:d.bitmapId=
readUi16(a,b),m=d.matrix={},s(a,b,m,e,g),f&&(f=d.matrixMorph={},s(a,b,f,e,g)),d.condition=64===l||67===l}}function E(a,b,d,e,g){var f=d.type=readUi8(a,b);switch(f){case 0:case 2:case 3:case 4:case 7:var l;l=4===f||7===f?readUi8(a,b):1;for(var m=d.colors=[],r=l;r--;){var p={};z(a,b,p,e,g);m.push(p)}3===f&&(m=d.higlightColor={},z(a,b,m,e,g));if(4===f||7===f){e=d.ratios=[];for(g=l;g--;)e.push(readUi8(a,b))}d.blurX=readFixed(a,b);d.blurY=readFixed(a,b);2!==f&&(d.angle=readFixed(a,b),d.distance=readFixed(a,
b));d.strength=readFixed8(a,b);d.innerShadow=readUb(a,b,1);d.knockout=readUb(a,b,1);d.compositeSource=readUb(a,b,1);3===f?d.onTop=readUb(a,b,1):readUb(a,b,1);4===f||7===f?d.passes=readUb(a,b,4):readUb(a,b,4);break;case 1:d.blurX=readFixed(a,b);d.blurY=readFixed(a,b);d.passes=readUb(a,b,5);readUb(a,b,3);break;case 5:l=d.columns=readUi8(a,b);m=d.rows=readUi8(a,b);d.divisor=readFloat(a,b);d.bias=readFloat(a,b);f=d.weights=[];for(l*=m;l--;)f.push(readFloat(a,b));f=d.defaultColor={};z(a,b,f,e,g);readUb(a,
b,6);d.clamp=readUb(a,b,1);d.preserveAlpha=readUb(a,b,1);break;case 6:d=d.matrix=[];for(e=20;e--;)d.push(readFloat(a,b))}}function I(a,b,d,e,g){var f=G(a,b,d,e,g),l=f.fillBits,f=f.lineBits,m=d.records=[];do{var r={},f=y(a,b,r,e,g,!1,l,f,!1,p);d=f.eos;var l=f.fillBits,f=f.lineBits,p=p;m.push(r)}while(!d)}return{"0":void 0,1:void 0,2:a,4:e,5:b,6:d,7:g,8:function(a,b,d){d||(d={});d.id=0;d.imgData=readBinary(a,b,0);d.mimeType="application/octet-stream";return d},9:function(a,b,d,e,g){d||(d={});var f=
d.color={};A(a,b,f,e,g);return d},10:function(a,b,d,e,g){d||(d={});d.id=readUi16(a,b);for(var f=readUi16(a,b),l=d.glyphCount=f/2,m=[],r=l-1;r--;)m.push(readUi16(a,b));d.offsets=[f].concat(m);for(f=d.glyphs=[];l--;)m={},I(a,b,m,e,g),f.push(m);return d},11:f,12:l,13:void 0,14:function(a,b,d){d||(d={});d.id=readUi16(a,b);var e=readUi8(a,b);d.soundFormat=e>>4&15;d.soundRate=e>>2&3;d.soundSize=e>>1&1;d.soundType=e&1;d.samplesCount=readUi32(a,b);d.soundData=readBinary(a,b,0);return d},15:m,17:void 0,18:p,
19:function(a,b,d){d||(d={});d.data=readBinary(a,b,0);return d},20:r,21:d,22:a,23:void 0,24:void 0,26:e,28:b,32:a,33:f,34:g,35:d,36:r,37:function(a,b,d,e,g){d||(d={});d.id=readUi16(a,b);var f=d.bbox={};w(a,b,f,e,g);var l=readUi16(a,b),f=d.hasText=l>>7&1;d.wordWrap=l>>6&1;d.multiline=l>>5&1;d.password=l>>4&1;d.readonly=l>>3&1;var m=d.hasColor=l>>2&1,r=d.hasMaxLength=l>>1&1,p=d.hasFont=l&1,s=d.hasFontClass=l>>15&1;d.autoSize=l>>14&1;var v=d.hasLayout=l>>13&1;d.noSelect=l>>12&1;d.border=l>>11&1;d.wasStatic=
l>>10&1;d.html=l>>9&1;d.useOutlines=l>>8&1;p&&(d.fontId=readUi16(a,b));s&&(d.fontClass=readString(a,b,0));p&&(d.fontHeight=readUi16(a,b));m&&(l=d.color={},z(a,b,l,e,g));r&&(d.maxLength=readUi16(a,b));v&&(d.align=readUi8(a,b),d.leftMargin=readUi16(a,b),d.rightMargin=readUi16(a,b),d.indent=readSi16(a,b),d.leading=readSi16(a,b));d.variableName=readString(a,b,0);f&&(d.initialText=readString(a,b,0));return d},39:void 0,43:function(a,b,d){d||(d={});d.name=readString(a,b,0);return d},45:p,46:a,48:v,56:function(a,
b,d){d||(d={});for(var e=readUi16(a,b),g=d.exports=[];e--;){var f={};f.symbolId=readUi16(a,b);f.className=readString(a,b,0);g.push(f)}return d},57:void 0,58:void 0,59:l,60:void 0,61:void 0,62:void 0,64:void 0,65:void 0,66:void 0,69:function(a,b,d){d||(d={});readUb(a,b,1);d.useDirectBlit=readUb(a,b,1);d.useGpu=readUb(a,b,1);d.hasMetadata=readUb(a,b,1);d.doAbc=readUb(a,b,1);d.noCrossDomainCaching=readUb(a,b,1);d.relativeUrls=readUb(a,b,1);d.network=readUb(a,b,1);readUb(a,b,24);return d},70:e,71:void 0,
72:u,73:void 0,74:void 0,75:v,76:function(a,b,d){d||(d={});for(var e=readUi16(a,b),g=d.exports=[];e--;){var f={};f.symbolId=readUi16(a,b);f.className=readString(a,b,0);g.push(f)}return d},77:void 0,78:function(a,b,d,e,g){d||(d={});d.symbolId=readUi16(a,b);var f=d.splitter={};w(a,b,f,e,g);return d},82:u,83:a,84:a,86:function(a,b,d){d||(d={});for(var e=readEncodedU32(a,b),g=d.scenes=[];e--;){var f={};f.offset=readEncodedU32(a,b);f.name=readString(a,b,0);g.push(f)}e=readEncodedU32(a,b);for(g=d.labels=
[];e--;)f={},f.frame=readEncodedU32(a,b),f.name=readString(a,b,0),g.push(f);return d},87:function(a,b,d){d||(d={});d.id=readUi16(a,b);readUi32(a,b);d.data=readBinary(a,b,0);return d},88:void 0,89:m,90:d,91:void 0}}(this),readHeader=function(a,e,b){b||(b={});var d=b.bbox={};align(a,e);var g=readUb(a,e,5),f=readSb(a,e,g),l=readSb(a,e,g),m=readSb(a,e,g),g=readSb(a,e,g);d.xMin=f;d.xMax=l;d.yMin=m;d.yMax=g;align(a,e);d=readUi8(a,e);b.frameRate=readUi8(a,e)+d/256;b.frameCount=readUi16(a,e);return b};
function readTags(a,e,b,d,g,f){var l=a.tags,m=e.bytes,p,r=null;a._readTag&&(r=a._readTag,a._readTag=null);try{for(;e.pos<e.end;){p=e.pos;e.ensure(2);var v=readUi16(m,e);if(!v){d=!0;break}var u=v>>6,w=v&63;63===w&&(e.ensure(4),w=readUi32(m,e));if(r){if(1===u&&1===r.code){r.repeat++;e.pos+=w;continue}l.push(r);g&&void 0!==r.id&&g(a);r=null}e.ensure(w);var A=e.substream(e.pos,e.pos+=w),z=A.bytes,w={code:u};if(39===u)w.type="sprite",w.id=readUi16(z,A),w.frameCount=readUi16(z,A),w.tags=[],readTags(w,A,
b,!0);else if(1===u)w.repeat=1;else{var s=tagHandler[u];s&&s(z,A,w,b,u)}r=w}r&&d?(r.finalTag=!0,l.push(r),g&&g(a)):a._readTag=r}catch(B){if(B!==StreamNoDataError)throw f&&f(B),B;e.pos=p;a._readTag=r}}function HeadTailBuffer(a){this.bufferSize=a||16;this.buffer=new Uint8Array(this.bufferSize);this.pos=0}
HeadTailBuffer.prototype={push:function(a,e){var b=this.pos+a.length;if(this.bufferSize<b){for(var d=this.bufferSize;d<b;)d<<=1;b=new Uint8Array(d);0<this.bufferSize&&b.set(this.buffer);this.buffer=b;this.bufferSize=d}this.buffer.set(a,this.pos);this.pos+=a.length;if(e)return this.pos>=e},getHead:function(a){return this.buffer.subarray(0,a)},getTail:function(a){return this.buffer.subarray(a,this.pos)},removeHead:function(a){a=this.getTail(a);this.buffer=new Uint8Array(this.bufferSize);this.buffer.set(a);
this.pos=a.length},get arrayBuffer(){return this.buffer.buffer},get length(){return this.pos},createStream:function(){return new Stream(this.arrayBuffer,0,this.length)}};function CompressedPipe(a,e){this.target=a;this.length=e;this.initialize=!0;this.buffer=new HeadTailBuffer(8096);this.state={bitBuffer:0,bitLength:0,compression:{}};this.output={data:new Uint8Array(e),available:0,completed:!1}}
CompressedPipe.prototype={push:function(a,e){var b=this.buffer;if(this.initialize){if(!b.push(a,2))return;var d=b.getHead(2);verifyDeflateHeader(d);b.removeHead(2);this.initialize=!1}else b.push(a);d=b.createStream();d.bitBuffer=this.state.bitBuffer;d.bitLength=this.state.bitLength;var g=this.output,f=g.available;try{do inflateBlock(d,g,this.state.compression);while(d.pos<b.length&&!g.completed)}catch(l){if(l!==InflateNoDataError)throw l;}finally{this.state.bitBuffer=d.bitBuffer,this.state.bitLength=
d.bitLength}b.removeHead(d.pos);this.target.push(g.data.subarray(f,g.available),e)}};function BodyParser(a,e,b){this.swf={swfVersion:a,parseTime:0};this.buffer=new HeadTailBuffer(32768);this.initialize=!0;this.totalRead=0;this.length=e;this.options=b}
BodyParser.prototype={push:function(a,e){if(0!==a.length){var b=this.swf,d=b.swfVersion,g=this.buffer,f=this.options,l;if(this.initialize){if(!g.push(a,27))return;l=g.createStream();var m=l.bytes;readHeader(m,l,b);if(4420==readUi16(m,l)){l.ensure(4);var m=l.substream(l.pos,l.pos+=4),p={code:69};(0,tagHandler[69])(m.bytes,m,p,d,69);b.fileAttributes=p}else l.pos-=2,b.fileAttributes={};if(f.onstart)f.onstart(b);b.tags=[];this.initialize=!1}else g.push(a),l=g.createStream();m=!1;e&&(b.bytesLoaded=e.bytesLoaded,
b.bytesTotal=e.bytesTotal,m=e.bytesLoaded>=e.bytesTotal);p=performance.now();readTags(b,l,d,m,f.onprogress,f.onexception);b.parseTime+=performance.now()-p;d=l.pos;g.removeHead(d);this.totalRead+=d;if(f.oncomplete&&b.tags[b.tags.length-1].finalTag)f.oncomplete(b)}}};
SWF.parseAsync=function(a){var e=new HeadTailBuffer,b={push:function(d,g){if(void 0!==this.target)return this.target.push(d,g);if(!e.push(d,8))return null;var f=e.getHead(8),l=f[0],m=f[1],p=f[2];if((70===l||67===l)&&87===m&&83===p)l=67===l,f=f[3],m=e.createStream(),m.pos+=4,m=readUi32(null,m)-8,f=new BodyParser(f,m,a),l&&(f=new CompressedPipe(f,m)),f.push(e.getTail(8),g),b.target=f;else{var f=!1,r;255===l&&216===m&&255===p?(f=!0,r="image/jpeg"):137===l&&(80===m&&78===p)&&(f=!0,r="image/png");if(f){var v=
r,u=new Uint8Array(g.bytesTotal);u.set(d);var w=d.length;b.target={push:function(a){u.set(a,w);w+=a.length},close:function(){var b={},d;d="image/jpeg"==v?parseJpegChunks(b,u):[u];b={type:"image",props:b,data:new Blob(d,{type:v})};a.oncomplete&&a.oncomplete(b)}}}}e=null},close:function(){if(e){var b={command:"empty",data:e.buffer.subarray(0,e.pos)};a.oncomplete&&a.oncomplete(b)}void 0!==this.target&&this.target.close&&this.target.close()}};return b};
SWF.parse=function(a,e){e||(e={});var b=SWF.parseAsync(e),d=new Uint8Array(a);b.push(d,{bytesLoaded:d.length,bytesTotal:d.length});b.close()};var $RELEASE=!1,isWorker="undefined"===typeof window;
function defineSymbol(a,e){var b;switch(a.code){case 6:case 21:case 35:case 90:case 8:b=defineImage(a,e);break;case 20:case 36:b=defineBitmap(a);break;case 7:case 34:b=defineButton(a,e);break;case 37:b=defineText(a,e);break;case 10:case 48:case 75:case 91:b=defineFont(a,e);break;case 46:case 84:case 2:case 22:case 32:case 83:b=defineShape(a,e);break;case 14:b=defineSound(a,e);break;case 87:b={type:"binary",id:a.id,data:a.data};break;case 39:b={};for(var d={type:"frame"},g=[],f=a.tags,l=null,m=0,p=
null,r=0,v=f.length;r<v;r++){var u=f[r];switch(u.code){case 12:l||(l=[]);l.push(m);l.push(u.actionsData);break;case 15:(d.startSounds||(d.startSounds=[])).push(u);break;case 18:try{p=createSoundStream(u),d.soundStream=p.info}catch(w){}break;case 19:p&&(d.soundStreamBlock=p.decode(u.data));break;case 43:d.labelName=u.name;break;case 4:case 26:case 70:b[u.depth]=u;break;case 5:case 28:b[u.depth]=null;break;case 1:m+=u.repeat,d.repeat=u.repeat,d.depths=b,g.push(d),b={},d={type:"frame"}}}b={type:"sprite",
id:a.id,frameCount:a.frameCount,frames:g,frameScripts:l};break;case 11:case 33:b=defineLabel(a,e)}if(!b)return{command:"error",message:"unknown symbol type: "+a.code};b.isSymbol=!0;return e[a.id]=b}
function createParsingContext(a){var e={},b={},d={type:"frame"},g=0,f=null,l=0;return{onstart:function(b){a({command:"init",result:b})},onprogress:function(m){if(Date.now()-l>1E3/24||m.bytesLoaded===m.bytesTotal)a({command:"progress",result:{bytesLoaded:m.bytesLoaded,bytesTotal:m.bytesTotal}}),l=Date.now();m=m.tags;for(var p=m.length;g<p;g++){var r=m[g];if("id"in r)r=defineSymbol(r,b),a(r,r.transferables);else switch(r.code){case 86:d.sceneData=r;break;case 78:a({isSymbol:!0,id:r.symbolId,updates:{scale9Grid:r.splitter}});
break;case 82:case 72:var v=d.abcBlocks;v?v.push({data:r.data,flags:r.flags}):d.abcBlocks=[{data:r.data,flags:r.flags}];break;case 12:(v=d.actionBlocks)?v.push(r.actionsData):d.actionBlocks=[r.actionsData];break;case 59:(d.initActionBlocks||(d.initActionBlocks=[])).push({spriteId:r.spriteId,actionsData:r.actionsData});break;case 15:v=d.startSounds;v||(d.startSounds=v=[]);v.push(r);break;case 18:try{f=createSoundStream(r),d.soundStream=f.info}catch(u){}break;case 19:f&&(d.soundStreamBlock=f.decode(r.data));
break;case 56:v=d.exports;d.exports=v?v.concat(r.exports):r.exports.slice(0);break;case 76:v=d.symbolClasses;d.symbolClasses=v?v.concat(r.exports):r.exports.slice(0);break;case 43:d.labelName=r.name;break;case 4:case 26:case 70:e[r.depth]=r;break;case 5:case 28:e[r.depth]=null;break;case 9:d.bgcolor=r.color;break;case 1:d.repeat=r.repeat,d.depths=e,d.complete=!!r.finalTag,a(d),e={},d={type:"frame"}}}},oncomplete:function(b){a(b);var d;"number"===typeof b.swfVersion&&(d=b.bbox,d={topic:"parseInfo",
parseTime:b.parseTime,bytesTotal:b.bytesTotal,swfVersion:b.swfVersion,frameRate:b.frameRate,width:(d.xMax-d.xMin)/20,height:(d.yMax-d.yMin)/20,isAvm2:!!b.fileAttributes.doAbc});a({command:"complete",stats:d})},onexception:function(b){a({type:"exception",message:b.message,stack:b.stack})}}}function parseBytes(a,e){SWF.parse(a,createParsingContext(e))}
function ResourceLoader(a){this.subscription=null;var e=this;isWorker?(this.messenger=a,a.onmessage=function(a){e.listener(a.data)}):this.messenger={postMessage:function(a){e.onmessage({data:a})}}}
ResourceLoader.prototype={terminate:function(){this.listener=this.messenger=null},onmessage:function(a){this.listener(a.data)},postMessage:function(a){this.listener&&this.listener(a)},listener:function(a){this.subscription?this.subscription.callback(a.data,a.progress):"pipe:"===a?(this.subscription={subscribe:function(a){this.callback=a}},this.parseLoadedData(this.messenger,this.subscription)):this.parseLoadedData(this.messenger,a)},parseLoadedData:function(a,e){function b(b,d){try{a.postMessage(b,
d)}catch(e){if("DataCloneError"!=e)throw e;a.postMessage(b)}}if(e instanceof ArrayBuffer)parseBytes(e,b);else if("subscribe"in e){var d=SWF.parseAsync(createParsingContext(b));e.subscribe(function(a,b){a?d.push(a,b):d.close()})}else if("undefined"!==typeof FileReaderSync){var g=new FileReaderSync,g=g.readAsArrayBuffer(e);parseBytes(g,b)}else g=new FileReader,g.onload=function(){parseBytes(this.result,b)},g.readAsArrayBuffer(e)}};if(isWorker)var loader=new ResourceLoader(this);
function ActionsDataStream(a,e){this.array=a;this.position=0;this.end=a.length;this.readString=6<=e?this.readUTF8String:this.readANSIString;var b=new ArrayBuffer(4);(new Int32Array(b))[0]=1;if(!(new Uint8Array(b))[0])throw Error("big-endian platform");}
ActionsDataStream.prototype={readUI8:function(){return this.array[this.position++]},readUI16:function(){var a=this.position,e=this.array,e=e[a+1]<<8|e[a];this.position=a+2;return e},readSI16:function(){var a=this.position,e=this.array,e=e[a+1]<<8|e[a];this.position=a+2;return 32768>e?e:e-65536},readInteger:function(){var a=this.position,e=this.array,e=e[a]|e[a+1]<<8|e[a+2]<<16|e[a+3]<<24;this.position=a+4;return e},readFloat:function(){var a=this.position,e=this.array,b=new ArrayBuffer(4),d=new Uint8Array(b);
d[0]=e[a];d[1]=e[a+1];d[2]=e[a+2];d[3]=e[a+3];this.position=a+4;return(new Float32Array(b))[0]},readDouble:function(){var a=this.position,e=this.array,b=new ArrayBuffer(8),d=new Uint8Array(b);d[4]=e[a];d[5]=e[a+1];d[6]=e[a+2];d[7]=e[a+3];d[0]=e[a+4];d[1]=e[a+5];d[2]=e[a+6];d[3]=e[a+7];this.position=a+8;return(new Float64Array(b))[0]},readBoolean:function(){return!!this.readUI8()},readANSIString:function(){for(var a="",e;e=this.readUI8();)a+=String.fromCharCode(e);return a},readUTF8String:function(){for(var a=
"",e;e=this.readUI8();)if(128>e)a+=String.fromCharCode(e);else{if(128===(e&192))throw Error("Invalid UTF8 encoding");var b=192,d=5;do{var g=b>>1|128;if((e&g)===b)break;b=g;--d}while(0<=d);b=e&(1<<d)-1;for(g=5;g>=d;--g){e=this.readUI8();if(128!==(e&192))throw Error("Invalid UTF8 encoding");b=b<<6|e&63}a=65536<=b?a+String.fromCharCode(b-65536>>10&1023|55296,b&1023|56320):a+String.fromCharCode(b)}return a},readBytes:function(a){var e=this.position,b=Math.max(this.end-e,0);b<a&&(a=b);b=this.array.subarray(e,
e+a);this.position=e+a;return b}};"undefined"!==typeof GLOBAL&&(GLOBAL.ActionsDataStream=ActionsDataStream);var AVM1_TRACE_ENABLED=!1,AVM1_ERRORS_IGNORED=!0,MAX_AVM1_HANG_TIMEOUT=1E3,MAX_AVM1_ERRORS_LIMIT=1E3,MAX_AVM1_STACK_LIMIT=256;function AS2ScopeListItem(a,e){this.scope=a;this.next=e}AS2ScopeListItem.prototype={create:function(a){return new AS2ScopeListItem(a,this)}};
function AS2Context(a){this.swfVersion=a;this.globals=new avm1lib.AS2Globals(this);this.initialScope=new AS2ScopeListItem(this.globals,null);this.assets={};this.executionProhibited=this.isActive=!1;this.stackDepth=this.abortExecutionAt=0;this.isTryCatchListening=!1;this.errorsIgnored=0;this.deferScriptExecution=!0;this.pendingScripts=[]}AS2Context.instance=null;
AS2Context.prototype={addAsset:function(a,e){this.assets[a]=e},resolveTarget:function(a){a?"string"===typeof a&&(a=lookupAS2Children(a,this.defaultTarget,this.globals.asGetPublicProperty("_root"))):a=this.defaultTarget;if("object"!==typeof a||null===a||!("$nativeObject"in a))throw Error("Invalid AS2 target object: "+Object.prototype.toString.call(a));return a},resolveLevel:function(a){return this.resolveTarget(this.globals["_level"+a])},addToPendingScripts:function(a){if(!this.deferScriptExecution)return a();
this.pendingScripts.push(a)},flushPendingScripts:function(){for(var a=this.pendingScripts;a.length;)a.shift()();this.deferScriptExecution=!1}};function AS2Error(a){this.error=a}function AS2CriticalError(a,e){this.message=a;this.error=e}AS2CriticalError.prototype=Object.create(Error.prototype);function isAS2MovieClip(a){return"object"===typeof a&&a&&a instanceof avm1lib.AS2MovieClip}
function as2GetType(a){if(null===a)return"null";var e=typeof a;return"function"===e?"object":"object"===e&&isAS2MovieClip(a)?"movieclip":e}function as2ToPrimitive(a){return"object"!==as2GetType(a)?a:a.valueOf()}function as2ToAddPrimitive(a){return"object"!==as2GetType(a)?a:a instanceof Date&&6<=AS2Context.instance.swfVersion?a.toString():a.valueOf()}
function as2ToBoolean(a){switch(as2GetType(a)){default:case "undefined":case "null":return!1;case "boolean":return a;case "number":return 0!==a&&!isNaN(a);case "string":return 0!==a.length;case "movieclip":case "object":return!0}}
function as2ToNumber(a){a=as2ToPrimitive(a);switch(as2GetType(a)){case "undefined":case "null":return 7<=AS2Context.instance.swfVersion?NaN:0;case "boolean":return a?1:0;case "number":return a;case "string":return""===a&&5>AS2Context.instance.swfVersion?0:+a;default:return 5<=AS2Context.instance.swfVersion?NaN:0}}function as2ToInteger(a){a=as2ToNumber(a);return isNaN(a)?0:!isFinite(a)||0===a?a:(0>a?-1:1)*Math.abs(a)|0}
function as2ToInt32(a){a=as2ToNumber(a);return isNaN(a)||!isFinite(a)||0===a?0:a|0}
function as2ToString(a){switch(as2GetType(a)){case "undefined":return 7<=AS2Context.instance.swfVersion?"undefined":"";case "null":return"null";case "boolean":return a?"true":"false";case "number":return a.toString();case "string":return a;case "movieclip":return a.$targetPath;case "object":var e=a.toString!==Function.prototype.toString?a.toString():a;return"string"===typeof e?e:"function"===typeof a?"[type Function]":"[type Object]"}}
function as2Compare(a,e){var b=as2ToPrimitive(a),d=as2ToPrimitive(e);return"string"===typeof b&&"string"===typeof d?b<d:as2ToNumber(b)<as2ToNumber(d)}function as2InstanceOf(a,e){return a instanceof e?!0:!1}function as2ResolveProperty(a,e){var b=Multiname.getPublicQualifiedName(e);if(b in a)return e;if(isNumeric(e))return null;var b=b.toLowerCase(),d;for(d in a)if(d.toLowerCase()===b)return d.substr(Multiname.PUBLIC_QUALIFIED_NAME_PREFIX.length);return null}
function as2GetPrototype(a){return a&&a.asGetPublicProperty("prototype")}function isAvm2Class(a){return"object"===typeof a&&null!==a&&"instanceConstructor"in a}
function as2CreatePrototypeProxy(a){var e=a.asGetPublicProperty("prototype");return"undefined"===typeof Proxy?(console.error("ES6 proxies are not found"),e):Proxy.create({getOwnPropertyDescriptor:function(a){return Object.getOwnPropertyDescriptor(e,a)},getPropertyDescriptor:function(a){for(var d=e;d;d=Object.getPrototypeOf(d)){var g=Object.getOwnPropertyDescriptor(d,a);if(g)return g}},getOwnPropertyNames:function(){return Object.getOwnPropertyNames(e)},getPropertyNames:function(){for(var a=Object.getOwnPropertyNames(e),
d=Object.getPrototypeOf(e);d;d=Object.getPrototypeOf(d))a=a.concat(Object.getOwnPropertyNames(d));return a},defineProperty:function(b,d){d&&("function"===typeof d.value&&d.value._setClass&&d.value._setClass(a),"function"===typeof d.get&&d.get._setClass&&d.get._setClass(a),"function"===typeof d.set&&d.set._setClass&&d.set._setClass(a));return Object.defineProperty(e,b,d)},"delete":function(a){return delete e[a]},fix:function(){}})}
function executeActions(a,e,b){if(!e.executionProhibited){var d=ActionTracerFactory.get(),g=e.initialScope.create(b),f=AS2Context.instance;try{AS2Context.instance=e,e.isActive=!0,e.abortExecutionAt=Date.now()+1E3,e.errorsIgnored=0,e.defaultTarget=b,e.globals.asSetPublicProperty("this",b),d.message("ActionScript Execution Starts"),d.indent(),interpretActions(a,g,null,[])}catch(l){throw l instanceof AS2CriticalError&&(console.error("Disabling AVM1 execution"),e.executionProhibited=!0),l;}finally{e.isActive=
!1,d.unindent(),d.message("ActionScript Execution Stops"),AS2Context.instance=f}}}function lookupAS2Children(a,e,b){var d=a.split(/[\/.]/g);""===d[d.length-1]&&d.pop();if(""===d[0]||"_level0"===d[0]||"_root"===d[0])e=b,d.shift();for(;0<d.length;){b=e;e=e.$lookupChild(d[0]);if(!e)throw Error(d[0]+" (expr "+a+") is not found in "+b._target);d.shift()}return e}
function createBuiltinType(a,e){if(a===Array){var b=e;1==e.length&&"number"===typeof e[0]&&(b=[],b.length=e[0]);return b}if(a===Boolean||a===Number||a===String||a===Function)return a.apply(null,e);if(a===Date)switch(e.length){case 0:return new Date;case 1:return new Date(e[0]);default:return new Date(e[0],e[1],2<e.length?e[2]:1,3<e.length?e[3]:0,4<e.length?e[4]:0,5<e.length?e[5]:0,6<e.length?e[6]:0)}if(a===Object)return{}}var AS2_SUPER_STUB={};
function interpretActions(a,e,b,d){function g(a){if(a)try{A.defaultTarget=lookupAS2Children(a,B,s.asGetPublicProperty("_root"))}catch(b){throw A.defaultTarget=null,b;}else A.defaultTarget=D}function f(a,d,g,f){var l,m=function(){var a={};a.asSetPublicProperty("this",this);a.asSetPublicProperty("arguments",arguments);a.asSetPublicProperty("super",AS2_SUPER_STUB);a.asSetPublicProperty("__class",l);var m=e.create(a),r;for(r=0;r<arguments.length||r<d.length;r++)a.asSetPublicProperty(d[r],arguments[r]);
a=[];if(g)for(r=0;r<g.length;r++){var p=g[r];if(p)if("param"==p.type)a[r]=arguments[p.index];else switch(p.name){case "this":a[r]=this;break;case "arguments":a[r]=arguments;break;case "super":a[r]=AS2_SUPER_STUB;break;case "_global":a[r]=s;break;case "_parent":a[r]=D.asGetPublicProperty("_parent");break;case "_root":a[r]=s.asGetPublicProperty("_root")}}r=AS2Context.instance;p=A.isActive;try{AS2Context.instance=A;p||(A.abortExecutionAt=Date.now()+1E3,A.errorsIgnored=0,A.isActive=!0);A.defaultTarget=
D;C.indent();A.stackDepth++;if(256<=A.stackDepth)throw new AS2CriticalError("long running script -- AVM1 recursion limit is reached");return interpretActions(f,m,b,a)}finally{A.isActive=p,A.stackDepth--,C.unindent(),A.defaultTarget=B,AS2Context.instance=r}};l=m;m._setClass=function(a){l=a};m.instanceConstructor=m;m.debugName="avm1 "+(a||"<function>");a&&(m.name=a);return m}function l(a,b){var d,e,g;if(0<=a.indexOf(":")){e=a.split(":");d=lookupAS2Children(e[0],B,s.asGetPublicProperty("_root"));if(!d)throw Error(e[0]+
" is undefined");e=e[1]}else if(0<=a.indexOf(".")){var f=a.split(".");e=f.pop();d=s;for(g=0;g<f.length;g++)if(d=d.asGetPublicProperty(f[g])||d[f[g]],!d)throw Error(f.slice(0,g+1)+" is undefined");}if(!d)return null;g=as2ResolveProperty(d,e);return(f=null!==g)||b?{obj:d,name:g||e,resolved:f}:null}function m(){var a=D.asGetPublicProperty("this");if(a)return a;for(a=e;a;a=a.next)if(sa=as2ResolveProperty(a.scope,"this"),null!==sa)return a.scope.asGetPublicProperty(sa)}function p(a){if(D.asHasProperty(void 0,
a,0))return D.asGetPublicProperty(a);var b=l(a);if(b)return b.obj.asGetPublicProperty(b.name);for(var d,b=m(),g=e;g;g=g.next)if(d=as2ResolveProperty(g.scope,a),null!==d)return g.scope.asGetPublicProperty(d);if(b&&(d=as2ResolveProperty(b,a)))return b.asGetPublicProperty(d);if(a=isAS2MovieClip(B)&&B.$lookupChild(a))return a}function r(a){var b=p(a);if(!(b instanceof Object))throw Error('Object "'+a+'" is not found');return b}function v(a,b){if(isNaN(a)||0>a||a>b||a!=(0|a))throw Error("Invalid number of arguments: "+
a);}function u(a){var b=+a.pop();v(b,a.length);for(var d=[],e=0;e<b;e++)d.push(a.pop());return d}function w(a){for(;0<a&&z.position<z.end;){var b=128<=z.readUI8()?z.readUI16():0;z.position+=b;a--}E=z.position}var A=AS2Context.instance,z=new ActionsDataStream(a,A.swfVersion),s=A.globals,B=A.defaultTarget,y=[],D=e.scope,G=5<=A.swfVersion,C=ActionTracerFactory.get(),E;D.$nativeObject&&D.$nativeObject._deferScriptExecution&&(A.deferScriptExecution=!0);for(var I=!1,K;z.position<z.end;)try{for(var S=0,
R=A.abortExecutionAt;z.position<z.end;){if(0===S++%100&&Date.now()>=R)throw new AS2CriticalError("long running script -- AVM1 instruction hang timeout");var L=z.readUI8(),F=128<=L?z.readUI16():0;E=z.position+F;K=0;C.print(z.position,L,y);var O,N,H,P,M,U,J,Q,W,ga,fa,$,ca,la,ha,sa,oa,ia,aa,ea,ra,ja,Ba,Ga,ba,qa,Ja,na,X,va,Ca,za;switch(L|0){case 129:O=z.readUI16();var Ma=z.readUI8();E++;$=6===Ma?"gotoAndPlay":"gotoAndStop";s[$](O+1);break;case 131:var wa=z.readString(),Ha=z.readString();s.getURL(wa,Ha);
break;case 4:s.nextFrame();break;case 5:s.prevFrame();break;case 6:s.play();break;case 7:s.stop();break;case 8:s.toggleHighQuality();break;case 9:s.stopAllSounds();break;case 138:O=z.readUI16();H=z.readUI8();s.ifFrameLoaded(O)||w(H);break;case 139:la=z.readString();g(la);break;case 140:var Pa=z.readString();s.gotoLabel(Pa);break;case 150:for(;z.position<E;){N=z.readUI8();switch(N){case 0:ia=z.readString();break;case 1:ia=z.readFloat();break;case 2:ia=null;break;case 3:ia=void 0;break;case 4:ia=d[z.readUI8()];
break;case 5:ia=z.readBoolean();break;case 6:ia=z.readDouble();break;case 7:ia=z.readInteger();break;case 8:ia=b[z.readUI8()];break;case 9:ia=b[z.readUI16()];break;default:throw Error("Unknown value type: "+N);}y.push(ia)}break;case 23:y.pop();break;case 10:aa=as2ToNumber(y.pop());ea=as2ToNumber(y.pop());y.push(aa+ea);break;case 11:aa=as2ToNumber(y.pop());ea=as2ToNumber(y.pop());y.push(ea-aa);break;case 12:aa=as2ToNumber(y.pop());ea=as2ToNumber(y.pop());y.push(aa*ea);break;case 13:aa=as2ToNumber(y.pop());
ea=as2ToNumber(y.pop());ra=ea/aa;y.push(G?ra:isFinite(ra)?ra:"#ERROR#");break;case 14:aa=as2ToNumber(y.pop());ea=as2ToNumber(y.pop());ja=aa==ea;y.push(G?ja:ja?1:0);break;case 15:aa=as2ToNumber(y.pop());ea=as2ToNumber(y.pop());ja=ea<aa;y.push(G?ja:ja?1:0);break;case 16:aa=as2ToBoolean(y.pop());ea=as2ToBoolean(y.pop());ja=aa&&ea;y.push(G?ja:ja?1:0);break;case 17:aa=as2ToBoolean(y.pop());ea=as2ToBoolean(y.pop());ja=aa||ea;y.push(G?ja:ja?1:0);break;case 18:ja=!as2ToBoolean(y.pop());y.push(G?ja:ja?1:0);
break;case 19:Ba=as2ToString(y.pop());Ga=as2ToString(y.pop());ja=Ba==Ga;y.push(G?ja:ja?1:0);break;case 20:case 49:Ba=as2ToString(y.pop());y.push(s.length(Ba));break;case 33:Ba=as2ToString(y.pop());Ga=as2ToString(y.pop());y.push(Ga+Ba);break;case 21:H=y.pop();P=y.pop();ia=as2ToString(y.pop());y.push(s.substring(ia,P,H));break;case 53:H=y.pop();P=y.pop();ia=as2ToString(y.pop());y.push(s.mbsubstring(ia,P,H));break;case 41:Ba=as2ToString(y.pop());Ga=as2ToString(y.pop());ja=Ga<Ba;y.push(G?ja:ja?1:0);break;
case 24:y.push(s.int(y.pop()));break;case 50:y.push(s.chr(y.pop()));break;case 54:y.push(s.mbchr(y.pop()));break;case 51:y.push(s.ord(y.pop()));break;case 55:y.push(s.mbord(y.pop()));break;case 153:W=z.readSI16();E+=W;break;case 157:W=z.readSI16();(ja=!!y.pop())&&(E+=W);break;case 158:Pa=y.pop();s.call(Pa);break;case 28:fa=""+y.pop();K++;y.push(p(fa));break;case 29:ia=y.pop();fa=""+y.pop();a:{var xa=fa,ma=ia;if(D.asHasProperty(void 0,xa,0))D.asSetPublicProperty(xa,ma);else{var Da=l(xa,!0);if(Da)Da.obj.asSetPublicProperty(Da.name,
ma);else{var Qa=void 0,Ra=m();if(Ra&&(Qa=as2ResolveProperty(Ra,xa)))Ra.asSetPublicProperty(Qa,ma);else{for(var Ua=e;Ua.next;Ua=Ua.next)if(Qa=as2ResolveProperty(Ua.scope,xa),null!==Qa){Ua.scope.asSetPublicProperty(Qa,ma);break a}(Ra||D).asSetPublicProperty(xa,ma)}}}}break;case 154:X=z.readUI8();M=y.pop();var Ya=y.pop(),Va;X&1?Va="GET":X&2&&(Va="POST");if(!(X&64)){s.getURL(Ya,M,Va);break}X&128?s.loadVariables(Ya,M,Va):s.loadMovie(Ya,M,Va);break;case 159:X=z.readUI8();var $a=[y.pop()];X&2&&$a.push(z.readUI16());
(X&1?s.gotoAndPlay:s.gotoAndStop).apply(s,$a);break;case 32:M=y.pop();g(M);break;case 34:P=y.pop();M=y.pop();K++;y.push(s.getAS2Property(M,P));break;case 35:ia=y.pop();P=y.pop();M=y.pop();s.setAS2Property(M,P,ia);break;case 36:var db=y.pop();M=y.pop();var eb=y.pop();s.duplicateMovieClip(eb,M,db);break;case 37:M=y.pop();s.removeMovieClip(M);break;case 39:M=y.pop();var fb=y.pop(),Wa=!y.pop()?null:{y2:y.pop(),x2:y.pop(),y1:y.pop(),x1:y.pop()};Ca=[M,fb];Wa&&(Ca=Ca.push(Wa.x1,Wa.y1,Wa.x2,Wa.y2));s.startDrag.apply(s,
Ca);break;case 40:s.stopDrag();break;case 141:H=z.readUI8();O=y.pop();s.ifFrameLoaded(O)||w(H);break;case 38:ia=y.pop();s.trace(ia);break;case 52:y.push(s.getTimer());break;case 48:y.push(s.random(y.pop()));break;case 61:ca=y.pop();qa=u(y);K++;var ab=ca,bb=p(ab);if(!(bb instanceof Function))throw Error('Function "'+ab+'" is not found');Ja=bb;na=Ja.apply(D,qa);y.push(na);break;case 82:$=y.pop();ba=y.pop();qa=u(y);K++;if(null!==$&&void 0!==$&&""!==$){if(null===ba||void 0===ba)throw Error("Cannot call method "+
$+" of "+typeof ba);ba!==AS2_SUPER_STUB?M=Object(ba):(M=as2GetPrototype(p("__class").__super),ba=p("this"));sa=as2ResolveProperty(M,$);if(null===sa)throw Error("Method "+$+" is not defined.");na=M.asGetPublicProperty(sa).apply(ba,qa)}else na=ba!==AS2_SUPER_STUB?ba.apply(ba,qa):p("__class").__super.apply(p("this"),qa);y.push(na);break;case 136:H=z.readUI16();b=[];for(va=0;va<H;va++)b.push(z.readString());break;case 155:ca=z.readString();H=z.readUI16();qa=[];for(va=0;va<H;va++)qa.push(z.readString());
Q=z.readUI16();E+=Q;Ja=f(ca,qa,null,z.readBytes(Q));ca?D.asSetPublicProperty(ca,Ja):y.push(Ja);break;case 60:ia=y.pop();ga=y.pop();D.asSetPublicProperty(ga,ia);break;case 65:ga=y.pop();D.asSetPublicProperty(ga,void 0);break;case 58:ga=y.pop();ba=y.pop();ba.asSetPublicProperty(ga,void 0);y.push(ba.asDeleteProperty(void 0,ga,0));break;case 59:ga=y.pop();a:{for(var ka=ga,Ta=e;Ta;Ta=Ta.next)if(Ta.scope.asHasProperty(void 0,ka,0)){Ta.scope.asSetPublicProperty(ka,void 0);na=Ta.scope.asDeleteProperty(void 0,
ka,0);break a}na=!1}y.push(na);break;case 70:oa=y.pop();y.push(null);ba=r(oa);forEachPublicProperty(ba,function(a){y.push(a)});break;case 73:aa=y.pop();ea=y.pop();y.push(aa==ea);break;case 78:ga=y.pop();ba=y.pop();"prototype"===ga?y.push(as2CreatePrototypeProxy(ba)):(sa=as2ResolveProperty(Object(ba),ga),y.push(null===sa?void 0:ba.asGetPublicProperty(sa)));break;case 66:ba=u(y);y.push(ba);break;case 67:H=+y.pop();v(H,y.length>>1);ba={};for(va=0;va<H;va++)ia=y.pop(),ga=y.pop(),ba.asSetPublicProperty(ga,
ia);y.push(ba);break;case 83:$=y.pop();ba=y.pop();qa=u(y);K++;if(null!==$&&void 0!==$&&""!==$){sa=as2ResolveProperty(ba,$);if(null===sa)throw Error("Method "+$+" is not defined.");if(null===ba||void 0===ba)throw Error("Cannot call new using method "+sa+" of "+typeof ba);U=ba.asGetPublicProperty(sa)}else{if(null===ba||void 0===ba)throw Error("Cannot call new using "+typeof ba);U=ba}isAvm2Class(ba)?na=construct(ba,qa):(na=Object.create(as2GetPrototype(U)||as2GetPrototype(Object)),U.apply(na,qa));na.constructor=
U;y.push(na);break;case 64:oa=y.pop();ba=r(oa);qa=u(y);K++;na=createBuiltinType(ba,qa);"undefined"===typeof na&&(isAvm2Class(ba)?na=construct(ba,qa):(na=Object.create(as2GetPrototype(ba)||as2GetPrototype(Object)),ba.apply(na,qa)),na.constructor=ba);y.push(na);break;case 79:ia=y.pop();ga=y.pop();ba=y.pop();ba.asSetPublicProperty(ga,ia);break;case 69:ba=y.pop();y.push("movieclip"===as2GetType(ba)?ba._target:void 0);break;case 148:Q=z.readUI16();ba=y.pop();E+=Q;var gb=z.readBytes(Q),Za=e.create(Object(ba));
interpretActions(gb,Za,b,d);break;case 74:y.push(as2ToNumber(y.pop()));break;case 75:y.push(as2ToString(y.pop()));break;case 68:ba=y.pop();na=as2GetType(ba);y.push(na);break;case 71:aa=as2ToAddPrimitive(y.pop());ea=as2ToAddPrimitive(y.pop());"string"===typeof aa||"string"===typeof ea?y.push(as2ToString(ea)+as2ToString(aa)):y.push(as2ToNumber(ea)+as2ToNumber(aa));break;case 72:aa=y.pop();ea=y.pop();y.push(as2Compare(ea,aa));break;case 63:aa=as2ToNumber(y.pop());ea=as2ToNumber(y.pop());y.push(ea%aa);
break;case 96:aa=as2ToInt32(y.pop());ea=as2ToInt32(y.pop());y.push(ea&aa);break;case 99:aa=as2ToInt32(y.pop());ea=as2ToInt32(y.pop());y.push(ea<<aa);break;case 97:aa=as2ToInt32(y.pop());ea=as2ToInt32(y.pop());y.push(ea|aa);break;case 100:aa=as2ToInt32(y.pop());ea=as2ToInt32(y.pop());y.push(ea>>aa);break;case 101:aa=as2ToInt32(y.pop());ea=as2ToInt32(y.pop());y.push(ea>>>aa);break;case 98:aa=as2ToInt32(y.pop());ea=as2ToInt32(y.pop());y.push(ea^aa);break;case 81:aa=as2ToNumber(y.pop());aa--;y.push(aa);
break;case 80:aa=as2ToNumber(y.pop());aa++;y.push(aa);break;case 76:y.push(y[y.length-1]);break;case 62:return y.pop();case 77:y.push(y.pop(),y.pop());break;case 135:za=z.readUI8();d[za]=y[y.length-1];break;case 84:J=y.pop();ba=y.pop();y.push(as2InstanceOf(Object(ba),J));break;case 85:ba=y.pop();y.push(null);forEachPublicProperty(ba,function(a){y.push(a)});break;case 102:aa=y.pop();ea=y.pop();y.push(ea===aa);break;case 103:aa=y.pop();ea=y.pop();y.push(as2Compare(aa,ea));break;case 104:Ba=as2ToString(y.pop());
Ga=as2ToString(y.pop());ja=Ga>Ba;y.push(G?ja:ja?1:0);break;case 142:ca=z.readString();H=z.readUI16();z.readUI8();X=z.readUI16();var ta=[];qa=[];for(va=0;va<H;va++)za=z.readUI8(),ha=z.readString(),qa.push(ha),za&&(ta[za]={type:"param",name:ha,index:va});Q=z.readUI16();E+=Q;var ya=1;X&1&&(ta[ya++]={type:"var",name:"this"});X&4&&(ta[ya++]={type:"var",name:"arguments"});X&16&&(ta[ya++]={type:"var",name:"super"});X&64&&(ta[ya++]={type:"var",name:"_root"});X&128&&(ta[ya++]={type:"var",name:"_parent"});
X&256&&(ta[ya++]={type:"var",name:"_global"});Ja=f(ca,qa,ta,z.readBytes(Q));ca?D.asSetPublicProperty(ca,Ja):y.push(Ja);break;case 105:var Na=y.pop();J=y.pop();ba=Object.create(Na.traitsPrototype||as2GetPrototype(Na),{constructor:{value:J,enumerable:!1}});J.__super=Na;J.prototype=ba;break;case 43:ba=y.pop();J=y.pop();y.push(as2InstanceOf(ba,J)?ba:null);break;case 44:J=y.pop();H=+y.pop();v(H,y.length);var pa=[];for(va=0;va<H;va++)pa.push(y.pop());J.$interfaces=pa;break;case 143:X=z.readUI8();var Aa=
!!(X&4),Ka=!!(X&2),Y=!!(X&1),Z=z.readUI16(),Ea=z.readUI16(),Ia=z.readUI16(),La=Aa?z.readUI8():z.readString();E+=Z+Ea+Ia;var T=Ka,da=Y,Fa=La,V=z.readBytes(Z),ua=z.readBytes(Ea),Oa=z.readBytes(Ia),cb=A.isTryCatchListening;try{A.isTryCatchListening=!0,interpretActions(V,e,b,d)}catch(Xa){A.isTryCatchListening=cb;if(!da)throw Xa;if(!(Xa instanceof AS2Error))throw Xa;"string"===typeof Fa?D[Fa]=Xa.error:d[Fa]=Xa.error;interpretActions(ua,e,b,d)}finally{A.isTryCatchListening=cb,T&&interpretActions(Oa,e,b,
d)}break;case 42:throw ba=y.pop(),new AS2Error(ba);case 45:qa=u(y);K++;na=s.fscommand.apply(null,qa);y.push(na);break;case 137:z.readUI8();break;case 0:return;default:throw Error("Unknown action code: "+L);}z.position=E;I=!1}}catch(Sa){if(Sa instanceof AS2CriticalError)throw Sa;if(Sa instanceof AS2Error)throw Sa;TelemetryService.reportTelemetry({topic:"error",error:1});z.position=E;if(0<K)for(;K--;)y.push(void 0);if(!I){if(1E3<=A.errorsIgnored++)throw new AS2CriticalError("long running script -- AVM1 errors limit is reached");
console.error("AVM1 error: "+Sa);avm2.exceptions.push({source:"avm1",message:Sa.message,stack:Sa.stack});I=!0}}}
var ActionTracerFactory=function(){function a(){}var e={print:function(){},indent:function(){},unindent:function(){},message:function(){}};a.get=function(){return e};return a}(),ActionNamesMap={"0":"EOA",4:"ActionNextFrame",5:"ActionPreviousFrame",6:"ActionPlay",7:"ActionStop",8:"ActionToggleQuality",9:"ActionStopSounds",10:"ActionAdd",11:"ActionSubtract",12:"ActionMultiply",13:"ActionDivide",14:"ActionEquals",15:"ActionLess",16:"ActionAnd",17:"ActionOr",18:"ActionNot",19:"ActionStringEquals",20:"ActionStringLength",
21:"ActionStringExtract",23:"ActionPop",24:"ActionToInteger",28:"ActionGetVariable",29:"ActionSetVariable",32:"ActionSetTarget2",33:"ActionStringAdd",34:"ActionGetProperty",35:"ActionSetProperty",36:"ActionCloneSprite",37:"ActionRemoveSprite",38:"ActionTrace",39:"ActionStartDrag",40:"ActionEndDrag",41:"ActionStringLess",42:"ActionThrow",43:"ActionCastOp",44:"ActionImplementsOp",45:"ActionFSCommand2",48:"ActionRandomNumber",49:"ActionMBStringLength",50:"ActionCharToAscii",51:"ActionAsciiToChar",52:"ActionGetTime",
53:"ActionMBStringExtrac",54:"ActionMBCharToAscii",55:"ActionMBAsciiToChar",58:"ActionDelete",59:"ActionDelete2",60:"ActionDefineLocal",61:"ActionCallFunction",62:"ActionReturn",63:"ActionModulo",64:"ActionNewObject",65:"ActionDefineLocal2",66:"ActionInitArray",67:"ActionInitObject",68:"ActionTypeOf",69:"ActionTargetPath",70:"ActionEnumerate",71:"ActionAdd2",72:"ActionLess2",73:"ActionEquals2",74:"ActionToNumber",75:"ActionToString",76:"ActionPushDuplicate",77:"ActionStackSwap",78:"ActionGetMember",
79:"ActionSetMember",80:"ActionIncrement",81:"ActionDecrement",82:"ActionCallMethod",83:"ActionNewMethod",84:"ActionInstanceOf",85:"ActionEnumerate2",96:"ActionBitAnd",97:"ActionBitOr",98:"ActionBitXor",99:"ActionBitLShift",100:"ActionBitRShift",101:"ActionBitURShift",102:"ActionStrictEquals",103:"ActionGreater",104:"ActionStringGreater",105:"ActionExtends",129:"ActionGotoFrame",131:"ActionGetURL",135:"ActionStoreRegister",136:"ActionConstantPool",137:"ActionStrictMode",138:"ActionWaitForFrame",139:"ActionSetTarget",
140:"ActionGoToLabel",141:"ActionWaitForFrame2",142:"ActionDefineFunction",143:"ActionTry",148:"ActionWith",150:"ActionPush",153:"ActionJump",154:"ActionGetURL2",155:"ActionDefineFunction",157:"ActionIf",158:"ActionCall",159:"ActionGotoFrame2"};"undefined"!==typeof GLOBAL&&(GLOBAL.createBuiltinType=createBuiltinType,GLOBAL.executeActions=executeActions,GLOBAL.AS2Context=AS2Context);
var $DEBUG,release=!0,checkArguments=!0,useSurrogates=!0,useAsAdd=!0,sealConstTraits=!1,c4CoerceNonPrimitiveParameters=!1,c4CoerceNonPrimitive=!1,c4AsTypeLate=!0,inBrowser="undefined"!=typeof console;this.performance||(this.performance={});this.performance.now||(this.performance.now=dateNow);function backtrace(){try{throw Error();}catch(a){return a.stack?a.stack.split("\n").slice(2).join("\n"):""}}function error(a){inBrowser||console.warn(backtrace());throw Error(a);}
function assert(a){""===a&&(a=!0);if(!a){var e=Array.prototype.slice.call(arguments);e.shift();error(e.join(""))}}function assertNotImplemented(a,e){a||error("NotImplemented: "+e)}function warning(){!0}function notUsed(){!0}function notImplemented(){!0}function somewhatImplemented(a){warning("somewhatImplemented: "+a)}function unexpected(){}function makeForwardingGetter(a){return new Function('return this["'+a+'"]')}
function makeForwardingSetter(a){return new Function("value",'this["'+a+'"] = value;')}function defineReadOnlyProperty(a,e,b){Object.defineProperty(a,e,{value:b,writable:!1,configurable:!0,enumerable:!1})}function bindSafely(a,e){!0;var b=a.bind(e);b.boundTo=e;return b}function createEmptyObject(){return Object.create(null)}
function getOwnPropertyDescriptors(a){for(var e=createEmptyObject(),b=Object.getOwnPropertyNames(a),d=0;d<b.length;d++)e[b[d]]=Object.getOwnPropertyDescriptor(a,b[d]);return e}function cloneObject(a){var e=Object.create(null),b;for(b in a)e[b]=a[b];return e}function extendObject(a,e){var b=Object.create(a);if(e)for(var d in e)b[d]=e[d];return b}function copyProperties(a,e){for(var b in e)a[b]=e[b]}
function toSafeString(a){return"string"===typeof a?'"'+a+'"':"number"===typeof a||"boolean"===typeof a?String(a):typeof a}function toSafeArrayString(a){for(var e=[],b=0;b<a.length;b++)e.push(toSafeString(a[b]));return e.join(", ")}function getLatestGetterOrSetterPropertyDescriptor(a,e){for(var b={};a;){var d=Object.getOwnPropertyDescriptor(a,e);d&&(b.get=b.get||d.get,b.set=b.set||d.set);if(b.get&&b.set)break;a=Object.getPrototypeOf(a)}return b}
function defineNonEnumerableGetterOrSetter(a,e,b,d){var g=getLatestGetterOrSetterPropertyDescriptor(a,e);g.configurable=!0;g.enumerable=!1;d?g.get=b:g.set=b;Object.defineProperty(a,e,g)}function defineNonEnumerableGetter(a,e,b){Object.defineProperty(a,e,{get:b,configurable:!0,enumerable:!1})}function defineNonEnumerableSetter(a,e,b){Object.defineProperty(a,e,{set:b,configurable:!0,enumerable:!1})}
function defineNonEnumerableProperty(a,e,b){Object.defineProperty(a,e,{value:b,writable:!0,configurable:!0,enumerable:!1})}function defineNonEnumerableForwardingProperty(a,e,b){Object.defineProperty(a,e,{get:makeForwardingGetter(b),set:makeForwardingSetter(b),writable:!0,configurable:!0,enumerable:!1})}function defineNewNonEnumerableProperty(a,e,b){!0;defineNonEnumerableProperty(a,e,b)}function isNullOrUndefined(a){return void 0==a}function isPowerOfTwo(a){return a&&0===(a&a-1)}
function time(a,e){for(var b=performance.now(),d=0;d<e;d++)a();b=(performance.now()-b)/e;console.info("Took: "+b.toFixed(2)+"ms.");return b}function clamp(a,e,b){return a<e?e:a>b?b:a}function fromCharCodeArray(a){for(var e="",b=0;b<a.length;b+=16384)var d=Math.min(a.length-b,16384),e=e+String.fromCharCode.apply(null,a.subarray(b,b+d));return e}function hasOwnProperty(a,e){return Object.prototype.hasOwnProperty.call(a,e)}
function toKeyValueArray(a){var e=Object.prototype.hasOwnProperty,b=[],d;for(d in a)e.call(a,d)&&b.push([d,a[d]]);return b}function isNumeric(a){if("number"===typeof a)return a===(a|0);if("string"!==typeof a||0===a.length)return!1;if("0"===a)return!0;var e=a.charCodeAt(0);if(49<=e&&57>=e){for(var b=1,d=a.length;b<d;b++)if(e=a.charCodeAt(b),!(48<=e&&57>=e))return!1;return!0}return!1}function boxValue(a){return isNullOrUndefined(a)||isObject(a)?a:Object(a)}
function isObject(a){return"object"===typeof a||"function"===typeof a}function isString(a){return"string"===typeof a}function isFunction(a){return"function"===typeof a}function isNumber(a){return"number"===typeof a}function toNumber(a){return+a}function setBitFlags(a,e,b){return b?a|e:a&~e}function getBitFlags(a,e){return!!(a&e)}function popManyInto(a,e,b){!0;for(var d=e-1;0<=d;d--)b[d]=a.pop();b.length=e}
(function(){function a(a,b,e){a[b]||Object.defineProperty(a,b,{value:e,writable:!0,configurable:!0,enumerable:!1})}var e=String.prototype;a(e,"padRight",function(a,b){var e=this,l=e.replace(/\033\[[0-9]*m/g,"").length;if(!a||l>=b)return e;for(var l=(b-l)/a.length,m=0;m<l;m++)e+=a;return e});a(e,"padLeft",function(a,b){var e=this,l=e.length;if(!a||l>=b)return e;for(var l=(b-l)/a.length,m=0;m<l;m++)e=a+e;return e});a(e,"trim",function(){return this.replace(/^\s+|\s+$/g,"")});a(e,"endsWith",function(a){return-1!==
this.indexOf(a,this.length-a.length)});e=Array.prototype;a(e,"popMany",function(a){!0;var b=this.length-a,e=this.slice(b,this.length);this.splice(b,a);return e});a(e,"pushMany",function(a){for(var b=0;b<a.length;b++)this.push(a[b])});a(e,"clone",function(){return this.slice(0)});a(e,"first",function(){!0;return this[0]});a(e,"last",function(){!0;return this[this.length-1]});a(e,"peek",function(){!0;return this[this.length-1]});a(e,"empty",function(){return 0===this.length});a(e,"pushUnique",function(a){for(var b=
0,e=this.length;b<e;b++)if(this[b]===a)return;this.push(a)});var b;"undefined"!==typeof Map&&(b=new Map).clear?a(e,"unique",function(){for(var a=[],e=0;e<this.length;e++)b.has(this[e])||(a.push(this[e]),b.set(this[e],!0));b.clear();return a}):a(e,"unique",function(){for(var a=[],b=0;b<this.length;b++)a.pushUnique(this[b]);return a});a(e,"replace",function(a,b){if(a===b)return 0;for(var e=0,l=0;l<this.length;l++)this[l]===a&&(this[l]=b,e++);return e});a(e,"count",function(a){for(var b=0,e=0;e<this.length;e++)this[e]===
a&&b++;return b});a(e,"notEmpty",function(){return 0<this.length});a(e,"contains",function(a){return 0<=this.indexOf(a)});a(e,"top",function(){return this.length&&this[this.length-1]});a(e,"mapWithIndex",function(a){for(var b=[],e=0;e<this.length;e++)b.push(a(this[e],e));return b})})();
function utf8decode(a){for(var e=new Uint8Array(4*a.length),b=0,d=0,g=a.length;d<g;d++){var f=a.charCodeAt(d);if(127>=f)e[b++]=f;else{if(55296<=f&&56319>=f){var l=a.charCodeAt(d+1);56320<=l&&57343>=l&&(f=((f&1023)<<10)+(l&1023)+65536,++d)}0!==(f&4292870144)?(e[b++]=248|f>>>24&3,e[b++]=128|f>>>18&63,e[b++]=128|f>>>12&63,e[b++]=128|f>>>6&63):0!==(f&4294901760)?(e[b++]=240|f>>>18&7,e[b++]=128|f>>>12&63,e[b++]=128|f>>>6&63):0!==(f&4294965248)?(e[b++]=224|f>>>12&15,e[b++]=128|f>>>6&63):e[b++]=192|f>>>
6&31;e[b++]=128|f&63}}return e.subarray(0,b)}
function utf8encode(a){for(var e=0,b="";e<a.length;){var d=a[e++]&255;if(127>=d)b+=String.fromCharCode(d);else{var g=192,f=5;do{if((d&(g>>1|128))===g)break;g=g>>1|128;--f}while(0<=f);if(0>=f)b+=String.fromCharCode(d);else{for(var d=d&(1<<f)-1,g=!1,l=5;l>=f;--l){var m=a[e++];if(128!=(m&192)){g=!0;break}d=d<<6|m&63}if(g)for(f=e-(7-l);f<e;++f)b+=String.fromCharCode(a[f]&255);else b=65536<=d?b+String.fromCharCode(d-65536>>10&1023|55296,d&1023|56320):b+String.fromCharCode(d)}}}return b}
function getFlags(a,e){for(var b="",d=0;d<e.length;d++)a&1<<d&&(b+=e[d]+" ");return 0===b.length?"":b.trim()}function bitCount(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24}function escapeString(a){void 0!==a&&(a=a.replace(/[^\w$]/gi,"$"),/^\d/.test(a)&&(a="$"+a));return a}
function BitSetFunctor(a){function e(){this.dirty=this.count=0;this.size=d;this.bits=new Uint32Array(d>>5)}function b(){this.dirty=this.count=0;this.size=d;this.bits=0}var d=a+31>>5<<5,g=1===d>>5,f=g?b:e;f.ADDRESS_BITS_PER_WORD=5;f.BITS_PER_WORD=32;f.BIT_INDEX_MASK=31;f.singleword=g;e.prototype={recount:function(){if(this.dirty){for(var a=this.bits,b=0,d=0,e=a.length;d<e;d++)var g=a[d],g=g-(g>>1&1431655765),g=(g&858993459)+(g>>2&858993459),b=b+(16843009*(g+(g>>4)&252645135)>>24);this.count=b;this.dirty=
0}},set:function(a){var b=a>>5,d=this.bits[b];a=d|1<<(a&31);this.bits[b]=a;this.dirty|=d^a},setAll:function(){for(var a=this.bits,b=0,d=a.length;b<d;b++)a[b]=4294967295;this.count=this.size;this.dirty=0},assign:function(a){this.count=a.count;this.dirty=a.dirty;this.size=a.size;for(var b=0,d=this.bits.length;b<d;b++)this.bits[b]=a.bits[b]},clear:function(a){var b=a>>5,d=this.bits[b];a=d&~(1<<(a&31));this.bits[b]=a;this.dirty|=d^a},get:function(a){return 0!==(this.bits[a>>5]&1<<(a&31))},clearAll:function(){for(var a=
this.bits,b=0,d=a.length;b<d;b++)a[b]=0;this.dirty=this.count=0},_union:function(a){var b=this.dirty,d=this.bits;a=a.bits;for(var e=0,g=d.length;e<g;e++){var f=d[e],w=f|a[e];d[e]=w;b|=f^w}this.dirty=b},intersect:function(a){var b=this.dirty,d=this.bits;a=a.bits;for(var e=0,g=d.length;e<g;e++){var f=d[e],w=f&a[e];d[e]=w;b|=f^w}this.dirty=b},subtract:function(a){var b=this.dirty,d=this.bits;a=a.bits;for(var e=0,g=d.length;e<g;e++){var f=d[e],w=f&~a[e];d[e]=w;b|=f^w}this.dirty=b},negate:function(){for(var a=
this.dirty,b=this.bits,d=0,e=b.length;d<e;d++){var g=b[d],f=~g;b[d]=f;a|=g^f}this.dirty=a},forEach:function(a){!0;for(var b=this.bits,d=0,e=b.length;d<e;d++){var g=b[d];if(g)for(var f=0;32>f;f++)g&1<<f&&a(32*d+f)}},toArray:function(){for(var a=[],b=this.bits,d=0,e=b.length;d<e;d++){var g=b[d];if(g)for(var f=0;32>f;f++)g&1<<f&&a.push(32*d+f)}return a},equals:function(a){if(this.size!==a.size)return!1;var b=this.bits;a=a.bits;for(var d=0,e=b.length;d<e;d++)if(b[d]!==a[d])return!1;return!0},contains:function(a){if(this.size!==
a.size)return!1;var b=this.bits;a=a.bits;for(var d=0,e=b.length;d<e;d++)if((b[d]|a[d])!==b[d])return!1;return!0},toBitString:function(b,d){b=b||"1";d=d||"0";for(var e="",g=0;g<a;g++)e+=this.get(g)?b:d;return e},length:a,toString:function(b){for(var d=[],e=0;e<a;e++)this.get(e)&&d.push(b?b[e]:e);return d.join(", ")},isEmpty:function(){this.recount();return 0===this.count},clone:function(){var a=new e;a._union(this);return a}};b.prototype={recount:function(){if(this.dirty){var a=this.bits,a=a-(a>>1&
1431655765),a=(a&858993459)+(a>>2&858993459);this.count=0+(16843009*(a+(a>>4)&252645135)>>24);this.dirty=0}},set:function(a){var b=this.bits;this.bits=a=b|1<<(a&31);this.dirty|=b^a},setAll:function(){this.bits=4294967295;this.count=this.size;this.dirty=0},assign:function(a){this.count=a.count;this.dirty=a.dirty;this.size=a.size;this.bits=a.bits},clear:function(a){var b=this.bits;this.bits=a=b&~(1<<(a&31));this.dirty|=b^a},get:function(a){return 0!==(this.bits&1<<(a&31))},clearAll:function(){this.dirty=
this.count=this.bits=0},_union:function(a){var b=this.bits;this.bits=a=b|a.bits;this.dirty=b^a},intersect:function(a){var b=this.bits;this.bits=a=b&a.bits;this.dirty=b^a},subtract:function(a){var b=this.bits;this.bits=a=b&~a.bits;this.dirty=b^a},negate:function(){var a=this.bits,b=~a;this.bits=b;this.dirty=a^b},forEach:function(a){!0;var b=this.bits;if(b)for(var d=0;32>d;d++)b&1<<d&&a(d)},toArray:function(){var a=[],b=this.bits;if(b)for(var d=0;32>d;d++)b&1<<d&&a.push(d);return a},equals:function(a){return this.bits===
a.bits},contains:function(a){var b=this.bits;return(b|a.bits)===b},isEmpty:function(){this.recount();return 0===this.count},clone:function(){var a=new b;a._union(this);return a},toBitString:e.prototype.toBitString,toString:e.prototype.toString,length:a};return f}
function base64ArrayBuffer(a){var e="";a=new Uint8Array(a);for(var b=a.byteLength,d=b%3,b=b-d,g,f,l,m,p=0;p<b;p+=3)m=a[p]<<16|a[p+1]<<8|a[p+2],g=(m&16515072)>>18,f=(m&258048)>>12,l=(m&4032)>>6,m&=63,e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m];1==d?(m=a[b],e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(m&
252)>>2]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(m&3)<<4]+"=="):2==d&&(m=a[b]<<8|a[b+1],e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(m&64512)>>10]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(m&1008)>>4]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(m&15)<<2]+"=");return e}
var PURPLE="\u001b[94m",YELLOW="\u001b[93m",GREEN="\u001b[92m",RED="\u001b[91m",ENDC="\u001b[0m",IndentingWriter=function(){function a(a,d){this.tab="  ";this.padding="";this.suppressOutput=a;this.out=d||e}var e=inBrowser?console.info.bind(console):print;a.prototype.writeLn=function(a){this.suppressOutput||this.out(this.padding+a)};a.prototype.writeLns=function(a){a=a.split("\n");for(var d=0;d<a.length;d++)this.writeLn(a[d])};a.prototype.debugLn=function(a){this.colorLn("\u001b[94m",a)};a.prototype.yellowLn=
function(a){this.colorLn("\u001b[93m",a)};a.prototype.greenLn=function(a){this.colorLn("\u001b[92m",a)};a.prototype.redLn=function(a){this.colorLn("\u001b[91m",a)};a.prototype.colorLn=function(a,d){this.suppressOutput||(inBrowser?this.out(this.padding+d):this.out(this.padding+a+d+"\u001b[0m"))};a.prototype.enter=function(a){this.suppressOutput||this.out(this.padding+a);this.indent()};a.prototype.leaveAndEnter=function(a){this.leave(a);this.indent()};a.prototype.leave=function(a){this.outdent();this.suppressOutput||
this.out(this.padding+a)};a.prototype.indent=function(){this.padding+=this.tab};a.prototype.outdent=function(){0<this.padding.length&&(this.padding=this.padding.substring(0,this.padding.length-this.tab.length))};a.prototype.writeArray=function(a,d,e){d=d||!1;for(var f=0,l=a.length;f<l;f++){var m="";d&&(m=null===a[f]?"null":void 0===a[f]?"undefined":a[f].constructor.name,m+=" ");var p=e?"":(""+f).padRight(" ",4);this.writeLn(p+m+a[f])}};return a}(),Map=function(){function a(){this.elements={}}a.prototype.set=
function(a,b){this.elements[a]=b};a.prototype.get=function(a){if(this.has(a))return this.elements[a]};a.prototype.has=function(a){return Object.prototype.hasOwnProperty.call(this.elements,a)};a.prototype.remove=function(a){this.has(a)&&delete this.elements[a]};return a}(),SortedList=function(){function a(a){!0;this.compare=a;this.head=null;this.length=0}a.RETURN=1;a.DELETE=2;a.prototype.push=function(a){!0;this.length++;if(this.head){var b=this.head,d=null;a={value:a,next:null};for(var g=this.compare;b;){if(0<
g(b.value,a.value)){d?(a.next=b,d.next=a):(a.next=this.head,this.head=a);return}d=b;b=b.next}d.next=a}else this.head={value:a,next:null}};a.prototype.forEach=function(e){for(var b=this.head,d=null;b;){var g=e(b.value);if(g===a.RETURN)break;else g===a.DELETE?b=d?d.next=b.next:this.head=this.head.next:(d=b,b=b.next)}};a.prototype.pop=function(){if(this.head){this.length--;var a=this.head;this.head=this.head.next;return a.value}};a.prototype.peek=function(){return this.head};a.prototype.contains=function(a){for(var b=
this.head;b;){if(b.value===a)return!0;b=b.next}return!1};a.prototype.toString=function(){for(var a="[",b=this.head;b;)a+=b.value.toString(),(b=b.next)&&(a+=",");return a+"]"};return a}();
(function(){function a(){this.id="$weakmap"+e++}if("function"!==typeof this.WeakMap){var e=0;a.prototype={has:function(a){return a.hasOwnProperty(this.id)},get:function(a,d){return a.hasOwnProperty(this.id)?a[this.id]:d},set:function(a,d){Object.defineProperty(a,this.id,{value:d,enumerable:!1,configurable:!0})}};this.WeakMap=a}})();
var Callback=function(){function a(){this.queues={}}a.prototype.register=function(a,b){var d=this.queues[a];if(d){if(-1<d.indexOf(b))return}else d=this.queues[a]=[];d.push(b)};a.prototype.unregister=function(a,b){var d=this.queues[a];if(d){var g=d.indexOf(b);-1!==g&&d.splice(g,1);0===d.length&&(this.queues[a]=null)}};a.prototype.notify=function(a,b){var d=this.queues[a];if(d){d=d.slice();b=sliceArguments(arguments,0);for(var g=0;g<d.length;g++)d[g].apply(null,b)}};a.prototype.notify1=function(a,b){var d=
this.queues[a];if(d)for(var d=d.slice(),g=0;g<d.length;g++)(0,d[g])(a,b)};return a}(),CircularBuffer=function(){function a(a){this.start=this.index=0;this.array=new a(e)}var e=4096;a.prototype.get=function(a){return this.array[a]};a.prototype.forEachInReverse=function(a){if(!this.isEmpty())for(var d=0===this.index?e-1:this.index-1;d!==this.start&&!a(this.array[d],d);)d=0===d?e-1:d-1};a.prototype.write=function(a){this.array[this.index]=a;this.index=this.index+1&4095;this.index===this.start&&(this.start=
this.start+1&4095)};a.prototype.isFull=function(){return this.index+1&4095===this.start};a.prototype.isEmpty=function(){return this.index===this.start};return a}();function lazyClass(a,e,b){Object.defineProperty(a,e,{get:function(){var d=performance.now(),g=b();print("Initialized Class: "+e+" "+(performance.now()-d).toFixed(4));Object.defineProperty(a,e,{value:g,writable:!0});return g},configurable:!0})}function createNewCompartment(){return newGlobal("new-compartment")}
(function(a){var e,b=function(a,b){this.parent=a;this.timers={};this.name=b;this.count=this.total=this.last=this.begin=0},d=new b(null,"Total"),g=d,f=new b(null,"Flat"),l=[];b.flat=f;b.prototype.start=function(){this.begin=performance.now()};b.prototype.stop=function(){this.last=performance.now()-this.begin;this.total+=this.last;this.count+=1};b.time=function(a,d){b.start(a);d();b.stop()};b.start=function(a){g=g.timers[a]||(g.timers[a]=new b(g,a));g.start();a=f.timers[a]||(f.timers[a]=new b(f,a));
a.start();l.push(a)};b.stop=function(){g.stop();g=g.parent;l.pop().stop()};b.stopStart=function(a){e.stop();e.start(a)};b.prototype.toJSON=function(){return{name:this.name,total:this.total,timers:this.timers}};b.prototype.trace=function(a,b){if(b)a.writeLn("SHUMWAY$JSON "+JSON.stringify({timer:this}));else{a.enter(this.name+": "+this.total.toFixed(2)+" ms, count: "+this.count+", average: "+(this.total/this.count).toFixed(2)+" ms");for(var d in this.timers)this.timers[d].trace(a);a.outdent()}};b.trace=
function(a,b){d.trace(a,b);f.trace(a,b)};e=b;var m=function(a){this.enabled=!!a;this.counts=createEmptyObject()};m.prototype.setEnabled=function(a){this.enabled=a};m.prototype.clear=function(){this.counts={}};m.prototype.toJSON=function(){return{counts:this.counts}};m.prototype.count=function(a,b){if(this.enabled)return void 0===this.counts[a]&&(this.counts[a]=0),this.counts[a]+=void 0!==b?b:1,this.counts[a]};m.prototype.trace=function(a,b){if(b)a.writeLn("SHUMWAY$JSON "+JSON.stringify({counter:this}));
else for(var d in this.counts)a.writeLn(d+": "+this.counts[d])};m.prototype.traceSorted=function(a){var b=[],d;for(d in this.counts)b.push([d,this.counts[d]]);b.sort(function(a,b){return b[1]-a[1]});b.forEach(function(b){a.writeLn(b[0]+": "+b[1])})};var p=function(a){this.samples=new Float64Array(a);this.index=this.count=0};p.prototype.push=function(a){this.count<this.samples.length&&this.count++;this.index++;this.samples[this.index%this.samples.length]=a};p.prototype.average=function(){for(var a=
0,b=0;b<this.count;b++)a+=this.samples[b];return a/this.count};a.Timer=e;a.Counter=m;a.Average=p})("undefined"===typeof exports?metrics={}:exports);var Counter=new metrics.Counter(!0),FrameCounter=new metrics.Counter(!0),Timer=metrics.Timer,systemOptions=new OptionSet("System Options"),disassemble=systemOptions.register(new Option("d","disassemble","boolean",!1,"disassemble")),traceLevel=systemOptions.register(new Option("t","traceLevel","number",0,"trace level"));window.print=function(a){console.log(a)};
var CONSTANT_Undefined=0,CONSTANT_Utf8=1,CONSTANT_Float=2,CONSTANT_Int=3,CONSTANT_UInt=4,CONSTANT_PrivateNs=5,CONSTANT_Double=6,CONSTANT_QName=7,CONSTANT_Namespace=8,CONSTANT_Multiname=9,CONSTANT_False=10,CONSTANT_True=11,CONSTANT_Null=12,CONSTANT_QNameA=13,CONSTANT_MultinameA=14,CONSTANT_RTQName=15,CONSTANT_RTQNameA=16,CONSTANT_RTQNameL=17,CONSTANT_RTQNameLA=18,CONSTANT_NameL=19,CONSTANT_NameLA=20,CONSTANT_NamespaceSet=21,CONSTANT_PackageNamespace=22,CONSTANT_PackageInternalNs=23,CONSTANT_ProtectedNamespace=
24,CONSTANT_ExplicitNamespace=25,CONSTANT_StaticProtectedNs=26,CONSTANT_MultinameL=27,CONSTANT_MultinameLA=28,CONSTANT_TypeName=29,CONSTANT_ClassSealed=1,CONSTANT_ClassFinal=2,CONSTANT_ClassInterface=4,CONSTANT_ClassProtectedNs=8,TRAIT_Slot=0,TRAIT_Method=1,TRAIT_Getter=2,TRAIT_Setter=3,TRAIT_Class=4,TRAIT_Function=5,TRAIT_Const=6,ATTR_Final=1,ATTR_Override=2,ATTR_Metadata=4,SLOT_var=0,SLOT_method=1,SLOT_getter=2,SLOT_setter=3,SLOT_class=4,SLOT_function=6,METHOD_Arguments=1,METHOD_Activation=2,METHOD_Needrest=
4,METHOD_HasOptional=8,METHOD_IgnoreRest=16,METHOD_Native=32,METHOD_Setsdxns=64,METHOD_HasParamNames=128,OP_bkpt=1,OP_nop=2,OP_throw=3,OP_getsuper=4,OP_setsuper=5,OP_dxns=6,OP_dxnslate=7,OP_kill=8,OP_label=9,OP_lf32x4=10,OP_sf32x4=11,OP_ifnlt=12,OP_ifnle=13,OP_ifngt=14,OP_ifnge=15,OP_jump=16,OP_iftrue=17,OP_iffalse=18,OP_ifeq=19,OP_ifne=20,OP_iflt=21,OP_ifle=22,OP_ifgt=23,OP_ifge=24,OP_ifstricteq=25,OP_ifstrictne=26,OP_lookupswitch=27,OP_pushwith=28,OP_popscope=29,OP_nextname=30,OP_hasnext=31,OP_pushnull=
32,OP_pushundefined=33,OP_pushfloat=34,OP_nextvalue=35,OP_pushbyte=36,OP_pushshort=37,OP_pushtrue=38,OP_pushfalse=39,OP_pushnan=40,OP_pop=41,OP_dup=42,OP_swap=43,OP_pushstring=44,OP_pushint=45,OP_pushuint=46,OP_pushdouble=47,OP_pushscope=48,OP_pushnamespace=49,OP_hasnext2=50,OP_li8=53,OP_li16=54,OP_li32=55,OP_lf32=56,OP_lf64=57,OP_si8=58,OP_si16=59,OP_si32=60,OP_sf32=61,OP_sf64=62,OP_newfunction=64,OP_call=65,OP_construct=66,OP_callmethod=67,OP_callstatic=68,OP_callsuper=69,OP_callproperty=70,OP_returnvoid=
71,OP_returnvalue=72,OP_constructsuper=73,OP_constructprop=74,OP_callsuperid=75,OP_callproplex=76,OP_callinterface=77,OP_callsupervoid=78,OP_callpropvoid=79,OP_sxi1=80,OP_sxi8=81,OP_sxi16=82,OP_applytype=83,OP_pushfloat4=84,OP_newobject=85,OP_newarray=86,OP_newactivation=87,OP_newclass=88,OP_getdescendants=89,OP_newcatch=90,OP_findpropstrict=93,OP_findproperty=94,OP_finddef=95,OP_getlex=96,OP_setproperty=97,OP_getlocal=98,OP_setlocal=99,OP_getglobalscope=100,OP_getscopeobject=101,OP_getproperty=102,
OP_getouterscope=103,OP_initproperty=104,OP_setpropertylate=105,OP_deleteproperty=106,OP_deletepropertylate=107,OP_getslot=108,OP_setslot=109,OP_getglobalslot=110,OP_setglobalslot=111,OP_convert_s=112,OP_esc_xelem=113,OP_esc_xattr=114,OP_convert_i=115,OP_convert_u=116,OP_convert_d=117,OP_convert_b=118,OP_convert_o=119,OP_checkfilter=120,OP_convert_f=121,OP_unplus=122,OP_convert_f4=123,OP_coerce=128,OP_coerce_b=129,OP_coerce_a=130,OP_coerce_i=131,OP_coerce_d=132,OP_coerce_s=133,OP_astype=134,OP_astypelate=
135,OP_coerce_u=136,OP_coerce_o=137,OP_negate=144,OP_increment=145,OP_inclocal=146,OP_decrement=147,OP_declocal=148,OP_typeof=149,OP_not=150,OP_bitnot=151,OP_add=160,OP_subtract=161,OP_multiply=162,OP_divide=163,OP_modulo=164,OP_lshift=165,OP_rshift=166,OP_urshift=167,OP_bitand=168,OP_bitor=169,OP_bitxor=170,OP_equals=171,OP_strictequals=172,OP_lessthan=173,OP_lessequals=174,OP_greaterthan=175,OP_greaterequals=176,OP_instanceof=177,OP_istype=178,OP_istypelate=179,OP_in=180,OP_increment_i=192,OP_decrement_i=
193,OP_inclocal_i=194,OP_declocal_i=195,OP_negate_i=196,OP_add_i=197,OP_subtract_i=198,OP_multiply_i=199,OP_getlocal0=208,OP_getlocal1=209,OP_getlocal2=210,OP_getlocal3=211,OP_setlocal0=212,OP_setlocal1=213,OP_setlocal2=214,OP_setlocal3=215,OP_invalid=237,OP_debug=239,OP_debugline=240,OP_debugfile=241,OP_bkptline=242,OP_timestamp=243,INT_MIN_VALUE=-2147483648,INT_MAX_VALUE=2147483647,UINT_MIN_VALUE=0,UINT_MAX_VALUE=4294967295,SORT_CASEINSENSITIVE=1,SORT_DESCENDING=2,SORT_UNIQUESORT=4,SORT_RETURNINDEXEDARRAY=
8,SORT_NUMERIC=16,Errors={CallOfNonFunctionError:{code:1006,message:"%1 is not a function."},ConvertNullToObjectError:{code:1009,message:"Cannot access a property or method of a null object reference."},ConvertUndefinedToObjectError:{code:1010,message:"A term is undefined and has no properties."},ClassNotFoundError:{code:1014,message:"Class %1 could not be found."},CheckTypeFailedError:{code:1034,message:"Type Coercion failed: cannot convert %1 to %2."},WrongArgumentCountError:{code:1063,message:"Argument count mismatch on %1. Expected %2, got %3."},
XMLMarkupMustBeWellFormed:{code:1088,message:"The markup in the document following the root element must be well-formed."},OutOfRangeError:{code:1125,message:"The index %1 is out of range %2."},VectorFixedError:{code:1126,message:"Cannot change the length of a fixed Vector."},InvalidParamError:{code:2004,message:"One of the parameters is invalid."},ParamRangeError:{code:2006,message:"The supplied index is out of bounds."},NullPointerError:{code:2007,message:"Parameter %1 must be non-null."},InvalidEnumError:{code:2008,
message:"Parameter %1 must be one of the accepted values."},ArgumentError:{code:2015,message:"Invalid BitmapData."},CompressedDataError:{code:2058,message:"There was an error decompressing the data."},SocketConnectError:{code:2011,message:"Socket connection failed to %1:%2."},CantAddSelfError:{code:2024,message:"An object cannot be added as a child of itself."},NotAChildError:{code:2025,message:"The supplied DisplayObject must be a child of the caller."},ExternalInterfaceNotAvailableError:{code:2067,
message:"The ExternalInterface is not available in this container. ExternalInterface requires Internet Explorer ActiveX, Firefox, Mozilla 1.7.5 and greater, or other browsers that support NPRuntime."}};function getErrorMessage(a){if(!debuggerMode.value)return"Error #"+a;for(var e in Errors)if(Errors[e].code==a)return"Error #"+a+": "+Errors[e].message;return"Error #"+a+": (unknown)"}
function formatErrorMessage(a){var e=a.message;Array.prototype.slice.call(arguments,1).forEach(function(a,d){e=e.replace("%"+(d+1),a)});return"Error #"+a.code+": "+e}function translateErrorMessage(a){if(a.type)switch(a.type){case "undefined_method":return formatErrorMessage(Errors.CallOfNonFunctionError,"value");default:throw notImplemented(a.type);}else return 0<=a.message.indexOf("is not a function")?formatErrorMessage(Errors.CallOfNonFunctionError,"value"):a.message}
var opcodeTable=[null,{name:"bkpt",operands:"",canThrow:!1,stackDelta:0},{name:"nop",operands:"",canThrow:!1,stackDelta:0},{name:"throw",operands:"",canThrow:!0,stackDelta:-1},{name:"getsuper",operands:"index:u30",canThrow:!0,stackDelta:0},{name:"setsuper",operands:"index:u30",canThrow:!0,stackDelta:-2},{name:"dxns",operands:"index:u30",canThrow:!0,stackDelta:0},{name:"dxnslate",operands:"",canThrow:!0,stackDelta:-1},{name:"kill",operands:"index:u30",canThrow:!1,stackDelta:0},{name:"label",operands:"",
canThrow:!1,stackDelta:0},{name:"lf32x4",operands:"",canThrow:!0,stackDelta:0},{name:"sf32x4",operands:"",canThrow:!0,stackDelta:-2},{name:"ifnlt",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifnle",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifngt",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifnge",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"jump",operands:"offset:s24",canThrow:!1,stackDelta:0},{name:"iftrue",operands:"offset:s24",canThrow:!1,stackDelta:-1},
{name:"iffalse",operands:"offset:s24",canThrow:!1,stackDelta:-1},{name:"ifeq",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifne",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"iflt",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifle",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifgt",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifge",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifstricteq",operands:"offset:s24",canThrow:!1,stackDelta:-2},
{name:"ifstrictne",operands:"offset:s24",canThrow:!1,stackDelta:-2},{name:"lookupswitch",operands:null,canThrow:!1,stackDelta:-1},{name:"pushwith",operands:"",canThrow:!1,stackDelta:-1},{name:"popscope",operands:"",canThrow:!1,stackDelta:0},{name:"nextname",operands:"",canThrow:!0,stackDelta:-1},{name:"hasnext",operands:"",canThrow:!0,stackDelta:-1},{name:"pushnull",operands:"",canThrow:!1,stackDelta:1},{name:"pushundefined",operands:"",canThrow:!1,stackDelta:1},null,{name:"nextvalue",operands:"",
canThrow:!0,stackDelta:-1},{name:"pushbyte",operands:"value:s08",canThrow:!1,stackDelta:1},{name:"pushshort",operands:"value:s16",canThrow:!1,stackDelta:1},{name:"pushtrue",operands:"",canThrow:!1,stackDelta:1},{name:"pushfalse",operands:"",canThrow:!1,stackDelta:1},{name:"pushnan",operands:"",canThrow:!1,stackDelta:1},{name:"pop",operands:"",canThrow:!1,stackDelta:-1},{name:"dup",operands:"",canThrow:!1,stackDelta:1},{name:"swap",operands:"",canThrow:!1,stackDelta:0},{name:"pushstring",operands:"index:u30S",
canThrow:!1,stackDelta:1},{name:"pushint",operands:"index:u30I",canThrow:!1,stackDelta:1},{name:"pushuint",operands:"index:u30U",canThrow:!1,stackDelta:1},{name:"pushdouble",operands:"index:u30D",canThrow:!1,stackDelta:1},{name:"pushscope",operands:"",canThrow:!1,stackDelta:-1},{name:"pushnamespace",operands:"index:u30N",canThrow:!1,stackDelta:1},{name:"hasnext2",operands:"object:u30,index:u30",canThrow:!0,stackDelta:1},{name:"lix8",operands:null,canThrow:!0,stackDelta:0,internal:!0},{name:"lix16",
operands:null,canThrow:!0,stackDelta:0,internal:!0},{name:"li8",operands:"",canThrow:!0,stackDelta:0},{name:"li16",operands:"",canThrow:!0,stackDelta:0},{name:"li32",operands:"",canThrow:!0,stackDelta:0},{name:"lf32",operands:"",canThrow:!0,stackDelta:0},{name:"lf64",operands:"",canThrow:!0,stackDelta:0},{name:"si8",operands:"",canThrow:!0,stackDelta:-2},{name:"si16",operands:"",canThrow:!0,stackDelta:-2},{name:"si32",operands:"",canThrow:!0,stackDelta:-2},{name:"sf32",operands:"",canThrow:!0,stackDelta:-2},
{name:"sf64",operands:"",canThrow:!0,stackDelta:-2},null,{name:"newfunction",operands:"index:u30MI",canThrow:!0,stackDelta:1},{name:"call",operands:"argCount:u30",canThrow:!0,stackDelta:-1},{name:"construct",operands:"argCount:u30",canThrow:!0,stackDelta:0},{name:"callmethod",operands:"index:u30,argCount:u30",canThrow:!0,stackDelta:0},{name:"callstatic",operands:"index:u30MI,argCount:u30",canThrow:!0,stackDelta:0},{name:"callsuper",operands:"index:u30M,argCount:u30",canThrow:!0,stackDelta:0},{name:"callproperty",
operands:"index:u30M,argCount:u30",canThrow:!0,stackDelta:0},{name:"returnvoid",operands:"",canThrow:!1,stackDelta:0},{name:"returnvalue",operands:"",canThrow:!0,stackDelta:-1},{name:"constructsuper",operands:"argCount:u30",canThrow:!0,stackDelta:-1},{name:"constructprop",operands:"index:u30M,argCount:u30",canThrow:!0,stackDelta:0},{name:"callsuperid",operands:null,canThrow:!0,stackDelta:0,internal:!0},{name:"callproplex",operands:"index:u30M,argCount:u30",canThrow:!0,stackDelta:0},{name:"callinterface",
operands:null,canThrow:!0,stackDelta:0,internal:!0},{name:"callsupervoid",operands:"index:u30M,argCount:u30",canThrow:!0,stackDelta:-1},{name:"callpropvoid",operands:"index:u30M,argCount:u30",canThrow:!0,stackDelta:-1},{name:"sxi1",operands:"",canThrow:!1,stackDelta:0},{name:"sxi8",operands:"",canThrow:!1,stackDelta:0},{name:"sxi16",operands:"",canThrow:!1,stackDelta:0},{name:"applytype",operands:"argCount:u30",canThrow:!0,stackDelta:0},{name:"pushfloat4",operands:null,canThrow:!1,stackDelta:1},{name:"newobject",
operands:"argCount:u30",canThrow:!0,stackDelta:1},{name:"newarray",operands:"argCount:u30",canThrow:!0,stackDelta:1},{name:"newactivation",operands:"",canThrow:!0,stackDelta:1},{name:"newclass",operands:"index:u30CI",canThrow:!0,stackDelta:0},{name:"getdescendants",operands:"index:u30M",canThrow:!0,stackDelta:0},{name:"newcatch",operands:"index:u30EI",canThrow:!0,stackDelta:1},{name:"findpropglobalstrict",operands:null,canThrow:!0,stackDelta:0,internal:!0},{name:"findpropglobal",operands:null,canThrow:!0,
stackDelta:0,internal:!0},{name:"findpropstrict",operands:"index:u30M",canThrow:!0,stackDelta:1},{name:"findproperty",operands:"index:u30M",canThrow:!0,stackDelta:1},{name:"finddef",operands:null,canThrow:!0,stackDelta:1},{name:"getlex",operands:"index:u30M",canThrow:!0,stackDelta:1},{name:"setproperty",operands:"index:u30M",canThrow:!0,stackDelta:-2},{name:"getlocal",operands:"index:u30",canThrow:!1,stackDelta:1},{name:"setlocal",operands:"index:u30",canThrow:!1,stackDelta:-1},{name:"getglobalscope",
operands:"",canThrow:!1,stackDelta:1},{name:"getscopeobject",operands:"index:u30",canThrow:!1,stackDelta:1},{name:"getproperty",operands:"index:u30M",canThrow:!0,stackDelta:0},{name:"getouterscope",operands:null,canThrow:!1,stackDelta:1},{name:"initproperty",operands:"index:u30M",canThrow:!0,stackDelta:-2},null,{name:"deleteproperty",operands:"index:u30M",canThrow:!0,stackDelta:0},null,{name:"getslot",operands:"index:u30",canThrow:!0,stackDelta:0},{name:"setslot",operands:"index:u30",canThrow:!0,
stackDelta:-2},{name:"getglobalslot",operands:"index:u30",canThrow:!1,stackDelta:1},{name:"setglobalslot",operands:"index:u30",canThrow:!1,stackDelta:-1},{name:"convert_s",operands:"",canThrow:!0,stackDelta:0},{name:"esc_xelem",operands:"",canThrow:!0,stackDelta:0},{name:"esc_xattr",operands:"",canThrow:!0,stackDelta:0},{name:"convert_i",operands:"",canThrow:!0,stackDelta:0},{name:"convert_u",operands:"",canThrow:!0,stackDelta:0},{name:"convert_d",operands:"",canThrow:!0,stackDelta:0},{name:"convert_b",
operands:"",canThrow:!0,stackDelta:0},{name:"convert_o",operands:"",canThrow:!0,stackDelta:0},{name:"checkfilter",operands:"",canThrow:!0,stackDelta:0},{name:"convert_f",operands:"",canThrow:!0,stackDelta:0},{name:"unplus",operands:"",canThrow:!0,stackDelta:0},{name:"convert_f4",operands:"",canThrow:!0,stackDelta:0},null,null,null,null,{name:"coerce",operands:"index:u30M",canThrow:!0,stackDelta:0},{name:"coerce_b",operands:"",canThrow:!0,stackDelta:0},{name:"coerce_a",operands:"",canThrow:!0,stackDelta:0},
{name:"coerce_i",operands:"",canThrow:!0,stackDelta:0},{name:"coerce_d",operands:"",canThrow:!0,stackDelta:0},{name:"coerce_s",operands:"",canThrow:!0,stackDelta:0},{name:"astype",operands:"index:u30M",canThrow:!0,stackDelta:0},{name:"astypelate",operands:"",canThrow:!0,stackDelta:-1},{name:"coerce_u",operands:"",canThrow:!0,stackDelta:0},{name:"coerce_o",operands:"",canThrow:!0,stackDelta:0},null,null,null,null,null,null,{name:"negate",operands:"",canThrow:!0,stackDelta:0},{name:"increment",operands:"",
canThrow:!0,stackDelta:0},{name:"inclocal",operands:"index:u30",canThrow:!0,stackDelta:0},{name:"decrement",operands:"",canThrow:!0,stackDelta:0},{name:"declocal",operands:"index:u30",canThrow:!0,stackDelta:0},{name:"typeof",operands:"",canThrow:!1,stackDelta:0},{name:"not",operands:"",canThrow:!1,stackDelta:0},{name:"bitnot",operands:"",canThrow:!0,stackDelta:0},null,null,null,null,null,null,null,null,{name:"add",operands:"",canThrow:!0,stackDelta:-1},{name:"subtract",operands:"",canThrow:!0,stackDelta:-1},
{name:"multiply",operands:"",canThrow:!0,stackDelta:-1},{name:"divide",operands:"",canThrow:!0,stackDelta:-1},{name:"modulo",operands:"",canThrow:!0,stackDelta:-1},{name:"lshift",operands:"",canThrow:!0,stackDelta:-1},{name:"rshift",operands:"",canThrow:!0,stackDelta:-1},{name:"urshift",operands:"",canThrow:!0,stackDelta:-1},{name:"bitand",operands:"",canThrow:!0,stackDelta:-1},{name:"bitor",operands:"",canThrow:!0,stackDelta:-1},{name:"bitxor",operands:"",canThrow:!0,stackDelta:-1},{name:"equals",
operands:"",canThrow:!0,stackDelta:-1},{name:"strictequals",operands:"",canThrow:!0,stackDelta:-1},{name:"lessthan",operands:"",canThrow:!0,stackDelta:-1},{name:"lessequals",operands:"",canThrow:!0,stackDelta:-1},{name:"greaterthan",operands:"",canThrow:!0,stackDelta:-1},{name:"greaterequals",operands:"",canThrow:!0,stackDelta:-1},{name:"instanceof",operands:"",canThrow:!0,stackDelta:-1},{name:"istype",operands:"index:u30M",canThrow:!0,stackDelta:0},{name:"istypelate",operands:"",canThrow:!0,stackDelta:-1},
{name:"in",operands:"",canThrow:!0,stackDelta:-1},null,null,null,null,null,null,null,null,null,null,null,{name:"increment_i",operands:"",canThrow:!0,stackDelta:0},{name:"decrement_i",operands:"",canThrow:!0,stackDelta:0},{name:"inclocal_i",operands:"index:u30",canThrow:!0,stackDelta:0},{name:"declocal_i",operands:"index:u30",canThrow:!0,stackDelta:0},{name:"negate_i",operands:"",canThrow:!0,stackDelta:0},{name:"add_i",operands:"",canThrow:!0,stackDelta:-1},{name:"subtract_i",operands:"",canThrow:!0,
stackDelta:-1},{name:"multiply_i",operands:"",canThrow:!0,stackDelta:-1},null,null,null,null,null,null,null,null,{name:"getlocal0",operands:"",canThrow:!1,stackDelta:1},{name:"getlocal1",operands:"",canThrow:!1,stackDelta:1},{name:"getlocal2",operands:"",canThrow:!1,stackDelta:1},{name:"getlocal3",operands:"",canThrow:!1,stackDelta:1},{name:"setlocal0",operands:"",canThrow:!1,stackDelta:-1},{name:"setlocal1",operands:"",canThrow:!1,stackDelta:-1},{name:"setlocal2",operands:"",canThrow:!1,stackDelta:-1},
{name:"setlocal3",operands:"",canThrow:!1,stackDelta:-1},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,{name:"invalid",operands:"",canThrow:!1,stackDelta:0},null,{name:"debug",operands:"debugType:u08,index:u30S,reg:u08,extra:u30",canThrow:!0,stackDelta:0},{name:"debugline",operands:"lineNumber:u30",canThrow:!0,stackDelta:0},{name:"debugfile",operands:"index:u30S",canThrow:!0,stackDelta:0},null,null,null,null,null,null,null,null,null,null,
null,null,null,null];(function(){for(var a=0;a<opcodeTable.length;a++){var e=opcodeTable[a];if(e&&null!==e.operands){var b=[];if(""!==e.operands)for(var d=e.operands.split(","),g=0;g<d.length;g++){var f=d[g].split(":");b.push({name:f[0],size:f[1].substring(0,3),type:f[1].substring(3)})}e.operands=b}}})();function opcodeName(a){return opcodeTable[a].name}
var AbcStream=function(){function a(a){this.bytes=a;this.view=new DataView(a.buffer,a.byteOffset);this.pos=0}var e=new Int32Array(256);a.prototype={get position(){return this.pos},remaining:function(){return this.bytes.length-this.pos},seek:function(a){this.pos=a},readU8:function(){return this.bytes[this.pos++]},readU8s:function(a){var b=new Uint8Array(a);b.set(this.bytes.subarray(this.pos,this.pos+a),0);this.pos+=a;return b},readS8:function(){return this.bytes[this.pos++]<<24>>24},readU32:function(){return this.readS32()>>>
0},readU30:function(){return this.readU32()},readU30Unsafe:function(){return this.readU32()},readS16:function(){return this.readU30Unsafe()<<16>>16},readS32:function(){var a=this.readU8();a&128&&(a=a&127|this.readU8()<<7,a&16384&&(a=a&16383|this.readU8()<<14,a&2097152&&(a=a&2097151|this.readU8()<<21,a&268435456&&(a=a&268435455|this.readU8()<<28,a&=4294967295))));return a},readWord:function(){var a=this.view.getUint32(this.pos,!0);this.pos+=4;return a},readS24:function(){return(this.readU8()|this.readU8()<<
8|this.readU8()<<16)<<8>>8},readDouble:function(){var a=this.view.getFloat64(this.pos,!0);this.pos+=8;return a},readUTFString:function(a){var b=this.pos,f=b+a,l=this.bytes,m=0;if(!e||e.length<a)e=new Int32Array(2*a);for(a=e;b<f;){var p=l[b++];if(127>=p)a[m++]=p;else if(192<=p){var r=0;224>p?r=(p&31)<<6|l[b++]&63:240>p?r=(p&15)<<12|(l[b++]&63)<<6|l[b++]&63:(r=((p&7)<<18|(l[b++]&63)<<12|(l[b++]&63)<<6|l[b++]&63)-65536,a[m++]=((r&1047552)>>>10)+55296,r=(r&1023)+56320);a[m++]=r}}this.pos=b;return fromCharCodeArray(a.subarray(0,
m))}};if("undefined"!==typeof TextDecoder){var b=new TextDecoder;a.prototype.readUTFString=function(a){var e=this.pos;this.pos+=a;return b.decode(this.bytes.subarray(e,e+a))}}return a}();function parseTraits(a,e,b){for(var d=e.readU30(),g=[],f=0;f<d;f++)g.push(new Trait(a,e,b));return g}
var Trait=function(){function a(a,b,d){var g=a.constantPool,f=a.methods,l=a.classes,m=a.metadata;this.holder=d;this.name=g.multinames[b.readU30()];d=b.readU8();this.kind=d&15;this.attributes=d>>4&15;!0;switch(this.kind){case 0:case 6:this.slotId=b.readU30();this.typeName=g.multinames[b.readU30()];a=b.readU30();this.value=void 0;0!==a&&(this.hasDefaultValue=!0,this.value=g.getValue(b.readU8(),a));break;case 1:case 3:case 2:this.dispId=b.readU30();this.methodInfo=f[b.readU30()];this.methodInfo.name=
this.name;attachHolder(this.methodInfo,this.holder);this.methodInfo.abc=a;break;case 4:this.slotId=b.readU30();!0;this.classInfo=l[b.readU30()];break;case 5:!0}if(this.attributes&4){var p,g=0;for(a=b.readU30();g<a;g++)f=m[b.readU30()],"__go_to_definition_help"===f.name||"__go_to_ctor_definition_help"===f.name||(p||(p={}),p[f.name]=f);p&&(this.isClass()&&(this.classInfo.metadata=p),this.metadata=p)}}a.prototype.isSlot=function(){return 0===this.kind};a.prototype.isConst=function(){return 6===this.kind};
a.prototype.isMethod=function(){return 1===this.kind};a.prototype.isClass=function(){return 4===this.kind};a.prototype.isGetter=function(){return 2===this.kind};a.prototype.isSetter=function(){return 3===this.kind};a.prototype.isProtected=function(){!0;return this.name.namespaces[0].isProtected()};a.prototype.kindName=function(){switch(this.kind){case 0:return"Slot";case 6:return"Const";case 1:return"Method";case 3:return"Setter";case 2:return"Getter";case 4:return"Class";case 5:return"Function"}unexpected()};
a.prototype.isOverride=function(){return this.attributes&2};a.prototype.isFinal=function(){return this.attributes&1};a.prototype.toString=function(){var a=getFlags(this.attributes,["final","override","metadata"]);a&&(a+=" ");a+=Multiname.getQualifiedName(this.name);switch(this.kind){case 0:case 6:return a+", typeName: "+this.typeName+", slotId: "+this.slotId+", value: "+this.value;case 1:case 3:case 2:return a+", "+this.kindName()+": "+this.methodInfo.name;case 4:return a+", slotId: "+this.slotId+
", class: "+this.classInfo}};return a}(),ShumwayNamespace=function(){function a(a,b,d,g){void 0!==a&&(void 0===b&&(b=""),void 0!==d&&(this.prefix=d),this.kind=a,this.originalURI=this.uri=b,e.call(this,g))}function e(a){if(this.isPublic()&&this.uri){var d=this.uri.length-1;58004<this.uri.charCodeAt(d)&&(this.uri=this.uri.substring(0,d-1))}else this.isUnique()&&(this.uri=String(this.uri+f++));a?a=this.uri:(a=this.uri,""===a?a="":(d=l[a],d||(d=String(m.length),m.push(d),l[a]=d),a=d));this.uri=a;!0;this.qualifiedName=
b[this.kind]+"$"+this.uri}var b={};b[CONSTANT_Namespace]="public";b[CONSTANT_PackageNamespace]="public";b[CONSTANT_PackageInternalNs]="packageInternal";b[CONSTANT_PrivateNs]="private";b[CONSTANT_ProtectedNamespace]="protected";b[CONSTANT_ExplicitNamespace]="explicit";b[CONSTANT_StaticProtectedNs]="staticProtected";var d={},g;for(g in b)d[b[g]]=!0;a.PREFIXES=d;var f=0,l=createEmptyObject();createEmptyObject();var m=[];a.fromQualifiedName=function(b){var d=b.indexOf("$"),e=b.indexOf("$",d+1),g=b.substring(0,
d),f=a.kindFromString(g),g=b.substring(d+1,e);b=""===g?g:m[Number(g)];!0;!0;return new a(f,b,void 0,!0)};a.kindFromString=function(a){for(var d in b)if(b[d]===a)return d;return!0};a.createNamespace=function(b,d){return new a(8,b,d)};a.prototype=Object.create({parse:function(a,b){this.kind=b.readU8();this.originalURI=this.uri=a.strings[b.readU30()];e.call(this)},isPublic:function(){return 8===this.kind||22===this.kind},isProtected:function(){return 24===this.kind},isUnique:function(){return 5===this.kind&&
!this.originalURI},isDynamic:function(){return this.isPublic()&&!this.uri},getURI:function(){return this.uri},toString:function(){return b[this.kind]+(this.originalURI?" "+this.originalURI:"")},clone:function(){var b=new a;b.kind=this.kind;b.uri=this.uri;b.originalURI=this.originalURI;b.qualifiedName=this.qualifiedName;return b},isEqualTo:function(a){return this.qualifiedName===a.qualifiedName},inNamespaceSet:function(a){for(var b=0;b<a.length;b++)if(a[b].qualifiedName===this.qualifiedName)return!0;
return!1},getAccessModifier:function(){return b[this.kind]},getQualifiedName:function(){return this.qualifiedName}});a.PUBLIC=new a(8);a.PROTECTED=new a(24);a.PROXY=new a(8,"http://www.adobe.com/2006/actionscript/flash/proxy");var p={};a.fromSimpleName=function(d){if(d in p)return p[d];var e;0===d.indexOf("[")?(!0,e=d.substring(1,d.length-1).split(",")):e=[d];return p[d]=e.map(function(d){d=d.trim();var e;0<d.indexOf(" ")?(e=d.substring(0,d.indexOf(" ")).trim(),d=d.substring(d.indexOf(" ")+1).trim()):
d===b[8]||d===b[23]||d===b[5]||d===b[24]||d===b[25]||d===b[26]?(e=d,d=""):e="public";return new a(a.kindFromString(e),d)})};return a}(),Multiname=function(){function a(a,d,e){void 0!==d&&!0;this.id=b++;this.namespaces=a;this.name=d;this.flags=e||0}function e(a,b){!0;return a?a+"$"+b:b}var b=0;a.TEMPORARY=new a;!0;a.RUNTIME_NAME=4;a.ATTRIBUTE=1;a.parse=function(a,b,d,e){var p=0,r=b.readU8(),v,u=[],w=0;switch(r){case 7:case 13:(p=b.readU30())?u=[a.namespaces[p]]:w&=-5;(p=b.readU30())&&(v=a.strings[p]);
break;case 15:case 16:(p=b.readU30())?v=a.strings[p]:w&=-5;w|=2;break;case 17:case 18:w|=6;break;case 9:case 14:(p=b.readU30())?v=a.strings[p]:w&=-5;p=b.readU30();!0;u=a.namespaceSets[p];break;case 27:case 28:w|=4;p=b.readU30();!0;u=a.namespaceSets[p];break;case 29:return a=b.readU32(),d[a]&&(u=d[a].namespaces,v=d[a].name),b.readU32(),!0,b=b.readU32(),v=new Multiname(u,v,w),v.typeParameter=d[b],d[a]||e.push({multiname:v,index:a}),v;default:unexpected()}switch(r){case 13:case 16:case 18:case 14:case 28:w|=
1}return new Multiname(u,v,w)};a.isMultiname=function(a){return"number"===typeof a||"string"===typeof a||a instanceof Multiname||a instanceof Number};a.needsResolution=function(b){return b instanceof a&&1<b.namespaces.length};a.isQName=function(b){return b instanceof a?b.namespaces&&1===b.namespaces.length:!0};a.isRuntimeName=function(a){return a instanceof Multiname&&a.isRuntimeName()};a.isRuntimeNamespace=function(a){return a instanceof Multiname&&a.isRuntimeNamespace()};a.isRuntime=function(a){return a instanceof
Multiname&&a.isRuntimeName()||a.isRuntimeNamespace()};a.getQualifiedName=function(a){!0;if(a instanceof Multiname){if(void 0!==a.qualifiedName)return a.qualifiedName;var b=String(a.name);if(isNumeric(b))return!0,a.qualifiedName=b;a=a.qualifiedName=e(a.namespaces[0].qualifiedName,b)}return a};a.qualifyName=function(a,b){return e(a.qualifiedName,b)};a.stripPublicQualifier=function(a){return 0!==a.indexOf("public$$")?void 0:a.substring(8)};a.fromQualifiedName=function(a){if(a instanceof Multiname)return a;
!0;var b=a.indexOf("$");if(!(0>b)&&ShumwayNamespace.PREFIXES[a.substring(0,b)]){var d=ShumwayNamespace.fromQualifiedName(a),b=a.indexOf("$",b+1);return new Multiname([d],a.substring(b+1))}};a.getFullQualifiedName=function(b){var d=a.getQualifiedName(b);b instanceof Multiname&&b.typeParameter&&(d+="$"+a.getFullQualifiedName(b.typeParameter));return d};a.PUBLIC_QUALIFIED_NAME_PREFIX="public$$";a.getPublicQualifiedName=function(a){return isNumeric(a)?toNumber(a):null!==a&&isObject(a)?a:"public$$"+a};
a.isPublicQualifiedName=function(a){return"number"===typeof a||isNumeric(a)||0===a.indexOf("public$$")};a.getAccessModifier=function(a){!0;if("number"===typeof a||"string"===typeof a||a instanceof Number)return"public";!0;return a.namespaces[0].getAccessModifier()};a.isNumeric=function(b){if("number"===typeof b)return!0;if("string"===typeof b)return isNumeric(b);!0;return!isNaN(parseInt(a.getName(b),10))};a.getName=function(a){!0;!0;return a.getName()};a.isAnyName=function(a){return"object"===typeof a&&
!a.isRuntimeName()&&!a.name};var d={};a.fromSimpleName=function(a){!0;if(a in d)return d[a];var b,e;b=a.lastIndexOf(".");0>=b&&(b=a.lastIndexOf(" "));0<b&&b<a.length-1?(e=a.substring(b+1).trim(),b=a.substring(0,b).trim()):(e=a,b="");return d[a]=new Multiname(ShumwayNamespace.fromSimpleName(b),e)};a.prototype.getQName=function(a){!0;!0;this.cache||(this.cache=[]);var b=this.cache[a];b||(b=this.cache[a]=new Multiname([this.namespaces[a]],this.name,this.flags));return b};a.prototype.hasQName=function(a){!0;
if(this.name!==a.name)return!1;for(var b=0;b<this.namespaces.length;b++)if(this.namespaces[b].isEqualTo(a.namespaces[0]))return!0;return!1};a.prototype.isAttribute=function(){return this.flags&1};a.prototype.isAnyName=function(){return Multiname.isAnyName(this)};a.prototype.isAnyNamespace=function(){return!this.isRuntimeNamespace()&&(0===this.namespaces.length||this.isAnyName()&&1!==this.namespaces.length)};a.prototype.isRuntimeName=function(){return this.flags&4};a.prototype.isRuntimeNamespace=function(){return this.flags&
2};a.prototype.isRuntime=function(){return this.flags&6};a.prototype.isQName=function(){return 1===this.namespaces.length&&!this.isAnyName()};a.prototype.hasTypeParameter=function(){return!!this.typeParameter};a.prototype.getName=function(){return this.name};a.prototype.getOriginalName=function(){!0;var a=this.namespaces[0].originalURI;a&&(a+=".");return a+this.name};a.prototype.getNamespace=function(){!0;!0;return this.namespaces[0]};a.prototype.nameToString=function(){if(this.isAnyName())return"*";
var a=this.getName();return this.isRuntimeName()?"[]":a};a.prototype.hasObjectName=function(){return"object"===typeof this.name};a.prototype.toString=function(){var a=this.isAttribute()?"@":"";if(this.isAnyNamespace())a+="*::"+this.nameToString();else if(this.isRuntimeNamespace())a+="[]::"+this.nameToString();else if(1===this.namespaces.length&&this.isQName())a+=this.namespaces[0].toString()+"::",a+=this.nameToString();else{for(var a=a+"{",b=0,d=this.namespaces.length;b<d;b++)a+=this.namespaces[b].toString(),
b+1<d&&(a+=",");a+="}::"+this.nameToString()}this.hasTypeParameter()&&(a+="<"+this.typeParameter.toString()+">");return a};a.Int=a.getPublicQualifiedName("int");a.Uint=a.getPublicQualifiedName("uint");a.Class=a.getPublicQualifiedName("Class");a.Array=a.getPublicQualifiedName("Array");a.Object=a.getPublicQualifiedName("Object");a.String=a.getPublicQualifiedName("String");a.Number=a.getPublicQualifiedName("Number");a.Boolean=a.getPublicQualifiedName("Boolean");a.Function=a.getPublicQualifiedName("Function");
a.XML=a.getPublicQualifiedName("XML");a.XMLList=a.getPublicQualifiedName("XMLList");return a}(),ConstantPool=function(){function a(a){var d,g,f=[0];g=a.readU30();for(d=1;d<g;++d)f.push(a.readS32());var l=[0];g=a.readU30();for(d=1;d<g;++d)l.push(a.readU32());var m=[NaN];g=a.readU30();for(d=1;d<g;++d)m.push(a.readDouble());Timer.start("Parse Strings");var p=[""];g=a.readU30();for(d=1;d<g;++d)p.push(a.readUTFString(a.readU30()));this.positionAfterUTFStrings=a.pos;Timer.stop();this.ints=f;this.uints=
l;this.doubles=m;this.strings=p;Timer.start("Parse Namespaces");f=[void 0];g=a.readU30();for(d=1;d<g;++d)l=new ShumwayNamespace,l.parse(this,a),f.push(l);Timer.stop();Timer.start("Parse Namespace Sets");l=[void 0];g=a.readU30();for(d=1;d<g;++d){m=a.readU30();p=[];p.id=e++;for(var r=0;r<m;++r)p.push(f[a.readU30()]);l.push(p)}Timer.stop();this.namespaces=f;this.namespaceSets=l;Timer.start("Parse Multinames");f=[void 0];l=[];g=a.readU30();for(d=1;d<g;++d)f.push(Multiname.parse(this,a,f,l));Timer.stop();
this.multinames=f}var e=1;a.prototype.getValue=function(a,d){switch(a){case 3:return this.ints[d];case 4:return this.uints[d];case 6:return this.doubles[d];case 1:return this.strings[d];case 11:return!0;case 10:return!1;case 12:return null;case 0:break;case 8:case 23:return this.namespaces[d];case 7:case 14:case 15:case 16:case 17:case 18:case 19:case 20:return this.multinames[d];case 2:warning("TODO: CONSTANT_Float may be deprecated?");break;default:!0}};return a}(),MethodInfo=function(){function a(a){!0;
return"p"+String.fromCharCode(65+a)}function e(b,e){for(var f=b.constantPool,l=e.readU30(),m=f.multinames[e.readU30()],p=[],r=0;r<l;r++)p.push({type:f.multinames[e.readU30()]});var v=f.strings[e.readU30()],u=e.readU8(),r=0;if(u&8){r=e.readU30();!0;for(r=l-r;r<l;r++){var w=e.readU30();p[r].value=f.getValue(e.readU8(),w)}}if(u&128)for(r=0;r<l;r++)e.readU30(),p[r].name=a(r);else for(r=0;r<l;r++)p[r].name=a(r);this.abc=b;this.flags=u;this.optionals=null;this.debugName=v;this.parameters=p;this.returnType=
m}function b(a,b){var e=a.constantPool.multinames,e={start:b.readU30(),end:b.readU30(),target:b.readU30(),typeName:e[b.readU30()],varName:e[b.readU30()]};!0;!0;return e}e.prototype={toString:function(){var a=getFlags(this.flags,"NEED_ARGUMENTS NEED_ACTIVATION NEED_REST HAS_OPTIONAL   SET_DXN HAS_PARAM_NAMES".split(" "));return(a?a+" ":"")+this.name},hasOptional:function(){return!!(this.flags&8)},needsActivation:function(){return!!(this.flags&2)},needsRest:function(){return!!(this.flags&4)},needsArguments:function(){return!!(this.flags&
1)},isNative:function(){return!!(this.flags&32)},isClassMember:function(){return this.holder instanceof ClassInfo},isInstanceMember:function(){return this.holder instanceof InstanceInfo},isScriptMember:function(){return this.holder instanceof ScriptInfo}};e.parseBody=function(a,e){var f=a.methods[e.readU30()];f.hasBody=!0;!0;f.maxStack=e.readU30();f.localCount=e.readU30();f.initScopeDepth=e.readU30();f.maxScopeDepth=e.readU30();f.code=e.readU8s(e.readU30());for(var l=[],m=e.readU30(),p=0;p<m;++p)l.push(b(a,
e));f.exceptions=l;f.traits=parseTraits(a,e,f)};e.prototype.hasExceptions=function(){return 0<this.exceptions.length};return e}(),MetaDataInfo=function(){function a(a,b){for(var d=a.constantPool.strings,g=this.name=d[b.readU30()],f=b.readU30(),l=[],m=[],p=0;p<f;p++)l[p]=d[b.readU30()];for(p=0;p<f;p++){var r=l[p];m[p]={key:r,value:d[b.readU30()]};r&&"native"===g&&(!0,this[r]=m[p].value)}this.value=m}a.prototype={toString:function(){return"["+this.name+"]"}};return a}();
function attachHolder(a,e){!0;a.holder=e}
var InstanceInfo=function(){function a(a,d){this.id=e++;this.abc=a;var g=a.constantPool,f=a.methods;this.name=g.multinames[d.readU30()];!0;this.superName=g.multinames[d.readU30()];this.flags=d.readU8();this.protectedNs=void 0;this.flags&8&&(this.protectedNs=g.namespaces[d.readU30()]);var l=d.readU30();this.interfaces=[];for(var m=0;m<l;m++)this.interfaces[m]=g.multinames[d.readU30()];this.init=f[d.readU30()];this.init.isInstanceInitializer=!0;this.init.name=this.name;attachHolder(this.init,this);
this.traits=parseTraits(a,d,this)}var e=1;a.prototype={toString:function(){var a=getFlags(this.flags&8,["sealed","final","interface","protected"]),a=(a?a+" ":"")+this.name;this.superName&&(a+=" extends "+this.superName);return a},isFinal:function(){return this.flags&2},isSealed:function(){return this.flags&1},isInterface:function(){return this.flags&4}};return a}(),ClassInfo=function(){function a(a,d,g){this.id=e++;this.abc=a;this.init=a.methods[g.readU30()];this.init.isClassInitializer=!0;attachHolder(this.init,
this);this.traits=parseTraits(a,g,this);this.instanceInfo=d;this.instanceInfo.classInfo=this;this.defaultValue=Multiname.getQualifiedName(this.instanceInfo.name)===Multiname.Int||Multiname.getQualifiedName(this.instanceInfo.name)===Multiname.Uint?0:Multiname.getQualifiedName(this.instanceInfo.name)===Multiname.Number?NaN:Multiname.getQualifiedName(this.instanceInfo.name)===Multiname.Boolean?!1:null}var e=1;a.prototype.toString=function(){return this.instanceInfo.name.toString()};return a}();
function isClassOrInstanceInfo(a){return a instanceof ClassInfo||a instanceof InstanceInfo}
var ScriptInfo=function(){function a(a,d,g){this.id=e++;this.abc=a;this.name=a.name+"$script"+d;this.init=a.methods[g.readU30()];this.init.isScriptInitializer=!0;this.index=d;attachHolder(this.init,this);this.traits=parseTraits(a,g,this);this.traits.verified=!0}var e=1;a.prototype={get entryPoint(){return this.init},toString:function(){return this.name}};return a}(),AbcFile=function(){function a(a,b){Timer.start("Parse ABC");this.name=b;this.env={};var d,g,f=new AbcStream(a);d=f.readWord();if(3014671>
d)throw Error("Invalid ABC File (magic = "+Number(d).toString(16)+")");Timer.start("Parse constantPool");this.constantPool=new ConstantPool(f,b);Timer.stop();Timer.start("Parse Method Infos");this.methods=[];d=f.readU30();for(g=0;g<d;++g)this.methods.push(new MethodInfo(this,f));Timer.stop();Timer.start("Parse MetaData Infos");this.metadata=[];d=f.readU30();for(g=0;g<d;++g)this.metadata.push(new MetaDataInfo(this,f));Timer.stop();Timer.start("Parse Instance Infos");this.instances=[];d=f.readU30();
for(g=0;g<d;++g)this.instances.push(new InstanceInfo(this,f));Timer.stop();Timer.start("Parse Class Infos");this.classes=[];for(g=0;g<d;++g)this.classes.push(new ClassInfo(this,this.instances[g],f));Timer.stop();Timer.start("Parse Script Infos");this.scripts=[];d=f.readU30();for(g=0;g<d;++g)this.scripts.push(new ScriptInfo(this,g,f));Timer.stop();Timer.start("Parse Method Body Info");d=f.readU30();for(g=0;g<d;++g)MethodInfo.parseBody(this,f);Timer.stop();Timer.stop()}a.prototype={get lastScript(){!0;
return this.scripts[this.scripts.length-1]},toString:function(){return this.name}};return a}(),Bytecode=function(){function a(a){var b=a.readU8();this.op=b;this.originalPosition=a.position;var d=opcodeTable[b];d||unexpected("Unknown Op "+b);this.canThrow=d.canThrow;var g;switch(b){case 27:d=a.readS24();this.offsets=[];g=a.readU30()+1;for(b=0;b<g;b++)this.offsets.push(a.readS24());this.offsets.push(d);break;default:b=0;for(g=d.operands.length;b<g;b++){var f=d.operands[b];switch(f.size){case "u08":this[f.name]=
a.readU8();break;case "s08":this[f.name]=a.readS8();break;case "s16":this[f.name]=a.readS16();break;case "s24":this[f.name]=a.readS24();break;case "u30":this[f.name]=a.readU30();break;case "u32":this[f.name]=a.readU32();break;default:unexpected()}}}}a.prototype={makeBlockHead:function(a){if(this.succs)return a;this.bid=a;this.succs=[];this.preds=[];this.dominatees=[];return a+1},trace:function(a){this.succs&&a.writeLn("#"+this.bid)},toString:function(a){var b=opcodeTable[this.op],d=b.name.padRight(" ",
20),g,f;if(27===this.op){d+="targets:";g=0;for(f=this.targets.length;g<f;g++)d+=(0<g?",":"")+this.targets[g].position}else{g=0;for(f=b.operands.length;g<f;g++){var l=b.operands[g];if("offset"===l.name)d+="target:"+this.target.position;else{var d=d+(l.name+": "),m=this[l.name];if(a)switch(l.type){case "":d+=m;break;case "I":d+=a.constantPool.ints[m];break;case "U":d+=a.constantPool.uints[m];break;case "D":d+=a.constantPool.doubles[m];break;case "S":d+=a.constantPool.strings[m];break;case "N":d+=a.constantPool.namespaces[m];
break;case "CI":d+=a.classes[m];break;case "M":d+=a.constantPool.multinames[m];break;default:d+="?"}else d+=m}g<f-1&&(d+=", ")}}return d}};return a}(),Analysis=function(){function a(a){Counter.count("Analysis");this.method=a;this.method.code&&(Timer.start("Normalize"),this.normalizeBytecode(),Timer.stop())}a.prototype={normalizeBytecode:function(){function a(b,d){if(b&&b[d])return b[d];var e=Object.create(Bytecode.prototype);e.op=237;e.position=d;b&&(b[d]=e);return e}function b(a){0!==a--&&a<d.parameters.length&&
(d.parameters[a].isUsed=!0)}for(var d=this.method,g=[],f=[],l=new AbcStream(this.method.code),m;0<l.remaining();){var p=l.position;m=new Bytecode(l);switch(m.op){case 2:case 9:g[p]=f.length;continue;case 27:this.method.hasLookupSwitches=!0;m.targets=[];for(var r=m.offsets,v=0,u=r.length;v<u;v++)r[v]+=p;break;case 16:case 21:case 12:case 22:case 13:case 23:case 14:case 24:case 15:case 19:case 20:case 25:case 26:case 17:case 18:m.offset+=l.position;break;case 208:case 209:case 210:case 211:b(m.op-208);
break;case 98:b(m.index)}m.position=f.length;g[p]=f.length;f.push(m)}for(var l={},w=0,A=f.length;w<A;w++)switch(m=f[w],m.op){case 27:r=m.offsets;v=0;for(u=r.length;v<u;v++)p=g[r[v]],m.targets.push(f[p]||a(l,r[v])),r[v]=p;break;case 16:case 21:case 12:case 22:case 13:case 23:case 14:case 24:case 15:case 19:case 20:case 25:case 26:case 17:case 18:p=g[m.offset],m.target=f[p]||a(l,m.offset),m.offset=p}this.bytecodes=f;m=this.method.exceptions;v=0;for(u=m.length;v<u;v++)r=m[v],r.start=g[r.start],r.end=
g[r.end],r.offset=g[r.target],r.target=f[r.offset],r.target.exception=r},detectBasicBlocks:function(){var a=this.bytecodes,b=this.method.exceptions,d=0<b.length,g={},f,l,m,p;p=a[0].makeBlockHead(0);l=0;for(m=a.length-1;l<m;l++)switch(f=a[l],f.op){case 71:case 72:case 3:p=a[l+1].makeBlockHead(p);break;case 27:f=f.targets;for(var r=0,v=f.length;r<v;r++)p=f[r].makeBlockHead(p);p=a[l+1].makeBlockHead(p);break;case 16:case 21:case 12:case 22:case 13:case 23:case 14:case 24:case 15:case 19:case 20:case 25:case 26:case 17:case 18:p=
f.target.makeBlockHead(p),p=a[l+1].makeBlockHead(p)}f=a[m];switch(f.op){case 27:f=f.targets;r=0;for(v=f.length;r<v;r++)p=f[r].makeBlockHead(p);break;case 16:p=f.target.makeBlockHead(p);break;case 21:case 12:case 22:case 13:case 23:case 14:case 24:case 15:case 19:case 20:case 25:case 26:case 17:case 18:p=f.target.makeBlockHead(p),a[l+1]=getInvalidTarget(null,l+1),p=a[l+1].makeBlockHead(p)}if(d){r=0;for(v=b.length;r<v;r++)l=b[r],m=a[l.end+1],p=a[l.start].makeBlockHead(p),m&&(p=m.makeBlockHead(p)),p=
l.target.makeBlockHead(p)}var u=a[0];l=1;for(m=a.length;l<m;l++)if(a[l].succs){!0;g[u.bid]=u;f=a[l-1];u.end=f;var w=a[l];switch(f.op){case 71:case 72:case 3:break;case 27:r=0;for(v=f.targets.length;r<v;r++)u.succs.push(f.targets[r]);break;case 16:u.succs.push(f.target);break;case 21:case 12:case 22:case 13:case 23:case 14:case 24:case 15:case 19:case 20:case 25:case 26:case 17:case 18:u.succs.push(f.target);f.target!==w&&u.succs.push(w);break;default:u.succs.push(w)}if(d){r=u;v=[];f=0;for(var A=b.length;f<
A;f++){var z=b[f];r.position>=z.start&&r.end.position<=z.end&&v.push(z.target)}f=v;u.hasCatches=0<f.length;u.succs.push.apply(u.succs,f)}u=w}g[u.bid]=u;f=a[m-1];switch(f.op){case 27:r=0;for(v=f.targets.length;r<v;r++)u.succs.push(f.targets[r]);break;case 16:u.succs.push(f.target)}u.end=f;var s=BitSetFunctor(p),B=s.ADDRESS_BITS_PER_WORD,y=s.BITS_PER_WORD,D=s.BIT_INDEX_MASK;s.singleton=function(a){var b=new s;b.set(a.bid);b.count=1;b.dirty=0;return b};s.fromBlocks=function(a){var b=new s;b.setBlocks(a);
return b};a=s.prototype;s.singleword?(a.forEachBlock=function(a){!0;var b=this.bits;if(b)for(var d=0;d<y;d++)b&1<<d&&a(g[d])},a.choose=function(){var a=this.bits;if(a)for(var b=0;b<y;b++)if(a&1<<b)return g[b]},a.members=function(){var a=[],b=this.bits;if(b)for(var d=0;d<y;d++)b&1<<d&&a.push(g[d]);return a},a.setBlocks=function(a){for(var b=this.bits,d=0,e=a.length;d<e;d++)b|=1<<(a[d].bid&D);this.bits=b}):(a.forEachBlock=function(a){!0;for(var b=this.bits,d=0,e=b.length;d<e;d++){var f=b[d];if(f)for(var l=
0;l<y;l++)f&1<<l&&a(g[d*y+l])}},a.choose=function(){for(var a=this.bits,b=0,d=a.length;b<d;b++){var e=a[b];if(e)for(var f=0;f<y;f++)if(e&1<<f)return g[b*y+f]}},a.members=function(){for(var a=[],b=this.bits,d=0,e=b.length;d<e;d++){var f=b[d];if(f)for(var l=0;l<y;l++)f&1<<l&&a.push(g[d*y+l])}return a},a.setBlocks=function(a){for(var b=this.bits,d=0,e=a.length;d<e;d++){var g=a[d].bid;b[g>>B]|=1<<(g&D)}});this.BlockSet=s},normalizeReachableBlocks:function(){var a=this.bytecodes[0];!0;var b=this.BlockSet,
d=[],g={},f={},l=[a];for(f[a.bid]=!0;a=l.top();)if(g[a.bid]){if(1===g[a.bid]){g[a.bid]=2;d.push(a);for(var m=a.succs,p=0,r=m.length;p<r;p++)m[p].preds.push(a)}f[a.bid]=!1;l.pop()}else{g[a.bid]=1;f[a.bid]=!0;m=a.succs;p=0;for(r=m.length;p<r;p++){var v=m[p];f[v.bid]&&(a.spbacks||(a.spbacks=new b),a.spbacks.set(v.bid));!g[v.bid]&&l.push(v)}}this.blocks=d.reverse()},computeDominance:function(){var a=this.blocks,b=a.length,d=Array(b);d[0]=0;for(var g={},f=0;f<b;f++)g[a[f].bid]=f;for(var l=!0;l;){l=!1;
for(f=1;f<b;f++){var m=a[f].preds,p=m.length,r=g[m[0].bid];if(!(r in d))for(var v=1;v<p&&!(r=g[m[v].bid],r in d);v++);!0;for(v=0;v<p;v++){var u=g[m[v].bid];if(u!==r&&u in d){for(;u!==r;){for(;u>r;)u=d[u];for(;r>u;)r=d[r]}r=u}}d[f]!==r&&(d[f]=r,l=!0)}}a[0].dominator=a[0];for(f=1;f<b;f++)g=a[f],p=a[d[f]],g.dominator=p,p.dominatees.push(g),g.npreds=g.preds.length;b=[a[0]];for(a[0].level||(a[0].level=0);g=b.shift();){a=g.dominatees;v=0;for(p=a.length;v<p;v++)a[v].level=g.level+1;b.push.apply(b,a)}},analyzeControlFlow:function(){!0;
this.detectBasicBlocks();this.normalizeReachableBlocks();this.computeDominance();return this.analyzedControlFlow=!0},markLoops:function(){function a(d,e){var g=new b;g.setBlocks(d);g.recount();this.id=e;this.body=g;this.exit=new b;this.save={};this.head=new b;this.npreds=0}if(!this.analyzedControlFlow&&!this.analyzeControlFlow())return!1;var b=this.BlockSet,d;d=this.blocks;for(var g=new b,f=0,l=d.length;f<l;f++){var m=d[f],p=m.spbacks;if(p)for(var m=m.succs,r=0,v=m.length;r<v;r++){var u=m[r];p.get(u.bid)&&
g.set(u.dominator.bid)}}d=g.members();if(0>=d.length)return this.markedLoops=!0;d=d.sort(function(a,b){return a.level-b.level});g=0;for(f=d.length-1;0<=f;f--){for(var l=d[f],p=1,m={},r={},v=[],u=[],w=[],A=l.level+1,z=[l],s=void 0,B=void 0,s=void 0;s=z.top();)if(m[s.bid]){if(u.peek()===s){u.pop();var y=[];do B=v.pop(),r[B.bid]=!0,y.push(B);while(B!==s);(1<y.length||B.spbacks&&B.spbacks.get(B.bid))&&w.push(y)}z.pop()}else{m[s.bid]=p++;v.push(s);u.push(s);for(var B=s.succs,y=0,D=B.length;y<D;y++)if(s=
B[y],!(s.level<A)){var G=s.bid;if(m[G]){if(!r[G])for(;m[u.peek().bid]>m[G];)u.pop()}else z.push(s)}}p=w;if(0!==p.length){m=0;for(r=p.length;m<r;m++){v=p[m];u=new a(v,g++);w=0;for(A=v.length;w<A;w++)if(z=v[w],z.level===l.level+1&&!z.loop){z.loop=u;u.head.set(z.bid);s=z.preds;B=0;for(y=s.length;B<y;B++)u.body.get(s[B].bid)&&z.npreds--;u.npreds+=z.npreds}w=0;for(A=v.length;w<A;w++)z=v[w],z.level===l.level+1&&(z.npreds=u.npreds);u.head.recount()}}}return this.markedLoops=!0}};return a}();
(function(a){function e(a){for(var b=["leadingComments","loc"];a;)a.fields&&(b=a.fields.concat(b)),a=a.extends?g[a.extends]:null;return b}function b(a){return"_"+a}function d(f,m){if(!a[f]){for(var p=e(m),r=[],v=['this.type = "'+f+'";'],u=0,w=p.length;u<w;u++){var A=p[u];"@"===A.charAt(0)&&(p[u]=A=A.substr(1),r.push(A));v.push("this."+A+" = _"+A+";")}p=new Function(p.map(b),v.join("\n"));m.extends&&(v=d(m.extends,g[m.extends]),p.prototype=Object.create(v.prototype));Object.defineProperty(p.prototype,
"_children",{value:r,writable:!0,configurable:!0,enumerable:!1});a[f]=p}return a[f]}var g=a.lang={Node:{},Program:{"extends":"Node",fields:["@body"]},Statement:{"extends":"Node"},EmptyStatement:{"extends":"Statement"},BlockStatement:{"extends":"Statement",fields:["@body"]},ExpressionStatement:{"extends":"Statement",fields:["@expression"]},IfStatement:{"extends":"Statement",fields:["@test","@consequent","@alternate"]},LabeledStatement:{"extends":"Statement",fields:["@label","@body"]},BreakStatement:{"extends":"Statement",
fields:["@label"]},ContinueStatement:{"extends":"Statement",fields:["@label"]},WithStatement:{"extends":"Statement",fields:["@object","@body"]},SwitchStatement:{"extends":"Statement",fields:["@discriminant","@cases","lexical"]},ReturnStatement:{"extends":"Statement",fields:["@argument"]},ThrowStatement:{"extends":"Statement",fields:["@argument"]},TryStatement:{"extends":"Statement",fields:["@block","@handlers","@finalizer"]},WhileStatement:{"extends":"Statement",fields:["@test","@body"]},DoWhileStatement:{"extends":"Statement",
fields:["@body","@test"]},ForStatement:{"extends":"Statement",fields:["@init","@test","@update","@body"]},ForInStatement:{"extends":"Statement",fields:["@left","@right","@body","each"]},LetStatement:{"extends":"Statement",fields:["@head","@body"]},DebuggerStatement:{"extends":"Statement"},Declaration:{"extends":"Statement"},FunctionDeclaration:{"extends":"Declaration",fields:"@id @params @body @decltype generator expression @modifiers".split(" ")},VariableDeclaration:{"extends":"Declaration",fields:["kind",
"@declarations"]},VariableDeclarator:{"extends":"Node",fields:["@id","@init","@decltype","@arguments"]},Expression:{"extends":"Pattern"},ThisExpression:{"extends":"Expression"},ArrayExpression:{"extends":"Expression",fields:["@elements"]},ObjectExpression:{"extends":"Expression",fields:["@properties"]},Property:{"extends":"Node",fields:["@key","@value","kind"]},FunctionExpression:{"extends":"Expression",fields:"@id @params @body @decltype generator expression".split(" ")},SequenceExpression:{"extends":"Expression",
fields:["@expressions"]},UnaryExpression:{"extends":"Expression",fields:["operator","@argument","prefix"]},BinaryExpression:{"extends":"Expression",fields:["operator","@left","@right"]},AssignmentExpression:{"extends":"Expression",fields:["@left","operator","@right"]},UpdateExpression:{"extends":"Expression",fields:["operator","@argument","prefix"]},LogicalExpression:{"extends":"Expression",fields:["operator","@left","@right"]},ConditionalExpression:{"extends":"Expression",fields:["@test","@consequent",
"@alternate"]},NewExpression:{"extends":"Expression",fields:["@callee","@arguments"]},CallExpression:{"extends":"Expression",fields:["@callee","@arguments"]},MemberExpression:{"extends":"Expression",fields:["@object","@property","computed","kind"]},YieldExpression:{"extends":"Expression",fields:["@argument"]},ComprehensionExpression:{"extends":"Expression",fields:["@blocks","@filter"]},GeneratorExpression:{"extends":"Expression",fields:["@blocks","@filter"]},LetExpression:{"extends":"Expression",
fields:["@head","@body"]},Pattern:{"extends":"Node"},ObjectPattern:{"extends":"Pattern",fields:["@properties"]},ArrayPattern:{"extends":"Pattern",fields:["@elements"]},SwitchCase:{"extends":"Node",fields:["@test","@consequent"]},CatchClause:{"extends":"Node",fields:["@param","@guard","@body"]},Identifier:{"extends":"Expression",fields:["name","kind"]},Literal:{"extends":"Expression",fields:["value"]},Type:{"extends":"Node"},PointerType:{"extends":"Type",fields:["@base"]},ArrayType:{"extends":"PointerType",
fields:["length"]},StructType:{"extends":"Type",fields:["@id","@members","isUnion"]},MemberDeclarator:{"extends":"Node",fields:["modifiers","@declarator"]},ArrowType:{"extends":"Type",fields:["@params","@return"]},TypeIdentifier:{"extends":"Type",fields:["name"]},TypeAliasDirective:{"extends":"Node",fields:["@original","@alias"]},CastExpression:{"extends":"Expression",fields:["@as","@argument"]}};a.allFields=e;for(var f in g)d(f,g[f]);a.makePass=function(a,b){return function(d){for(var e,g,f,w=this._children,
A=0,z=w.length;A<z;A++)if(f=this[w[A]])if(f instanceof Array){g=this[w[A]]=[];for(var s=0,B=f.length;s<B;s++)f[s]?"function"===typeof f[s][a]&&(e=f[s][a](d),null!==e&&g.push(e)):g.push(f[s])}else"function"===typeof f[a]&&(e=f[a](d),this[w[A]]=null===e?void 0:e);return"function"===typeof this[b]?(d.logger&&"undefined"!==typeof this.loc?(d.logger.push(this),e=this[b](d),d.logger.pop()):e=this[b](d),null===e?null:e?e:this):this}};a.makePass=function(a,b,d){return function(e){for(var g,f,w,A=this._children,
z=0,s=A.length;z<s;z++)if(f=d?A.length-1-z:z,w=this[A[f]])if(w instanceof Array){f=this[A[f]]=[];var B;B=0;for(var y=w.length;B<y;B++)g=d?w.length-1-B:B,w[g]?"function"===typeof w[g][a]&&(g=w[g][a](e),null!==g&&(d?f.unshift(g):f.push(g))):d?f.unshift(w[g]):f.push(w[g])}else"function"===typeof w[a]&&(g=w[a](e),this[A[f]]=null===g?void 0:g);return"function"===typeof this[b]?(e.logger&&"undefined"!==typeof this.loc?(e.logger.push(this),g=this[b](e),e.logger.pop()):g=this[b](e),null===g?null:g?g:this):
this}};a.lift=function m(b){if(!b)return b;if(b instanceof Array)return b.map(function(a){return a?m(a):a});var d=b.type,f=a[d];if(!f)throw Error("unknown node type `"+d+"'");f=new f;f.loc=b.loc;for(var d=e(g[d]),u=0,w=d.length;u<w;u++){var A;"@"===d[u].charAt(0)?(A=d[u].substr(1),b[A]&&(f[A]=m(b[A]))):(A=d[u],f[A]=b[A])}return f};a.flatten=function p(a){if(!a)return a;if(a instanceof Array)return a.map(function(a){return p(a)});for(var b=a.type,d={type:b},b=e(g[b]),f=0,A=b.length;f<A;f++){var z;
"@"===b[f].charAt(0)?(z=b[f].substr(1),d[z]=a[z]?p(a[z]):null):(z=b[f],d[z]=a[z])}return d}})("undefined"===typeof exports?estransform={}:exports);
(function(a){function e(a){var b=a.length,d=[],e;for(e=0;e<b;e+=1)d[e]=a.charAt(e);return d}function b(a,b){var d="";for(b|=0;0<b;b>>>=1,a+=a)b&1&&(d+=a);return d}function d(a){a=a.charAt(a.length-1);return"\r"===a||"\n"===a}function g(a){var b={},d,e;for(d in a)a.hasOwnProperty(d)&&(e=a[d],b[d]="object"===typeof e&&null!==e?g(e):e);return b}function f(a,b){function d(a){return"object"===typeof a&&a instanceof Object&&!(a instanceof RegExp)}var e,g;for(e in b)b.hasOwnProperty(e)&&(g=b[e],d(g)?d(a[e])?
f(a[e],g):a[e]=f({},g):a[e]=g);return a}function l(a){return 0<="\t\v\f \u00a0".indexOf(a)||5760<=a.charCodeAt(0)&&0<="\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\ufeff".indexOf(a)}function m(a){return 0<="\n\r\u2028\u2029".indexOf(a)}function p(a){return"$"===a||"_"===a||"\\"===a||"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"0"<=a&&"9">=a||128<=a.charCodeAt(0)&&K.NonAsciiIdentifierPart.test(a)}function r(a,b){var d=a.charAt(a.length-1),e=b.charAt(0);return("+"===
d||"-"===d)&&d===e||p(d)&&p(e)?a+" "+b:l(d)||m(d)||l(e)||m(e)?a+b:a+Q+b}function v(a){return F+a}function u(a,b){if("Line"===a.type)return d(a.value)?"//"+a.value:"//"+a.value+"\n";if(fa.format.indent.adjustMultilineComment&&/[\n\r]/.test(a.value)){var e=b,g,f,m,r,p,s;g=("/*"+a.value+"*/").split(/\r\n|[\r\n]/);s=Number.MAX_VALUE;f=1;for(m=g.length;f<m;f+=1){r=g[f];for(p=0;p<r.length&&l(r[p]);)p+=1;s>p&&(s=p)}"undefined"!==typeof e?(r=F,"*"===g[1][s]&&(e+=" "),F=e):(1===s%2&&(s-=1),r=F);f=1;for(m=
g.length;f<m;f+=1)g[f]=v(g[f].slice(s));F=r;return g.join("\n")}return"/*"+a.value+"*/"}function w(a,b,d){return b<d?"("+a+")":a}function A(a,b){var d,e;d=!fa.comment||!a.leadingComments;if(a.type===C.BlockStatement&&d)return Q+y(a);if(a.type===C.EmptyStatement&&d)return";";d=F;F+=O;e=J+v(y(a,{semicolonOptional:b}));F=d;return e}function z(a,b){return a.type===C.BlockStatement&&(!fa.comment||!a.leadingComments)&&!d(b)?Q:d(b)?F+"":(""===J?" ":J)+(F+"")}function s(a){var b,d,e;b="(";d=0;for(e=a.params.length;d<
e;d+=1)b+=a.params[d].name,d+1<e&&(b+=","+Q);return b+")"+A(a.body)}function B(a,b){var g,f,l,m,p,u;f=b.precedence;p=b.allowIn;u=b.allowCall;switch(a.type){case C.SequenceExpression:g="";p|=E.Sequence<f;m=0;for(l=a.expressions.length;m<l;m+=1)g+=B(a.expressions[m],{precedence:E.Assignment,allowIn:p,allowCall:!0}),m+1<l&&(g+=","+Q);g=w(g,E.Sequence,f);break;case C.AssignmentExpression:p|=E.Assignment<f;g=w(B(a.left,{precedence:E.Call,allowIn:p,allowCall:!0})+Q+a.operator+Q+B(a.right,{precedence:E.Assignment,
allowIn:p,allowCall:!0}),E.Assignment,f);break;case C.ConditionalExpression:p|=E.Conditional<f;g=w(B(a.test,{precedence:E.LogicalOR,allowIn:p,allowCall:!0})+Q+"?"+Q+B(a.consequent,{precedence:E.Assignment,allowIn:p,allowCall:!0})+Q+":"+Q+B(a.alternate,{precedence:E.Assignment,allowIn:p,allowCall:!0}),E.Conditional,f);break;case C.LogicalExpression:case C.BinaryExpression:l=I[a.operator];p|=l<f;g=r(B(a.left,{precedence:l,allowIn:p,allowCall:!0}),a.operator);m=B(a.right,{precedence:l+1,allowIn:p,allowCall:!0});
g="/"===a.operator&&"/"===g.charAt(g.length-1)?g+(" "+m):r(g,m);g="in"===a.operator&&!p?"("+g+")":w(g,l,f);break;case C.CallExpression:g=B(a.callee,{precedence:E.Call,allowIn:!0,allowCall:!0,allowUnparenthesizedNew:!1});g+="(";m=0;for(l=a.arguments.length;m<l;m+=1)g+=B(a.arguments[m],{precedence:E.Assignment,allowIn:!0,allowCall:!0}),m+1<l&&(g+=","+Q);g+=")";g=u?w(g,E.Call,f):"("+g+")";break;case C.NewExpression:l=a.arguments.length;p=void 0===b.allowUnparenthesizedNew||b.allowUnparenthesizedNew;
g=r("new",B(a.callee,{precedence:E.New,allowIn:!0,allowCall:!1,allowUnparenthesizedNew:p&&!W&&0===l}));if(!p||W||0<l){g+="(";for(m=0;m<l;m+=1)g+=B(a.arguments[m],{precedence:E.Assignment,allowIn:!0,allowCall:!0}),m+1<l&&(g+=","+Q);g+=")"}g=w(g,E.New,f);break;case C.MemberExpression:g=B(a.object,{precedence:E.Call,allowIn:!0,allowCall:u,allowUnparenthesizedNew:!1});a.computed?g+="["+B(a.property,{precedence:E.Sequence,allowIn:!0,allowCall:u})+"]":(a.object.type===C.Literal&&"number"===typeof a.object.value&&
0>g.indexOf(".")&&!/[eExX]/.test(g)&&!(2<=g.length&&"0"===g[0])&&(g+="."),g+="."+a.property.name);g=w(g,E.Member,f);break;case C.UnaryExpression:m=B(a.argument,{precedence:E.Unary+(a.argument.type===C.UnaryExpression&&3>a.operator.length&&a.argument.operator===a.operator?1:0),allowIn:!0,allowCall:!0});""===Q?g=r(a.operator,m):(g=a.operator,2<g.length&&(g+=" "),g+=m);g=w(g,E.Unary,f);break;case C.UpdateExpression:g=a.prefix?w(a.operator+B(a.argument,{precedence:E.Unary,allowIn:!0,allowCall:!0}),E.Unary,
f):w(B(a.argument,{precedence:E.Postfix,allowIn:!0,allowCall:!0})+a.operator,E.Postfix,f);break;case C.FunctionExpression:g="function";g=a.id?g+(" "+a.id.name):g+Q;g+=s(a);break;case C.ArrayExpression:if(!a.elements.length){g="[]";break}g="["+J;f=F;F+=O;m=0;for(l=a.elements.length;m<l;m+=1)a.elements[m]?g+=v(B(a.elements[m],{precedence:E.Assignment,allowIn:!0,allowCall:!0})):(g+=F+"",m+1===l&&(g+=",")),m+1<l&&(g+=","+J);F=f;d(g)||(g+=J);g+=F+"]";break;case C.Property:g="get"===a.kind||"set"===a.kind?
a.kind+" "+B(a.key,{precedence:E.Sequence,allowIn:!0,allowCall:!0})+s(a.value):B(a.key,{precedence:E.Sequence,allowIn:!0,allowCall:!0})+":"+Q+B(a.value,{precedence:E.Assignment,allowIn:!0,allowCall:!0});break;case C.ObjectExpression:if(!a.properties.length){g="{}";break}g="{"+J;f=F;F+=O;m=0;for(l=a.properties.length;m<l;m+=1)g+=v(B(a.properties[m],{precedence:E.Sequence,allowIn:!0,allowCall:!0})),m+1<l&&(g+=","+J);F=f;d(g)||(g+=J);g+=F+"}";break;case C.ThisExpression:g="this";break;case C.Identifier:g=
a.name;break;case C.Literal:if(a.hasOwnProperty("raw")&&$)try{if(l=$(a.raw).body[0].expression,l.type===C.Literal&&l.value===a.value){g=a.raw;break}}catch(A){}if(null===a.value){g="null";break}if("string"===typeof a.value){g=a.value;u="";var z;m=l=0;"undefined"===typeof g[0]&&(g=e(g));f=0;for(p=g.length;f<p;f+=1){z=g[f];if("'"===z)l+=1;else if('"'===z)m+=1;else if("/"===z&&N)u+="\\";else if(0<="\\\n\r\u2028\u2029".indexOf(z)){var y="\\";switch(z){case "\\":y+="\\";break;case "\n":y+="n";break;case "\r":y+=
"r";break;case "\u2028":y+="u2028";break;case "\u2029":y+="u2029";break;default:throw Error("Incorrectly classified character");}u+=y;continue}else if(N&&" ">z||!N&&!(U||" "<=z&&"~">=z)){var y=g[f+1],D=z.charCodeAt(0),G=D.toString(16),K="\\";switch(z){case "\b":K+="b";break;case "\f":K+="f";break;case "\t":K+="t";break;default:K=N||255<D?K+("u"+"0000".slice(G.length)+G):"\x00"===z&&0>"0123456789".indexOf(y)?K+"0":"\v"===z?K+"v":K+("x"+"00".slice(G.length)+G)}u+=K;continue}u+=z}l=!("double"===M||"auto"===
M&&m<l);g=u;u=l?"'":'"';"undefined"===typeof g[0]&&(g=e(g));f=0;for(p=g.length;f<p;f+=1){z=g[f];if("'"===z&&l||'"'===z&&!l)u+="\\";u+=z}g=u+(l?"'":'"');break}if("number"===typeof a.value){g=a.value;if(g!==g)throw Error("Numeric literal whose value is NaN");if(0>1/g)throw Error("Numeric literal whose value is negative");if(g===1/0)g=N?"null":H?"1e400":"1e+400";else{f=""+g;if(H&&!(3>f.length)){p=f.indexOf(".");!N&&("0"===f.charAt(0)&&1===p)&&(p=0,f=f.slice(1));l=f;f=f.replace("e+","e");m=0;if(0<(u=
l.indexOf("e")))m=+l.slice(u+1),l=l.slice(0,u);0<=p&&(m-=l.length-p-1,l=+(l.slice(0,p)+l.slice(p+1))+"");for(u=0;"0"===l.charAt(l.length+u-1);)u-=1;0!==u&&(m-=u,l=l.slice(0,u));0!==m&&(l+="e"+m);if((l.length<f.length||P&&1E12<g&&Math.floor(g)===g&&(l="0x"+g.toString(16)).length<f.length)&&+l===g)f=l}g=f}break}g=a.value.toString()}if(void 0===g)throw Error("Unknown expression type: "+a.type);return g}function y(a,e){var g,f,l,p,w,D,K;D=!0;K=";";e&&(D=void 0===e.allowIn||e.allowIn,!ga&&!0===e.semicolonOptional&&
(K=""));switch(a.type){case C.BlockStatement:l="{"+J;p=F;F+=O;g=0;for(f=a.body.length;g<f;g+=1)w=v(y(a.body[g],{semicolonOptional:g===f-1})),l+=w,d(w)||(l+=J);F=p;l+=F+"}";break;case C.BreakStatement:l=a.label?"break "+a.label.name+K:"break"+K;break;case C.ContinueStatement:l=a.label?"continue "+a.label.name+K:"continue"+K;break;case C.DoWhileStatement:l=r("do",A(a.body));l+=z(a.body,l);l+="while"+Q+"("+B(a.test,{precedence:E.Sequence,allowIn:!0,allowCall:!0})+")"+K;break;case C.CatchClause:p=F;F+=
O;l="catch"+Q+"("+B(a.param,{precedence:E.Sequence,allowIn:!0,allowCall:!0})+")";F=p;l+=A(a.body);break;case C.DebuggerStatement:l="debugger"+K;break;case C.EmptyStatement:l=";";break;case C.ExpressionStatement:l=B(a.expression,{precedence:E.Sequence,allowIn:!0,allowCall:!0});l="{"===l.charAt(0)||"function"===l.slice(0,8)&&0<=" (".indexOf(l.charAt(8))?"("+l+")"+K:l+K;break;case C.VariableDeclarator:l=a.init?a.id.name+Q+"="+Q+B(a.init,{precedence:E.Assignment,allowIn:D,allowCall:!0}):a.id.name;break;
case C.VariableDeclaration:l=a.kind;if(1===a.declarations.length&&a.declarations[0].init&&a.declarations[0].init.type===C.FunctionExpression)l+=" "+y(a.declarations[0],{allowIn:D});else{p=F;F+=O;w=a.declarations[0];l=fa.comment&&w.leadingComments?l+("\n"+v(y(w,{allowIn:D}))):l+(" "+y(w,{allowIn:D}));g=1;for(f=a.declarations.length;g<f;g+=1)w=a.declarations[g],l=fa.comment&&w.leadingComments?l+(","+J+v(y(w,{allowIn:D}))):l+(","+Q+y(w,{allowIn:D}));F=p}l+=K;break;case C.ThrowStatement:l=r("throw",B(a.argument,
{precedence:E.Sequence,allowIn:!0,allowCall:!0}))+K;break;case C.TryStatement:l="try"+A(a.block);l+=z(a.block,l);g=0;for(f=a.handlers.length;g<f;g+=1)if(l+=y(a.handlers[g]),a.finalizer||g+1!==f)l+=z(a.handlers[g].body,l);a.finalizer&&(l+="finally"+A(a.finalizer));break;case C.SwitchStatement:p=F;F+=O;l="switch"+Q+"("+B(a.discriminant,{precedence:E.Sequence,allowIn:!0,allowCall:!0})+")"+Q+"{"+J;F=p;if(a.cases){g=0;for(f=a.cases.length;g<f;g+=1)w=v(y(a.cases[g],{semicolonOptional:g===f-1})),l+=w,d(w)||
(l+=J)}l+=F+"}";break;case C.SwitchCase:p=F;F+=O;l=a.test?r("case",B(a.test,{precedence:E.Sequence,allowIn:!0,allowCall:!0}))+":":"default:";g=0;if((f=a.consequent.length)&&a.consequent[0].type===C.BlockStatement)w=A(a.consequent[0]),l+=w,g=1;for(g!==f&&!d(l)&&(l+=J);g<f;g+=1)w=v(y(a.consequent[g],{semicolonOptional:g===f-1&&""===K})),l+=w,g+1!==f&&!d(w)&&(l+=J);F=p;break;case C.IfStatement:p=F;F+=O;a.alternate?a.alternate.type===C.IfStatement?(l="if"+Q+"("+B(a.test,{precedence:E.Sequence,allowIn:!0,
allowCall:!0})+")",F=p,l+=A(a.consequent),l+=z(a.consequent,l),l+="else "+y(a.alternate)):(l="if"+Q+"("+B(a.test,{precedence:E.Sequence,allowIn:!0,allowCall:!0})+")",F=p,l+=A(a.consequent),l+=z(a.consequent,l),l=r(l+"else",A(a.alternate,""===K))):(l="if"+Q+"("+B(a.test,{precedence:E.Sequence,allowIn:!0,allowCall:!0})+")",F=p,l+=A(a.consequent,""===K));break;case C.ForStatement:p=F;F+=O;l="for"+Q+"(";l=a.init?a.init.type===C.VariableDeclaration?l+y(a.init,{allowIn:!1}):l+(B(a.init,{precedence:E.Sequence,
allowIn:!1,allowCall:!0})+";"):l+";";l=a.test?l+(Q+B(a.test,{precedence:E.Sequence,allowIn:!0,allowCall:!0})+";"):l+";";l=a.update?l+(Q+B(a.update,{precedence:E.Sequence,allowIn:!0,allowCall:!0})+")"):l+")";F=p;l+=A(a.body,""===K);break;case C.ForInStatement:l="for"+Q+"(";a.left.type===C.VariableDeclaration?(p=F,F+=O+O,l+=a.left.kind+" "+y(a.left.declarations[0],{allowIn:!1})):(p=F,F+=O,l+=B(a.left,{precedence:E.Call,allowIn:!0,allowCall:!0}));p=F=p;F+=O;l=r(l,"in");l=r(l,B(a.right,{precedence:E.Sequence,
allowIn:!0,allowCall:!0}))+")";F=p;l+=A(a.body,""===K);break;case C.LabeledStatement:l=a.label.name+":"+A(a.body,""===K);break;case C.Program:l="";g=0;for(f=a.body.length;g<f;g+=1)w=v(y(a.body[g],{semicolonOptional:g===f-1})),l+=w,g+1<f&&!d(w)&&(l+=J);break;case C.FunctionDeclaration:l="function"+Q;a.id&&(l+=(""===Q?" ":"")+a.id.name);l+=s(a);break;case C.ReturnStatement:l=a.argument?r("return",B(a.argument,{precedence:E.Sequence,allowIn:!0,allowCall:!0}))+K:"return"+K;break;case C.WhileStatement:p=
F;F+=O;l="while"+Q+"("+B(a.test,{precedence:E.Sequence,allowIn:!0,allowCall:!0})+")";F=p;l+=A(a.body,""===K);break;case C.WithStatement:p=F,F+=O,l="with"+Q+"("+B(a.object,{precedence:E.Sequence,allowIn:!0,allowCall:!0})+")",F=p,l+=A(a.body,""===K)}if(void 0===l)throw Error("Unknown statement type: "+a.type);if(fa.comment){g=l;if(a.leadingComments){p=g;K=a.leadingComments[0];g=u(K);d(g)||(g+="\n");f=1;for(l=a.leadingComments.length;f<l;f+=1)K=a.leadingComments[f],K=u(K),d(K)||(K+="\n"),g+=F+K;g+=F+
p}if(a.trailingComments){p=!d(g);f=F+g+O;for(l=f.length-1;0<=l&&!m(f.charAt(l));l-=1);w=b(" ",f.length-1-l);f=0;for(l=a.trailingComments.length;f<l;f+=1)K=a.trailingComments[f],p?(g=0===f?g+O:g+w,g+=u(K,w)):g+=v(u(K)),f!==l-1&&!d(g)&&(g+="\n")}return g}return l}function D(a,b){var d,e,g,f,l,m,r;d=[a];for(e=[];d.length;)if(g=d.pop()){f=b.enter?b.enter(g):void 0;if(f===R.Break)break;d.push(null);e.push(g);if(f!==R.Skip){m=S[g.type];for(f=m.length;0<=(f-=1);)if(r=g[m[f]])if(L(r))for(l=r.length;0<=(l-=
1);)r[l]&&d.push(r[l]);else d.push(r)}}else if(g=e.pop(),f=b.leave?b.leave(g):void 0,f===R.Break)break}function G(a,b){var d,e,g,f;e=b.length;for(g=0;e;)d=e>>>1,f=g+d,b[f].range[0]>a.range[0]?e=d:(g=f+1,e-=d+1);d=g;a.extendedRange=[a.range[0],a.range[1]];d!==b.length&&(a.extendedRange[1]=b[d].range[0]);d-=1;0<=d&&(d<b.length?a.extendedRange[0]=b[d].range[1]:(void 0).length&&(a.extendedRange[1]=b[b.length-1].range[0]));return a}var C,E,I,K,S,R,L,F,O,N,H,P,M,U,J,Q,W,ga,fa,$;C={AssignmentExpression:"AssignmentExpression",
ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",
TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"};E={Sequence:0,Assignment:1,Conditional:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Unary:13,Postfix:14,Call:15,New:16,Member:17,Primary:18};I={"||":E.LogicalOR,"&&":E.LogicalAND,
"|":E.BitwiseOR,"^":E.BitwiseXOR,"&":E.BitwiseAND,"==":E.Equality,"!=":E.Equality,"===":E.Equality,"!==":E.Equality,"<":E.Relational,">":E.Relational,"<=":E.Relational,">=":E.Relational,"in":E.Relational,"instanceof":E.Relational,"<<":E.BitwiseSHIFT,">>":E.BitwiseSHIFT,">>>":E.BitwiseSHIFT,"+":E.Additive,"-":E.Additive,"*":E.Multiplicative,"%":E.Multiplicative,"/":E.Multiplicative};K={NonAsciiIdentifierPart:RegExp("[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0\u08a2-\u08ac\u08e4-\u08fe\u0900-\u0963\u0966-\u096f\u0971-\u0977\u0979-\u097f\u0981-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d02\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191c\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1d00-\u1de6\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua697\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a\uaa7b\uaa80-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]")};
(L=Array.isArray)||(L=function(a){return"[object Array]"===Object.prototype.toString.call(a)});S={AssignmentExpression:["left","right"],ArrayExpression:["elements"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DoWhileStatement:["body","test"],DebuggerStatement:[],EmptyStatement:[],ExpressionStatement:["expression"],
ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],Identifier:[],IfStatement:["test","consequent","alternate"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],NewExpression:["callee","arguments"],ObjectExpression:["properties"],Program:["body"],Property:["key","value"],ReturnStatement:["argument"],SequenceExpression:["expressions"],
SwitchStatement:["descriminant","cases"],SwitchCase:["test","consequent"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],PointerType:["base"],StructType:["id","fields"],FieldDeclarator:["id","decltype"],ArrowType:["params","return"],TypeIdentifier:[],TypeAliasDirective:["original",
"alias"],CastExpression:["as","argument"]};R={Break:1,Skip:2};a.version="0.0.6-dev";a.generate=function(a,d){var e={indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0}};"undefined"!==typeof d?("string"===typeof d.indent&&(e.format.indent.style=d.indent),"number"===typeof d.base&&(e.format.indent.base=d.base),d=f(e,d),O=d.format.indent.style,
F="string"===typeof d.base?d.base:b(O,d.format.indent.base)):(d=e,O=d.format.indent.style,F=b(O,d.format.indent.base));N=d.format.json;H=d.format.renumber;P=N?!1:d.format.hexadecimal;M=N?"double":d.format.quotes;U=d.format.escapeless;d.format.compact?J=Q=O=F="":(J="\n",Q=" ");W=d.format.parentheses;ga=d.format.semicolons;$=N?null:d.parse;fa=d;switch(a.type){case C.BlockStatement:case C.BreakStatement:case C.CatchClause:case C.ContinueStatement:case C.DoWhileStatement:case C.DebuggerStatement:case C.EmptyStatement:case C.ExpressionStatement:case C.ForStatement:case C.ForInStatement:case C.FunctionDeclaration:case C.IfStatement:case C.LabeledStatement:case C.Program:case C.ReturnStatement:case C.SwitchStatement:case C.SwitchCase:case C.ThrowStatement:case C.TryStatement:case C.VariableDeclaration:case C.VariableDeclarator:case C.WhileStatement:case C.WithStatement:return y(a);
case C.AssignmentExpression:case C.ArrayExpression:case C.BinaryExpression:case C.CallExpression:case C.ConditionalExpression:case C.FunctionExpression:case C.Identifier:case C.Literal:case C.LogicalExpression:case C.MemberExpression:case C.NewExpression:case C.ObjectExpression:case C.Property:case C.SequenceExpression:case C.ThisExpression:case C.UnaryExpression:case C.UpdateExpression:return B(a,{precedence:E.Sequence,allowIn:!0,allowCall:!0})}throw Error("Unknown node type: "+a.type);};a.traverse=
D;a.attachComments=function(a,b,d){var e=[],f,l;if(!a.range)throw Error("attachComments needs range information");if(!d.length){if(b.length){l=0;for(f=b.length;l<f;l+=1)d=g(b[l]),d.extendedRange=[0,a.range[0]],e.push(d);a.leadingComments=e}return a}l=0;for(f=b.length;l<f;l+=1)e.push(G(g(b[l]),d));D(a,{cursor:0,enter:function(a){for(var b;this.cursor<e.length;){b=e[this.cursor];if(b.extendedRange[1]>a.range[0])break;b.extendedRange[1]===a.range[0]?(a.leadingComments||(a.leadingComments=[]),a.leadingComments.push(b),
e.splice(this.cursor,1)):this.cursor+=1}if(this.cursor===e.length)return R.Break;if(e[this.cursor].extendedRange[0]>a.range[1])return R.Skip}});D(a,{cursor:0,leave:function(a){for(var b;this.cursor<e.length;){b=e[this.cursor];if(a.range[1]<b.extendedRange[0])break;a.range[1]===b.extendedRange[0]?(a.trailingComments||(a.trailingComments=[]),a.trailingComments.push(b),e.splice(this.cursor,1)):this.cursor+=1}if(this.cursor===e.length)return R.Break;if(e[this.cursor].extendedRange[0]>a.range[1])return R.Skip}});
return a}})("undefined"===typeof exports?escodegen={}:exports);
var verifierOptions=systemOptions.register(new OptionSet("Verifier Options")),verifierTraceLevel=verifierOptions.register(new Option("tv","tv","number",0,"Verifier Trace Level")),Type=function(){function a(){unexpected("Type is Abstract")}a.prototype.equals=function(a){return this===a};a.prototype.merge=function(a){unexpected("Merging "+this+" with "+a)};a.cache={name:{},classInfo:[],instanceInfo:[],scriptInfo:[],methodInfo:[]};a.from=function(b,d){var e=null;b instanceof ClassInfo?e=a.cache.classInfo:
b instanceof InstanceInfo?e=a.cache.instanceInfo:b instanceof ScriptInfo&&(e=a.cache.scriptInfo);return e?e[b.id]||(e[b.id]=new TraitsType(b,d)):b instanceof Activation?new TraitsType(b.methodInfo):b instanceof Global?new TraitsType(b.scriptInfo):b instanceof Interface?new TraitsType(b.classInfo,d):b instanceof MethodInfo?new MethodType(b):d&&b instanceof Class?a.from(b.classInfo,d):Type.Any};a.fromSimpleName=function(a,d){return Type.fromName(Multiname.fromSimpleName(a),d)};a.fromName=function(b,
d){if(void 0===b)return Type.Undefined;var e=Multiname.isQName(b)?Multiname.getFullQualifiedName(b):void 0;if(e){var f=a.cache.name[e];if(f)return f}if(e===Multiname.getPublicQualifiedName("void"))return Type.Void;!0;f=(f=d.findClassInfo(b))?a.from(f,d):Type.Any;b.hasTypeParameter()&&(f=new ParameterizedType(f,a.fromName(b.typeParameter,d)));return a.cache.name[e]=f};a.prototype.applyType=function(a){return new ParameterizedType(this,a)};a.prototype.toString=function(){return"[type]"};a.prototype.isNumeric=
function(){return this===Type.Int||this===Type.Uint||this===Type.Number};a.prototype.isString=function(){return this===Type.String};a.prototype.isDirectlyReadable=function(){return this===Type.Array};a.prototype.isIndexedReadable=function(){return this.isParameterizedType()};a.prototype.isDirectlyWriteable=function(){return this===Type.Array};a.prototype.isIndexedWriteable=function(){return this.isParameterizedType()};a.prototype.isVector=function(){return this.isParameterizedType()};a.prototype.isNotDirectlyIndexable=
function(){return this===Type.Any||this===Type.XML||this===Type.XMLList||this===Type.Dictionary};a.prototype.isParameterizedType=function(){return this instanceof ParameterizedType};a.prototype.instanceType=function(){return this};a.prototype.getTrait=function(){return null};a.prototype.super=function(){unexpected("Can't call super on "+this)};a.prototype.isSubtypeOf=function(a){return this===a||this.equals(a)?!0:this.merge(a)===this};var e=!1;a.initializeTypes=function(b){e||(a.Any=new AtomType("Any"),
a.Null=new AtomType("Null"),a.Undefined=new AtomType("Undefined"),a.Void=new AtomType("Void"),a.Int=Type.fromSimpleName("int",b).instanceType(),a.Uint=Type.fromSimpleName("uint",b).instanceType(),a.Class=Type.fromSimpleName("Class",b).instanceType(),a.Array=Type.fromSimpleName("Array",b).instanceType(),a.Object=Type.fromSimpleName("Object",b).instanceType(),a.String=Type.fromSimpleName("String",b).instanceType(),a.Number=Type.fromSimpleName("Number",b).instanceType(),a.Boolean=Type.fromSimpleName("Boolean",
b).instanceType(),a.Function=Type.fromSimpleName("Function",b).instanceType(),a.XML=Type.fromSimpleName("XML",b).instanceType(),a.XMLList=Type.fromSimpleName("XMLList",b).instanceType(),a.Dictionary=Type.fromSimpleName("flash.utils.Dictionary",b).instanceType(),e=!0)};return a}(),AtomType=function(){function a(a){this.name=a}a.prototype=Object.create(Type.prototype);a.prototype.toString=function(){if(this===Type.Any)return"?";if(this===Type.Undefined)return"_";if(this===Type.Null)return"X";if(this===
Type.Void)return"V";unexpected()};a.prototype.merge=function(a){return a instanceof TraitsType?Type.Any:this===a?this:Type.Any};return a}(),MethodType=function(){function a(a){this.methodInfo=a}a.prototype=Object.create(Type.prototype);a.prototype.toString=function(){return"MT "+this.methodInfo};return a}(),TraitsType=function(){function a(a,b){!0;this.object=a;this.traits=a.traits;this.domain=b;this.object instanceof InstanceInfo&&!0}function e(a){if(a instanceof ScriptInfo)return"SI";if(a instanceof
ClassInfo)return"CI:"+a.instanceInfo.name.name;if(a instanceof InstanceInfo)return"II:"+a.name.name;if(a instanceof MethodInfo)return"MI";if(a instanceof Activation)return"AC";!0}function b(a,e,f){var l=!f,m;if(Multiname.isQName(e)){u=Multiname.getQualifiedName(e);r=0;for(v=a.length;r<v;r++)if(m=a[r],Multiname.getQualifiedName(m.name)===u&&!(f&&m.isGetter()||l&&m.isSetter()))return m}else if(!(e instanceof MultinameType)){!0;for(var p,r=0,v=e.namespaces.length;r<v;r++){var u=e.getQName(r);if(e.namespaces[r].isDynamic())p=
u;else if(m=b(a,u,f))return m}if(p)return b(a,p,f)}}a.prototype=Object.create(Type.prototype);a.prototype.getTrait=function(a,e,f){if(a instanceof MultinameType||a.isAttribute())return null;if(f&&(this.isInstanceInfo()||this.isClassInfo())){f=this;do{var l=f.getTrait(a,e,!1);l||(f=f.super())}while(!l&&f);return l}return b(this.traits,a,e)};a.prototype.getTraitAt=function(a){if(this.object instanceof ScriptInfo||this.object instanceof MethodInfo){a:{for(var b=this.traits,e=b.length-1;0<=e;e--)if(b[e].slotId===
a){a=b[e];break a}unexpected("Cannot find trait with slotId: "+a+" in "+b);a=void 0}return a}};a.prototype.toString=function(){switch(this){case Type.Int:return"I";case Type.Uint:return"U";case Type.Array:return"A";case Type.Object:return"O";case Type.String:return"S";case Type.Number:return"N";case Type.Boolean:return"B";case Type.Function:return"F"}return e(this.object)};a.prototype.instanceType=function(){!0;return this.instanceCache||(this.instanceCache=Type.from(this.object.instanceInfo,this.domain))};
a.prototype.classType=function(){!0;return this.instanceCache||(this.instanceCache=Type.from(this.object.classInfo,this.domain))};a.prototype.super=function(){if(this.object instanceof ClassInfo)return Type.Class;!0;if(this.object.superName){var a=Type.fromName(this.object.superName,this.domain).instanceType();!0;return a}return null};a.prototype.isClassInfo=function(){return this.object instanceof ClassInfo};a.prototype.isInstanceInfo=function(){return this.object instanceof InstanceInfo};a.prototype.isInstanceOrClassInfo=
function(){return this.isInstanceInfo()||this.isClassInfo()};a.prototype.equals=function(a){return this.traits===a.traits};a.prototype.merge=function(a){if(a instanceof TraitsType){if(this.equals(a))return this;if(this.isNumeric()&&a.isNumeric())return Type.Number;if(this.isInstanceInfo()&&a.isInstanceInfo()){for(var b=[],e=this;e;e=e.super())b.push(e);for(e=a;e;e=e.super())for(a=0;a<b.length;a++)if(b[a].equals(e))return e;return Type.Object}}return Type.Any};return a}(),MultinameType=function(){function a(a,
b,d){this.namespaces=a;this.name=b;this.flags=d}a.prototype=Object.create(Type.prototype);a.prototype.toString=function(){return"MN"};return a}(),ParameterizedType=function(){function a(a,b){this.type=a;this.parameter=b}a.prototype=Object.create(Type.prototype);a.prototype.toString=function(){return this.type+"<"+this.parameter+">"};a.prototype.instanceType=function(){!0;return new ParameterizedType(this.type.instanceType(),this.parameter.instanceType())};a.prototype.equals=function(a){return a instanceof
ParameterizedType?this.type.equals(a.type)&&this.parameter.equals(a.parameter):!1};a.prototype.merge=function(a){return a instanceof TraitsType&&this.equals(a)?this:Type.Any};return a}(),TypeInformation=function(){function a(){}a.prototype.toString=function(){return toKeyValueArray(this).map(function(a){return a[0]+": "+a[1]}).join(" | ")};return a}(),Verifier=function(){function a(a){this.name="VerifierError";this.message=a||""}function e(){this.writer=new IndentingWriter}var b,d=function(){this.id=
m+=1;this.stack=[];this.scope=[];this.local=[]},g=function(a,b){if(a.length!=b.length)return!1;for(var d=a.length-1;0<=d;d--)if(!a[d].equals(b[d]))return!1;return!0},f=function(a,b){if(a.length!=b.length)return!1;for(var d=a.length-1;0<=d;d--)if(!(a[d]===b[d]||a[d].equals(b[d]))&&a[d].merge(b[d])!==a[d])return!1;return!0},l=function(a,b){!0;for(var d=a.length-1;0<=d;d--)!0,a[d]!==b[d]&&(a[d]=a[d].merge(b[d]))},m=0;d.prototype.clone=function(){var a=new b;a.originalId=this.id;a.stack=this.stack.slice(0);
a.scope=this.scope.slice(0);a.local=this.local.slice(0);return a};d.prototype.trace=function(a){a.writeLn(this.toString())};d.prototype.toString=function(){return"<"+this.id+(this.originalId?":"+this.originalId:"")+", L["+this.local.join(", ")+"], S["+this.stack.join(", ")+"], $["+this.scope.join(", ")+"]>"};d.prototype.equals=function(a){return g(this.stack,a.stack)&&g(this.scope,a.scope)&&g(this.local,a.local)};d.prototype.isSubset=function(a){return f(this.stack,a.stack)&&f(this.scope,a.scope)&&
f(this.local,a.local)};d.prototype.merge=function(a){l(this.local,a.local);l(this.stack,a.stack);l(this.scope,a.scope)};b=d;var p=function(a,b){this.scope=b;this.methodInfo=a;this.domain=a.abc.applicationDomain;this.writer=new IndentingWriter;this.returnType=Type.Undefined};p.prototype.verify=function(){var a=this.methodInfo,d=verifierTraceLevel.value?this.writer:null,e=a.analysis.blocks;e.forEach(function(a){a.entryState=a.exitState=null});d&&this.methodInfo.trace(d);var g=new b;!0;this.thisType=
a.holder?Type.from(a.holder,this.domain):Type.Any;g.local.push(this.thisType);for(var f=0;f<a.parameters.length;f++)g.local.push(Type.fromName(a.parameters[f].type,this.domain).instanceType());var l=a.localCount-a.parameters.length-1;if(a.needsRest()||a.needsArguments())g.local.push(Type.Array),l-=1;for(f=0;f<l;f++)g.local.push(Type.Undefined);!0;d&&g.trace(d);a=0;for(f=e.length;a<f;a++)e[a].bdo=a;var m=new SortedList(function(a,b){return a.bdo-b.bdo});e[0].entryState=g;for(m.push(e[0]);m.peek();){var p=
m.pop(),y=p.exitState=p.entryState.clone();this.verifyBlock(p,y);p.succs.forEach(function(a){m.contains(a)?(d&&d.writeLn("Forward Merged Block: "+a.bid+" "+y.toString()+" with "+a.entryState.toString()),a.entryState.merge(y),d&&d.writeLn("Merged State: "+a.entryState)):a.entryState?a.entryState.isSubset(y)||(d&&d.writeLn("Backward Merged Block: "+p.bid+" with "+a.bid+" "+y.toString()+" with "+a.entryState.toString()),a.entryState.merge(y),m.push(a),d&&d.writeLn("Merged State: "+a.entryState)):(a.entryState=
y.clone(),m.push(a),d&&d.writeLn("Added Block: "+a.bid+" to worklist: "+a.entryState.toString()))})}d&&d.writeLn("Inferred return type: "+this.returnType);this.methodInfo.inferredReturnType=this.returnType};p.prototype.verifyBlock=function(b,d){function e(a){return a instanceof TraitsType||a instanceof ParameterizedType?a===Type.Function||a===Type.Class||a===Type.Object?Type.Object:a.instanceType():Type.Any}function g(){return H.ti||(H.ti=new TypeInformation)}function f(a){!0;g().type=a;K.push(a)}
function l(){return K.pop()}function m(a,b){if(a instanceof MultinameType)return Type.Any;for(var d=S.length-1;0<=d;d--)if(S[d]instanceof TraitsType){var e=S[d].getTrait(a,!1,!0);if(e)return g().scopeDepth=S.length-d-1,S[d]}else return Type.Any;if(isClassOrInstanceInfo(N.holder)){var f;N.holder instanceof ClassInfo?f=Type.from(N.holder,F):N.holder instanceof InstanceInfo&&(f=Type.from(N.holder,F).classType());if(e=f.getTrait(a,!1,!0))return N.isInstanceInitializer||(g().object=LazyInitializer.create(f.object)),
f}return E&&(E.object&&a instanceof Multiname)&&(d=E.findScopeProperty(a.namespaces,a.name,a.flags,F,b,!0))?(e=E.findDepth(d),!0,g().scopeDepth=e+S.length,Type.from(d,F)):(d=F.findDefiningScript(a,!1))?(g().object=LazyInitializer.create(d.script),Type.from(d.script,F)):Type.Any}function p(){var a=O[H.index];if(a.isRuntime()){var b=a.namespaces,d=a.name;a.isRuntimeName()&&(d=l());a.isRuntimeNamespace()&&(b=[l()]);return new MultinameType(b,d,a.flags)}return a}function y(a){if(a instanceof TraitsType&&
(a=a.getTraitAt(H.index),R&&R.debugLn("accessSlot() -> "+a),a)){g().trait=a;if(a.isSlot())return Type.fromName(a.typeName,F).instanceType();if(a.isClass())return Type.from(a.classInfo,F)}return Type.Any}function D(a){return a instanceof Multiname&&isNumeric(a.name)||a instanceof MultinameType&&(a.name instanceof TraitsType&&a.name.isNumeric()||isNumeric(a.name))}function G(a,b){if(a instanceof TraitsType||a instanceof ParameterizedType){var d=a.getTrait(b,!1,!0);R&&R.debugLn("getProperty("+b+") -> "+
d);if(d){g().trait=d;if(d.isSlot()||d.isConst())return Type.fromName(d.typeName,F).instanceType();if(d.isGetter())return Type.fromName(d.methodInfo.returnType,F).instanceType();if(d.isClass())return Type.from(d.classInfo,F);if(d.isMethod())return Type.from(d.methodInfo,F)}else a.isDirectlyReadable()&&b instanceof Multiname&&(g().propertyQName=Multiname.getPublicQualifiedName(b.name));if(D(b))if(a.isIndexedReadable()){if(g().isIndexedReadable=!0,a.isVector())return a.parameter}else a.isDirectlyReadable()&&
(g().isDirectlyReadable=!0)}return Type.Any}function C(a,b){if(a instanceof TraitsType||a instanceof ParameterizedType){var d=a.getTrait(b,!0,!0);R&&R.debugLn("setProperty("+b+") -> "+d);d?g().trait=d:a.isDirectlyWriteable()&&b instanceof Multiname&&(g().propertyQName=Multiname.getPublicQualifiedName(b.name));D(b)&&(a.isDirectlyWriteable()?g().isDirectlyWriteable=!0:a.isVector()&&(g().isIndexedWriteable=!0))}}var E=this.scope,I=d.local,K=d.stack,S=d.scope,R=verifierTraceLevel.value?this.writer:null,
L=this.methodInfo.analysis.bytecodes,F=this.methodInfo.abc.applicationDomain,O=this.methodInfo.abc.constantPool.multinames,N=this.methodInfo,H,P,M,U;R&&R.enter("verifyBlock: "+b.bid+", range: ["+b.position+", "+b.end.position+"], entryState: "+d.toString()+" {");for(var J=b.position,Q=b.end.position;J<=Q;J++){H=L[J];U=H.op;R&&1<verifierTraceLevel.value&&R.writeLn(("stateBefore: "+d.toString()).padRight(" ",100)+" : "+J+", "+H.toString(N.abc));switch(U){case 1:break;case 3:l();break;case 4:M=p();P=
l();!0;g().baseClass=LazyInitializer.create(this.thisType.super().classType().object);f(G(P.super(),M));break;case 5:U=l();M=p();P=l();!0;g().baseClass=LazyInitializer.create(this.thisType.super().classType().object);C(P.super(),M,U);break;case 6:notImplemented(H);break;case 7:notImplemented(H);break;case 8:d.local[H.index]=Type.Undefined;break;case 10:notImplemented(H);break;case 11:notImplemented(H);break;case 12:case 24:case 13:case 23:case 14:case 22:case 15:case 21:case 19:case 20:case 25:case 26:l();
l();break;case 16:break;case 17:case 18:l();break;case 27:l(Type.Int);break;case 29:S.pop();break;case 30:case 35:l(Type.Int);l();f(Type.Any);break;case 31:f(Type.Boolean);break;case 50:f(Type.Boolean);break;case 32:f(Type.Null);break;case 33:f(Type.Undefined);break;case 34:notImplemented(H);break;case 36:f(Type.Int);break;case 37:f(Type.Int);break;case 44:f(Type.String);break;case 45:f(Type.Int);break;case 46:f(Type.Uint);break;case 47:f(Type.Number);break;case 38:f(Type.Boolean);break;case 39:f(Type.Boolean);
break;case 40:f(Type.Number);break;case 41:l();break;case 42:U=l();f(U);f(U);break;case 43:P=l();M=l();f(P);f(M);break;case 28:l();S.push(Type.Any);break;case 48:S.push(l());break;case 49:notImplemented(H);break;case 53:case 54:case 55:f(Type.Int);break;case 56:case 57:f(Type.Number);break;case 58:case 59:case 60:l(Type.Int);break;case 61:case 62:l(Type.Number);break;case 64:f(Type.Function);break;case 65:K.popMany(H.argCount);P=l();l();f(Type.Any);break;case 67:throw new a("callmethod");case 68:notImplemented(H);
break;case 69:case 78:case 79:case 70:case 76:K.popMany(H.argCount);M=p();P=l();if(69===U||78===U)P=this.thisType.super(),g().baseClass=LazyInitializer.create(this.thisType.super().classType().object);P=G(P,M);if(79===U||78===U)break;P=P instanceof MethodType?Type.fromName(P.methodInfo.returnType,F).instanceType():P instanceof TraitsType&&P.isClassInfo()?P.instanceType():Type.Any;f(P);break;case 71:this.returnType.merge(Type.Undefined);break;case 72:P=l();N.returnType&&(M=Type.fromName(N.returnType,
this.domain).instanceType(),M.isSubtypeOf(P)&&(g().noCoercionNeeded=!0));break;case 73:K.popMany(H.argCount);K.pop();this.thisType.isInstanceInfo()&&this.thisType.super()===Type.Object&&(g().noCallSuperNeeded=!0);break;case 66:K.popMany(H.argCount);f(e(l()));break;case 74:K.popMany(H.argCount);M=p();f(e(G(K.pop(),M)));break;case 75:notImplemented(H);break;case 77:notImplemented(H);break;case 80:case 81:case 82:break;case 83:!0;U=l();P=l();f(P.applyType(U));break;case 84:notImplemented(H);break;case 85:K.popMany(2*
H.argCount);f(Type.Object);break;case 86:K.popMany(H.argCount);f(Type.Array);break;case 87:f(Type.from(new Activation(this.methodInfo)));break;case 88:f(Type.Any);break;case 89:p();l();f(Type.XMLList);break;case 90:f(Type.Any);break;case 93:f(m(p(),!0));break;case 94:f(m(p(),!1));break;case 95:notImplemented(H);break;case 96:M=p();f(G(m(M,!0),M));break;case 104:case 97:U=l();M=p();P=l();C(P,M,U,H);break;case 98:f(I[H.index]);break;case 99:I[H.index]=l();break;case 100:f(Type.from(E.global.object));
break;case 101:f(S[H.index]);break;case 102:M=p();P=l();f(G(P,M));break;case 103:notImplemented(H);break;case 105:notImplemented(H);break;case 106:p();l();f(Type.Boolean);break;case 107:notImplemented(H);break;case 108:f(y(l()));break;case 109:U=l();P=l();y(P);break;case 110:notImplemented(H);break;case 111:notImplemented(H);break;case 112:l();f(Type.String);break;case 113:l();f(Type.String);break;case 114:l();f(Type.String);break;case 131:case 115:l();f(Type.Int);break;case 136:case 116:l();f(Type.Uint);
break;case 132:case 117:l();f(Type.Number);break;case 129:case 118:l();f(Type.Boolean);break;case 119:notImplemented(H);break;case 120:break;case 121:l();f(Type.Number);break;case 122:notImplemented(H);break;case 123:notImplemented(H);break;case 128:P=l();M=Type.fromName(O[H.index],this.domain).instanceType();M.isSubtypeOf(P)&&(g().noCoercionNeeded=!0);f(M);break;case 130:break;case 133:l();f(Type.String);break;case 134:notImplemented(H);break;case 135:P=l();l();P instanceof TraitsType?f(P.instanceType()):
f(Type.Any);break;case 137:notImplemented(H);break;case 144:case 145:case 147:l();f(Type.Number);break;case 146:case 148:I[H.index]=Type.Number;break;case 149:l();f(Type.String);break;case 150:l();f(Type.Boolean);break;case 160:M=l();P=l();P.isNumeric()&&M.isNumeric()?f(Type.Number):P===Type.String||M===Type.String?f(Type.String):f(Type.Any);break;case 161:case 162:case 163:case 164:l();l();f(Type.Number);break;case 168:case 169:case 170:case 165:case 166:case 167:l();l();f(Type.Int);break;case 151:l();
f(Type.Int);break;case 171:case 172:case 173:case 174:case 175:case 176:case 177:case 180:l();l();f(Type.Boolean);break;case 178:l();f(Type.Boolean);break;case 179:l();l();f(Type.Boolean);break;case 194:case 195:I[H.index]=Type.Int;break;case 193:case 192:case 196:l();f(Type.Int);break;case 197:case 198:case 199:l();l();f(Type.Int);break;case 208:case 209:case 210:case 211:f(I[U-208]);break;case 212:case 213:case 214:case 215:I[U-OP_setlocal0]=l();break;case 239:break;case 240:break;case 241:break;
case 242:break;case 243:break;default:console.info("Not Implemented: "+H)}R&&H.ti&&R.debugLn("> TI: "+H.ti)}R&&(R.leave("}"),R.writeLn("verifiedBlock: "+b.bid+", range: ["+b.position+", "+b.end.position+"], exitState: "+d.toString()))};e.prototype.verifyMethod=function(b,d){try{(new p(b,d)).verify(),b.verified=!0,Counter.count("Verifier: Methods")}catch(e){if(!(e instanceof a))throw e;}};return e}();
(function(a){function e(a,b){!0;return Object.create(a.prototype,{nodeName:{value:b}})}function b(a){var b;if(a instanceof oa)return a.value instanceof Multiname?a.value.name:a.value;if(a instanceof ga)return a.name;if(a instanceof W)return b="|"+a.id+"|",b;if(a instanceof v)return b="{"+a.id+"}",b;if(a instanceof $)return a.type===$.Type.STORE?(b="["+a.id+"->"+a.argument.id+"]",b):(b="("+a.id+")",b);if(a instanceof D)return b="("+a.id+")",b;if(a instanceof p)return a.id;unexpected(a+" "+typeof a)}
function d(a){return a.id}function g(a,b){for(var d=0;d<a.length;d++)b(a[d])}function f(a){return a instanceof oa}var l=!1,m=[],p,r=function(){!0;this.id=m[m.length-1]+=1};r.prototype.nodeName="Node";r.prototype.visitInputs=function(){};p=r;var v,r=function(){!0;this.id=m[m.length-1]+=1};r.prototype=e(p,"Control");r.prototype.nodeName="Control";r.prototype.visitInputs=function(){};v=r;var u,r=function(a){!0;this.predecessors=a?[a]:[];this.id=m[m.length-1]+=1};r.prototype=e(v,"Region");r.prototype.nodeName=
"Region";r.prototype.visitInputs=function(a){g(this.predecessors,a)};u=r;var w,r=function(a){!0;this.control=this;this.predecessors=a?[a]:[];this.domain=this.scope=void 0;this.id=m[m.length-1]+=1};r.prototype=e(u,"Start");r.prototype.nodeName="Start";r.prototype.visitInputs=function(a){g(this.predecessors,a);a(this.scope);a(this.domain)};w=r;var A,r=function(a){!0;!0;this.control=a;this.id=m[m.length-1]+=1};r.prototype=e(v,"End");r.prototype.nodeName="End";r.prototype.visitInputs=function(a){a(this.control)};
A=r;r=function(a,b,d){!0;!0;!0;!0;this.control=a;this.store=b;this.argument=d;this.id=m[m.length-1]+=1};r.prototype=e(A,"Stop");r.prototype.nodeName="Stop";r.prototype.visitInputs=function(a){a(this.control);a(this.store);a(this.argument)};var z=function(a,b){!0;!0;!0;this.control=a;this.predicate=b;this.id=m[m.length-1]+=1};z.prototype=e(A,"If");z.prototype.nodeName="If";z.prototype.visitInputs=function(a){a(this.control);a(this.predicate)};var s,B=function(a,b){!0;!0;!0;this.control=a;this.determinant=
b;this.id=m[m.length-1]+=1};B.prototype=e(A,"Switch");B.prototype.nodeName="Switch";B.prototype.visitInputs=function(a){a(this.control);a(this.determinant)};s=B;var y,B=function(a){!0;!0;this.control=a;this.id=m[m.length-1]+=1};B.prototype=e(A,"Jump");B.prototype.nodeName="Jump";B.prototype.visitInputs=function(a){a(this.control)};y=B;var D,B=function(){!0;this.id=m[m.length-1]+=1};B.prototype=e(p,"Value");B.prototype.nodeName="Value";B.prototype.visitInputs=function(){};D=B;var G=function(a,b){!0;
!0;!0;this.control=a;this.store=b;this.loads=void 0;this.id=m[m.length-1]+=1};G.prototype=e(D,"StoreDependent");G.prototype.nodeName="StoreDependent";G.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&g(this.loads,a)};B=function(a,b,d,e,g,f){!0;!0;!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.callee=d;this.object=e;this.args=g;this.flags=f;this.id=m[m.length-1]+=1};B.prototype=e(G,"Call");B.prototype.nodeName="Call";B.prototype.visitInputs=
function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&g(this.loads,a);a(this.callee);this.object&&a(this.object);g(this.args,a)};var C=function(a,b,d,e,g,f){!0;!0;!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.args=g;this.flags=f;this.id=m[m.length-1]+=1};C.prototype=e(G,"CallProperty");C.prototype.nodeName="CallProperty";C.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&g(this.loads,
a);a(this.object);a(this.name);g(this.args,a)};var E=function(a,b,d,e,g,f,l){!0;!0;!0;!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.args=g;this.flags=f;this.isLex=l;this.id=m[m.length-1]+=1};E.prototype=e(C,"ASCallProperty");E.prototype.nodeName="ASCallProperty";E.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&g(this.loads,a);a(this.object);a(this.name);g(this.args,a)};var I=function(a,b,d,e,g,f,l){!0;
!0;!0;!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.args=g;this.flags=f;this.scope=l;this.id=m[m.length-1]+=1};I.prototype=e(C,"ASCallSuper");I.prototype.nodeName="ASCallSuper";I.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&g(this.loads,a);a(this.object);a(this.name);g(this.args,a);a(this.scope)};var K=function(a,b,d,e){!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.callee=d;this.args=
e;this.id=m[m.length-1]+=1};K.prototype=e(G,"New");K.prototype.nodeName="New";K.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&g(this.loads,a);a(this.callee);g(this.args,a)};var S=function(a,b,d,e){!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.callee=d;this.args=e;this.id=m[m.length-1]+=1};S.prototype=e(K,"ASNew");S.prototype.nodeName="ASNew";S.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);
this.loads&&g(this.loads,a);a(this.callee);g(this.args,a)};K=function(a,b,d,e){!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.id=m[m.length-1]+=1};K.prototype=e(G,"GetProperty");K.prototype.nodeName="GetProperty";K.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&g(this.loads,a);a(this.object);a(this.name)};var R=function(a,b,d,e,g){!0;!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=
d;this.name=e;this.flags=g;this.id=m[m.length-1]+=1};R.prototype=e(K,"ASGetProperty");R.prototype.nodeName="ASGetProperty";R.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&g(this.loads,a);a(this.object);a(this.name)};var L=function(a,b,d,e){!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.id=m[m.length-1]+=1};L.prototype=e(K,"ASGetDescendants");L.prototype.nodeName="ASGetDescendants";L.prototype.visitInputs=
function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&g(this.loads,a);a(this.object);a(this.name)};var F=function(a,b,d,e){!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.id=m[m.length-1]+=1};F.prototype=e(K,"ASHasProperty");F.prototype.nodeName="ASHasProperty";F.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&g(this.loads,a);a(this.object);a(this.name)};var O=function(a,b,d,
e){!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.id=m[m.length-1]+=1};O.prototype=e(K,"ASGetSlot");O.prototype.nodeName="ASGetSlot";O.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&g(this.loads,a);a(this.object);a(this.name)};var N=function(a,b,d,e,g){!0;!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.scope=g;this.id=m[m.length-1]+=1};N.prototype=e(K,"ASGetSuper");
N.prototype.nodeName="ASGetSuper";N.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&g(this.loads,a);a(this.object);a(this.name);a(this.scope)};var H,P=function(a,b,d,e,g){!0;!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.value=g;this.id=m[m.length-1]+=1};P.prototype=e(G,"SetProperty");P.prototype.nodeName="SetProperty";P.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);
this.loads&&g(this.loads,a);a(this.object);a(this.name);a(this.value)};H=P;P=function(a,b,d,e,g,f){!0;!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.value=g;this.flags=f;this.id=m[m.length-1]+=1};P.prototype=e(H,"ASSetProperty");P.prototype.nodeName="ASSetProperty";P.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&g(this.loads,a);a(this.object);a(this.name);a(this.value)};var M=function(a,b,d,e,g){!0;
!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.value=g;this.id=m[m.length-1]+=1};M.prototype=e(H,"ASSetSlot");M.prototype.nodeName="ASSetSlot";M.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&g(this.loads,a);a(this.object);a(this.name);a(this.value)};var U=function(a,b,d,e,g,f){!0;!0;!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.value=g;this.scope=f;this.id=
m[m.length-1]+=1};U.prototype=e(H,"ASSetSuper");U.prototype.nodeName="ASSetSuper";U.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&g(this.loads,a);a(this.object);a(this.name);a(this.value);a(this.scope)};var J=function(a,b,d,e){!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.id=m[m.length-1]+=1};J.prototype=e(G,"DeleteProperty");J.prototype.nodeName="DeleteProperty";J.prototype.visitInputs=function(a){this.control&&
a(this.control);this.store&&a(this.store);this.loads&&g(this.loads,a);a(this.object);a(this.name)};var Q=function(a,b,d,e){!0;!0;!0;!0;!0;this.control=a;this.store=b;this.loads=void 0;this.object=d;this.name=e;this.id=m[m.length-1]+=1};Q.prototype=e(J,"ASDeleteProperty");Q.prototype.nodeName="ASDeleteProperty";Q.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&g(this.loads,a);a(this.object);a(this.name)};J=function(a,b,d,e,g,f){!0;!0;!0;!0;!0;!0;
this.control=a;this.store=b;this.loads=void 0;this.scope=d;this.name=e;this.domain=g;this.strict=f;this.id=m[m.length-1]+=1};J.prototype=e(G,"ASFindProperty");J.prototype.nodeName="ASFindProperty";J.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&g(this.loads,a);a(this.scope);a(this.name);a(this.domain)};e(D,"Store");var W,G=function(a,b){!0;!0;this.control=a;this.args=b?[b]:[];this.id=m[m.length-1]+=1};G.prototype=e(D,"Phi");G.prototype.nodeName=
"Phi";G.prototype.visitInputs=function(a){this.control&&a(this.control);g(this.args,a)};W=G;var ga,G=function(a){!0;this.name=a;this.id=m[m.length-1]+=1};G.prototype=e(D,"Variable");G.prototype.nodeName="Variable";G.prototype.visitInputs=function(){};ga=G;G=function(a){!0;this.argument=a;this.id=m[m.length-1]+=1};G.prototype=e(D,"Copy");G.prototype.nodeName="Copy";G.prototype.visitInputs=function(a){a(this.argument)};var fa=function(a,b){!0;this.to=a;this.from=b;this.id=m[m.length-1]+=1};fa.prototype=
e(D,"Move");fa.prototype.nodeName="Move";fa.prototype.visitInputs=function(a){a(this.to);a(this.from)};var $,ca=function(a,b,d){!0;this.argument=a;this.type=b;this.selector=d;this.id=m[m.length-1]+=1};ca.prototype=e(D,"Projection");ca.prototype.nodeName="Projection";ca.prototype.visitInputs=function(a){a(this.argument)};$=ca;ca=function(a,b,d,e){!0;!0;this.control=a;this.condition=b;this.left=d;this.right=e;this.id=m[m.length-1]+=1};ca.prototype=e(D,"Latch");ca.prototype.nodeName="Latch";ca.prototype.visitInputs=
function(a){this.control&&a(this.control);a(this.condition);a(this.left);a(this.right)};var la,ha=function(a,b,d){!0;this.operator=a;this.left=b;this.right=d;this.id=m[m.length-1]+=1};ha.prototype=e(D,"Binary");ha.prototype.nodeName="Binary";ha.prototype.visitInputs=function(a){a(this.left);a(this.right)};la=ha;var sa,ha=function(a,b){!0;this.operator=a;this.argument=b;this.id=m[m.length-1]+=1};ha.prototype=e(D,"Unary");ha.prototype.nodeName="Unary";ha.prototype.visitInputs=function(a){a(this.argument)};
sa=ha;var oa,ha=function(a){!0;this.value=a;this.id=m[m.length-1]+=1};ha.prototype=e(D,"Constant");ha.prototype.nodeName="Constant";ha.prototype.visitInputs=function(){};oa=ha;ha=function(a){!0;this.name=a;this.id=m[m.length-1]+=1};ha.prototype=e(D,"GlobalProperty");ha.prototype.nodeName="GlobalProperty";ha.prototype.visitInputs=function(){};var ia,aa=function(a){!0;!0;this.control=a;this.id=m[m.length-1]+=1};aa.prototype=e(D,"This");aa.prototype.nodeName="This";aa.prototype.visitInputs=function(a){a(this.control)};
ia=aa;aa=function(a,b){!0;!0;this.control=a;this.argument=b;this.id=m[m.length-1]+=1};aa.prototype=e(D,"Throw");aa.prototype.nodeName="Throw";aa.prototype.visitInputs=function(a){a(this.control);a(this.argument)};var ea,ra=function(a){!0;!0;this.control=a;this.id=m[m.length-1]+=1};ra.prototype=e(D,"Arguments");ra.prototype.nodeName="Arguments";ra.prototype.visitInputs=function(a){a(this.control)};ea=ra;var ja,ra=function(a,b,d){!0;!0;this.control=a;this.index=b;this.name=d;this.id=m[m.length-1]+=
1};ra.prototype=e(D,"Parameter");ra.prototype.nodeName="Parameter";ra.prototype.visitInputs=function(a){a(this.control)};ja=ra;ra=function(a,b){!0;!0;this.control=a;this.elements=b;this.id=m[m.length-1]+=1};ra.prototype=e(D,"NewArray");ra.prototype.nodeName="NewArray";ra.prototype.visitInputs=function(a){a(this.control);g(this.elements,a)};var Ba=function(a,b){!0;!0;this.control=a;this.properties=b;this.id=m[m.length-1]+=1};Ba.prototype=e(D,"NewObject");Ba.prototype.nodeName="NewObject";Ba.prototype.visitInputs=
function(a){a(this.control);g(this.properties,a)};var Ga=function(a,b){!0;this.key=a;this.value=b;this.id=m[m.length-1]+=1};Ga.prototype=e(D,"KeyValuePair");Ga.prototype.nodeName="KeyValuePair";Ga.prototype.visitInputs=function(a){a(this.key);a(this.value)};var ba=function(a,b,d){!0;this.parent=a;this.object=b;this.isWith=d;this.id=m[m.length-1]+=1};ba.prototype=e(D,"ASScope");ba.prototype.nodeName="ASScope";ba.prototype.visitInputs=function(a){a(this.parent);a(this.object)};var qa=function(a,b){!0;
!0;!0;this.control=a;this.scope=b;this.id=m[m.length-1]+=1};qa.prototype=e(D,"ASGlobal");qa.prototype.nodeName="ASGlobal";qa.prototype.visitInputs=function(a){this.control&&a(this.control);a(this.scope)};var Ja=function(a){!0;this.methodInfo=a;this.id=m[m.length-1]+=1};Ja.prototype=e(D,"ASNewActivation");Ja.prototype.nodeName="ASNewActivation";Ja.prototype.visitInputs=function(){};var na=function(a,b,d){!0;this.namespaces=a;this.name=b;this.flags=d;this.id=m[m.length-1]+=1};na.prototype=e(D,"ASMultiname");
na.prototype.nodeName="ASMultiname";na.prototype.visitInputs=function(a){a(this.namespaces);a(this.name)};p.startNumbering=function(){m.push(0)};p.stopNumbering=function(){m.pop()};p.prototype.toString=function(a){if(a)return b(this);var d=[];this.visitInputs(function(a){d.push(b(a))});a=b(this)+" = "+this.nodeName.toUpperCase();this.toStringDetails&&(a+=" "+this.toStringDetails());d.length&&(a+=" "+d.join(", "));return a};p.prototype.visitInputsNoConstants=function(a){this.visitInputs(function(b){f(b)||
a(b)})};p.prototype.replaceInput=function(a,b){var d=0,e;for(e in this){var g=this[e];g instanceof p&&g===a&&(this[e]=b,d++);g instanceof Array&&(d+=g.replace(a,b))}return d};$.Type={CASE:"case",TRUE:"true",FALSE:"false",STORE:"store",SCOPE:"scope"};$.prototype.project=function(){return this.argument};W.prototype.seal=function(){this.sealed=!0};W.prototype.pushValue=function(a){!0;!0;this.args.push(a)};Ga.prototype.mustFloat=!0;na.prototype.mustFloat=!0;na.prototype.isAttribute=function(){return this.flags&
1};var X=function(a,b,d){this.name=a;this.binary=d;this.evaluate=b;va[a]=this},va={};X.ADD=new X("+",function(a,b){return a+b},!0);X.SUB=new X("-",function(a,b){return a-b},!0);X.MUL=new X("*",function(a,b){return a*b},!0);X.DIV=new X("/",function(a,b){return a/b},!0);X.MOD=new X("%",function(a,b){return a%b},!0);X.AND=new X("&",function(a,b){return a&b},!0);X.OR=new X("|",function(a,b){return a|b},!0);X.XOR=new X("^",function(a,b){return a^b},!0);X.LSH=new X("<<",function(a,b){return a<<b},!0);X.RSH=
new X(">>",function(a,b){return a>>b},!0);X.URSH=new X(">>>",function(a,b){return a>>>b},!0);X.SEQ=new X("===",function(a,b){return a===b},!0);X.SNE=new X("!==",function(a,b){return a!==b},!0);X.EQ=new X("==",function(a,b){return a==b},!0);X.NE=new X("!=",function(a,b){return a!=b},!0);X.LE=new X("<=",function(a,b){return a<=b},!0);X.GT=new X(">",function(a,b){return a>b},!0);X.LT=new X("<",function(a,b){return a<b},!0);X.GE=new X(">=",function(a,b){return a>=b},!0);X.BITWISE_NOT=new X("~",function(a){return~a},
!1);X.PLUS=new X("+",function(a){return+a},!1);X.NEG=new X("-",function(a){return-a},!1);X.TRUE=new X("!!",function(a){return!!a},!1);X.FALSE=new X("!",function(a){return!a},!1);X.AS_ADD=new X("+",function(a,b){return"string"===typeof a||"string"===typeof b?String(a)+String(b):a+b},!0);var Ca=X.SEQ,za=X.SNE;Ca.not=za;za.not=Ca;Ca=X.EQ;za=X.NE;Ca.not=za;za.not=Ca;Ca=X.TRUE;za=X.FALSE;Ca.not=za;za.not=Ca;X.fromName=function(a){return va[a]};X.prototype.isBinary=function(){return this.binary};X.prototype.toString=
function(){return this.name};Ca=new oa(null);za=new oa(void 0);za.toString=function(){return"_"};var Ma,wa=function(a,b,d){b&&!0;this.region=b;this.id=a;this.successors=[];this.predecessors=[];this.nodes=[b,d]};wa.prototype.pushSuccessorAt=function(a,b,d){!0;!0;this.successors[b]=a;d&&a.pushPredecessor(this)};wa.prototype.pushSuccessor=function(a,b){!0;this.successors.push(a);b&&a.pushPredecessor(this)};wa.prototype.pushPredecessor=function(a){!0;this.predecessors.push(a)};wa.prototype.visitNodes=
function(a){for(var b=this.nodes,d=0,e=b.length;d<e;d++)a(b[d])};wa.prototype.visitSuccessors=function(a){for(var b=this.successors,d=0,e=b.length;d<e;d++)a(b[d])};wa.prototype.visitPredecessors=function(a){for(var b=this.predecessors,d=0,e=b.length;d<e;d++)a(b[d])};wa.prototype.append=function(a){!0;!0;!0;!0;a.mustFloat||this.nodes.splice(this.nodes.length-1,0,a)};wa.prototype.toString=function(){return"B"+this.id+(this.name?" ("+this.name+")":"")};wa.prototype.trace=function(a){a.writeLn(this)};
Ma=wa;var wa=function(a){this.exit=a},Ha=function(a,b,d){var e=[];a=[a];for(var g=a.push.bind(a),f;f=a.pop();)1!==e[f.id]&&(e[f.id]=1,d(f),a.push(f),b(f,g))},Pa=function(a,b,d){function e(a){g[a.id]||f.push(a)}for(var g=[],f=[a];a=f.top();)g[a.id]?(1===g[a.id]&&(g[a.id]=2,d(a)),f.pop()):(g[a.id]=1,b(a,e))};wa.prototype.buildCFG=function(){return xa.fromDFG(this)};wa.prototype.forEachInPreOrderDepthFirstSearch=function(a){function b(a){f(a)||(!0,e.push(a))}for(var d=Array(1024),e=[this.exit],g;g=e.pop();)d[g.id]||
(d[g.id]=1,a&&a(g),e.push(g),g.visitInputs(b))};wa.prototype.forEach=function(a,b){(b?Pa:Ha)(this.exit,function(a,b){a.visitInputsNoConstants(b)},a)};wa.prototype.traceMetrics=function(a){var b=new metrics.Counter(!0);Ha(this.exit,function(a,b){a.visitInputsNoConstants(b)},function(a){b.count(a.nodeName)});b.trace(a)};wa.prototype.trace=function(a){function b(a){return a instanceof v?"yellow":a instanceof W?"purple":a instanceof D?"green":"white"}function d(a){return a instanceof $?a.project():a}
function e(a){a=d(a);f[a.id]||(f[a.id]=!0,a.block&&l.push(a.block),g.push(a),a.visitInputsNoConstants(e))}var g=[],f={},l=[];e(this.exit);a.writeLn("");a.enter("digraph DFG {");a.writeLn("graph [bgcolor = gray10];");a.writeLn("edge [color = white];");a.writeLn("node [shape = box, fontname = Consolas, fontsize = 11, color = white, fontcolor = white];");a.writeLn("rankdir = BT;");l.forEach(function(b){a.enter("subgraph cluster"+b.nodes[0].id+" { bgcolor = gray20;");b.visitNodes(function(b){b=d(b);a.writeLn("N"+
b.id+";")});a.leave("}")});g.forEach(function(d){a.writeLn("N"+d.id+' [label = "'+d.toString()+'", color = "'+b(d)+'"];')});g.forEach(function(e){e.visitInputsNoConstants(function(g){g=d(g);a.writeLn("N"+e.id+" -> N"+g.id+" [color="+b(g)+"];")})});a.leave("}");a.writeLn("")};var xa,ma=function(){this.nextBlockID=0;this.blocks=[];this.exit;this.root};ma.fromDFG=function(a){function b(a){a instanceof $&&(a=a.project());!0;if(!e[a.id]){e[a.id]=!0;var g=a.control;g instanceof u||(g=a.control=new u(g));
a=g.block=d.buildBlock(g,a);g instanceof w&&(d.root=a);for(var f=0;f<g.predecessors.length;f++){var l=g.predecessors[f],m,r=!1;l instanceof $?(m=l.project(),r=l.type===$.Type.TRUE):m=l;m instanceof u&&(m=new y(l),m=new $(m,$.Type.TRUE),g.predecessors[f]=m,m=m.project(),r=!0);b(m);var p=m.control.block;m instanceof s?(!0,p.pushSuccessorAt(a,l.selector.value,!0)):r&&0<p.successors.length?(p.pushSuccessor(a,!0),p.hasFlippedSuccessors=!0):p.pushSuccessor(a,!0)}}}var d=new xa;!0;d.dfg=a;var e=[];b(a.exit);
d.splitCriticalEdges();d.exit=a.exit.control.block;d.computeDominators(!0);return d};ma.prototype.buildRootAndExit=function(){!0;0<this.blocks[0].predecessors.length?(this.root=new Ma(this.nextBlockID++),this.blocks.push(this.root),this.root.pushSuccessor(this.blocks[0],!0)):this.root=this.blocks[0];for(var a=[],b=0;b<this.blocks.length;b++){var d=this.blocks[b];0===d.successors.length&&a.push(d)}if(0===a.length)unexpected("Must have an exit block.");else if(1===a.length&&a[0]!==this.root)this.exit=
a[0];else{this.exit=new Ma(this.nextBlockID++);this.blocks.push(this.exit);for(b=0;b<a.length;b++)a[b].pushSuccessor(this.exit,!0)}!0;!0};ma.prototype.fromString=function(a,b){function d(a){var b=g[a];if(b)return b;g[a]=b=new Ma(e.nextBlockID++);b.name=a;f.push(b);return b}var e=this,g=e.blockNames||(e.blockNames={}),f=e.blocks;a.replace(/\ /g,"").split(",").forEach(function(a){a=a.split("->");for(var b=null,e=0;e<a.length;e++){var g=a[e];if(b){var f=g;d(b).pushSuccessor(d(f),!0)}else d(g);b=g}});
!0;this.root=g[b]};ma.prototype.buildBlock=function(a,b){var d=new Ma(this.nextBlockID++,a,b);this.blocks.push(d);return d};ma.prototype.createBlockSet=function(){this.setConstructor||(this.setConstructor=BitSetFunctor(this.blocks.length));return new this.setConstructor};ma.prototype.computeReversePostOrder=function(){if(this.order)return this.order;var a=this.order=[];this.depthFirstSearch(null,a.push.bind(a));a.reverse();for(var b=0;b<a.length;b++)a[b].rpo=b;return a};ma.prototype.depthFirstSearch=
function(a,b){function d(g){e.set(g.id);a&&a(g);for(var f=g.successors,l=0,m=f.length;l<m;l++){var r=f[l];e.get(r.id)||d(r)}b&&b(g)}var e=this.createBlockSet();d(this.root)};ma.prototype.computeDominators=function(a){!0;for(var b=new Int32Array(this.blocks.length),d=0;d<b.length;d++)b[d]=-1;var e=this.createBlockSet();this.depthFirstSearch(function(a){for(var d=a.successors,g=0,f=d.length;g<f;g++){var l=d[g].id,m=a.id,r=b,p=l;if(!(0>b[l])){l=b[l];for(e.clearAll();0<=l;)e.set(l),l=b[l];for(;0<=m&&
!e.get(m);)m=b[m]}r[p]=m}});if(a){d=0;for(a=this.blocks.length;d<a;d++)this.blocks[d].dominator=this.blocks[b[d]];var g=function(a){var b;if(void 0!==a.dominatorDepth)return a.dominatorDepth;b=a.dominator?g(a.dominator)+1:0;return a.dominatorDepth=b},d=0;for(a=this.blocks.length;d<a;d++)g(this.blocks[d])}return b};ma.prototype.computeLoops=function(){function a(g){if(d.get(g.id))return b.get(g.id)&&!g.isLoopHeader&&(g.isLoopHeader=!0,g.loops=1<<e,e+=1),g.loops;d.set(g.id);b.set(g.id);for(var f=0,
l=0,m=g.successors.length;l<m;l++)f|=a(g.successors[l]);g.isLoopHeader&&(f&=~g.loops);g.loops=f;b.clear(g.id);return f}var b=this.createBlockSet(),d=this.createBlockSet(),e=0;a(this.root)};var Da=function(){this.entries=[]};Da.prototype.addUse=function(a,b){var d=this.entries[a.id];d||(d=this.entries[a.id]={def:a,uses:[]});d.uses.pushUnique(b)};Da.prototype.trace=function(a){a.enter("> Uses");this.entries.forEach(function(b){a.writeLn(b.def.id+" -> ["+b.uses.map(d).join(", ")+"] "+b.def)});a.leave("<")};
Da.prototype.replace=function(a,b){var d=this.entries[a.id];if(0===d.uses.length)return!1;var e=0;d.uses.forEach(function(d){e+=d.replaceInput(a,b)});!0;d.uses=[];return!0};ma.prototype.computeUses=function(){Timer.start("computeUses");var a=l&&new IndentingWriter;l&&a.enter("> Compute Uses");var b=this.dfg,e=new Da;b.forEachInPreOrderDepthFirstSearch(function(a){a.visitInputs(function(b){e.addUse(b,a)})});l&&(a.enter("> Uses"),e.entries.forEach(function(b){a.writeLn(b.def.id+" -> ["+b.uses.map(d).join(", ")+
"] "+b.def)}),a.leave("<"),a.leave("<"));Timer.stop();return e};ma.prototype.verify=function(){var a=l&&new IndentingWriter;l&&a.enter("> Verify");this.computeReversePostOrder().forEach(function(a){a.phis&&a.phis.forEach(function(){!0;!0})});l&&a.leave("<")};ma.prototype.optimizePhis=function(){function a(b,d){d=d.unique();if(1===d.length)return d[0];if(2===d.length){if(d[0]===b)return d[1];if(d[1]===b)return d[0]}return b}var b=l&&new IndentingWriter;l&&b.enter("> Optimize Phis");var e=[],g=this.computeUses().entries;
g.forEach(function(a){a.def instanceof W&&e.push(a.def)});l&&b.writeLn("Trying to optimize "+e.length+" phis.");for(var f=0,m=0,r=!0;r;)m++,r=!1,e.forEach(function(e){var m=a(e,e.args),p;if(p=m!==e)if(l&&b.writeLn("Update "+e+" with "+m),p=g[e.id],0===p.uses.length)p=!1;else{l&&b.writeLn("Replacing: "+e.id+" in ["+p.uses.map(d).join(", ")+"] with "+m.id);for(var s=0,v=p.uses,u=0,w=v.length;u<w;u++)s+=v[u].replaceInput(e,m);!0;p.uses=[];p=!0}p&&(r=!0,f++)});l&&(b.writeLn("Simplified "+f+" phis, in "+
m+" iterations."),b.leave("<"))};ma.prototype.splitCriticalEdges=function(){var a=l&&new IndentingWriter,b=this.blocks,d=[];l&&a.enter("> Splitting Critical Edges");for(var e=0;e<b.length;e++){var g=b[e].successors;if(1<g.length)for(var f=0;f<g.length;f++)1<g[f].predecessors.length&&d.push({from:b[e],to:g[f]})}if((b=d.length)&&l)a.writeLn("Splitting: "+b),this.trace(a);for(var m;m=d.pop();){e=m.from.successors.indexOf(m.to);g=m.to.predecessors.indexOf(m.from);!0;l&&a.writeLn("Splitting critical edge: "+
m.from+" -> "+m.to);var f=m.to,r=f.region,p=new u(r.predecessors[g]),s=new y(p),p=this.buildBlock(p,s);r.predecessors[g]=new $(s,$.Type.TRUE);m=m.from;m.successors[e]=p;p.pushPredecessor(m);p.pushSuccessor(f);f.predecessors[g]=p}b&&l&&this.trace(a);l&&a.leave("<");return b};ma.prototype.allocateVariables=function(){function a(d){if(!(d instanceof $&&(!$.Type.STORE||d.type===$.Type.STORE))&&!(d instanceof H)&&d instanceof D)d.variable=new ga("l"+d.id),l&&b.writeLn("Allocated: "+d.variable+" to "+d)}
var b=l&&new IndentingWriter;l&&b.enter("> Allocating Virtual Registers");var d=this.computeReversePostOrder();d.forEach(function(b){b.nodes.forEach(a);b.phis&&b.phis.forEach(a)});for(var e=[],g=0;g<d.length;g++){var f=d[g],m=f.phis,f=f.predecessors;if(m)for(var r=0;r<m.length;r++){var p=m[r];l&&b.writeLn("Emitting moves for: "+p);arguments=p.args;!0;for(var s=0;s<f.length;s++){var v=f[s],u=arguments[s];if(!u.abstract&&!(u instanceof $&&(!$.Type.STORE||u.type===$.Type.STORE)))v=e[v.id]||(e[v.id]=
[]),u=u.variable||u,p.variable!==u&&v.push(new fa(p.variable,u))}}}var w=this.blocks;e.forEach(function(a,d){var e=w[d],g=0;for(l&&b.writeLn(e+" Moves: "+a);a.length;){for(var f=0;f<a.length;f++){for(var m=a[f],r=0;r<a.length;r++)if(f!==r&&a[r].from===m.to){m=null;break}m&&(a.splice(f--,1),e.append(m))}if(a.length){l&&b.writeLn("Breaking Cycle");m=a[0];r=new ga("t"+g++);w[d].append(new fa(r,m.to));for(f=1;f<a.length;f++)a[f].from===m.to&&(a[f].from=r)}}});l&&b.leave("<")};ma.prototype.scheduleEarly=
function(){function a(b){return b.mustNotFloat||b.shouldNotFloat?!1:b.mustFloat||b.shouldFloat||b instanceof ja||b instanceof ia||b instanceof ea?!0:b instanceof la||b instanceof sa||b instanceof ja}function b(d){!0;s[d.id]=!0;!0;a(d)||d.control.block.append(d)}function e(a,d){!0;!0;!0;l&&m.writeLn("Scheduled: "+a+" in "+d);a.control=d;b(a)}function g(a){l&&m.enter("> Schedule: "+a);var p=[];a.visitInputs(function(a){f(a)||a instanceof D&&p.push(a instanceof $?a.project():a)});l&&m.writeLn("Inputs: ["+
p.map(d)+"], length: "+p.length);for(var v=0;v<p.length;v++){var u=p[v];!(u instanceof W)&&!s[u.id]&&g(u)}if(a.control)a instanceof A||(a instanceof W||a instanceof w||s[a.id])||b(a);else if(p.length){u=p[0].control;for(v=1;v<p.length;v++){var y=p[v].control;u.block.dominatorDepth<y.block.dominatorDepth&&(u=y)}e(a,u)}else e(a,r.root.region);l&&m.leave("<")}var l=!1,m=l&&new IndentingWriter;l&&m.enter("> Schedule Early");var r=this,p=this.dfg,s=[],v=[];p.forEachInPreOrderDepthFirstSearch(function(b){b instanceof
u||b instanceof y||(b.control&&v.push(b),b instanceof W&&b.args.forEach(function(b){a(b)&&(b.mustNotFloat=!0)}))},!0);l&&v.forEach(function(a){print("Root: "+a)});for(var z=0;z<v.length;z++){var B=v[z];if(B instanceof W){var E=B.control.block;(E.phis||(E.phis=[])).push(B)}B.control&&g(B)}l&&m.leave("<");v.forEach(function(a){a=a instanceof $?a.project():a;a===p.start||a instanceof u||!0})};ma.prototype.trace=function(a){function b(a){e[a.id]||(e[a.id]=!0,g.push(a),a.visitSuccessors(b))}function d(a){!0;
return a===f?"house":a===l?"invhouse":"box"}var e=[],g=[],f=this.root,l=this.exit;b(f);a.writeLn("");a.enter("digraph CFG {");a.writeLn("graph [bgcolor = gray10];");a.writeLn("edge [fontname = Consolas, fontsize = 11, color = white, fontcolor = white];");a.writeLn("node [shape = box, fontname = Consolas, fontsize = 11, color = white, fontcolor = white, style = filled];");a.writeLn("rankdir = TB;");g.forEach(function(b){var e="";void 0!==b.name&&(e+=" "+b.name);void 0!==b.rpo&&(e+=" O: "+b.rpo);a.writeLn("B"+
b.id+' [label = "B'+b.id+e+'", fillcolor = "black", shape='+d(b)+", style=filled];")});g.forEach(function(b){b.visitSuccessors(function(d){a.writeLn("B"+b.id+" -> B"+d.id)});b.dominator&&a.writeLn("B"+b.id+" -> B"+b.dominator.id+" [color = orange];");b.follow&&a.writeLn("B"+b.id+" -> B"+b.follow.id+" [color = purple];")});a.leave("}");a.writeLn("")};xa=ma;var ma=function(){},Qa=function(a,b){!0;if(f(a.argument))return new oa(a.operator.evaluate(a.argument.value));if(b){var d=Ra(a.argument,!0);if(a.operator===
X.TRUE)return d;if(d instanceof sa){if(a.operator===X.FALSE&&d.operator===X.FALSE)return d.argument}else return new sa(a.operator,d)}return a},Ra=function(a,b){var d;a instanceof sa?d=Qa(a,b):a instanceof la?(!0,d=f(a.left)&&f(a.right)?new oa(a.operator.evaluate(a.left.value,a.right.value)):a):d=a;return d};ma.prototype.tryFold=Ra;a.isConstant=f;a.Block=Ma;a.Node=p;a.Start=w;a.Null=Ca;a.Undefined=za;a.This=ia;a.Throw=aa;a.Arguments=ea;a.ASGlobal=qa;a.Projection=$;a.Region=u;a.Latch=ca;a.Binary=la;
a.Unary=sa;a.Constant=oa;a.ASFindProperty=J;a.GlobalProperty=ha;a.GetProperty=K;a.SetProperty=H;a.CallProperty=C;a.ASCallProperty=E;a.ASCallSuper=I;a.ASGetProperty=R;a.ASGetSuper=N;a.ASHasProperty=F;a.ASDeleteProperty=Q;a.ASGetDescendants=L;a.ASSetProperty=P;a.ASSetSuper=U;a.ASGetSlot=O;a.ASSetSlot=M;a.Call=B;a.ASNew=S;a.Phi=W;a.Stop=r;a.If=z;a.Switch=s;a.End=A;a.Jump=y;a.ASScope=ba;a.Operator=X;a.Variable=ga;a.Move=fa;a.Copy=G;a.Parameter=ja;a.NewArray=ra;a.NewObject=Ba;a.ASNewActivation=Ja;a.KeyValuePair=
Ga;a.ASMultiname=na;a.DFG=wa;a.CFG=xa;a.Flags={INDEXED:1,RESOLVED:2,PRISTINE:4,IS_METHOD:8};a.PeepholeOptimizer=ma})("undefined"===typeof exports?IR={}:exports);
var c4Options=systemOptions.register(new OptionSet("C4 Options")),enableC4=c4Options.register(new Option("c4","c4","boolean",!1,"Enable the C4 compiler.")),c4TraceLevel=c4Options.register(new Option("tc4","tc4","number",0,"Compiler Trace Level")),enableRegisterAllocator=c4Options.register(new Option("ra","ra","boolean",!1,"Enable register allocator.")),getPublicQualifiedName=Multiname.getPublicQualifiedName,createName=function(a,e){return isNumeric(e)||isObject(e)?e:new Multiname(a,e)};
(function(a){function e(a){return a instanceof S&&isString(a.value)}function b(a){return a instanceof S&&isNumeric(a.value)?!0:a.ty&&a.ty.isNumeric()}function d(a){return new S(a)}function g(a,b,e){!0;e=e.split(".");for(var g=0;g<e.length;g++)b=new IR.GetProperty(null,a.store,b,d(e[g])),b.shouldFloat=!0,a.loads.push(b);return b}function f(a){a=new IR.GlobalProperty(a);a.mustFloat=!0;return a}function l(a,b){var d=new K(a,b);W&&(d=W.tryFold(d));return d}function m(a,b,d){var e=new I(a,b,d);b.ty&&(b.ty!==
Type.Any&&b.ty===d.ty)&&(a===O.EQ?e.operator=O.SEQ:a===O.NE&&(e.operator=O.SNE));W&&(e=W.tryFold(e));return e}function p(a){return m(O.OR,a,d(0))}function r(a){return m(O.URSH,a,d(0))}function v(a){return b(a)?a:l(O.PLUS,a)}function u(a){return l(O.FALSE,l(O.FALSE,a))}function w(a,b,d){return new R(null,null,a,b,d,IR.Flags.PRISTINE)}function A(a,b){return w(f(a),null,[b])}function z(a){!0;return oa[Multiname.getQualifiedName(a)]}var s=IR.Node,B=IR.Start,y=IR.Null,D=IR.Undefined,G=IR.This,C=IR.Projection,
E=IR.Region,I=IR.Binary,K=IR.Unary,S=IR.Constant,R=IR.Call,L=IR.Phi,F=IR.Stop,O=IR.Operator,N=IR.Parameter,H=IR.NewArray,P=IR.NewObject,M=IR.KeyValuePair,U=IR.isConstant,J=IR.DFG,Q=new IndentingWriter,W=new IR.PeepholeOptimizer,ga,fa=function(a){this.id=ha+=1;this.index=a;this.local=[];this.stack=[];this.scope=[];this.store=D;this.loads=[];this.saved=D},$=function(a,b,d){a=b instanceof L&&b.control===a?b:new L(a,b);a.pushValue(d);return a},ca=function(a,b,d){for(var e=0;e<b.length;e++)b[e]=$(a,b[e],
d[e])},la=function(a){return a instanceof s?a.toString(!0):a},ha=0;fa.prototype.clone=function(a){var b=new ga;b.index=void 0!==a?a:this.index;b.local=this.local.slice(0);b.stack=this.stack.slice(0);b.scope=this.scope.slice(0);b.loads=this.loads.slice(0);b.saved=this.saved;b.store=this.store;return b};fa.prototype.matches=function(a){return this.stack.length===a.stack.length&&this.scope.length===a.scope.length&&this.local.length===a.local.length};fa.prototype.makeLoopPhis=function(a){function b(d){d=
new L(a,d);d.isLoop=!0;return d}var d=new ga;!0;d.index=this.index;d.local=this.local.map(b);d.stack=this.stack.map(b);d.scope=this.scope.map(b);d.loads=this.loads.slice(0);d.saved=this.saved;d.store=b(this.store);return d};fa.prototype.optimize=function(){function a(b){if(b instanceof L&&!b.isLoop){var d=b.args.unique();if(1===d.length)return b.seal(),Counter.count("Builder: OptimizedPhi"),d[0]}return b}this.local=this.local.map(a);this.stack=this.stack.map(a);this.scope=this.scope.map(a);this.saved=
a(this.saved);this.store=a(this.store)};fa.prototype.merge=function(a,b){!0;!0;ca(a,this.local,b.local);ca(a,this.stack,b.stack);ca(a,this.scope,b.scope);this.store=$(a,this.store,b.store);this.store.abstract=!0};fa.prototype.trace=function(a){a.writeLn(this.toString())};fa.prototype.toString=function(){return"<"+String(this.id+" @ "+this.index).padRight(" ",10)+(" M: "+la(this.store)).padRight(" ",14)+(" X: "+la(this.saved)).padRight(" ",14)+(" $: "+this.scope.map(la).join(", ")).padRight(" ",20)+
(" L: "+this.local.map(la).join(", ")).padRight(" ",40)+(" S: "+this.stack.map(la).join(", ")).padRight(" ",60)};ga=fa;var sa=A.bind(null,"asCoerceString"),fa=A.bind(null,"asCoerceObject"),oa=createEmptyObject();oa[Multiname.Int]=p;oa[Multiname.Uint]=r;oa[Multiname.Number]=v;oa[Multiname.String]=sa;oa[Multiname.Object]=fa;oa[Multiname.Boolean]=u;var ia=createEmptyObject();ia[Multiname.Int]=p;ia[Multiname.Uint]=r;ia[Multiname.Number]=A.bind(null,"Number");ia[Multiname.String]=A.bind(null,"String");
ia[Multiname.Object]=A.bind(null,"Object");ia[Multiname.Boolean]=A.bind(null,"Boolean");var aa=function(a,b,d){!0;this.abc=a.abc;this.scope=b;this.methodInfo=a;this.hasDynamicScope=d};aa.prototype.buildStart=function(a){var b=this.methodInfo,e=a.entryState=new ga(0);e.local.push(new G(a));for(var l=this.hasDynamicScope?1:0,m=b.parameters.length,r=0;r<m;r++)e.local.push(new N(a,l+r,PARAMETER_PREFIX+b.parameters[r].name));for(r=m;r<b.localCount;r++)e.local.push(D);e.store=new C(a,C.Type.STORE);a.scope=
this.hasDynamicScope?new N(a,0,SAVED_SCOPE_NAME):new S(this.scope);e.saved=new C(a,C.Type.SCOPE);a.domain=new S(this.domain);r=new IR.Arguments(a);if(b.needsRest()||b.needsArguments()){var p=d(l+(b.needsRest()?m:0));e.local[m+1]=new R(a,e.store,f("sliceArguments"),null,[r,p],IR.Flags.PRISTINE)}p=g(e,r,"length");for(r=0;r<m;r++){var s=b.parameters[r],v=r+1,u=e.local[v];if(void 0!==s.value)var w=new IR.Binary(O.LT,p,d(l+r+1)),u=new IR.Latch(null,w,d(s.value),u);s.type&&!s.type.isAnyName()&&((w=z(s.type))?
u=w(u):c4CoerceNonPrimitiveParameters&&(u=new R(a,e.store,f("asCoerceByMultiname"),null,[d(this.abc.applicationDomain),d(s.type),u],!0)));e.local[v]=u}return a};aa.prototype.buildGraph=function(){function a(s,A,B){function E(a){if(void 0!==a){if(a<La.length)return La[La.length-1-a];if(a===La.length)return B.saved;var b=B.saved;a-=La.length;for(var d=0;d<a;d++)b=ja(b,"parent");return b}return 0<La.length?La.top():B.saved}function F(a){!0;V.ti&&!a.ty&&(a.ty=V.ti.type);Ia.push(a)}function L(){return Ia.pop()}
function J(a){var b=Ea,d=L();d.shouldNotFloat=!0;b[a]=d}function ea(a){var b=oa[a],e=b.flags;a=b.isRuntimeName()?Ia.pop():d(b.name);b.isRuntimeNamespace()?(b=new H(s,[L()]),!0,b.shouldFloat=!0):b=d(b.namespaces);return new IR.ASMultiname(b,a,e)}function ra(a,b,e){b=new IR.ASFindProperty(s,B.store,E(),a,ga,b);if(e){if(e.object)return e.object instanceof Global&&!e.object.isExecuting()?(console.warn("Can't optimize findProperty "+a+", global object is not yet executed or executing."),b):d(e.object);
if(void 0!==e.scopeDepth)return xa(E(e.scopeDepth))}console.warn("Can't optimize findProperty "+a);return b}function ja(a,b){return g(B,a,b)}function ma(a,b){var e=z(a);return e?e(b):c4CoerceNonPrimitive?ta(f("asCoerceByMultiname"),null,[ga,d(a),b]):b}function xa(a){return a instanceof IR.ASScope?a.object:ja(a,"object")}function ka(a){B.store=new C(a,C.Type.STORE);a.loads=B.loads.slice(0);B.loads.length=0;return a}function Da(a){var b=a.namespaces,d=a.name;if(globalMultinameAnalysis.value)if(!U(b)||
!U(d)||a.isAttribute())Counter.count("GlobalMultinameResolver: Cannot resolve runtime multiname or attribute.");else return isNumeric(d.value)||!isString(d.value)||!d.value?(Counter.count("GlobalMultinameResolver: Cannot resolve numeric or any names."),!1):GlobalMultinameResolver.resolveMultiname(new Multiname(b.value,d.value,a.flags))}function Ha(a,b,e,g){!0;g=!!g;if(e){if(e.trait){if(e.trait.isConst()&&e.trait.hasDefaultValue)return d(e.trait.value);a=new IR.GetProperty(s,B.store,a,d(Multiname.getQualifiedName(e.trait.name)));
e.trait.isGetter()?a=ka(a):B.loads.push(a);return a}if(e.propertyQName)return ka(new IR.GetProperty(s,B.store,a,d(e.propertyQName)));if(e.isDirectlyReadable)return ka(new IR.GetProperty(s,B.store,a,b.name));if(e.isIndexedReadable)return ka(new IR.ASGetProperty(s,B.store,a,b,IR.Flags.INDEXED|(g?IR.Flagas.IS_METHOD:0)))}console.warn("Can't optimize getProperty "+b);if(e=Da(b))return ka(new IR.ASGetProperty(s,B.store,a,d(Multiname.getQualifiedName(e)),IR.Flags.RESOLVED|(g?IR.Flagas.IS_METHOD:0)));Counter.count("Compiler: Slow ASGetProperty");
return ka(new IR.ASGetProperty(s,B.store,a,b,g?IR.Flagas.IS_METHOD:0))}function Za(a,b,e,g){!0;if(g){if(g.trait){(b=g.trait.typeName?z(g.trait.typeName):null)&&(e=b(e));ka(new IR.SetProperty(s,B.store,a,d(Multiname.getQualifiedName(g.trait.name)),e));return}if(g.propertyQName)return ka(new IR.SetProperty(s,B.store,a,d(g.propertyQName),e));if(g.isDirectlyWriteable)return ka(new IR.SetProperty(s,B.store,a,b.name,e));if(g.isIndexedWriteable)return ka(new IR.ASSetProperty(s,B.store,a,b,e,IR.Flags.INDEXED))}console.warn("Can't optimize setProperty "+
b);Da(b);return ka(new IR.ASSetProperty(s,B.store,a,b,e,0))}function ta(a,b,d){return ka(new R(s,B.store,a,b,d,IR.Flags.PRISTINE))}function ya(a){var b;a.isBinary()&&(b=L());var d=L();a=b?m(a,d,b):l(a,d);W&&(a=W.tryFold(a,!0));return a}function Na(a){a=l(O.FALSE,ya(a));W&&(a=W.tryFold(a,!0));return a}function pa(a,b){var d,e;a.isBinary()?(e=L(),d=L(),b&&(e=p(e),d=p(d)),F(m(a,d,e))):(d=L(),b&&(d=p(d)),F(l(a,d)))}function Aa(a){!0;a=new IR.If(s,a);Fa=[{control:new C(a,C.Type.FALSE),target:K[V.position+
1],state:B},{control:new C(a,C.Type.TRUE),target:V.target,state:B}]}!0;B.optimize();var Ka=A.entryState;if(Ka){$&&Q.writeLn("Type State: "+Ka);for(var Y=0;Y<Ka.local.length;Y++){var Z=Ka.local[Y],Ea=B.local[Y];Ea.ty||(Ea.ty=Z)}}var Ea=B.local,Ia=B.stack,La=B.scope,T,da,Fa=null;$&&(Q.writeLn("Processing Region: "+s+", Block: "+A.bid),Q.enter(("> state: "+s.entryState.toString()).padRight(" ",100)));s.processed=!0;var V,Ka=A.position;for(A=A.end.position;Ka<=A;Ka++){V=K[Ka];var ua=V.op;B.index=Ka;switch(ua){case 3:ka(new IR.Throw(s,
L()));fa.push({region:s,store:B.store,value:D});!0;Fa=[];break;case 98:F(Ea[V.index]);break;case 208:case 209:case 210:case 211:F(Ea[ua-208]);break;case 99:J(V.index);break;case 212:case 213:case 214:case 215:J(ua-212);break;case 28:La.push(new IR.ASScope(E(),L(),!0));break;case 48:La.push(new IR.ASScope(E(),L(),!1));break;case 29:La.pop();break;case 100:F(new IR.ASGlobal(null,B.saved));break;case 101:F(xa(B.scope[V.index]));break;case 93:F(ra(ea(V.index),!0,V.ti));break;case 94:F(ra(ea(V.index),
!1,V.ti));break;case 102:Y=ea(V.index);Z=L();F(Ha(Z,Y,V.ti,!1,ic(V)));break;case 89:Y=ea(V.index);T=Z=L();Y=Y instanceof S&&Y.value instanceof Multiname&&Multiname.isQName(Y.value)?d(Multiname.getQualifiedName(Y.value)):Y;T=new IR.ASGetDescendants(s,B.store,T,Y);F(T);break;case 96:Y=ea(V.index);F(Ha(ra(Y,!0,V.ti),Y,V.ti,!1,ic(V)));break;case 104:case 97:T=L();Y=ea(V.index);Z=L();Za(Z,Y,T,V.ti,ic(V));break;case 106:Y=ea(V.index);Z=L();F(ka(new IR.ASDeleteProperty(s,B.store,Z,Y)));break;case 108:Z=
L();a:{T=Z;Y=d(V.index);if(da=V.ti)if(Z=da.trait){if(Z.isConst()&&da.trait.hasDefaultValue){T=d(Z.value);break a}Y=Multiname.getQualifiedName(Z.name);T=ka(new IR.GetProperty(s,B.store,T,d(Y)));break a}console.warn("Can't optimize getSlot "+Y);T=ka(new IR.ASGetSlot(null,B.store,T,Y))}F(T);break;case 109:T=L();Z=L();a:{Y=Z;da=d(V.index);if(Z=V.ti)if(Z=Z.trait){da=Multiname.getQualifiedName(Z.name);ka(new IR.SetProperty(s,B.store,Y,d(da),T));break a}console.warn("Can't optimize setSlot "+da);ka(new IR.ASSetSlot(s,
B.store,Y,da,T))}break;case 4:Y=ea(V.index);Z=L();da=B.saved;T=Z;Z=Y;(Y=V.ti)&&Y.trait&&Y.trait.isGetter()&&Y.baseClass?(da=VM_OPEN_GET_METHOD_PREFIX+Multiname.getQualifiedName(Y.trait.name),Y=ja(d(Y.baseClass),"traitsPrototype."+da),T=ta(Y,T,[])):T=ka(new IR.ASGetSuper(s,B.store,T,Z,da));F(T);break;case 5:T=L();Y=ea(V.index);Z=L();var Oa=B.saved;da=Z;(Z=V.ti)&&Z.trait&&Z.trait.isSetter()&&Z.baseClass?(Y=VM_OPEN_SET_METHOD_PREFIX+Multiname.getQualifiedName(Z.trait.name),Y=ja(d(Z.baseClass),"traitsPrototype."+
Y),ta(Y,da,[T])):ka(new IR.ASSetSuper(s,B.store,da,Y,T,Oa));break;case 241:case 240:break;case 64:F(w(Pa,null,[d(ha[V.index]),E(),d(!0)]));break;case 65:da=Ia.popMany(V.argCount);Z=L();T=L();F(ka(new R(s,B.store,T,Z,da,0)));break;case 70:case 79:case 76:da=Ia.popMany(V.argCount);Y=ea(V.index);Z=L();a:{T=Z;Z=Y;Y=da;Oa=76===ua;if((da=V.ti)&&da.trait){if(da.trait.isMethod()){Z=void 0;Z=da.trait.holder instanceof InstanceInfo&&da.trait.holder.isInterface()?Multiname.getPublicQualifiedName(Multiname.getName(da.trait.name)):
Multiname.getQualifiedName(da.trait.name);Z=VM_OPEN_METHOD_PREFIX+Z;T=ka(new IR.CallProperty(s,B.store,T,d(Z),Y,IR.Flags.PRISTINE));break a}if(da.trait.isClass()){Z=da.trait.name;!0;if(Z=ia[Multiname.getQualifiedName(Z)]){T=Z(Y[0]);break a}da=Multiname.getQualifiedName(da.trait.name);T=ka(new IR.CallProperty(s,B.store,T,d(da),Y,0));break a}}else if(da&&da.propertyQName){T=ka(new IR.CallProperty(s,B.store,T,d(da.propertyQName),Y,IR.Flags.PRISTINE));break a}T=(da=Da(Z))?ka(new IR.ASCallProperty(s,B.store,
T,d(Multiname.getQualifiedName(da)),Y,IR.Flags.PRISTINE|IR.Flags.RESOLVED,Oa)):ka(new IR.ASCallProperty(s,B.store,T,Z,Y,IR.Flags.PRISTINE,Oa))}79!==ua&&F(T);break;case 69:case 78:Y=ea(V.index);da=Ia.popMany(V.argCount);Z=L();Oa=B.saved;T=Z;Z=Y;Y=da;(da=V.ti)&&da.trait&&da.trait.isMethod()&&da.baseClass?(Z=VM_OPEN_METHOD_PREFIX+Multiname.getQualifiedName(da.trait.name),da=ja(d(da.baseClass),"traitsPrototype."+Z),T=ta(da,T,Y)):T=ka(new IR.ASCallSuper(s,B.store,T,Z,Y,IR.Flags.PRISTINE,Oa));78!==ua&&
F(T);break;case 66:da=Ia.popMany(V.argCount);Z=L();F(ka(new IR.ASNew(s,B.store,Z,da)));break;case 73:da=Ia.popMany(V.argCount);Z=L();if(!V.ti||!V.ti.noCallSuperNeeded)T=ja(B.saved,"object.baseClass.instanceConstructorNoInitialize"),ta(T,Z,da);break;case 74:da=Ia.popMany(V.argCount);Y=ea(V.index);Z=L();T=Ha(Z,Y,V.ti,!1,ic(V));F(ka(new IR.ASNew(s,B.store,T,da)));break;case 128:if(V.ti&&V.ti.noCoercionNeeded){Counter.count("Compiler: NoCoercionNeeded");break}else Counter.count("Compiler: CoercionNeeded");
T=L();F(ma(oa[V.index],T));break;case 131:case 115:F(p(L()));break;case 136:case 116:F(r(L()));break;case 132:case 117:F(v(L()));break;case 129:case 118:F(u(L()));break;case 120:F(ta(f("checkFilter"),null,[L()]));break;case 130:break;case 133:F(sa(L()));break;case 112:T=L();T=e(T)?T:w(f("String"),null,[T]);F(T);break;case 135:Z=L();c4AsTypeLate&&(T=L(),F(ta(f("asAsType"),null,[Z,T])));break;case 72:case 71:T=D;if(72===ua&&(T=L(),G.returnType&&(!V.ti||!V.ti.noCoercionNeeded)))T=ma(G.returnType,T);
fa.push({region:s,store:B.store,value:T});!0;Fa=[];break;case 30:case 35:T=L();Z=L();F(new IR.CallProperty(s,B.store,Z,d(30===ua?"asNextName":"asNextValue"),[T],IR.Flags.PRISTINE));break;case 50:T=ta(f("asHasNext2"),null,[Ea[V.object],Ea[V.index]]);Ea[V.object]=ja(T,"object");F(Ea[V.index]=ja(T,"index"));break;case 32:F(y);break;case 33:F(D);break;case 34:notImplemented();break;case 36:F(d(V.value));break;case 37:F(d(V.value));break;case 44:F(d(la[V.index]));break;case 45:F(d(I[V.index]));break;case 46:F(d(ca[V.index]));
break;case 47:F(d(N[V.index]));break;case 38:F(d(!0));break;case 39:F(d(!1));break;case 40:F(d(NaN));break;case 41:L();break;case 42:T=L();T.shouldNotFloat=!0;F(T);F(T);break;case 43:B.stack.push(L(),L());break;case 239:case 240:case 241:break;case 12:Aa(Na(O.LT));break;case 24:Aa(ya(O.GE));break;case 13:Aa(Na(O.LE));break;case 23:Aa(ya(O.GT));break;case 14:Aa(Na(O.GT));break;case 22:Aa(ya(O.LE));break;case 15:Aa(Na(O.GE));break;case 21:Aa(ya(O.LT));break;case 16:!0;Fa=[{control:s,target:V.target,
state:B}];break;case 17:Aa(ya(O.TRUE));break;case 18:Aa(ya(O.FALSE));break;case 19:Aa(ya(O.EQ));break;case 20:Aa(ya(O.NE));break;case 25:Aa(ya(O.SEQ));break;case 26:Aa(ya(O.SNE));break;case 27:T=L();!0;if(2<V.targets.length){Fa=[];T=new IR.Switch(s,T);for(Y=0;Y<V.targets.length;Y++)Fa.push({control:new C(T,C.Type.CASE,d(Y)),target:V.targets[Y],state:B})}else!0,T=m(O.SEQ,T,d(0)),T=new IR.If(s,T),Fa=[{control:new C(T,C.Type.FALSE),target:V.targets[1],state:B},{control:new C(T,C.Type.TRUE),target:V.targets[0],
state:B}];break;case 150:pa(O.FALSE);break;case 151:pa(O.BITWISE_NOT);break;case 160:Y=L();T=L();da=b(T)&&b(Y)||(e(T)||T.ty&&T.ty.isString())&&(e(Y)||Y.ty&&Y.ty.isString())?O.ADD:useAsAdd?O.AS_ADD:O.ADD;F(m(da,T,Y));break;case 197:pa(O.ADD,!0);break;case 161:pa(O.SUB);break;case 198:pa(O.SUB,!0);break;case 162:pa(O.MUL);break;case 199:pa(O.MUL,!0);break;case 163:pa(O.DIV);break;case 164:pa(O.MOD);break;case 165:pa(O.LSH);break;case 166:pa(O.RSH);break;case 167:pa(O.URSH);break;case 168:pa(O.AND);
break;case 169:pa(O.OR);break;case 170:pa(O.XOR);break;case 171:pa(O.EQ);break;case 172:pa(O.SEQ);break;case 173:pa(O.LT);break;case 174:pa(O.LE);break;case 175:pa(O.GT);break;case 176:pa(O.GE);break;case 144:pa(O.NEG);break;case 196:pa(O.NEG,!0);break;case 145:case 192:case 147:case 193:F(d(1));145===ua||147===ua?F(v(L())):F(p(L()));145===ua||192===ua?pa(O.ADD):pa(O.SUB);break;case 146:case 194:case 148:case 195:F(d(1));146===ua||148===ua?F(v(Ea[V.index])):F(p(Ea[V.index]));146===ua||194===ua?pa(O.ADD):
pa(O.SUB);J(V.index);break;case 177:Z=L();T=L();F(ta(ja(Z,"isInstanceOf"),null,[T]));break;case 178:T=L();Y=ea(V.index);Z=Ha(ra(Y,!1),Y);F(ta(f("asIsType"),null,[Z,T]));break;case 179:Z=L();T=L();F(ta(f("asIsType"),null,[Z,T]));break;case 180:Z=L();T=L();Y=new IR.ASMultiname(D,T,0);F(ka(new IR.ASHasProperty(s,B.store,Z,Y)));break;case 149:F(ta(f("asTypeOf"),null,[L()]));break;case 8:F(D);J(V.index);break;case 83:da=Ia.popMany(V.argCount);Z=L();T=f("applyType");F(ta(T,null,[ga,Z,new H(s,da)]));break;
case 86:da=Ia.popMany(V.argCount);F(new H(s,da));break;case 85:da=[];for(Y=0;Y<V.argCount;Y++)T=L(),Z=L(),!0,Z=d(Multiname.getPublicQualifiedName(Z.value)),da.push(new M(Z,T));F(new P(s,da));break;case 87:F(new IR.ASNewActivation(d(G)));break;case 88:T=f("createClass");F(ta(T,null,[d(aa[V.index]),L(),E()]));break;default:unexpected("Not Implemented: "+V)}239===ua||(241===ua||240===ua)||$&&Q.writeLn(("state: "+B.toString()).padRight(" ",100)+" : "+Ka+", "+V.toString(this.abc))}$&&Q.leave(("< state: "+
B.toString()).padRight(" ",100));Fa||(Fa=[],V.position+1<=K.length&&Fa.push({control:s,target:K[V.position+1],state:B}));return Fa}for(var s=this.methodInfo.analysis,A=s.blocks,K=s.bytecodes,G=this.methodInfo,I=this.abc.constantPool.ints,ca=this.abc.constantPool.uints,N=this.abc.constantPool.doubles,la=this.abc.constantPool.strings,ha=this.abc.methods,aa=this.abc.classes,oa=this.abc.constantPool.multinames,ga=new S(this.abc.applicationDomain),$=2<c4TraceLevel.value,fa=[],s=0;s<A.length;s++)A[s].blockDominatorOrder=
s;var Ha=new SortedList(function(a,b){return a.block.blockDominatorOrder-b.block.blockDominatorOrder}),s=new B(null);this.buildStart(s);var Pa=f("createFunction");for(Ha.push({region:s,block:A[0]});A=Ha.pop();)a(A.region,A.block,A.region.entryState.clone()).forEach(function(a){var b=a.target,d=b.region;d?($&&Q.enter("Merging into region: "+d+" @ "+b.position+", block "+b.bid+" {"),$&&Q.writeLn("  R "+d.entryState),$&&Q.writeLn("+ I "+a.state),d.entryState.merge(d,a.state),d.predecessors.push(a.control),
$&&Q.writeLn("  = "+d.entryState),$&&Q.leave("}")):(d=b.region=new E(a.control),b.loop&&$&&Q.writeLn("Adding PHIs to loop region."),d.entryState=b.loop?a.state.makeLoopPhis(d):a.state.clone(b.position),$&&Q.writeLn("Adding new region: "+d+" @ "+b.position+" to worklist."),Ha.push({region:d,block:b}))}),$&&Q.enter("Worklist: {"),Ha.forEach(function(a){$&&Q.writeLn(a.region+" "+a.block.bdo+" "+a.region.entryState)}),$&&Q.leave("}");$&&Q.writeLn("Done");if(1<fa.length){var xa=new E(null),ma=new L(xa,
null),Da=new L(xa,null);fa.forEach(function(a){xa.predecessors.push(a.region);ma.pushValue(a.value);Da.pushValue(a.store)});A=new F(xa,Da,ma)}else A=new F(fa[0].region,fa[0].store,fa[0].value);return new J(A)};a.buildMethod=function(a,b,d,e){!0;!0;!0;Counter.count("Compiler: Compiled Methods");Timer.start("Compiler");Timer.start("Mark Loops");b.analysis.markLoops();Timer.stop();enableVerifier.value&&(Timer.start("Verify"),a.verifyMethod(b,d),Timer.stop());a=0<c4TraceLevel.value;var g=1<c4TraceLevel.value;
Timer.start("Build IR");s.startNumbering();b=(new aa(b,d,e)).buildGraph();Timer.stop();g&&b.trace(Q);Timer.start("Build CFG");b=b.buildCFG();Timer.stop();Timer.start("Optimize Phis");b.optimizePhis();Timer.stop();Timer.start("Schedule Nodes");b.scheduleEarly();Timer.stop();g&&b.trace(Q);Timer.start("Verify IR");b.verify();Timer.stop();Timer.start("Allocate Variables");b.allocateVariables();Timer.stop();Timer.start("Generate Source");g=Backend.generate(b,enableRegisterAllocator.value);Timer.stop();
a&&Q.writeLn(g.body);s.stopNumbering();Timer.stop();return g}})("undefined"===typeof exports?Builder={}:exports);var Compiler=new (function(){function a(){this.verifier=new Verifier}a.prototype.compileMethod=function(a,b,d){return Builder.buildMethod(this.verifier,a,b,d)};return a}());
(function(a){var e,b=function(a){this.kind=1;this.body=a},d=function(a){this.kind=2;this.body=a},g=function(a,b,d,e){this.kind=3;this.cond=a;this.then=b;this.else=d;this.negated=!1;this.nothingThrownLabel=e},f=function(a,b){this.kind=4;this.index=a;this.body=b},l=function(a,b,d){this.kind=5;this.determinant=a;this.cases=b;this.nothingThrownLabel=d},m=function(a,b){this.kind=6;this.labels=a;this.body=b},p=function(a){for(var b={},d=0,e=a.length;d<e;d++){var g=a[d];g.labels||print(g.toSource());for(var f=
0,l=g.labels.length;f<l;f++)b[g.labels[f]]=g}this.kind=7;this.cases=a;this.labelMap=b},r=function(a){this.kind=8;this.label=a},v=function(a,b){this.kind=9;this.label=a;this.head=b},u=function(a,b){this.kind=10;this.label=a;this.head=b;this.necessary=!0},w=function(a,b){this.kind=11;this.body=a;this.catches=b},A=function(a,b,d){this.kind=12;this.varName=a;this.typeName=b;this.body=d};b.prototype={trace:function(a){for(var b=this.body,d=0,e=b.length;d<e;d++)b[d].trace(a)},first:function(){return this.body[0]},
slice:function(a,d){return new b(this.body.slice(a,d))}};d.prototype={trace:function(a){a.enter("loop {");this.body.trace(a);a.leave("}")}};g.prototype={trace:function(a){this.cond.trace(a);this.nothingThrownLabel&&a.enter("if (label is "+this.nothingThrownLabel+") {");a.enter("if"+(this.negated?" not":"")+" {");this.then&&this.then.trace(a);this.else&&(a.outdent(),a.enter("} else {"),this.else.trace(a));a.leave("}");this.nothingThrownLabel&&a.leave("}")}};f.prototype={trace:function(a){0<=this.index?
a.writeLn("case "+this.index+":"):a.writeLn("default:");a.indent();this.body&&this.body.trace(a);a.outdent()}};l.prototype={trace:function(a){this.nothingThrownLabel&&a.enter("if (label is "+this.nothingThrownLabel+") {");this.determinant.trace(a);a.writeLn("switch {");for(var b=0,d=this.cases.length;b<d;b++)this.cases[b].trace(a);a.writeLn("}");this.nothingThrownLabel&&a.leave("}")}};m.prototype={trace:function(a){a.enter("if (label is "+this.labels.join(" or ")+") {");this.body&&this.body.trace(a);
a.leave("}")}};p.prototype={trace:function(a){for(var b=0,d=this.cases.length;b<d;b++)this.cases[b].trace(a)}};r.prototype={trace:function(a){a.writeLn("label = "+this.label)}};v.prototype={trace:function(a){this.label&&a.writeLn("label = "+this.label);a.writeLn("break")}};u.prototype={trace:function(a){this.label&&a.writeLn("label = "+this.label);this.necessary&&a.writeLn("continue")}};w.prototype={trace:function(a){a.enter("try {");this.body.trace(a);a.writeLn("label = "+this.nothingThrownLabel);
for(var b=0,d=this.catches.length;b<d;b++)this.catches[b].trace(a);a.leave("}")}};A.prototype={trace:function(a){a.outdent();a.enter("} catch ("+(this.varName||"e")+(this.typeName?" : "+this.typeName:"")+") {");this.body.trace(a)}};e={SEQ:1,LOOP:2,IF:3,CASE:4,SWITCH:5,LABEL_CASE:6,LABEL_SWITCH:7,EXIT:8,BREAK:9,CONTINUE:10,TRY:11,CATCH:12,Seq:b,Loop:d,If:g,Case:f,Switch:l,LabelCase:m,LabelSwitch:p,Exit:r,Break:v,Continue:u,Try:w,Catch:A};var z=function(a,b){this.options=b||{};var d=a.blocks,e=BitSetFunctor(a.blocks.length),
g=e.ADDRESS_BITS_PER_WORD,f=e.BITS_PER_WORD,l=e.BIT_INDEX_MASK;e.singleton=function(a){var b=new e;b.set(a.id);b.count=1;b.dirty=0;return b};e.fromBlocks=function(a){var b=new e;b.setBlocks(a);return b};var m=e.prototype;e.singleword?(m.forEachBlock=function(a){!0;var b=this.bits;if(b)for(var e=0;e<f;e++)b&1<<e&&a(d[e])},m.choose=function(){var a=this.bits;if(a)for(var b=0;b<f;b++)if(a&1<<b)return d[b]},m.members=function(){var a=[],b=this.bits;if(b)for(var e=0;e<f;e++)b&1<<e&&a.push(d[e]);return a},
m.setBlocks=function(a){for(var b=this.bits,d=0,e=a.length;d<e;d++)b|=1<<(a[d].id&l);this.bits=b}):(m.forEachBlock=function(a){!0;for(var b=this.bits,e=0,g=b.length;e<g;e++){var l=b[e];if(l)for(var m=0;m<f;m++)l&1<<m&&a(d[e*f+m])}},m.choose=function(){for(var a=this.bits,b=0,e=a.length;b<e;b++){var g=a[b];if(g)for(var l=0;l<f;l++)if(g&1<<l)return d[b*f+l]}},m.members=function(){for(var a=[],b=this.bits,e=0,g=b.length;e<g;e++){var l=b[e];if(l)for(var m=0;m<f;m++)l&1<<m&&a.push(d[e*f+m])}return a},
m.setBlocks=function(a){for(var b=this.bits,d=0,e=a.length;d<e;d++){var f=a[d].id;b[f>>g]|=1<<(f&l)}});this.BlockSet=e;this.hasExceptions=!1;this.normalizeReachableBlocks(a.root)},d=function(a,b,d){return function(e,g,f){function l(a){return f+a.id}function m(a){a.fn=a.fn.bind(r)}var r=this;f=f||"";var p=this.bytecodes;p&&(a.forEach(m),b.forEach(m),writeGraphViz(e,g.toString(),p[0],l,function(a){return a.successors||[]},a,b,function(a){return"Block: "+a.id+"\\l"},d&&d.bind(this,l)))}};z.prototype=
{normalizeReachableBlocks:function(a){!0;var b=this.BlockSet,d=[],e={},g={},f=[a];for(g[a.id]=!0;a=f.top();)if(e[a.id])1===e[a.id]&&(e[a.id]=2,d.push(a)),g[a.id]=!1,f.pop();else{e[a.id]=1;g[a.id]=!0;for(var l=a.successors,m=0,r=l.length;m<r;m++){var p=l[m];g[p.id]&&(a.spbacks||(a.spbacks=new b),a.spbacks.set(p.id));!e[p.id]&&f.push(p)}}this.blocks=d.reverse()},computeDominance:function(){var a=this.blocks,b=a.length,d=Array(b);d[0]=0;for(var e=[],g=0;g<b;g++)e[a[g].id]=g,a[g].dominatees=[];for(var f=
!0;f;){f=!1;for(g=1;g<b;g++){var l=a[g].predecessors,m=l.length,r=e[l[0].id];if(!(r in d))for(var p=1;p<m&&!(r=e[l[p].id],r in d);p++);!0;for(p=0;p<m;p++){var v=e[l[p].id];if(v!==r&&v in d){for(;v!==r;){for(;v>r;)v=d[v];for(;r>v;)r=d[r]}r=v}}d[g]!==r&&(d[g]=r,f=!0)}}a[0].dominator=a[0];for(g=1;g<b;g++)e=a[g],m=a[d[g]],e.dominator=m,m.dominatees.push(e),e.npredecessors=e.predecessors.length;b=[a[0]];for(a[0].level||(a[0].level=0);e=b.shift();){a=e.dominatees;p=0;for(m=a.length;p<m;p++)a[p].level=e.level+
1;b.push.apply(b,a)}},computeFrontiers:function(){for(var a=this.BlockSet,b=this.blocks,d=0,e=b.length;d<e;d++)b[d].frontier=new a;d=1;for(e=b.length;d<e;d++){var a=b[d],g=a.predecessors;if(2<=g.length)for(var f=a.dominator,l=0,m=g.length;l<m;l++)for(var r=g[l];r!==f;)r.frontier.set(a.id),r=r.dominator}},analyzeControlFlow:function(){this.computeDominance();return this.analyzedControlFlow=!0},markLoops:function(){function a(d,e){var g=new b;g.setBlocks(d);g.recount();this.id=e;this.body=g;this.exit=
new b;this.save={};this.head=new b;this.npredecessors=0}if(!this.analyzedControlFlow&&!this.analyzeControlFlow())return!1;var b=this.BlockSet,d;d=this.blocks;for(var e=new b,g=0,f=d.length;g<f;g++){var l=d[g],m=l.spbacks;if(m)for(var l=l.successors,r=0,p=l.length;r<p;r++){var v=l[r];m.get(v.id)&&e.set(v.dominator.id)}}d=e.members();if(0>=d.length)return this.markedLoops=!0;d=d.sort(function(a,b){return a.level-b.level});e=0;for(g=d.length-1;0<=g;g--){for(var f=d[g],m=1,l={},r={},p=[],v=[],u=[],w=
f.level+1,A=[f],z=void 0,H=void 0,z=void 0;z=A.top();)if(l[z.id]){if(v.peek()===z){v.pop();var P=[];do H=p.pop(),r[H.id]=!0,P.push(H);while(H!==z);(1<P.length||H.spbacks&&H.spbacks.get(H.id))&&u.push(P)}A.pop()}else{l[z.id]=m++;p.push(z);v.push(z);for(var H=z.successors,P=0,M=H.length;P<M;P++)if(z=H[P],!(z.level<w)){var U=z.id;if(l[U]){if(!r[U])for(;l[v.peek().id]>l[U];)v.pop()}else A.push(z)}}m=u;if(0!==m.length){l=0;for(r=m.length;l<r;l++){p=m[l];v=new a(p,e++);u=0;for(w=p.length;u<w;u++)if(A=p[u],
A.level===f.level+1&&!A.loop){A.loop=v;v.head.set(A.id);z=A.predecessors;H=0;for(P=z.length;H<P;H++)v.body.get(z[H].id)&&A.npredecessors--;v.npredecessors+=A.npredecessors}u=0;for(w=p.length;u<w;u++)A=p[u],A.level===f.level+1&&(A.npredecessors=v.npredecessors);v.head.recount()}}}return this.markedLoops=!0},induceControlTree:function(){function a(b,d){b.recount();if(0===b.count)return null;b.save=d;return b}function b(l,m,r,p,v,u,w){for(var A=[];l;)if(1<l.count){for(var z=new g,N={},H=[],P=l.members(),
M=0,U=P.length;M<U;M++){var J=P[M],Q=J.id,W;if(J.loop&&l.contains(J.loop.head)){var ga=J.loop;if(!ga.induced){for(var fa=ga.head.members(),$=0,ca=0,la=fa.length;ca<la;ca++)$+=l.save[fa[ca].id];if(0<J.npredecessors-$)J.npredecessors-=l.save[Q],J.save=l.save[Q],W=b(J,z,N,p),H.push(new e.LabelCase([Q],W));else{ca=0;for(la=fa.length;ca<la;ca++)W=fa[ca],W.npredecessors-=$,W.save=$;W=b(J,z,N,p);H.push(new e.LabelCase(ga.head.toArray(),W));ga.induced=!0}}}else J.npredecessors-=l.save[Q],J.save=l.save[Q],
W=b(J,z,N,p),H.push(new e.LabelCase([Q],W))}for(var J=[],ca=0,M=0,U=H.length;M<U;M++){W=H[M];la=W.labels;ga=fa=0;for($=la.length;ga<$;ga++)Q=la[ga],z.get(Q)&&0<P[M].npredecessors-l.save[Q]?J.push(Q):la[fa++]=Q;la.length=fa;0<la.length&&(H[ca++]=W)}H.length=ca;if(0===H.length){M=0;for(U=J.length;M<U;M++)Q=J[M],r[Q]=(r[Q]||0)+l.save[Q],m.set(Q);break}A.push(new e.LabelSwitch(H));l=a(z,N)}else{1===l.count?(J=l.choose(),Q=J.id,J.npredecessors-=l.save[Q],J.save=l.save[Q]):(J=l,Q=J.id);if(v)v=!1;else{if(p&&
!p.body.get(Q)){J.npredecessors+=J.save;p.exit.set(Q);p.save[Q]=(p.save[Q]||0)+J.save;A.push(new e.Break(Q,p));break}if(p&&J.loop===p){J.npredecessors+=J.save;A.push(new e.Continue(Q,p));break}if(J===w)break;if(0<J.npredecessors){J.npredecessors+=J.save;r[Q]=(r[Q]||0)+J.save;m.set(Q);A.push(u?new e.Break(Q,u):new e.Exit(Q));break}if(J.loop){var la=J.loop;if(1===la.head.count)z=b(la.head.choose(),null,null,la,!0);else{z=[];fa=la.head.members();M=0;for(U=fa.length;M<U;M++)W=fa[M],N=W.id,W=b(W,null,
null,la,!0),z.push(new e.LabelCase([N],W));z=new e.LabelSwitch(z)}A.push(new e.Loop(z));l=a(la.exit,la.save);continue}}z=new g;N={};if(d&&J.hasCatches){W=J.successors;H=[];l=[];M=0;for(U=W.length;M<U;M++)P=W[M],(P.exception?H:l).push(P);ca=[];M=0;for(U=H.length;M<U;M++)P=H[M],P.npredecessors-=1,P.save=1,W=b(P,z,N,p),P=P.exception,ca.push(new e.Catch(P.varName,P.typeName,W));U=new e.Try(J,ca)}else l=J.successors,U=J;if(2<l.length){H=[];for(M=l.length-1;0<=M;M--)P=l[M],P.npredecessors-=1,P.save=1,W=
b(P,z,N,p,null,J,l[M+1]),H.unshift(new e.Case(M,W));H.top().index=void 0;d&&J.hasCatches?(U.nothingThrownLabel=f,U=new e.Switch(U,H,f++)):U=new e.Switch(U,H);l=a(z,N)}else 2===l.length?(M=J.hasFlippedSuccessors?l[1]:l[0],W=J.hasFlippedSuccessors?l[0]:l[1],M.npredecessors-=1,M.save=1,M=b(M,z,N,p),W.npredecessors-=1,W.save=1,W=b(W,z,N,p),d&&J.hasCatches?(U.nothingThrownLabel=f,U=new e.If(U,M,W,f++)):U=new e.If(U,M,W),l=a(z,N)):(W=l[0])?d&&J.hasCatches?(U.nothingThrownLabel=W.id,N[W.id]=(N[W.id]||0)+
1,z.set(W.id),l=a(z,N)):(W.npredecessors-=1,W.save=1,l=W):d&&J.hasCatches?(U.nothingThrownLabel=-1,l=a(z,N)):l=W;A.push(U)}return 1<A.length?new e.Seq(A):A[0]}var d=this.hasExceptions,g=this.BlockSet,f=this.blocks.length;this.controlTree=b(this.blocks[0],new g,{})},restructureControlFlow:function(){Timer.start("Restructure Control Flow");if(!this.markedLoops&&!this.markLoops())return Timer.stop(),!1;this.induceControlTree();this.restructuredControlFlow=!0;Timer.stop();return!0},trace:function(a){function b(a){return a.id}
var d=this.bytecodes;a.enter("analysis {");a.enter("cfg {");this.blocks.forEach(function(e){e.dominator?(a.enter("block "+e.id+(0<e.successors.length?" -> "+e.successors.map(b).join(","):"")+" {"),a.writeLn("npredecessors".padRight(" ",10)+e.npredecessors),a.writeLn("idom".padRight(" ",10)+e.dominator.id),a.writeLn("domcs".padRight(" ",10)+e.dominatees.map(b).join(",")),e.frontier&&a.writeLn("frontier".padRight(" ",10)+"{"+e.frontier.toArray().join(",")+"}"),a.writeLn("level".padRight(" ",10)+e.level)):
a.enter("block unreachable {");e.loop&&(a.writeLn("loop".padRight(" ",10)+"{"+e.loop.body.toArray().join(",")+"}"),a.writeLn("  id".padRight(" ",10)+e.loop.id),a.writeLn("  head".padRight(" ",10)+"{"+e.loop.head.toArray().join(",")+"}"),a.writeLn("  exit".padRight(" ",10)+"{"+e.loop.exit.toArray().join(",")+"}"),a.writeLn("  npredecessors".padRight(" ",10)+e.loop.npredecessors));a.writeLn("");if(0<=e.position)for(var g=e.position;g<=e.end.position;g++)a.writeLn((""+g).padRight(" ",5)+d[g]);else a.writeLn("abstract");
a.leave("}")});a.leave("}");this.controlTree&&(a.enter("control-tree {"),this.controlTree.trace(a),a.leave("}"));a.leave("}")},traceCFG:d([{fn:function(a){return a.successors||[]},style:""}],[{fn:function(a){return a.predecessors||[]},style:""}]),traceDJ:d([{fn:function(a){return a.dominatees||[]},style:"style=dashed"},{fn:function(a){var b=new this.BlockSet;b.setBlocks(a.successors);b.subtract(this.BlockSet.fromBlocks(a.dominatees));a.spbacks&&b.subtract(a.spbacks);return b.members()},style:""},
{fn:function(a){return a.spbacks?a.spbacks.members():[]},style:"style=bold"}],[{fn:function(a){return a.predecessors||[]},style:""}],function(a,b){for(var d=this.bytecodes[0],e=[d],g=d.level,f=[];d=e.shift();)g!=d.level&&(b.writeLn("{rank=same; "+f.map(function(b){return"block_"+a(b)}).join(" ")+"}"),f.length=0,g=d.level),f.push(d),e.push.apply(e,d.dominatees)})};a.Control=e;a.analyze=function(a){a=new z(a);a.restructureControlFlow();return a.controlTree}})("undefined"===typeof exports?Looper={}:
exports);
(function(){var a=estransform,e=a.Node,b=a.Identifier,d=a.VariableDeclarator,g=a.AssignmentExpression,f=a.MemberExpression,l=a.IfStatement,m=a.WhileStatement,p=a.FunctionDeclaration;new IndentingWriter;var r=function(a,b,d){this.id=a;this.start=b;this.end=d},v=function(a,b){this.intervals=a.slice(0);this.maxRegisters=b};r.prototype.toString=function(){return"["+this.start+","+this.end+"]"};v.prototype.allocate=function(){var a=this.intervals;this.intervals.sort(function(a,b){return a.start-b.start});
for(var b=new SortedList(function(a,b){return a.end-b.end}),d=this.maxRegisters,e=[],g=d-1;0<=g;g--)e.push("R"+g);a.forEach(function(a){b.forEach(function(b){if(b.end>=a.start)return SortedList.RETURN;e.push(b.register);return SortedList.DELETE});b.length===d?notImplemented("Cannot Spill"):(a.register=e.pop(),b.push(a))})};v.Interval=r;Transform.transform=function(r){var w=a.makePass("scan","scanNode"),A=0;e.prototype.scan=function(a){this.position=A++;return w.apply(this,a)};var z=[],s={},B=[];p.prototype.scan=
function(){this.params.forEach(function(a){a.name in s||(s[a.name]=z.length,z.push(a.name))});this.body.scan();return this};d.prototype.scan=function(){this.position=A++;this.id.name in s||(s[this.id.name]=z.length,z.push(this.id.name));return this};g.prototype.scan=function(a){this.left.scan(a);this.right.scan(a);this.position=A++;return this};m.prototype.scan=function(a){this.position=A++;this.test.scan(a);this.body.scan(a);this.afterPosition=A++;return this};r.scan();for(var y=BitSetFunctor(z.length),
D=BitSetFunctor(A),G=[],C=0;C<z.length;C++)G.push(new D);e.prototype.markLiveness=a.makePass("markLiveness","markLivenessNode",!0);b.prototype.markLiveness=function(a){var b=this.name;if("undefined"===b||a&&a.isProperty||!(b in s))return this;B.push(this);a=a.live;b=s[b];G[b].set(this.position);a.set(b);return this};d.prototype.markLiveness=function(){B.push(this.id);return this};l.prototype.markLiveness=function(a){var b=a.live.clone(),d=a.live.clone();this.alternate&&this.alternate.markLiveness({live:b});
this.consequent&&this.consequent.markLiveness({live:d});a.live.assign(b);a.live._union(d);this.test.markLiveness(a);return this};m.prototype.markLiveness=function(a){var b=a.live.clone(),d=this.afterPosition;do{var e=b.clone();this.body.markLiveness({live:b});this.test.markLiveness({live:b});(e=!e.equals(b))&&b.forEach(function(a){G[a].set(d)})}while(e);a.live.assign(b);return this};g.prototype.markLiveness=function(a){this.right.markLiveness(a);if(this.left instanceof b){a=a.live;var d=s[this.left.name];
G[d].set(this.position);a.clear(d);B.push(this.left)}else this.left.markLiveness(a);return this};f.prototype.markLiveness=function(a){(this.computed||!(this.property instanceof b))&&this.property.markLiveness(a);this.object.markLiveness(a);return this};r.markLiveness({live:new y});r=[];for(C=0;C<G.length;C++){for(var y=G[C],E=D=-1,I=0;I<y.length;I++)if(y.get(I)){D=I;break}for(I=y.length-1;0<=I;I--)if(y.get(I)){E=I;break}y=[D,E];r.push(new v.Interval(C,y[0],y[1]))}(new v(r,1024)).allocate();y=createEmptyObject();
for(C=0;C<z.length;C++)y[z[C]]=r[C].register;for(C=0;C<B.length;C++)B[C].patched||(B[C].name=y[B[C].name],B[C].patched=!0)}})("undefined"===typeof exports?Transform={}:exports);
(function(){function a(a){if("string"===typeof a||null===a||!0===a||!1===a)return new u(a);if(void 0===a)return new w("undefined");if("object"===typeof a||"function"===typeof a)return new w(objectConstantName(a));if("number"===typeof a&&isNaN(a))return new w("NaN");if(Infinity===a)return new w("Infinity");if(-Infinity===a)return new R("-",new w("Infinity"));if("number"===typeof a&&0>1/a)return new R("-",new u(Math.abs(a)));if("number"===typeof a)return new u(a);unexpected("Cannot emit constant for value: ",
a)}function e(a){!0;return new w(a)}function b(a){if(!("$"===a[0]||"_"===a[0]||"\\"===a[0]||"a"<=a[0]&&"z">=a[0]||"A"<=a[0]&&"Z">=a[0]))return!1;for(var b=1;b<a.length;b++)if(!("$"===a[b]||"_"===a[b]||"\\"===a[b]||"a"<=a[b]&&"z">=a[b]||"A"<=a[b]&&"Z">=a[b]||"0"<=a[b]&&"9">=a[b]))return!1;return!0}function d(a){for(var d=1;d<arguments.length;d++){var e=arguments[d];a="string"===typeof e?b(e)?new s(a,new w(e),!1):new s(a,new u(e),!0):e instanceof u&&b(e.value)?new s(a,new w(e.value),!1):new s(a,e,!0)}return a}
function g(a,b){!0;!0;return new y(a,b)}function f(a,b){!0;return new D(a,"=",b)}function l(){this.label=new $("$L");this.variables=[];this.parameters=[]}function m(a,b,d){!0;!0;!0;!0;if(d||!a.variable)return a.compile(b);!0;return e(a.variable.name)}function p(b,d){return[m(b.namespaces,d),m(b.name,d),a(b.flags)]}function r(a){return escodegen.generate(a,{base:"",indent:"  ",comment:!0,format:{compact:!1}})}var v=estransform,u=v.Literal,w=v.Identifier,A=v.VariableDeclaration,z=v.VariableDeclarator,
s=v.MemberExpression,B=v.BinaryExpression,y=v.CallExpression,D=v.AssignmentExpression,G=v.ExpressionStatement,C=v.ReturnStatement,E=v.FunctionDeclaration,I=v.ConditionalExpression,K=v.ObjectExpression,S=v.ArrayExpression,R=v.UnaryExpression,L=v.NewExpression,F=v.Property,O=v.BlockStatement,N=v.ThisExpression,H=v.ThrowStatement,P=v.IfStatement,M=v.WhileStatement,U=v.BreakStatement,J=v.ContinueStatement,Q=v.SwitchStatement,W=v.SwitchCase,v=IR.Block,ga=IR.Operator,fa=Looper.Control,$=IR.Variable;fa.Break.prototype.compile=
function(a,b){return a.compileBreak(this,b)};fa.Continue.prototype.compile=function(a,b){return a.compileContinue(this,b)};fa.Exit.prototype.compile=function(a,b){return a.compileExit(this,b)};fa.LabelSwitch.prototype.compile=function(a,b){return a.compileLabelSwitch(this,b)};fa.Seq.prototype.compile=function(a,b){return a.compileSequence(this,b)};v.prototype.compile=function(a,b){return a.compileBlock(this,b)};fa.Loop.prototype.compile=function(a,b){return a.compileLoop(this,b)};fa.Switch.prototype.compile=
function(a,b){return a.compileSwitch(this,b)};fa.If.prototype.compile=function(a,b){return a.compileIf(this,b)};fa.Try.prototype.compile=function(a,b){return a.compileTry(this,b)};l.prototype.useVariable=function(a){!0;return this.variables.pushUnique(a)};l.prototype.useParameter=function(a){return this.parameters[a.index]=a};l.prototype.compileLabelBody=function(a){var b=[];void 0!==a.label&&(this.useVariable(this.label),b.push(new G(f(e(this.label.name),new u(a.label)))));return b};l.prototype.compileBreak=
function(a){a=this.compileLabelBody(a);a.push(new U(null));return new O(a)};l.prototype.compileContinue=function(a){a=this.compileLabelBody(a);a.push(new J(null));return new O(a)};l.prototype.compileExit=function(a){return new O(this.compileLabelBody(a))};l.prototype.compileIf=function(b){var d=b.cond.compile(this),e=null,g=null;b.then&&(e=b.then.compile(this));b.else&&(g=b.else.compile(this));var f=m(d.end.predicate,this);if(b.negated)a:{b=f;if(b instanceof Constant){if(!0===b.value||!1===b.value){b=
a(!b.value);break a}}else if(b instanceof w){b=new R(ga.FALSE.name,b);break a}!0;var f=b instanceof B?b.left:b.argument,l=b.right,r=ga.fromName(b.operator);b=r===ga.EQ&&l instanceof u&&!1===l.value||r===ga.FALSE?f:r.not?b instanceof B?new B(r.not.name,f,l):new R(r.not.name,f):new R(ga.FALSE.name,b)}else b=f;d.body.push(new P(b,e||new O([]),g||null));return d};l.prototype.compileSwitch=function(a){var b=a.determinant.compile(this),d=[];a.cases.forEach(function(a){var b;a.body&&(b=a.body.compile(this));
a="number"===typeof a.index?new u(a.index):void 0;d.push(new W(a,b?[b]:[]))},this);a=m(b.end.determinant,this);b.body.push(new Q(a,d,!1));return b};l.prototype.compileLabelSwitch=function(a){function b(a){!0;return new B("===",g,new u(a))}for(var d=null,g=e(this.label.name),f=a.cases.length-1;0<=f;f--){for(var l=a.cases[f],m=l.labels,r=b(m[0]),p=1;p<m.length;p++)r=new B("||",r,b(m[p]));d=new P(r,l.body?l.body.compile(this):new O,d)}return d};l.prototype.compileLoop=function(b){b=b.body.compile(this);
return new M(a(!0),b)};l.prototype.compileSequence=function(a){var b=this,d=[];a.body.forEach(function(a){a=a.compile(b);a instanceof O?d=d.concat(a.body):d.push(a)});return new O(d)};l.prototype.compileBlock=function(a){for(var b=[],d=1;d<a.nodes.length-1;d++){var g=a.nodes[d],l;g instanceof IR.Throw?l=m(g,this,!0):(g instanceof IR.Move?(l=e(g.to.name),this.useVariable(g.to),g=m(g.from,this)):(g.variable?(l=e(g.variable.name),this.useVariable(g.variable)):l=null,g=m(g,this,!0)),l=l?new G(f(l,g)):
new G(g));b.push(l)}d=a.nodes.last();d instanceof IR.Stop&&b.push(new C(m(d.argument,this)));b=new O(b);b.end=a.nodes.last();!0;return b};IR.Parameter.prototype.compile=function(a){a.useParameter(this);return e(this.name)};IR.Constant.prototype.compile=function(){return a(this.value)};IR.Variable.prototype.compile=function(){return e(this.name)};IR.Phi.prototype.compile=function(a){!0;return m(this.variable,a)};IR.ASScope.prototype.compile=function(a){var b=m(this.parent,a);a=m(this.object,a);var d=
new u(this.isWith);return new L(e("Scope"),[b,a,d])};IR.ASFindProperty.prototype.compile=function(a){var b=m(this.scope,a),e=p(this.name,a);a=m(this.domain,a);var f=new u(this.strict);return g(d(b,"findScopeProperty"),e.concat([a,f]))};IR.ASGetProperty.prototype.compile=function(a){var b=m(this.object,a);if(this.flags&IR.Flags.INDEXED)return!0,g(d(b,"asGetNumericProperty"),[m(this.name.name,a)]);if(this.flags&IR.Flags.RESOLVED)return g(d(b,"asGetResolvedStringProperty"),[m(this.name,a)]);a=p(this.name,
a);var e=new u(this.flags&IR.Flags.IS_METHOD);return g(d(b,"asGetProperty"),a.concat(e))};IR.ASGetSuper.prototype.compile=function(a){var b=m(this.scope,a),e=m(this.object,a);a=p(this.name,a);return g(d(e,"asGetSuper"),[b].concat(a))};IR.Latch.prototype.compile=function(a){return new I(m(this.condition,a),m(this.left,a),m(this.right,a))};IR.Unary.prototype.compile=function(a){return new R(this.operator.name,m(this.argument,a))};IR.Copy.prototype.compile=function(a){return m(this.argument,a)};IR.Binary.prototype.compile=
function(a){var b=m(this.left,a);a=m(this.right,a);return this.operator===ga.AS_ADD?g(e("asAdd"),[b,a]):new B(this.operator.name,b,a)};IR.CallProperty.prototype.compile=function(a){var b=m(this.object,a),e=m(this.name,a),e=d(b,e),f=this.args.map(function(b){return m(b,a)});return this.flags&IR.Flags.PRISTINE?g(e,f):g(d(e,"call"),[b].concat(f))};IR.ASCallProperty.prototype.compile=function(a){var b=m(this.object,a),e=this.args.map(function(b){return m(b,a)});if(this.flags&IR.Flags.RESOLVED)return g(d(b,
"asCallResolvedStringProperty"),[m(this.name,a),new u(this.isLex),new S(e)]);var f=p(this.name,a);return g(d(b,"asCallProperty"),f.concat([new u(this.isLex),new S(e)]))};IR.ASCallSuper.prototype.compile=function(a){var b=m(this.scope,a),e=m(this.object,a),f=this.args.map(function(b){return m(b,a)}),l=p(this.name,a);return g(d(e,"asCallSuper"),[b].concat(l).concat(new S(f)))};IR.Call.prototype.compile=function(a){var b=this.args.map(function(b){return m(b,a)}),e=m(this.callee,a),f;f=this.object?m(this.object,
a):new u(null);return null===this.object?g(e,b):g(d(e,"call"),[f].concat(b))};IR.ASNew.prototype.compile=function(a){var b=this.args.map(function(b){return m(b,a)}),e=m(this.callee,a),e=d(e,"instanceConstructor");return new L(e,b)};IR.This.prototype.compile=function(){return new N};IR.Throw.prototype.compile=function(a){a=m(this.argument,a);return new H(a)};IR.Arguments.prototype.compile=function(){return e("arguments")};IR.ASGlobal.prototype.compile=function(a){a=m(this.scope,a);return d(a,"global",
"object")};IR.ASSetProperty.prototype.compile=function(a){var b=m(this.object,a),e=m(this.value,a);if(this.flags&IR.Flags.INDEXED)return g(d(b,"asSetNumericProperty"),[m(this.name.name,a),e]);a=p(this.name,a);return g(d(b,"asSetProperty"),a.concat(e))};IR.ASSetSuper.prototype.compile=function(a){var b=m(this.scope,a),e=m(this.object,a),f=p(this.name,a);a=m(this.value,a);return g(d(e,"asSetSuper"),[b].concat(f).concat([a]))};IR.ASDeleteProperty.prototype.compile=function(a){var b=m(this.object,a);
a=p(this.name,a);return g(d(b,"asDeleteProperty"),a)};IR.ASHasProperty.prototype.compile=function(a){var b=m(this.object,a);a=p(this.name,a);return g(d(b,"asHasProperty"),a)};IR.GlobalProperty.prototype.compile=function(){return e(this.name)};IR.GetProperty.prototype.compile=function(a){var b=m(this.object,a);a=m(this.name,a);return d(b,a)};IR.SetProperty.prototype.compile=function(a){var b=m(this.object,a),e=m(this.name,a);a=m(this.value,a);return f(d(b,e),a)};IR.ASGetDescendants.prototype.compile=
function(a){var b=m(this.object,a);a=m(this.name,a);return g(e("getDescendants"),[b,a])};IR.ASSetSlot.prototype.compile=function(a){var b=m(this.object,a),d=m(this.name,a);a=m(this.value,a);return g(e("asSetSlot"),[b,d,a])};IR.ASGetSlot.prototype.compile=function(a){var b=m(this.object,a);a=m(this.name,a);return g(e("asGetSlot"),[b,a])};IR.Projection.prototype.compile=function(a){!0;!0;return m(this.argument.scope,a)};IR.NewArray.prototype.compile=function(a){var b;b=this.elements;!0;b=b.map(function(b){return m(b,
a)});return new S(b)};IR.NewObject.prototype.compile=function(a){var b=this.properties.map(function(b){var d=m(b.key,a);b=m(b.value,a);return new F(d,b,"init")});return new K(b)};IR.ASNewActivation.prototype.compile=function(a){a=m(this.methodInfo,a);return g(e("createActivation"),[a])};IR.ASMultiname.prototype.compile=function(a){var b=m(this.namespaces,a);a=m(this.name,a);return g(e("createName"),[b,a])};Backend.generate=function(a,b){Timer.start("Looper");var d=Looper.analyze(a);Timer.stop();var g=
new IndentingWriter,f=new l;Timer.start("Construct AST");var m=d.compile(f);Timer.stop();for(var d=[],p=0;p<f.parameters.length;p++)d.push(e(f.parameters[p]?f.parameters[p].name:"_"));f.variables.length&&(Counter.count("Backend: Locals",f.variables.length),f=f.variables.map(function(a){return new z(e(a.name))}),f=new A("var",f),m.body.unshift(f));f=new E(e("fn"),d,m);if(b)return 0<c4TraceLevel.value&&(g.writeLn("=== BEFORE ==============================="),g.writeLn(r(f)),g.writeLn("=== TRANSFORMING =========================")),
Transform.transform(f),0<c4TraceLevel.value&&(g.writeLn("=== AFTER ================================"),g.writeLn(r(f)),g.writeLn("==========================================")),g=r(m),{parameters:d.map(function(a){return a.name}),body:g};Timer.start("Serialize AST");g=r(m);Timer.stop();return{parameters:d.map(function(a){return a.name}),body:g}}})("undefined"===typeof exports?Backend={}:exports);
var domainOptions=systemOptions.register(new OptionSet("ApplicationDomain Options")),traceClasses=domainOptions.register(new Option("tc","traceClasses","boolean",!1,"trace class creation")),traceDomain=domainOptions.register(new Option("td","traceDomain","boolean",!1,"trace domain property access")),EXECUTION_MODE={INTERPRET:1,COMPILE:2};
function executeScript(a){var e=a.abc;!0;var b=new Global(a);e.applicationDomain.allowNatives&&(b[Multiname.getPublicQualifiedName("unsafeJSNative")]=getNative);a.executing=!0;e=new Scope(null,a.global);createFunction(a.init,e).call(a.global,!1);a.executed=!0}function ensureScriptIsExecuted(a,e){!a.executed&&!a.executing&&(2<=traceExecution.value&&print("Executing Script For: "+e),executeScript(a))}var Glue=createEmptyObject();Glue.PUBLIC_PROPERTIES=1;Glue.PUBLIC_METHODS=2;
Glue.ALL=Glue.PUBLIC_PROPERTIES|Glue.PUBLIC_METHODS;
var ApplicationDomain=function(){function a(a,b,d,g){!0;!0;this.vm=a;this.abcs=[];this.loadedAbcs={};this.loadedClasses=[];this.classCache=createEmptyObject();this.scriptCache=createEmptyObject();this.classInfoCache=createEmptyObject();this.base=b;this.allowNatives=g;this.mode=d;this.onMessage=new Callback;this.system=b?b.system:this}a.passthroughCallable=function(a){return{call:function(b){Array.prototype.shift.call(arguments);return a.apply(b,arguments)},apply:function(b,d){return a.apply(b,d)}}};
a.coerceCallable=function(a){return{call:function(b,d){return asCoerce(a,d)},apply:function(b,d){return asCoerce(a,d[0])}}};a.constructingCallable=function(a){return{call:function(b){return new Function.bind.apply(a,arguments)},apply:function(b,d){return new Function.bind.apply(a,[b].concat(d))}}};a.prototype={getType:function(a){return this.getProperty(a,!0,!0)},getProperty:function(a,b,d){if(d=this.findDefiningScript(a,d))return!d.script.executing?void 0:d.script.global[Multiname.getQualifiedName(d.trait.name)];
if(b)return unexpected("Cannot find property "+a)},getClass:function(a){var b=this.classCache,d=b[a];d||(d=b[a]=this.getProperty(Multiname.fromSimpleName(a),!0,!0));!0;return d},findClass:function(a){return a in this.classCache?!0:this.findDomainProperty(Multiname.fromSimpleName(a),!1,!0)},findDomainProperty:function(a,b,d){traceDomain.value&&print("ApplicationDomain.findDomainProperty: "+a);if(d=this.findDefiningScript(a,d))return d.script.global;if(b)return unexpected("Cannot find property "+a)},
findClassInfo:function(a){var b;if(Multiname.isQName(a)){b=Multiname.getQualifiedName(a);var d=this.classInfoCache[b]}else d=this.classInfoCache[a.id];if(d||this.base&&(d=this.base.findClassInfo(a)))return d;for(var d=this.abcs,g=0;g<d.length;g++)for(var f=d[g],f=f.scripts,l=0;l<f.length;l++)for(var m=f[l].traits,p=0;p<m.length;p++){var r=m[p];if(r.isClass()){var v=Multiname.getQualifiedName(r.name);if(b){if(v===b)return this.classInfoCache[b]=r.classInfo}else for(var u=0,w=a.namespaces.length;u<
w;u++){var A=a.getQName(u);if(v===Multiname.getQualifiedName(A))return this.classInfoCache[A]=r.classInfo}}}if(!this.base&&this.vm.findDefiningAbc&&(f=this.vm.findDefiningAbc(a),null!==f&&!this.loadedAbcs[f.name]))return this.loadedAbcs[f.name]=!0,this.loadAbc(f),this.findClassInfo(a)},installNative:function(a,b){natives[a]=function(){return b}},findDefiningScript:function(a,b){var d=this.scriptCache[a.id];if(d&&(d.script.executed||!b)||this.base&&(d=this.base.findDefiningScript(a,b)))return d;Counter.count("ApplicationDomain: findDefiningScript");
for(var d=this.abcs,g=0;g<d.length;g++)for(var f=d[g],f=f.scripts,l=0;l<f.length;l++){var m=f[l],p=m.traits;if(a instanceof Multiname)for(var r=0;r<p.length;r++){var v=p[r];if(a.hasQName(v.name))return b&&ensureScriptIsExecuted(m,v.name),this.scriptCache[a.id]={script:m,trait:v}}else unexpected()}if(!this.base&&this.vm.findDefiningAbc&&(f=this.vm.findDefiningAbc(a),null!==f&&!this.loadedAbcs[f.name]))return this.loadedAbcs[f.name]=!0,this.loadAbc(f),this.findDefiningScript(a,b)},compileAbc:function(a){this.loadAbc(a);
var b=new IndentingWriter;b.enter('window["classes"] = {');for(var d=0;d<a.scripts.length;d++)compileScript(a.scripts[d],b);b.leave("}")},executeAbc:function(a){this.loadAbc(a);executeScript(a.lastScript)},loadAbc:function(a){traceExecution.value&&print("Loading: "+a.name);a.applicationDomain=this;GlobalMultinameResolver.loadAbc(a);this.abcs.push(a);this.base||Type.initializeTypes(this)},broadcastMessage:function(a,b,d){try{this.onMessage.notify1(a,{data:b,origin:d,source:this})}catch(g){throw avm2.exceptions.push({source:a,
message:g.message,stack:g.stack}),g;}},traceLoadedClasses:function(a){var b=new IndentingWriter;a||b.enter("Loaded Classes And Interfaces");(a?[this.loadedClasses.last()]:this.loadedClasses).forEach(function(a){a!==Class&&a.trace(b)});a||b.leave("")}};return a}(),SecurityDomain=function(){function a(){this.compartment=createNewCompartment();this.compartment.environment=environment;this.compartment.homePath=homePath;this.compartment.eval(snarf("compartment.js"));this.compartment.release=!0}a.prototype.initializeShell=
function(a,b){var d=this.compartment;d.avm2=new d.AVM2(a,b);d.avm2.systemDomain.executeAbc(d.grabAbc(homePath+"src/avm2/generated/builtin/builtin.abc"));d.avm2.systemDomain.executeAbc(d.grabAbc(homePath+"src/avm2/generated/shell/shell.abc"));this.systemDomain=d.avm2.systemDomain;this.applicationDomain=d.avm2.applicationDomain};return a}(),traitsWriter=null,Binding=function(){function a(a){!0;this.trait=a}a.KEY_PREFIX_LENGTH=4;a.getKey=function(a,b){var d=a;b.isGetter()?d="get "+a:b.isSetter()&&(d=
"set "+a);return d};a.prototype.toString=function(){return String(this.trait)};return a}(),Bindings=function(){function a(){this.map=createEmptyObject();this.slots=[];this.nextSlotId=1}function e(a,b,d,e){this.name=a;this.isConst=b;this.type=d;this.trait=e}function b(){this.byID=[];this.byQN=createEmptyObject()}function d(a,b){!0;for(var d=0;d<a.length;d++){var e=a[d];if(3<=traceExecution.value){var g="Patching: ";e.name?g+=e.name:e.get?g+="get "+e.get:e.set&&(g+="set "+e.set);traitsWriter&&traitsWriter.redLn(g)}e.get?
defineNonEnumerableGetterOrSetter(e.object,e.get,b,!0):e.set?defineNonEnumerableGetterOrSetter(e.object,e.set,b,!1):defineNonEnumerableProperty(e.object,e.name,b)}}function g(a,b,e,g,f){!0;if(b.isMethod()){var u=makeTrampoline(function(a){var e=getTraitFunction(b,g,f);d(a.patchTargets,e);return e},b.methodInfo.parameters.length);u.patchTargets=[{object:e,name:a},{object:e,name:VM_OPEN_METHOD_PREFIX+a}];var w=bindSafely(u,e);defineReadOnlyProperty(w,VM_LENGTH,u[VM_LENGTH]);defineReadOnlyProperty(w,
Multiname.getPublicQualifiedName("prototype"),null);defineNonEnumerableProperty(e,a,w);defineNonEnumerableProperty(e,VM_OPEN_METHOD_PREFIX+a,w)}else b.isGetter()||b.isSetter()?(u=makeTrampoline(function(a){var e=getTraitFunction(b,g,f);d(a.patchTargets,e);return e}),u.patchTargets=b.isGetter()?[{object:e,get:a}]:[{object:e,set:a}],defineNonEnumerableGetterOrSetter(e,a,u,b.isGetter())):unexpected(b)}function f(a,b,e,g,f){!0;if(b.isMethod()){var u={value:null},w=makeTrampoline(function(a){var e=getTraitFunction(b,
g,f);d(a.patchTargets,e);return e},b.methodInfo.parameters.length,String(b.name));u.value=w;var A=e[VM_OPEN_METHODS];A[a]=w;defineNonEnumerableProperty(e,VM_OPEN_METHOD_PREFIX+a,w);defineNonEnumerableGetter(e,a,makeMemoizer(a,u));w.patchTargets=[{object:u,name:"value"},{object:A,name:a},{object:e,name:VM_OPEN_METHOD_PREFIX+a}]}else if(b.isGetter()||b.isSetter())w=makeTrampoline(function(a){var e=getTraitFunction(b,g,f);d(a.patchTargets,e);return e},0,String(b.name)),b.isGetter()?(defineNonEnumerableProperty(e,
VM_OPEN_GET_METHOD_PREFIX+a,w),w.patchTargets=[{object:e,get:a},{object:e,name:VM_OPEN_GET_METHOD_PREFIX+a}]):(defineNonEnumerableProperty(e,VM_OPEN_SET_METHOD_PREFIX+a,w),w.patchTargets=[{object:e,set:a},{object:e,name:VM_OPEN_SET_METHOD_PREFIX+a}]),defineNonEnumerableGetterOrSetter(e,a,w,b.isGetter())}a.prototype.assignNextSlot=function(a){!0;!0;a.slotId?this.nextSlotId=a.slotId+1:a.slotId=this.nextSlotId++;!0;this.slots[a.slotId]=a};a.prototype.trace=function(a){a.enter("Bindings");for(var b in this.map){var d=
this.map[b];a.writeLn(d.trait.kindName()+": "+b+" -> "+d)}a.leaveAndEnter("Slots");a.writeArray(this.slots);a.outdent()};a.prototype.applyTo=function(a,d){!0;!0;!0;defineNonEnumerableProperty(d,VM_SLOTS,new b);defineNonEnumerableProperty(d,VM_BINDINGS,[]);defineNonEnumerableProperty(d,VM_OPEN_METHODS,createEmptyObject());defineNonEnumerableProperty(d,"bindings",this);defineNonEnumerableProperty(d,"resolutionMap",[]);traitsWriter&&traitsWriter.greenLn("Applying Traits");for(var p in this.map){var r=
this.map[p],v=r.trait,u=Multiname.getQualifiedName(v.name);if(v.isSlot()||v.isConst()||v.isClass()){r=void 0;if(v.isSlot()||v.isConst())v.hasDefaultValue?r=v.value:v.typeName&&(r=a.findClassInfo(v.typeName).defaultValue);p!==u?(traitsWriter&&traitsWriter.yellowLn("Binding Trait: "+p+" -> "+u),defineNonEnumerableGetter(d,p,makeForwardingGetter(u)),d[VM_BINDINGS].pushUnique(p)):(traitsWriter&&traitsWriter.greenLn("Applying Trait "+v.kindName()+": "+v),defineNonEnumerableProperty(d,u,r),d[VM_BINDINGS].pushUnique(u),
r=new e(u,v.isConst(),v.typeName?a.getProperty(v.typeName,!1,!1):null,v),d[VM_SLOTS].byID[v.slotId]=r,d[VM_SLOTS].byQN[u]=r)}else if(v.isMethod()||v.isGetter()||v.isSetter()){if(v.isGetter()||v.isSetter())p=p.substring(Binding.KEY_PREFIX_LENGTH);p!==u?traitsWriter&&traitsWriter.yellowLn("Binding Trait: "+p+" -> "+u):traitsWriter&&traitsWriter.greenLn("Applying Trait "+v.kindName()+": "+v);d[VM_BINDINGS].pushUnique(p);this instanceof ScriptBindings?g(p,v,d,r.scope,r.natives):f(p,v,d,r.scope,r.natives)}}};
return a}(),ActivationBindings=function(){function a(a){Bindings.call(this);!0;this.methodInfo=a;a=a.traits;for(var b=0;b<a.length;b++){var d=a[b];!0;var g=Multiname.getQualifiedName(d.name);this.map[g]=new Binding(d);this.assignNextSlot(d)}}a.prototype=Object.create(Bindings.prototype);return a}(),CatchBindings=function(){function a(a,b){Bindings.call(this);var d=Multiname.getQualifiedName(b.name);this.map[d]=new Binding(b);!0;this.assignNextSlot(b)}a.prototype=Object.create(Bindings.prototype);
return a}(),ScriptBindings=function(){function a(a,b){Bindings.call(this);this.scope=b;this.scriptInfo=a;for(var d=a.traits,g=0;g<d.length;g++){var f=d[g],l=Multiname.getQualifiedName(f.name),l=Binding.getKey(l,f),l=this.map[l]=new Binding(f);(f.isSlot()||f.isConst()||f.isClass())&&this.assignNextSlot(f);f.isClass()&&(f.metadata&&f.metadata.native)&&(f.classInfo.native=f.metadata.native);if(f.isMethod()||f.isGetter()||f.isSetter())l.scope=this.scope}}a.prototype=Object.create(Bindings.prototype);
return a}(),ClassBindings=function(){function a(a,b,d){Bindings.call(this);this.scope=b;this.natives=d;this.classInfo=a;a=a.traits;for(b=0;b<a.length;b++){d=a[b];var g=Multiname.getQualifiedName(d.name),g=Binding.getKey(g,d),g=this.map[g]=new Binding(d);(d.isSlot()||d.isConst())&&this.assignNextSlot(d);if(d.isMethod()||d.isGetter()||d.isSetter())g.scope=this.scope,g.natives=this.natives}}a.prototype=Object.create(Bindings.prototype);return a}(),InstanceBindings=function(){function a(a,b,d,g){Bindings.call(this);
this.scope=d;this.natives=g;this.parent=a;this.instanceInfo=b;this.implementedInterfaces=a?cloneObject(a.implementedInterfaces):createEmptyObject();a&&(this.slots=a.slots.slice(),this.nextSlotId=a.nextSlotId);b=this.instanceInfo;var f;d=this.map;var l,m,p;if(a)for(l in a.map)m=a.map[l],g=m.trait,d[l]=m,g.isProtected()&&(p=Multiname.getQualifiedName(new Multiname([b.protectedNs],g.name.getName())),p=Binding.getKey(p,g),d[p]=m);var r=b.traits;for(a=0;a<r.length;a++){g=r[a];l=Multiname.getQualifiedName(g.name);
l=Binding.getKey(l,g);m=new Binding(g);f=d;p=m;f[l]&&!0;!0;f[l]=p;if(g.isProtected())for(f=this.parent;f;)p=Multiname.getQualifiedName(new Multiname([f.instanceInfo.protectedNs],g.name.getName())),p=Binding.getKey(p,g),p in d&&(d[p]=m),f=f.parent;(g.isSlot()||g.isConst())&&this.assignNextSlot(g);if(g.isMethod()||g.isGetter()||g.isSetter())m.scope=this.scope,m.natives=this.natives}l=b.abc.applicationDomain;g=b.interfaces;for(a=0;a<g.length;a++)m=l.getProperty(g[a],!0,!0),!0,copyProperties(this.implementedInterfaces,
m.interfaceBindings.implementedInterfaces),this.implementedInterfaces[Multiname.getQualifiedName(m.name)]=m;for(var v in this.implementedInterfaces){m=this.implementedInterfaces[v];f=m.interfaceBindings;for(var u in f.map)a=f.map[u],b.isInterface()?d[u]=a:(l=Multiname.getPublicQualifiedName(a.trait.name.getName()),l=Binding.getKey(l,a.trait),d[u]=d[l])}}a.prototype=Object.create(Bindings.prototype);a.prototype.toString=function(){return this.instanceInfo.toString()};return a}(),Interface=function(){function a(a){var b=
a.instanceInfo;!0;this.name=b.name;this.classInfo=a}a.createInterface=function(e){var b=e.instanceInfo;!0;if(traceExecution.value){var d="Creating Interface "+b.name;b.interfaces.length&&(d+=" implements "+b.interfaces.map(function(a){return a.getName()}).join(", "));print(d)}e=new a(e);e.interfaceBindings=new InstanceBindings(null,b);return e};a.prototype={toString:function(){return"[interface "+this.name+"]"},isInstance:function(a){if(null===a||"object"!==typeof a)return!1;!0;var b=Multiname.getQualifiedName(this.name);
return void 0!==a.class.implementedInterfaces[b]},trace:function(a){a.enter("interface "+this.name.getName());a.enter("interfaceBindings: ");this.interfaceBindings.trace(a);a.outdent();a.outdent();a.leave("}")},call:function(a,b){return b},apply:function(a,b){return b[0]}};return a}(),Class=function(){function a(a,b,e){this.debugName=a;b&&(!0,this.instanceConstructorNoInitialize=this.instanceConstructor=b,this.hasInitialize=0,this.instanceConstructor.class=this);e?e===ApplicationDomain.coerceCallable&&
(e=ApplicationDomain.coerceCallable(this)):e=ApplicationDomain.coerceCallable(this);defineNonEnumerableProperty(this,"call",e.call);defineNonEnumerableProperty(this,"apply",e.apply)}function e(a){defineNonEnumerableProperty(a.dynamicPrototype,Multiname.getPublicQualifiedName("constructor"),a);defineReadOnlyProperty(a.traitsPrototype,"class",a);defineReadOnlyProperty(a.instanceConstructor,"class",a)}a.createClass=function(b,e,f){var l=b.instanceInfo,m=b.abc.applicationDomain,p=Multiname.getName(l.name),
r=b.native;if(r){var v=getNative(b.native.cls);v||unexpected("No native for "+b.native.cls);e||(f=new Scope(f,a))}f=new Scope(f,null);var u=createFunction(l.init,f,!1),v=r?v(m,f,u,e):new a(p,u);v.className=p;v.classInfo=b;v.scope=f;f.object=v;var w,A;r?v.native&&(w=v.native.static,A=v.native.instance):v.extend(e);v.classBindings=new ClassBindings(b,f,w);v.classBindings.applyTo(m,v);defineReadOnlyProperty(v,VM_IS_CLASS,!0);v.instanceBindings=new InstanceBindings(e?e.instanceBindings:null,l,f,A);v.instanceConstructor&&
v.instanceBindings.applyTo(m,v.traitsPrototype);v.implementedInterfaces=v.instanceBindings.implementedInterfaces;return v};a.prototype={setSymbol:function(a){this.instanceConstructor.prototype.symbol=a},getSymbol:function(){return this.instanceConstructor.prototype.symbol},initializeInstance:function(a){for(var b=this,e=[];b;)b.hasInitialize&1&&e.push(b.instanceConstructor.prototype.initialize),b=b.baseClass;for(;b=e.pop();)b.call(a);Counter.count("Initialize Instance "+a.class)},createInstance:function(a){var b=
Object.create(this.instanceConstructor.prototype);this.instanceConstructor.apply(b,a);return b},createAsSymbol:function(a){var b=Object.create(this.instanceConstructor.prototype);if(b.symbol){var e=Object.create(b.symbol),l;for(l in a)e[l]=a[l];b.symbol=e}else b.symbol=a;return b},extendNative:function(a,b){this.baseClass=a;this.dynamicPrototype=Object.getPrototypeOf(b.prototype);this.instanceConstructor.prototype=this.traitsPrototype=b.prototype;e(this)},extendWrapper:function(a,b){!0;this.baseClass=
a;this.dynamicPrototype=Object.create(a.dynamicPrototype);var f=Object.create(this.dynamicPrototype,getOwnPropertyDescriptors(b.prototype));this.instanceConstructor.prototype=this.traitsPrototype=f;e(this)},extendBuiltin:function(a){!0;this.baseClass=a;this.dynamicPrototype=this.traitsPrototype=this.instanceConstructor.prototype;e(this)},extend:function(a){!0;this.baseClass=a;this.dynamicPrototype=Object.create(a.dynamicPrototype);if(a.hasInitialize){var b=this.instanceConstructor,f=this;this.instanceConstructor=
function(){f.initializeInstance(this);b.apply(this,arguments)};defineReadOnlyProperty(this.instanceConstructor,"class",b.class);this.hasInitialize|=2}this.instanceConstructor.prototype=this.traitsPrototype=Object.create(this.dynamicPrototype);e(this)},setDefaultProperties:function(){e(this)},link:function(a){function b(a,d){for(var e=Object.keys(d),g=0;g<e.length;g++){var f=e[g],l=d[f],m=!1;0<=l.indexOf("open ")&&(l=l.substring(5),m=!0);!0;l=Multiname.getQualifiedName(Multiname.fromSimpleName(l));
m&&(l=VM_OPEN_METHOD_PREFIX+l);!0;(m=Object.getOwnPropertyDescriptor(a,l))&&m.get?Object.defineProperty(a,f,m):Object.defineProperty(a,f,{get:new Function("","return this."+l),set:new Function("v","this."+l+" = v")})}}function e(a){var b=createEmptyObject();a.forEach(function(a){a.name.getNamespace().isPublic()&&(b[a.name.getName()]=(a.isMethod()?"open ":"")+"public "+a.name.getName())});return b}!0;!0;if(a.initialize){if(!this.hasInitialize){var l=this.instanceConstructor,m=this;this.instanceConstructor=
function(){m.initializeInstance(this);l.apply(this,arguments)};defineReadOnlyProperty(this.instanceConstructor,"class",l.class);this.instanceConstructor.prototype=l.prototype}this.hasInitialize|=1}for(var p=this.dynamicPrototype,r=Object.keys(a),v=0;v<r.length;v++){var u=r[v];Object.defineProperty(p,u,Object.getOwnPropertyDescriptor(a,u))}if((a=a.__glue__)&&a.script)a.script.instance&&(isNumber(a.script.instance)?(!0,b(p,e(this.classInfo.instanceInfo.traits))):b(p,a.script.instance)),a.script.static&&
(isNumber(a.script.static)?(!0,b(this,e(this.classInfo.traits))):b(this,a.script.static))},linkNatives:function(a){this.native=a.__glue__.native},verify:function(){!0;!0;!0;!0;!0},coerce:function(a){return a},isInstanceOf:function(a){return this.isInstance(a)},isInstance:function(a){return null===a||"object"!==typeof a?!1:this.dynamicPrototype.isPrototypeOf(a)},trace:function(a){a.enter("class "+(this.debugName+(this.baseClass?" extends "+this.baseClass.debugName:""))+" {");a.writeLn("scope: "+this.scope);
a.writeLn("baseClass: "+this.baseClass);a.writeLn("classInfo: "+this.classInfo);a.writeLn("dynamicPrototype: "+this.dynamicPrototype);a.writeLn("traitsPrototype: "+this.traitsPrototype);a.writeLn("dynamicPrototype === traitsPrototype: "+(this.dynamicPrototype===this.traitsPrototype));a.writeLn("instanceConstructor: "+this.instanceConstructor);a.writeLn("instanceConstructorNoInitialize: "+this.instanceConstructorNoInitialize);a.writeLn("instanceConstructor === instanceConstructorNoInitialize: "+(this.instanceConstructor===
this.instanceConstructorNoInitialize));var b=this.traitsPrototype;a.enter("traitsPrototype: ");b&&(a.enter("VM_SLOTS: "),a.writeArray(b[VM_SLOTS].byID.map(function(a){return a.trait})),a.outdent(),a.enter("VM_BINDINGS: "),a.writeArray(b[VM_BINDINGS].map(function(a){var d=Object.getOwnPropertyDescriptor(b,a);d.get||d.set?(d.get&&(a+=" getter: "+debugName(d.get)),d.set&&(a+=" setter: "+debugName(d.set))):a+=" value: "+debugName(d.value);return a})),a.outdent(),a.enter("VM_OPEN_METHODS: "),a.writeArray(toKeyValueArray(b[VM_OPEN_METHODS]).map(function(a){return a[0]+
": "+debugName(a[1])})),a.outdent());a.enter("classBindings: ");this.classBindings.trace(a);a.outdent();a.enter("instanceBindings: ");this.instanceBindings.trace(a);a.outdent();a.outdent();a.writeLn("call: "+this.call);a.writeLn("apply: "+this.apply);a.leave("}")},toString:function(){return"[class "+this.classInfo.instanceInfo.name.name+"]"}};var b=ApplicationDomain.coerceCallable(a);defineNonEnumerableProperty(a,"call",b.call);defineNonEnumerableProperty(a,"apply",b.apply);a.instanceConstructor=
a;a.toString=a.prototype.toString;a.native={instance:{prototype:{get:function(){return this.dynamicPrototype}}}};return a}();function MethodClosure(a,e){var b=bindSafely(e,a);defineNonEnumerableProperty(this,"call",b.call.bind(b));defineNonEnumerableProperty(this,"apply",b.apply.bind(b))}MethodClosure.prototype={toString:function(){return"function Function() {}"}};
var XRegExp=function(a){function e(a,b,d){var e;if(d)if(a.__proto__)a.__proto__=w.prototype;else for(e in w.prototype)a[e]=w.prototype[e];a[u]={captureNames:b};return a}function b(a){return z.replace.call(a,/([\s\S])(?=[\s\S]*\1)/g,"")}function d(a,d){if(!w.isRegExp(a))throw new TypeError("Type RegExp expected");var g=z.exec.call(/\/([a-z]*)$/i,String(a))[1];d=d||{};d.add&&(g=b(g+d.add));d.remove&&(g=z.replace.call(g,RegExp("["+d.remove+"]+","g"),""));return a=e(RegExp(a.source,g),a.xregexp&&a.xregexp.captureNames?
a.xregexp.captureNames.slice(0):null,d.addProto)}function g(a,b){if(Array.prototype.indexOf)return a.indexOf(b);var d=a.length,e;for(e=0;e<d;++e)if(a[e]===b)return e;return-1}function f(a,b){return S.call(a)==="[object "+b+"]"}function l(a,b,d){return z.test.call(-1<d.indexOf("x")?/^(?:\s+|#.*|\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/:/^(?:\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/,a.slice(b))}function m(a){a=a||{};f(a,"String")&&(a=w.forEach(a,/[^\s,]+/,function(a){this[a]=!0},{}));return a}function p(a){if(!/^[\w$]$/.test(a))throw Error("Flag must be a single character A-Za-z0-9_$");
K[a]=!0}function r(a){RegExp.prototype.exec=(a?s:z).exec;RegExp.prototype.test=(a?s:z).test;String.prototype.match=(a?s:z).match;String.prototype.replace=(a?s:z).replace;String.prototype.split=(a?s:z).split;A.natives=a}function v(a){if(null==a)throw new TypeError("Cannot convert null or undefined to object");return a}var u="xregexp",w,A={astral:!1,natives:!1},z={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},
s={},B={},y={},D=[],G={"default":/\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??|[\s\S]/,"class":/\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|[\s\S]/},C=/\$(?:{([\w$]+)}|([\d$&`']))/g,E=z.exec.call(/()??/,"")[1]===a,I=RegExp.prototype.sticky!==a,K={g:!0,i:!0,m:!0,y:I},S={}.toString,R;w=function(g,f){var l={hasNamedCapture:!1,captureNames:[]},m="default",r="",p=0,s,v;if(w.isRegExp(g)){if(f!==
a)throw new TypeError("Cannot supply flags when copying a RegExp");return d(g,{addProto:!0})}g=g===a?"":String(g);f=f===a?"":String(f);v=g+"***"+f;if(!y[v]){s=g;var u=f,A;if(b(u)!==u)throw new SyntaxError("Invalid duplicate regex flag "+u);s=z.replace.call(s,/^\(\?([\w$]+)\)/,function(a,d){if(z.test.call(/[gy]/,d))throw new SyntaxError("Cannot use flag g or y in mode modifier "+a);u=b(u+d);return""});for(A=0;A<u.length;++A)if(!K[u.charAt(A)])throw new SyntaxError("Unknown regex flag "+u.charAt(A));
s={pattern:s,flags:u};g=s.pattern;for(f=s.flags;p<g.length;){do{s=g;A=f;for(var B=p,E=m,C=l,I=D.length,S=null,R=void 0,ha=void 0;I--;)if(ha=D[I],(ha.scope===E||"all"===ha.scope)&&(!ha.flag||-1<A.indexOf(ha.flag)))if(R=w.exec(s,ha.regex,B,"sticky")){S={matchLength:R[0].length,output:ha.handler.call(C,R,E,A),reparse:ha.reparse};break}(s=S)&&s.reparse&&(g=g.slice(0,p)+s.output+g.slice(p+s.matchLength))}while(s&&s.reparse);s?(r+=s.output,p+=s.matchLength||1):(s=w.exec(g,G[m],p,"sticky")[0],r+=s,p+=s.length,
"["===s&&"default"===m?m="class":"]"===s&&"class"===m&&(m="default"))}y[v]={pattern:z.replace.call(r,/\(\?:\)(?=\(\?:\))|^\(\?:\)|\(\?:\)$/g,""),flags:z.replace.call(f,/[^gimy]+/g,""),captures:l.hasNamedCapture?l.captureNames:null}}v=y[v];return e(RegExp(v.pattern,v.flags),v.captures,!0)};w.prototype=RegExp();w.version="3.0.0-pre";w.addToken=function(a,b,e){e=e||{};var g=e.optionalFlags,f;e.flag&&p(e.flag);if(g){g=z.split.call(g,"");for(f=0;f<g.length;++f)p(g[f])}D.push({regex:d(a,{add:"g"+(I?"y":
"")}),handler:b,scope:e.scope||"default",flag:e.flag,reparse:e.reparse});w.cache.flush("patterns")};w.cache=function(a,b){var d=a+"***"+(b||"");return B[d]||(B[d]=w(a,b))};w.cache.flush=function(a){"patterns"===a?y={}:B={}};w.escape=function(a){return z.replace.call(v(a),/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};w.exec=function(a,b,e,g){var f="g";if(I&&(g||b.sticky&&!1!==g))f+="y";b[u]=b.xregexp||{captureNames:null};f=b.xregexp[f]||(b[u][f]=d(b,{add:f,remove:!1===g?"y":""}));f.lastIndex=e=e||0;a=s.exec.call(f,
a);g&&(a&&a.index!==e)&&(a=null);b.global&&(b.lastIndex=a?f.lastIndex:0);return a};w.forEach=function(a,b,d,e){for(var g=0,f=-1;g=w.exec(a,b,g);)d.call(e,g,++f,a,b),g=g.index+(g[0].length||1);return e};w.globalize=function(a){return d(a,{add:"g",addProto:!0})};w.install=function(a){a=m(a);!A.astral&&a.astral&&(w.cache.flush("patterns"),A.astral=!0);!A.natives&&a.natives&&r(!0)};w.isInstalled=function(a){return!!A[a]};w.isRegExp=function(a){return"[object RegExp]"===S.call(a)};w.match=function(a,b,
e){var g=b.global&&"one"!==e||"all"===e,f=(g?"g":"")+(b.sticky?"y":"");b[u]=b.xregexp||{captureNames:null};f=b.xregexp[f||"noGY"]||(b[u][f||"noGY"]=d(b,{add:f,remove:"one"===e?"g":""}));a=z.match.call(v(a),f);b.global&&(b.lastIndex="one"===e&&a?a.index+a[0].length:0);return g?a||[]:a&&a[0]};w.matchChain=function(a,b){return function N(a,d){var e=b[d].regex?b[d]:{regex:b[d]},g=[],f=function(a){if(e.backref){if(!(a.hasOwnProperty(e.backref)||+e.backref<a.length))throw new ReferenceError("Backreference to undefined group: "+
e.backref);g.push(a[e.backref]||"")}else g.push(a[0])},l;for(l=0;l<a.length;++l)w.forEach(a[l],e.regex,f);return d===b.length-1||!g.length?g:N(g,d+1)}([a],0)};w.replace=function(a,b,e,g){var f=w.isRegExp(b),l=b.global&&"one"!==g||"all"===g,m=(l?"g":"")+(b.sticky?"y":""),r=b;f?(b[u]=b.xregexp||{captureNames:null},r=b.xregexp[m||"noGY"]||(b[u][m||"noGY"]=d(b,{add:m,remove:"one"===g?"g":""}))):l&&(r=RegExp(w.escape(String(b)),"g"));a=s.replace.call(v(a),r,e);f&&b.global&&(b.lastIndex=0);return a};w.replaceEach=
function(a,b){var d,e;for(d=0;d<b.length;++d)e=b[d],a=w.replace(a,e[0],e[1],e[2]);return a};w.split=function(a,b,d){return s.split.call(v(a),b,d)};w.test=function(a,b,d,e){return!!w.exec(a,b,d,e)};w.uninstall=function(a){a=m(a);A.astral&&a.astral&&(w.cache.flush("patterns"),A.astral=!1);A.natives&&a.natives&&r(!1)};w.union=function(a,b){var d=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,e=[],g=0,l,m,r,p=function(a,b,d){var e=m[g-l];if(b){if(++g,e)return"(?<"+e+">"}else if(d)return"\\"+
(+d+l);return a},s;if(!f(a,"Array")||!a.length)throw new TypeError("Must provide a nonempty array of patterns to merge");for(s=0;s<a.length;++s)r=a[s],w.isRegExp(r)?(l=g,m=r.xregexp&&r.xregexp.captureNames||[],e.push(z.replace.call(w(r.source).source,d,p))):e.push(w.escape(r));return w(e.join("|"),b)};s.exec=function(b){var e=this.lastIndex,f=z.exec.apply(this,arguments),l,m;if(f){!E&&(1<f.length&&-1<g(f,""))&&(l=d(this,{remove:"g"}),z.replace.call(String(b).slice(f.index),l,function(){var b=arguments.length,
d;for(d=1;d<b-2;++d)arguments[d]===a&&(f[d]=a)}));if(this.xregexp&&this.xregexp.captureNames)for(m=1;m<f.length;++m)(l=this.xregexp.captureNames[m-1])&&(f[l]=f[m]);this.global&&(!f[0].length&&this.lastIndex>f.index)&&(this.lastIndex=f.index)}this.global||(this.lastIndex=e);return f};s.test=function(a){return!!s.exec.call(this,a)};s.match=function(a){var b;if(w.isRegExp(a)){if(a.global)return b=z.match.apply(this,arguments),a.lastIndex=0,b}else a=RegExp(a);return s.exec.call(a,v(this))};s.replace=
function(b,d){var e=w.isRegExp(b),l,m,r;e?(b.xregexp&&(m=b.xregexp.captureNames),l=b.lastIndex):b+="";r=f(d,"Function")?z.replace.call(String(this),b,function(){var g=arguments,f;if(m){g[0]=new String(g[0]);for(f=0;f<m.length;++f)m[f]&&(g[0][m[f]]=g[f+1])}e&&b.global&&(b.lastIndex=g[g.length-2]+g[0].length);return d.apply(a,g)}):z.replace.call(null==this?this:String(this),b,function(){var a=arguments;return z.replace.call(String(d),C,function(b,d,e){if(d){e=+d;if(e<=a.length-3)return a[e]||"";e=m?
g(m,d):-1;if(0>e)throw new SyntaxError("Backreference to undefined group "+b);return a[e+1]||""}if("$"===e)return"$";if("&"===e||0===+e)return a[0];if("`"===e)return a[a.length-1].slice(0,a[a.length-2]);if("'"===e)return a[a.length-1].slice(a[a.length-2]+a[0].length);e=+e;if(!isNaN(e)){if(e>a.length-3)throw new SyntaxError("Backreference to undefined group "+b);return a[e]||""}throw new SyntaxError("Invalid token "+b);})});e&&(b.lastIndex=b.global?0:l);return r};s.split=function(b,d){if(!w.isRegExp(b))return z.split.apply(this,
arguments);var e=String(this),g=[],f=b.lastIndex,l=0,m;d=(d===a?-1:d)>>>0;w.forEach(e,b,function(a){a.index+a[0].length>l&&(g.push(e.slice(l,a.index)),1<a.length&&a.index<e.length&&Array.prototype.push.apply(g,a.slice(1)),m=a[0].length,l=a.index+m)});l===e.length?(!z.test.call(b,"")||m)&&g.push(""):g.push(e.slice(l));b.lastIndex=f;return g.length>d?g.slice(0,d):g};R=w.addToken;R(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4})|x(?![\dA-Fa-f]{2}))/,function(a,b){if("B"===a[1]&&"default"===
b)return a[0];throw new SyntaxError("Invalid escape "+a[0]);},{scope:"all"});R(/\[(\^?)]/,function(a){return a[1]?"[\\s\\S]":"\\b\\B"});R(/\(\?#[^)]*\)/,function(a,b,d){return l(a.input,a.index+a[0].length,d)?"":"(?:)"});R(/\s+|#.*/,function(a,b,d){return l(a.input,a.index+a[0].length,d)?"":"(?:)"},{flag:"x"});R(/\./,function(){return"[\\s\\S]"},{flag:"s"});R(/\\k<([\w$]+)>/,function(a){var b=isNaN(a[1])?g(this.captureNames,a[1])+1:+a[1],d=a.index+a[0].length;if(!b||b>this.captureNames.length)throw new SyntaxError("Backreference to undefined group "+
a[0]);return"\\"+b+(d===a.input.length||isNaN(a.input.charAt(d))?"":"(?:)")});R(/\\(\d+)/,function(a,b){if(!("default"===b&&/^[1-9]/.test(a[1])&&+a[1]<=this.captureNames.length)&&"0"!==a[1])throw new SyntaxError("Cannot use octal escape or backreference to undefined group "+a[0]);return a[0]},{scope:"all"});R(/\(\?P?<([\w$]+)>/,function(a){if(!isNaN(a[1]))throw new SyntaxError("Cannot use integer as capture name "+a[0]);if("length"===a[1]||"__proto__"===a[1])throw new SyntaxError("Cannot use reserved word as capture name "+
a[0]);if(-1<g(this.captureNames,a[1]))throw new SyntaxError("Cannot use same name for multiple groups "+a[0]);this.captureNames.push(a[1]);this.hasNamedCapture=!0;return"("});R(/\((?!\?)/,function(a,b,d){if(-1<d.indexOf("n"))return"(?:";this.captureNames.push(null);return"("},{optionalFlags:"n"});return w}(),runtimeOptions=systemOptions.register(new OptionSet("Runtime Options")),traceScope=runtimeOptions.register(new Option("ts","traceScope","boolean",!1,"trace scope execution")),traceExecution=runtimeOptions.register(new Option("tx",
"traceExecution","number",0,"trace script execution")),traceCallExecution=runtimeOptions.register(new Option("txc","traceCallExecution","number",0,"trace call execution")),functionBreak=runtimeOptions.register(new Option("fb","functionBreak","number",-1,"Inserts a debugBreak at function index #.")),compileOnly=runtimeOptions.register(new Option("co","compileOnly","number",-1,"Compiles only function number.")),compileUntil=runtimeOptions.register(new Option("cu","compileUntil","number",-1,"Compiles only until a function number.")),
debuggerMode=runtimeOptions.register(new Option("dm","debuggerMode","boolean",!1,"matches avm2 debugger build semantics")),enableVerifier=runtimeOptions.register(new Option("verify","verify","boolean",!1,"Enable verifier.")),globalMultinameAnalysis=runtimeOptions.register(new Option("ga","globalMultinameAnalysis","boolean",!1,"Global multiname analysis.")),traceInlineCaching=runtimeOptions.register(new Option("tic","traceInlineCaching","boolean",!1,"Trace inline caching execution.")),compilerEnableExceptions=
runtimeOptions.register(new Option("cex","exceptions","boolean",!1,"Compile functions with catch blocks.")),compilerMaximumMethodSize=runtimeOptions.register(new Option("cmms","maximumMethodSize","number",4096,"Compiler maximum method size.")),jsGlobal=function(){return this||(0,eval)("this")}(),VM_SLOTS="vm slots",VM_LENGTH="vm length",VM_BINDINGS="vm bindings",VM_NATIVE_PROTOTYPE_FLAG="vm native prototype",VM_OPEN_METHODS="vm open methods",VM_IS_CLASS="vm is class",VM_OPEN_METHOD_PREFIX="method_",
VM_OPEN_SET_METHOD_PREFIX="set_",VM_OPEN_GET_METHOD_PREFIX="get_",VM_NATIVE_BUILTIN_SURROGATES=[{object:Object,methods:["toString","valueOf"]},{object:Function,methods:["toString","valueOf"]}],VM_NATIVE_BUILTIN_ORIGINALS="vm originals",SAVED_SCOPE_NAME="$SS",PARAMETER_PREFIX="p",$M=[];XRegExp.install({natives:!0});var VM_METHOD_OVERRIDES=createEmptyObject(),vmNextShapeId=1;function defineObjectShape(a){defineReadOnlyProperty(a,"shape",vmNextShapeId++)}
var vmNextInterpreterFunctionId=1,vmNextCompiledFunctionId=1,vmNextTrampolineId=1,vmNextMemoizerId=1,InlineCache=function(){function a(){this.value=this.key=void 0}a.prototype.update=function(a,b){this.key=a;return this.value=b};return a}();function ic(a){return a.ic||(a.ic=new InlineCache)}var AS=1,JS=2,RUNTIME_ENTER_LEAVE_STACK=[1];function enter(a){RUNTIME_ENTER_LEAVE_STACK.push(a)}function leave(){RUNTIME_ENTER_LEAVE_STACK.pop();!0}function inJS(){return 2===RUNTIME_ENTER_LEAVE_STACK.top()}
function inAS(){return 1===RUNTIME_ENTER_LEAVE_STACK.top()}var callWriter=new IndentingWriter(!1,function(a){print(a)}),objectIDs=0,OBJECT_NAME="Object Name";
function objectConstantName(a){!0;if(a.hasOwnProperty("Object Name"))return a["Object Name"];if(a instanceof LazyInitializer)return a.getName();var e;e=objectIDs++;e=a instanceof Global?"$G"+e:a instanceof Multiname?"$M"+e:isClass(a)?"$C"+e:"$O"+e;Object.defineProperty(a,"Object Name",{value:e,writable:!1,enumerable:!1});jsGlobal[e]=a;return e}
var LazyInitializer=function(){function a(a){this.target=a}var e=jsGlobal;a.create=function(a){return a.lazyInitializer?a.lazyInitializer:a.lazyInitializer=new LazyInitializer(a)};a.prototype.getName=function(){if(this.name)return this.name;var a=this.target,d;this.target instanceof ScriptInfo?(this.name="$S"+objectIDs++,d=function(){ensureScriptIsExecuted(a,"Lazy Initializer");return a.global}):this.target instanceof ClassInfo?(this.name=Multiname.getQualifiedName(a.instanceInfo.name),d=function(){return a.abc.applicationDomain.getProperty(a.instanceInfo.name)}):
notImplemented(a);var g=this.name;Object.defineProperty(e,g,{get:function(){var a=d();Object.defineProperty(e,g,{value:a,writable:!0});return a},configurable:!0});return g};return a}();
function getNamespaceResolutionMap(a){var e=this.resolutionMap[a.id];if(e)return e;var e=this.resolutionMap[a.id]=createEmptyObject(),b=this.bindings,d;for(d in b.map){var g=d,f=b.map[d].trait;if(f.isGetter()||f.isSetter())g=g.substring(Binding.KEY_PREFIX_LENGTH);g=Multiname.fromQualifiedName(g);g.getNamespace().inNamespaceSet(a)&&(e[g.getName()]=Multiname.getQualifiedName(f.name))}return e}
function resolveMultinameProperty(a,e){"object"===typeof e&&(e=String(e));if(isNumeric(e))return toNumber(e);if(!a)return Multiname.getPublicQualifiedName(e);if(1<a.length){var b=this.getNamespaceResolutionMap(a)[e];return b?b:Multiname.getPublicQualifiedName(e)}return a[0].qualifiedName+"$"+e}function asGetPublicProperty(a){return this.asGetProperty(void 0,a,0)}
function asGetProperty(a,e,b){a=this.resolveMultinameProperty(a,e,b);return this.asGetNumericProperty&&Multiname.isNumeric(a)?this.asGetNumericProperty(a):this[a]}function asGetPropertyLikelyNumeric(a,e,b){return"number"===typeof e?this.asGetNumericProperty(e):asGetProperty.call(this,a,e,b)}function asGetResolvedStringProperty(a){!0;return this[a]}function asCallResolvedStringProperty(a,e,b){e=e?null:this;var d=this["vm open methods"];return(e&&d&&d[a]?d[a]:this[a]).apply(e,b)}
function fromResolvedName(a){!0;return a.substring(Multiname.PUBLIC_QUALIFIED_NAME_PREFIX.length)}function asGetResolvedStringPropertyFallback(a){a=fromResolvedName(a);return this.asGetProperty([ShumwayNamespace.PUBLIC],a,0)}function asSetPublicProperty(a,e){return this.asSetProperty(void 0,a,0,e)}
function asSetProperty(a,e,b,d){"object"===typeof e&&(e=String(e));a=this.resolveMultinameProperty(a,e,b);if(this.asSetNumericProperty&&Multiname.isNumeric(a))return this.asSetNumericProperty(a,d);if(e=this["vm slots"].byQN[a]){if(e.const)return;(e=e.type)&&e.coerce&&(d=e.coerce(d))}this[a]=d}function asSetPropertyLikelyNumeric(a,e,b,d){if("number"===typeof e)this.asSetNumericProperty(e,d);else return asSetProperty.call(this,a,e,b,d)}
function asDefinePublicProperty(a,e){return this.asDefineProperty(void 0,a,0,e)}function asDefineProperty(a,e,b,d){"object"===typeof e&&(e=String(e));a=this.resolveMultinameProperty(a,e,b);Object.defineProperty(this,a,d)}function asCallPublicProperty(a,e){return this.asCallProperty(void 0,a,0,!1,e)}var callCounter=new metrics.Counter(!0);
function asCallProperty(a,e,b,d,g){if(traceCallExecution.value){var f=this.class?this.class.className+" ":"";callWriter.enter("call "+f+e+"("+toSafeArrayString(g)+") #"+callCounter.count(e))}f=d?null:this;isProxyObject(this)?g=this[VM_CALL_PROXY](new Multiname(a,e,b),f,g):(a=this.resolveMultinameProperty(a,e,b),this.asGetNumericProperty&&Multiname.isNumeric(a)?a=this.asGetNumericProperty(a):(e=this["vm open methods"],a=f&&e&&e[a]?e[a]:this[a]),g=a.apply(f,g));0<traceCallExecution.value&&callWriter.leave("return "+
toSafeString(g));return g}function asCallSuper(a,e,b,d,g){traceCallExecution.value&&callWriter.enter("call super "+(this.class?this.class.className+" ":"")+b+"("+toSafeArrayString(g)+") #"+callCounter.count(b));a=a.object.baseClass;e=a.traitsPrototype.resolveMultinameProperty(e,b,d);g=a.traitsPrototype["vm open methods"][e].apply(this,g);0<traceCallExecution.value&&callWriter.leave("return "+toSafeString(g));return g}
function asSetSuper(a,e,b,d,g){traceCallExecution.value&&callWriter.enter("set super "+(this.class?this.class.className+" ":"")+b+"("+toSafeString(g)+") #"+callCounter.count(b));a=a.object.baseClass;var f=a.traitsPrototype.resolveMultinameProperty(e,b,d);this["vm slots"].byQN[f]?this.asSetProperty(e,b,d,g):a.traitsPrototype["set_"+f].call(this,g);0<traceCallExecution.value&&callWriter.leave("")}
function asGetSuper(a,e,b,d){traceCallExecution.value&&callWriter.enter("get super "+(this.class?this.class.className+" ":"")+b+" #"+callCounter.count(b));a=a.object.baseClass;var g=a.traitsPrototype.resolveMultinameProperty(e,b,d);e=this["vm slots"].byQN[g]?this.asGetProperty(e,b,d):a.traitsPrototype["get_"+g].call(this);0<traceCallExecution.value&&callWriter.leave("return "+toSafeString(e));return e}
function construct(a,e){if(a.classInfo){var b=a.classInfo.instanceInfo.name.qualifiedName;if(b===Multiname.String)return String.apply(null,e);if(b===Multiname.Boolean)return Boolean.apply(null,e);if(b===Multiname.Number)return Number.apply(null,e)}return new (Function.bind.apply(a.instanceConstructor,[,].concat(e)))}
function asConstructProperty(a,e,b,d){a=this.asGetProperty(a,e,b);traceCallExecution.value&&callWriter.enter("construct "+e+"("+toSafeArrayString(d)+") #"+callCounter.count(e));e=construct(a,d);0<traceCallExecution.value&&callWriter.leave("return "+toSafeString(e));return e}function asHasProperty(a,e,b,d){return this.hasProperty?this.hasProperty(a,e,b):d?nonProxyingHasProperty(this,this.resolveMultinameProperty(a,e,b)):this.resolveMultinameProperty(a,e,b)in this}
function asDeleteProperty(a,e,b){return delete this[this.resolveMultinameProperty(a,e,b)]}function asGetNumericProperty(a){return this[a]}function asSetNumericProperty(a,e){this[a]=e}function asGetDescendants(){notImplemented("asGetDescendants")}function asNextNameIndex(a){0===a&&defineNonEnumerableProperty(this,"enumerableKeys",this.asGetEnumerableKeys());for(var e=this.enumerableKeys;a<e.length;){if(this.asHasProperty(void 0,e[a],0))return a+1;a++}return 0}
function asNextName(a){var e=this.enumerableKeys;!0;return e[a-1]}function asNextValue(a){return this.asGetPublicProperty(this.asNextName(a))}function asGetEnumerableKeys(){var a=this.valueOf();if("string"===typeof a||"number"===typeof a)return[];for(var a=Object.keys(this),e=[],b=0;b<a.length;b++){var d=a[b];isNumeric(d)?e.push(d):(d=Multiname.stripPublicQualifier(d),void 0!==d&&e.push(d))}return e}
function initializeGlobalObject(a){var e=a[VM_NATIVE_BUILTIN_ORIGINALS]=createEmptyObject();VM_NATIVE_BUILTIN_SURROGATES.forEach(function(b){var d=b.object;e[d.name]=createEmptyObject();b.methods.forEach(function(b){var f=d.prototype[b];e[d.name][b]=f;var l=Multiname.getPublicQualifiedName(b);useSurrogates&&(a[d.name].prototype[b]=function(){return this[l]?this[l]():f.call(this)})})});"Object Number Boolean String Array Date RegExp".split(" ").forEach(function(b){defineReadOnlyProperty(a[b].prototype,
"vm native prototype",!0)});defineNonEnumerableProperty(a.Object.prototype,"getNamespaceResolutionMap",getNamespaceResolutionMap);defineNonEnumerableProperty(a.Object.prototype,"resolveMultinameProperty",resolveMultinameProperty);defineNonEnumerableProperty(a.Object.prototype,"asGetProperty",asGetProperty);defineNonEnumerableProperty(a.Object.prototype,"asGetPublicProperty",asGetPublicProperty);defineNonEnumerableProperty(a.Object.prototype,"asGetResolvedStringProperty",asGetResolvedStringProperty);
defineNonEnumerableProperty(a.Object.prototype,"asSetProperty",asSetProperty);defineNonEnumerableProperty(a.Object.prototype,"asSetPublicProperty",asSetPublicProperty);defineNonEnumerableProperty(a.Object.prototype,"asDefineProperty",asDefineProperty);defineNonEnumerableProperty(a.Object.prototype,"asDefinePublicProperty",asDefinePublicProperty);defineNonEnumerableProperty(a.Object.prototype,"asCallProperty",asCallProperty);defineNonEnumerableProperty(a.Object.prototype,"asCallSuper",asCallSuper);
defineNonEnumerableProperty(a.Object.prototype,"asGetSuper",asGetSuper);defineNonEnumerableProperty(a.Object.prototype,"asSetSuper",asSetSuper);defineNonEnumerableProperty(a.Object.prototype,"asCallPublicProperty",asCallPublicProperty);defineNonEnumerableProperty(a.Object.prototype,"asCallResolvedStringProperty",asCallResolvedStringProperty);defineNonEnumerableProperty(a.Object.prototype,"asConstructProperty",asConstructProperty);defineNonEnumerableProperty(a.Object.prototype,"asHasProperty",asHasProperty);
defineNonEnumerableProperty(a.Object.prototype,"asDeleteProperty",asDeleteProperty);defineNonEnumerableProperty(a.Object.prototype,"asNextName",asNextName);defineNonEnumerableProperty(a.Object.prototype,"asNextValue",asNextValue);defineNonEnumerableProperty(a.Object.prototype,"asNextNameIndex",asNextNameIndex);defineNonEnumerableProperty(a.Object.prototype,"asGetEnumerableKeys",asGetEnumerableKeys);"Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" ").forEach(function(b){b in
a?(defineNonEnumerableProperty(a[b].prototype,"asGetNumericProperty",asGetNumericProperty),defineNonEnumerableProperty(a[b].prototype,"asSetNumericProperty",asSetNumericProperty),defineNonEnumerableProperty(a[b].prototype,"asGetProperty",asGetPropertyLikelyNumeric),defineNonEnumerableProperty(a[b].prototype,"asSetProperty",asSetPropertyLikelyNumeric)):print(b+" was not found in globals")});a.Array.prototype.asGetProperty=function(a,d,e){return"number"===typeof d?this[d]:asGetProperty.call(this,a,
d,e)};a.Array.prototype.asSetProperty=function(a,d,e,f){if("number"===typeof d)this[d]=f;else return asSetProperty.call(this,a,d,e,f)}}initializeGlobalObject(jsGlobal);function isNativePrototype(a){return Object.prototype.hasOwnProperty.call(a,"vm native prototype")}function asTypeOf(a){if(a){if(a.constructor===String)return"string";if(a.constructor===Number)return"number";if(a.constructor===Boolean)return"boolean";if(a instanceof XML||a instanceof XMLList)return"xml"}return typeof a}
function publicizeProperties(a){for(var e=Object.keys(a),b=0;b<e.length;b++){var d=e[b];if(!Multiname.isPublicQualifiedName(d)){var g=a[d];a[Multiname.getPublicQualifiedName(d)]=g;delete a[d]}}}function asGetSlot(a,e){return a[a["vm slots"].byID[e].name]}function asSetSlot(a,e,b){e=a["vm slots"].byID[e];if(!e.const){var d=e.type;a[e.name]=d&&d.coerce?d.coerce(b):b}}
function asHasNext2(a,e){if(isNullOrUndefined(a))return{index:0,object:null};a=boxValue(a);var b=a.asNextNameIndex(e);if(0<b)return{index:b,object:a};for(;;){a=Object.getPrototypeOf(a);if(!a)break;b=a.asNextNameIndex(0);if(0<b)return{index:b,object:a}}return{index:0,object:null}}function getDescendants(a,e){if(!isXMLType(a))throw"Not XML object in getDescendants";return a.descendants(e)}
function checkFilter(a){if(!a.class||!isXMLType(a))throw"TypeError operand of childFilter not of XML type";return a}function Activation(a){this.methodInfo=a}
var ScopeStack=function(){function a(a){this.parent=a;this.stack=[];this.isWith=[]}a.prototype.push=function(a,b){this.stack.push(a);this.isWith.push(!!b)};a.prototype.get=function(a){return this.stack[a]};a.prototype.clear=function(){this.stack.length=0;this.isWith.length=0};a.prototype.pop=function(){this.isWith.pop();this.stack.pop()};a.prototype.topScope=function(){this.scopes||(this.scopes=[]);for(var a=this.parent,b=0;b<this.stack.length;b++){var d=this.stack[b],g=this.isWith[b],f=this.scopes[b];
if(!f||f.parent!==a||f.object!==d||f.isWith!==g)f=this.scopes[b]=new Scope(a,d,g);a=f}return a};return a}(),Scope=function(){function a(a,b,d){this.parent=a;this.object=boxValue(b);!0;this.global=a?a.global:this;this.isWith=d;this.cache=createEmptyObject()}a.prototype.findDepth=function(a){for(var b=this,d=0;b;){if(b.object===a)return d;d++;b=b.parent}return-1};a.prototype.findScopeProperty=function(a,b,d,g,f,l){var m,p;p=a?1<a.length?a.id+"$"+b:a[0].qualifiedName+"$"+b:b;if(!l&&(m=this.cache[p]))return m;
if(this.object.asHasProperty(a,b,d,!0))return this.isWith?this.object:this.cache[p]=this.object;if(this.parent)return this.cache[p]=this.parent.findScopeProperty(a,b,d,g,f,l);if(l)return null;if(m=g.findDomainProperty(new Multiname(a,b,d),f,!0))return m;f&&unexpected("Cannot find property "+b);return this.global.object};a.prototype.trace=function(){for(var a=this;a;)print(a.object+(a.object?" - "+a.object.debugName:"")),a=a.parent};return a}();
function bindFreeMethodScope(a,e){var b=a.freeMethod;if(a.lastBoundMethod&&a.lastBoundMethod.scope===e)return a.lastBoundMethod.boundMethod;!0;var d,g=e.global.object;if(!a.hasOptional()&&!a.needsArguments()&&!a.needsRest())switch(a.parameters.length){case 0:d=function(){return b.call(this===jsGlobal?g:this,e)};break;case 1:d=function(a){return b.call(this===jsGlobal?g:this,e,a)};break;case 2:d=function(a,d){return b.call(this===jsGlobal?g:this,e,a,d)};break;case 3:d=function(a,d,m){return b.call(this===
jsGlobal?g:this,e,a,d,m)}}d||(Counter.count("Bind Scope - Slow Path"),d=function(){Array.prototype.unshift.call(arguments,e);return b.apply(this===jsGlobal?e.global.object:this,arguments)});d.methodInfo=a;d.instanceConstructor=d;a.lastBoundMethod={scope:e,boundMethod:d};return d}function nameInTraits(a,e){if(a.hasOwnProperty("vm bindings")&&a.hasOwnProperty(e))return!0;var b=Object.getPrototypeOf(a);return b.hasOwnProperty("vm bindings")&&b.hasOwnProperty(e)}
function resolveMultinameUnguarded(a,e,b){!0;!0;a=boxValue(a);for(var d,g=isNativePrototype(a),f=0,l=e.namespaces.length;f<l;f++){var m=e.getQName(f);if(b){if(nameInTraits(a,Multiname.getQualifiedName(m)))return m}else if(e.namespaces[f].isDynamic()){if(d=m,g)break}else if(!g&&Multiname.getQualifiedName(m)in a)return m}if(d&&!b&&Multiname.getQualifiedName(d)in a)return d}function resolveMultiname(a,e,b){enter(2);a=resolveMultinameUnguarded(a,e,b);leave(2);return a}
function sliceArguments(a,e){return Array.prototype.slice.call(a,e)}function nonProxyingHasProperty(a,e){return e in a}function forEachPublicProperty(a,e,b){if(a["vm bindings"])for(g in a)if(isNumeric(g))e.call(b,g,a[g]);else{if(Multiname.isPublicQualifiedName(g)&&0>a["vm bindings"].indexOf(g)){var d=g.substr(Multiname.PUBLIC_QUALIFIED_NAME_PREFIX.length);e.call(b,d,a[g])}}else for(var g in a)e.call(b,g,a[g])}
function wrapJSObject(a){var e=Object.create(a),b;for(b in a)Object.defineProperty(e,Multiname.getPublicQualifiedName(b),function(a,b){return{get:function(){return a[b]},set:function(e){a[b]=e},enumerable:!0}}(a,b));return e}function createActivation(a){return Object.create(a.activationPrototype)}function isClass(a){!0;return Object.hasOwnProperty.call(a,"vm is class")}function isTrampoline(a){!0;return a.isTrampoline}function isMemoizer(a){!0;return a.isMemoizer}
function CatchScopeObject(a,e){e&&(new CatchBindings(new Scope(null,this),e)).applyTo(a,this)}
var Global=function(){function a(a){this.scriptInfo=a;a.global=this;a.scriptBindings=new ScriptBindings(a,new Scope(null,this));a.scriptBindings.applyTo(a.abc.applicationDomain,this);a.loaded=!0}a.prototype.toString=function(){return"[object global]"};a.prototype.isExecuted=function(){return this.scriptInfo.executed};a.prototype.isExecuting=function(){return this.scriptInfo.executing};a.prototype.ensureExecuted=function(){ensureScriptIsExecuted(this.scriptInfo)};defineNonEnumerableProperty(a.prototype,
Multiname.getPublicQualifiedName("toString"),function(){return this.toString()});return a}();function canCompile(a){return!a.hasBody||a.hasExceptions()&&!compilerEnableExceptions.value||a.code.length>compilerMaximumMethodSize.value?!1:!0}function shouldCompile(a){return!canCompile(a)||a.isClassInitializer||a.isScriptInitializer?!1:!0}
function forceCompile(a){if(a.hasExceptions())return!1;a=a.holder;a instanceof ClassInfo&&(a=a.instanceInfo);if(a instanceof InstanceInfo){switch(a.name.namespaces[0].originalURI){case "flash.geom":case "flash.events":return!0}switch(a.name.getOriginalName()){case "com.google.youtube.model.VideoData":return!0}}return!1}
function createInterpretedFunction(a,e,b){var d=!1,g=a.parameters.map(function(a){void 0!==a.value&&(d=!0);return a.value});b=b?function(b){var e=this===jsGlobal?b.global.object:this,m=sliceArguments(arguments,1);d&&m.length<g.length&&(m=m.concat(g.slice(m.length-g.length)));return Interpreter.interpretMethod(e,a,b,m)}:function(){var b=this===jsGlobal?e.global.object:this,l=sliceArguments(arguments);d&&l.length<g.length&&(l=l.concat(g.slice(arguments.length-g.length)));return Interpreter.interpretMethod(b,
a,e,l)};b.instanceConstructor=b;b.debugName="Interpreter Function #"+vmNextInterpreterFunctionId++;return b}var totalFunctionCount=0,compiledFunctionCount=0;function debugName(a){return isFunction(a)?a.debugName:a}
function createCompiledFunction(a,e,b,d){$M.push(a);b=Compiler.compileMethod(a,e,b);e=b.parameters;b=b.body;var g=a.name?Multiname.getQualifiedName(a.name):"fn"+compiledFunctionCount;if(a.holder){var f="";a.holder instanceof ClassInfo?f="static$"+a.holder.instanceInfo.name.getName():a.holder instanceof InstanceInfo?f=a.holder.name.getName():a.holder instanceof ScriptInfo&&(f="script");g=f+"$"+g}g=escapeString(g);a.verified&&(g+="$V");if(compiledFunctionCount==functionBreak.value||d)b="{ debugger; \n"+
b+"}";d="function "+g+" ("+e.join(", ")+") "+b;1<traceLevel.value&&a.trace(new IndentingWriter,a.abc);a.debugTrace=function(){a.trace(new IndentingWriter,a.abc)};0<traceLevel.value&&print(d);d=(new Function("return "+d))();d.debugName="Compiled Function #"+vmNextCompiledFunctionId++;return d}
function getMethodOverrideKey(a){return a.holder instanceof ClassInfo?"static "+a.holder.instanceInfo.name.getOriginalName()+"::"+a.name.getOriginalName():a.holder instanceof InstanceInfo?a.holder.name.getOriginalName()+"::"+a.name.getOriginalName():a.name.getOriginalName()}function checkMethodOverrides(a){if(a.name&&(a=getMethodOverrideKey(a),a in VM_METHOD_OVERRIDES))return warning("Overriding Method: "+a),VM_METHOD_OVERRIDES[a]}
function makeTrampoline(a,e,b){!0;var d=null,g=function(){3<=traceExecution.value&&print("Trampolining");Counter.count("Executing Trampoline");1<traceCallExecution.value&&callWriter.writeLn("Trampoline: "+b);d||(d=a(g),!0);return d.apply(this,arguments)};g.trigger=function(){Counter.count("Triggering Trampoline");d||(d=a(g),!0)};g.isTrampoline=!0;g.debugName="Trampoline #"+vmNextTrampolineId++;defineReadOnlyProperty(g,"vm length",e);return g}
function makeMemoizer(a,e){function b(){Counter.count("Runtime: Memoizing");3<=traceExecution.value&&print("Memoizing: "+a);1<traceCallExecution.value&&callWriter.writeLn("Memoizing: "+a);if(isNativePrototype(this))return Counter.count("Runtime: Method Closures"),bindSafely(e.value,this);isTrampoline(e.value)&&e.value.trigger();!0;var b=null;if(isClass(this))return Counter.count("Runtime: Static Method Closures"),b=bindSafely(e.value,this),defineReadOnlyProperty(this,a,b),b;if(Object.prototype.hasOwnProperty.call(this,
a)){if(Object.getOwnPropertyDescriptor(this,a).get)return Counter.count("Runtime: Method Closures"),bindSafely(e.value,this);Counter.count("Runtime: Unpatched Memoizer");return this[a]}b=bindSafely(e.value,this);b.methodInfo=e.value.methodInfo;defineReadOnlyProperty(b,Multiname.getPublicQualifiedName("prototype"),null);defineReadOnlyProperty(this,a,b);return b}Counter.count("Runtime: Memoizers");b.isMemoizer=!0;b.debugName="Memoizer #"+vmNextMemoizerId++;return b}
function createFunction(a,e,b,d){!0;if(a.freeMethod)return b?bindFreeMethodScope(a,e):a.freeMethod;var g;if(g=checkMethodOverrides(a))return!0,g;ensureFunctionIsInitialized(a);totalFunctionCount++;g=!1;if((a.abc.applicationDomain.mode===EXECUTION_MODE.INTERPRET||!shouldCompile(a))&&!forceCompile(a))g=!0;0<=compileOnly.value&&Number(compileOnly.value)!==totalFunctionCount&&(print("Compile Only Skipping "+totalFunctionCount),g=!0);0<=compileUntil.value&&(1E3<totalFunctionCount&&(print(backtrace()),
print(AVM2.getStackTrace())),totalFunctionCount>compileUntil.value&&(print("Compile Until Skipping "+totalFunctionCount),g=!0));g?a.freeMethod=createInterpretedFunction(a,e,b):(compiledFunctionCount++,(0<=compileOnly.value||0<=compileUntil.value)&&print("Compiling "+totalFunctionCount),a.freeMethod=createCompiledFunction(a,e,b,d,a.isInstanceInitializer));a.freeMethod.methodInfo=a;return b?bindFreeMethodScope(a,e):a.freeMethod}
function ensureFunctionIsInitialized(a){if(!a.analysis){a.analysis=new Analysis(a);a.needsActivation()&&(a.activationPrototype=new Activation(a),(new ActivationBindings(a)).applyTo(a.abc.applicationDomain,a.activationPrototype));for(var e=a.exceptions,b=0,d=e.length;b<d;b++){var g=e[b];if(g.varName){var f=Object.create(Trait.prototype);f.kind=0;f.name=g.varName;f.typeName=g.typeName;f.holder=a;g.scopeObject=new CatchScopeObject(a.abc.applicationDomain,f)}else g.scopeObject=new CatchScopeObject}}}
function getTraitFunction(a,e,b){!0;!0;var d=a.methodInfo,g;if(d.isNative()){var f=a.metadata;f&&f.native?g=(b=getNative(f.native.value[0].value))&&b(null,e):f&&f.unsafeJSNative?g=getNative(f.unsafeJSNative.value[0].value):b&&(e=Multiname.getName(d.name),g=a.isGetter()?b[e]?b[e].get:void 0:a.isSetter()?b[e]?b[e].set:void 0:b[e]);if(!g)return warning("No native method for: "+a.kindName()+" "+d.holder.name+"::"+Multiname.getQualifiedName(d.name)),function(){warning("Calling undefined native method: "+
a.kindName()+" "+d.holder.name+"::"+Multiname.getQualifiedName(d.name))}}else 2<=traceExecution.value&&print("Creating Function For Trait: "+a.holder+" "+a),g=createFunction(d,e,!1),!0;3<=traceExecution.value&&print("Made Function: "+Multiname.getQualifiedName(d.name));return g}function makeQualifiedNameTraitMap(a){for(var e=createEmptyObject(),b=0;b<a.length;b++)e[Multiname.getQualifiedName(a[b].name)]=a[b];return e}
function createClass(a,e,b){!0;var d=a.instanceInfo,g=a.abc.applicationDomain,f=Multiname.getName(d.name);traceExecution.value&&print("Creating "+(d.isInterface()?"Interface":"Class")+": "+f+(a.native?" replaced with native "+a.native.cls:""));f=d.isInterface()?Interface.createInterface(a):Class.createClass(a,e,b);traceClasses.value&&(g.loadedClasses.push(f),g.traceLoadedClasses(!0));if(d.isInterface())return f;g.onMessage.notify1("classCreated",f);f.instanceConstructor&&f!==Class&&f.verify();if(e&&
("Proxy"===Multiname.getQualifiedName(e.classInfo.instanceInfo.name.name)||e.isProxy))installProxyClassWrapper(f),f.isProxy=!0;createFunction(a.init,b,!1).call(f);sealConstTraits&&this.sealConstantTraits(f,a.traits);return f}
function sealConstantTraits(a,e){for(var b=0,d=e.length;b<d;b++){var g=e[b];g.isConst()&&(g=Multiname.getQualifiedName(g.name),function(b,d){Object.defineProperty(a,b,{configurable:!1,enumerable:!1,get:function(){return d},set:function(){throwErrorFromVM(AVM2.currentDomain(),"ReferenceError","Illegal write to read-only property "+b+".")}})}(g,a[g]))}}
function applyType(a,e,b){e=e.classInfo.instanceInfo.name.name;if("Vector"===e){!0;b=b[0];if(!isNullOrUndefined(b))switch(e=b.classInfo.instanceInfo.name.name.toLowerCase(),e){case "int":case "uint":case "double":case "object":return a.getClass("packageInternal __AS3__.vec.Vector$"+e)}return a.getClass("packageInternal __AS3__.vec.Vector$object").applyType(b)}return notImplemented(e)}function checkArgumentCount(a,e,b){b!==e&&throwError("ArgumentError",Errors.WrongArgumentCountError,a,e,b)}
function throwError(a,e){var b=formatErrorMessage.apply(null,Array.prototype.slice.call(arguments,1));throwErrorFromVM(AVM2.currentDomain(),a,b,e.code)}function throwErrorFromVM(a,e,b,d){throw new (a.getClass(e).instanceConstructor)(b,d);}function translateError(a,e){if(e instanceof Error){var b=a.getClass(e.name);if(b)return new b.instanceConstructor(translateErrorMessage(e));unexpected("Can't translate error: "+e)}return e}function asIsInstanceOf(a,e){return a.isInstanceOf(e)}
function asIsType(a,e){return a.isInstance(e)}function asAsType(a,e){return asIsType(a,e)?e:null}function asCoerceByMultiname(a,e,b){!0;switch(Multiname.getQualifiedName(e)){case Multiname.Int:return asCoerceInt(b);case Multiname.Uint:return asCoerceUint(b);case Multiname.String:return asCoerceString(b);case Multiname.Number:return asCoerceNumber(b);case Multiname.Boolean:return asCoerceBoolean(b);case Multiname.Object:return asCoerceObject(b)}return asCoerce(a.getType(e),b)}
function asCoerce(a,e){if(a.coerce)return a.coerce(e);if(isNullOrUndefined(e))return null;if(a.isInstance(e))return e;!0}function asCoerceString(a){return"string"===typeof a?a:void 0==a?null:a+""}function asCoerceInt(a){return a|0}function asCoerceUint(a){return a>>>0}function asCoerceNumber(a){return+a}function asCoerceBoolean(a){return!!a}function asCoerceObject(a){return void 0==a?null:"string"===typeof a||"number"===typeof a?a:Object(a)}
function asDefaultCompareFunction(a,e){return String(a).localeCompare(String(e))}function asCompare(a,e,b,d){!0;!0;var g=0;d||(d=asDefaultCompareFunction);b&1&&(a=String(a).toLowerCase(),e=String(e).toLowerCase());b&16?(a=toNumber(a),e=toNumber(e),g=a<e?-1:a>e?1:0):g=d(a,e);b&2&&(g*=-1);return g}function asAdd(a,e){return"string"===typeof a||"string"===typeof e?String(a)+String(e):a+e}
var GlobalMultinameResolver=function(){function a(a){for(var g=0;g<a.length;g++){var f=a[g],l=f.name.name,f=f.name.getNamespace();f.isDynamic()||(e[l]=!0,b[l]&&notImplemented("We have to the undo the optimization, "+l+" can now bind to "+f))}}var e=createEmptyObject(),b=createEmptyObject();return{loadAbc:function(b){if(globalMultinameAnalysis.value){var e=b.scripts,f=b.classes;b=b.methods;for(var l=0;l<e.length;l++)a(e[l].traits);for(l=0;l<f.length;l++)a(f[l].traits),a(f[l].instanceInfo.traits);for(l=
0;l<b.length;l++)b[l].traits&&a(b[l].traits)}},resolveMultiname:function(a){var g=a.name;if(!e[g])return b[g]=!0,new Multiname([ShumwayNamespace.PUBLIC],a.name)}}}();VM_METHOD_OVERRIDES["static mochi.as3.MochiServices::connect"]=function(){};VM_METHOD_OVERRIDES["static MochiBot::track"]=function(){};VM_METHOD_OVERRIDES["com.midasplayer.debug.DebugLog::trace"]=function(a){console.log(a)};VM_METHOD_OVERRIDES["com.midasplayer.engine.comm.DebugGameComm::getGameData"]=function(){return'<gamedata randomseed="554884453" version="1">\n<musicOn>true</musicOn>\n<soundOn>true</soundOn>\n<isShortGame>false</isShortGame>\n<booster_1>0</booster_1>\n<booster_2>0</booster_2>\n<booster_3>0</booster_3>\n<booster_4>0</booster_4>\n<booster_5>0</booster_5>\n<bestScore>0</bestScore>\n<bestChain>0</bestChain>\n<bestLevel>0</bestLevel>\n<bestCrushed>0</bestCrushed>\n<bestMixed>0</bestMixed>\n<text id="outro.crushed">Candy crushed</text>\n<text id="outro.bestever">best ever</text>\n<text id="outro.trophy.two">scored {0} in one game</text>\n<text id="outro.combo_color_color">All Clear Created</text>\n<text id="outro.trophy.one">crushed {0} candy in one game</text>\n<text id="outro.score">Score</text>\n<text id="outro.opengame">Please register to play the full game</text>\n<text id="outro.chain">Longest chain</text>\n<text id="outro.time">Game ends in {0} seconds</text>\n<text id="outro.combo_color_line">Super Stripes Created</text>\n<text id="game.nomoves">No more moves!</text>\n<text id="outro.combo_wrapper_line">Mega-Candy Created</text>\n<text id="intro.time">Game starts in {0} seconds</text>\n<text id="outro.now">now</text>\n<text id="outro.level">Level reached</text>\n<text id="outro.title">Game Over</text>\n<text id="intro.info1">Match 3 Candy of the same colour to crush them. Matching 4 or 5 in different formations generates special sweets that are extra tasty.</text>\n<text id="intro.info2">You can also combine the special sweets for additional effects by switching them with each other. Try these combinations for a taste you will not forget: </text>\n<text id="outro.combo_color_wrapper">Double Colour Bombs Created</text>\n<text id="outro.trophy.three">made {0} combined candy in one game</text>\n<text id="intro.title">Play like this:</text>\n</gamedata>'};
VM_METHOD_OVERRIDES["com.antkarlov.Preloader::com.antkarlov:Preloader.isUrl"]=function(){return!0};VM_METHOD_OVERRIDES["static com.demonsters.debugger.MonsterDebugger::initialize"]=function(){};VM_METHOD_OVERRIDES["com.spilgames.api.core.tracking.TrackConfig::getTrackers"]=function(){return[]};
VM_METHOD_OVERRIDES["com.spilgames.api.components.TextFields.AutoFitTextFieldEx::com.spilgames.api.components.TextFields:AutoFitTextFieldEx.updateProperties"]=VM_METHOD_OVERRIDES["com.spilgames.api.components.TextFields.AutoFitTextFieldEx::com.spilgames.api.components.TextFields:AutoFitTextFieldEx.updateTextSize"]=function(){};function asCheckVectorSetNumericProperty(a,e,b){(0>a||a>e||a===e&&b||!isNumeric(a))&&throwError("RangeError",Errors.OutOfRangeError,a,e)}
function asCheckVectorGetNumericProperty(a,e){(0>a||a>=e||!isNumeric(a))&&throwError("RangeError",Errors.OutOfRangeError,a,e)}
var TypedArrayVector=function(){function a(a,d){a|=0;this._fixed=!!d;this._buffer=new Int32Array(Math.max(10,a+4));this._offset=0;this._length=a}function e(a,d){return String(a).localeCompare(String(d))}a.callable=function(b){if(b instanceof a)return b;var d=b.asGetProperty(void 0,"length");if(void 0!==d){for(var e=new a(d,!1),f=0;f<d;f++)e.asSetNumericProperty(f,b.asGetPublicProperty(f));return e}unexpected()};a.prototype.internalToString=function(){for(var a="",d=this._offset,e=d+this._length,f=
0;f<this._buffer.length;f++)f===d&&(a+="["),f===e&&(a+="]"),a+=this._buffer[f],f<this._buffer.length-1&&(a+=",");this._offset+this._length===this._buffer.length&&(a+="]");return a+": offset: "+this._offset+", length: "+this._length+", capacity: "+this._buffer.length};a.prototype.toString=function(){for(var a="",d=0;d<this._length;d++)a+=this._buffer[this._offset+d],d<this._length-1&&(a+=",");return a};a.prototype._view=function(){return this._buffer.subarray(this._offset,this._offset+this._length)};
a.prototype._ensureCapacity=function(a){var d=this._offset+a;d<this._buffer.length||(a<=this._buffer.length?(d=this._buffer.length-a>>2,this._buffer.set(this._view(),d),this._offset=d):(a=3*this._buffer.length>>2,a<d&&(a=d),d=new Int32Array(a),d.set(this._buffer,0),this._buffer=d))};a.prototype.concat=function(){notImplemented("TypedArrayVector.concat")};a.prototype.every=function(a,d){for(var e=0;e<this._length;e++)if(!a.call(d,this.asGetNumericProperty(e),e,this))return!1;return!0};a.prototype.filter=
function(b,d){for(var e=new a,f=0;f<this._length;f++)b.call(d,this.asGetNumericProperty(f),f,this)&&e.push(this.asGetNumericProperty(f));return e};a.prototype.some=function(a,d){2!==arguments.length?throwError("ArgumentError",Errors.WrongArgumentCountError):isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var e=0;e<this._length;e++)if(a.call(d,this.asGetNumericProperty(e),e,this))return!0;return!1};a.prototype.forEach=function(a,d){for(var e=0;e<this._length;e++)a.call(d,
this.asGetNumericProperty(e),e,this)};a.prototype.join=function(){notImplemented("TypedArrayVector.join")};a.prototype.indexOf=function(){notImplemented("TypedArrayVector.indexOf")};a.prototype.lastIndexOf=function(){notImplemented("TypedArrayVector.lastIndexOf")};a.prototype.map=function(b,d){isFunction(b)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var e=new a,f=0;f<this._length;f++)e.push(b.call(d,this.asGetNumericProperty(f),f,this));return e};a.prototype.push=function(){this._checkFixed();
this._ensureCapacity(this._length+arguments.length);for(var a=0;a<arguments.length;a++)this._buffer[this._offset+this._length++]=arguments[a]};a.prototype.pop=function(){this._checkFixed();if(0===this._length)return 0;this._length--;return this._buffer[this._offset+this._length]};a.prototype.reverse=function(){for(var a=this._offset,d=this._offset+this._length-1,e=this._buffer;a<d;){var f=e[a];e[a]=e[d];e[d]=f;a++;d--}};a.CASEINSENSITIVE=1;a.DESCENDING=2;a.UNIQUESORT=4;a.RETURNINDEXEDARRAY=8;a.NUMERIC=
16;a.prototype._sortNumeric=function(a){for(var d=this._view(),e=[],f=-1,l=0,m=d.length-1,p,r,v,u;;)if(100>=m-l){for(r=l+1;r<=m;r++){v=d[r];for(p=r-1;p>=l&&d[p]>v;)d[p+1]=d[p--];d[p+1]=v}if(-1==f)break;m=e[f--];l=e[f--]}else{u=l+m>>1;p=l+1;r=m;v=d[u];d[u]=d[p];d[p]=v;d[l]>d[m]&&(v=d[l],d[l]=d[m],d[m]=v);d[p]>d[m]&&(v=d[p],d[p]=d[m],d[m]=v);d[l]>d[p]&&(v=d[l],d[l]=d[p],d[p]=v);for(u=d[p];;){do p++;while(d[p]<u);do r--;while(d[r]>u);if(r<p)break;v=d[p];d[p]=d[r];d[r]=v}d[l+1]=d[r];d[r]=u;m-p+1>=r-l?
(e[++f]=p,e[++f]=m,m=r-1):(e[++f]=l,e[++f]=r-1,l=p)}a&&this.reverse()};a.prototype.sort=function(){if(0===arguments.length)return Array.prototype.sort.call(this._view());var b,d=0;arguments[0]instanceof Function?b=arguments[0]:isNumber(arguments[0])&&(d=arguments[0]);isNumber(arguments[1])&&(d=arguments[1]);if(d&TypedArrayVector.NUMERIC)return this._sortNumeric(d&a.DESCENDING);Array.prototype.sort.call(this._view(),function(g,f){var l=g,m=f,p=d,r=b;assertNotImplemented(!(p&a.CASEINSENSITIVE),"CASEINSENSITIVE");
assertNotImplemented(!(p&a.UNIQUESORT),"UNIQUESORT");assertNotImplemented(!(p&a.RETURNINDEXEDARRAY),"RETURNINDEXEDARRAY");var v=0;r||(r=e);p&a.NUMERIC?(l=toNumber(l),m=toNumber(m),v=l<m?-1:l>m?1:0):v=r(l,m);p&a.DESCENDING&&(v*=-1);return v})};a.prototype.asGetNumericProperty=function(a){checkArguments&&asCheckVectorGetNumericProperty(a,this._length);return this._buffer[this._offset+a]};a.prototype.asSetNumericProperty=function(a,d){checkArguments&&asCheckVectorSetNumericProperty(a,this._length,this._fixed);
a===this._length&&(this._ensureCapacity(this._length+1),this._length++);this._buffer[this._offset+a]=d};a.prototype.shift=function(){this._checkFixed();if(0===this._length)return 0;this._length--;return this._buffer[this._offset++]};a.prototype._checkFixed=function(){this._fixed&&throwError("RangeError",Errors.VectorFixedError)};a.prototype._slide=function(a){this._buffer.set(this._view(),this._offset+a);this._offset+=a};a.prototype.unshift=function(){this._checkFixed();if(arguments.length){this._ensureCapacity(this._length+
arguments.length);this._slide(arguments.length);this._offset-=arguments.length;this._length+=arguments.length;for(var a=0;a<arguments.length;a++)this._buffer[this._offset+a]=arguments[a]}};a.prototype.asGetEnumerableKeys=function(){if(a.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);for(var b=[],d=0;d<this._length;d++)b.push(d);return b};a.prototype.asHasProperty=function(b,d,e){if(a.prototype===this||!isNumeric(d))return Object.prototype.asHasProperty.call(this,b,d,e);b=
toNumber(d);return 0<=b&&b<this._length};Object.defineProperty(a.prototype,"length",{get:function(){return this._length},set:function(a){a>>>=0;if(a>this._length){this._ensureCapacity(a);for(var d=this._offset+this._length,e=this._offset+a;d<e;d++)this._buffer[d]=0}this._length=a}});a.prototype._spliceHelper=function(a,d,e,f,l){d=clamp(d,0,f.length-l);e=clamp(e,0,this._length-a);this._ensureCapacity(this._length-e+d);var m=this._offset+a+e,m=this._buffer.subarray(m,m+this._length-a-e);this._buffer.set(m,
this._offset+a+d);this._length+=d-e;for(e=0;e<d;e++)this._buffer[this._offset+a+e]=f.asGetNumericProperty(l+e)};a.prototype.asGetEnumerableKeys=function(){if(a.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);for(var b=[],d=0;d<this._length;d++)b.push(d);return b};return a}(),typedArrayVectorTemplate='var EXTRA_CAPACITY=4,INITIAL_CAPACITY=10,DEFAULT_VALUE=0;function vector(a,b){a|=0;this._fixed=!!b;this._buffer=new Int32Array(Math.max(INITIAL_CAPACITY,a+EXTRA_CAPACITY));this._offset=0;this._length=a}vector.callable=function(a){if(a instanceof vector)return a;var b=a.asGetProperty(void 0,"length");if(void 0!==b){for(var c=new vector(b,!1),d=0;d<b;d++)c.asSetNumericProperty(d,a.asGetPublicProperty(d));return c}unexpected()}; vector.prototype.internalToString=function(){for(var a="",b=this._offset,c=b+this._length,d=0;d<this._buffer.length;d++)d===b&&(a+="["),d===c&&(a+="]"),a+=this._buffer[d],d<this._buffer.length-1&&(a+=",");this._offset+this._length===this._buffer.length&&(a+="]");return a+": offset: "+this._offset+", length: "+this._length+", capacity: "+this._buffer.length};vector.prototype.toString=function(){for(var a="",b=0;b<this._length;b++)a+=this._buffer[this._offset+b],b<this._length-1&&(a+=",");return a}; vector.prototype._view=function(){return this._buffer.subarray(this._offset,this._offset+this._length)};vector.prototype._ensureCapacity=function(a){var b=this._offset+a;b<this._buffer.length||(a<=this._buffer.length?(b=this._buffer.length-a>>2,this._buffer.set(this._view(),b),this._offset=b):(a=3*this._buffer.length>>2,a<b&&(a=b),b=new Int32Array(a),b.set(this._buffer,0),this._buffer=b))}; vector.prototype.every=function(a,b){for(var c=0;c<this._length;c++)if(!a.call(b,this.asGetNumericProperty(c),c,this))return!1;return!0};vector.prototype.filter=function(a,b){for(var c=new vector,d=0;d<this._length;d++)a.call(b,this.asGetNumericProperty(d),d,this)&&c.push(this.asGetNumericProperty(d));return c}; vector.prototype.some=function(a,b){2!==arguments.length?throwError("ArgumentError",Errors.WrongArgumentCountError):isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var c=0;c<this._length;c++)if(a.call(b,this.asGetNumericProperty(c),c,this))return!0;return!1};vector.prototype.forEach=function(a,b){for(var c=0;c<this._length;c++)a.call(b,this.asGetNumericProperty(c),c,this)};vector.prototype.join=function(a){notImplemented("TypedArrayVector.join")}; vector.prototype.indexOf=function(a,b){notImplemented("TypedArrayVector.indexOf")};vector.prototype.lastIndexOf=function(a,b){notImplemented("TypedArrayVector.lastIndexOf")};vector.prototype.map=function(a,b){isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var c=new vector,d=0;d<this._length;d++)c.push(a.call(b,this.asGetNumericProperty(d),d,this));return c}; vector.prototype.push=function(){this._checkFixed();this._ensureCapacity(this._length+arguments.length);for(var a=0;a<arguments.length;a++)this._buffer[this._offset+this._length++]=arguments[a]};vector.prototype.pop=function(){this._checkFixed();if(0===this._length)return DEFAULT_VALUE;this._length--;return this._buffer[this._offset+this._length]};vector.prototype.reverse=function(){for(var a=this._offset,b=this._offset+this._length-1,c=this._buffer;a<b;){var d=c[a];c[a]=c[b];c[b]=d;a++;b--}}; vector.CASEINSENSITIVE=1;vector.DESCENDING=2;vector.UNIQUESORT=4;vector.RETURNINDEXEDARRAY=8;vector.NUMERIC=16;function defaultCompareFunction(a,b){return String(a).localeCompare(String(b))} function compare(a,b,c,d){assertNotImplemented(!(c&vector.CASEINSENSITIVE),"CASEINSENSITIVE");assertNotImplemented(!(c&vector.UNIQUESORT),"UNIQUESORT");assertNotImplemented(!(c&vector.RETURNINDEXEDARRAY),"RETURNINDEXEDARRAY");var f=0;d||(d=defaultCompareFunction);c&vector.NUMERIC?(a=toNumber(a),b=toNumber(b),f=a<b?-1:a>b?1:0):f=d(a,b);c&vector.DESCENDING&&(f*=-1);return f} function _sort(a){for(var b=[],c=-1,d=0,f=a.length-1,e,g,h,k;;)if(100>=f-d){for(g=d+1;g<=f;g++){h=a[g];for(e=g-1;e>=d&&a[e]>h;)a[e+1]=a[e--];a[e+1]=h}if(-1==c)break;f=b[c--];d=b[c--]}else{k=d+f>>1;e=d+1;g=f;h=a[k];a[k]=a[e];a[e]=h;a[d]>a[f]&&(h=a[d],a[d]=a[f],a[f]=h);a[e]>a[f]&&(h=a[e],a[e]=a[f],a[f]=h);a[d]>a[e]&&(h=a[d],a[d]=a[e],a[e]=h);for(k=a[e];;){do e++;while(a[e]<k);do g--;while(a[g]>k);if(g<e)break;h=a[e];a[e]=a[g];a[g]=h}a[d+1]=a[g];a[g]=k;f-e+1>=g-d?(b[++c]=e,b[++c]=f,f=g-1):(b[++c]=d, b[++c]=g-1,d=e)}return a}vector.prototype._sortNumeric=function(a){_sort(this._view());a&&this.reverse()};vector.prototype.sort=function(){if(0===arguments.length)return Array.prototype.sort.call(this._view());var a,b=0;arguments[0]instanceof Function?a=arguments[0]:isNumber(arguments[0])&&(b=arguments[0]);isNumber(arguments[1])&&(b=arguments[1]);if(b&TypedArrayVector.NUMERIC)return this._sortNumeric(b&vector.DESCENDING);Array.prototype.sort.call(this._view(),function(c,d){return compare(c,d,b,a)})}; vector.prototype.asGetNumericProperty=function(a){checkArguments&&asCheckVectorGetNumericProperty(a,this._length);return this._buffer[this._offset+a]};vector.prototype.asSetNumericProperty=function(a,b){checkArguments&&asCheckVectorSetNumericProperty(a,this._length,this._fixed);a===this._length&&(this._ensureCapacity(this._length+1),this._length++);this._buffer[this._offset+a]=b};vector.prototype.shift=function(){this._checkFixed();if(0===this._length)return 0;this._length--;return this._buffer[this._offset++]}; vector.prototype._checkFixed=function(){this._fixed&&throwError("RangeError",Errors.VectorFixedError)};vector.prototype._slide=function(a){this._buffer.set(this._view(),this._offset+a);this._offset+=a};vector.prototype.unshift=function(){this._checkFixed();if(arguments.length){this._ensureCapacity(this._length+arguments.length);this._slide(arguments.length);this._offset-=arguments.length;this._length+=arguments.length;for(var a=0;a<arguments.length;a++)this._buffer[this._offset+a]=arguments[a]}}; vector.prototype.asGetEnumerableKeys=function(){if(vector.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);for(var a=[],b=0;b<this._length;b++)a.push(b);return a};vector.prototype.asHasProperty=function(a,b,c){if(vector.prototype===this||!isNumeric(b))return Object.prototype.asHasProperty.call(this,a,b,c);a=toNumber(b);return 0<=a&&a<this._length}; Object.defineProperty(vector.prototype,"length",{get:function(){return this._length},set:function(a){a>>>=0;if(a>this._length){this._ensureCapacity(a);for(var b=this._offset+this._length,c=this._offset+a;b<c;b++)this._buffer[b]=DEFAULT_VALUE}this._length=a}}); vector.prototype._spliceHelper=function(a,b,c,d,f){debugger;b=clamp(b,0,d.length-f);c=clamp(c,0,this._length-a);this._ensureCapacity(this._length-c+b);var e=this._offset+a+c,e=this._buffer.subarray(e,e+this._length-a-c);this._buffer.set(e,this._offset+a+b);this._length+=b-c;for(c=0;c<b;c++)this._buffer[this._offset+a+c]=d.asGetNumericProperty(f+c)}; vector.prototype.asGetEnumerableKeys=function(){if(vector.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);for(var a=[],b=0;b<this._length;b++)a.push(b);return a};',
Int32Vector=(new Function(typedArrayVectorTemplate.replace(/Int32Array/g,"Int32Array")+" return vector;"))(),Uint32Vector=(new Function(typedArrayVectorTemplate.replace(/Int32Array/g,"Uint32Array")+" return vector;"))(),Float64Vector=(new Function(typedArrayVectorTemplate.replace(/Int32Array/g,"Float64Array")+" return vector;"))(),Int32Vector=TypedArrayVector;Int32Vector.prototype.asGetProperty=function(a,e,b){return"number"===typeof e?this.asGetNumericProperty(e):asGetProperty.call(this,a,e,b)};
Int32Vector.prototype.asSetProperty=function(a,e,b,d){if("number"===typeof e)this.asSetNumericProperty(e,d);else return asSetProperty.call(this,a,e,b,d)};Uint32Vector.prototype.asGetProperty=function(a,e,b){return"number"===typeof e?this.asGetNumericProperty(e):asGetProperty.call(this,a,e,b)};Uint32Vector.prototype.asSetProperty=function(a,e,b,d){if("number"===typeof e)this.asSetNumericProperty(e,d);else return asSetProperty.call(this,a,e,b,d)};
Float64Vector.prototype.asGetProperty=function(a,e,b){return"number"===typeof e?this.asGetNumericProperty(e):asGetProperty.call(this,a,e,b)};Float64Vector.prototype.asSetProperty=function(a,e,b,d){if("number"===typeof e)this.asSetNumericProperty(e,d);else return asSetProperty.call(this,a,e,b,d)};
var GenericVector=function(){function a(a,b,d){a|=0;this._fixed=!!b;this._buffer=Array(a);this._defaultValue=(this._type=d)?d.defaultValue:null;this._fill(0,a,this._defaultValue)}a.applyType=function(e){function b(b,g){a.call(this,b,g,e)}b.prototype=Object.create(a.prototype);b.callable=a.callable;return b};a.callable=function(e){if(e instanceof a)return e;var b=e.asGetProperty(void 0,"length");if(void 0!==b){for(var d=new a(b,!1),g=0;g<b;g++)d.asSetNumericProperty(g,e.asGetPublicProperty(g));return d}unexpected()};
a.prototype._fill=function(a,b,d){for(var g=0;g<b;g++)this._buffer[a+g]=d};a.prototype.toString=function(){for(var a="",b=0;b<this._buffer.length;b++)a+=this._buffer[b],b<this._buffer.length-1&&(a+=",");return a};a.prototype.every=function(a,b){for(var d=0;d<this._buffer.length;d++)if(!a.call(b,this.asGetNumericProperty(d),d,this))return!1;return!0};a.prototype.filter=function(e,b){for(var d=new a,g=0;g<this._buffer.length;g++)e.call(b,this.asGetNumericProperty(g),g,this)&&d.push(this.asGetNumericProperty(g));
return d};a.prototype.some=function(a,b){2!==arguments.length?throwError("ArgumentError",Errors.WrongArgumentCountError):isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var d=0;d<this._buffer.length;d++)if(a.call(b,this.asGetNumericProperty(d),d,this))return!0;return!1};a.prototype.forEach=function(a,b){isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var d=0;d<this._buffer.length;d++)a.call(b,this.asGetNumericProperty(d),d,this)};a.prototype.map=
function(e,b){isFunction(e)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var d=new a,g=0;g<this._buffer.length;g++)d.push(e.call(b,this.asGetNumericProperty(g),g,this));return d};a.prototype.push=function(){this._checkFixed();for(var a=0;a<arguments.length;a++)this._buffer.push(this._coerce(arguments[a]))};a.prototype.pop=function(){this._checkFixed();return 0===this._buffer.length?void 0:this._buffer.pop()};a.prototype.reverse=function(){this._buffer.reverse()};a.CASEINSENSITIVE=
1;a.DESCENDING=2;a.UNIQUESORT=4;a.RETURNINDEXEDARRAY=8;a.NUMERIC=16;a.prototype.sort=function(a){return this._buffer.sort(a)};a.prototype.asGetNumericProperty=function(a){checkArguments&&asCheckVectorGetNumericProperty(a,this._buffer.length);return this._buffer[a]};a.prototype._coerce=function(a){return this._type?this._type.coerce(a):void 0===a?null:a};a.prototype.asSetNumericProperty=function(a,b){checkArguments&&asCheckVectorSetNumericProperty(a,this._buffer.length,this._fixed);this._buffer[a]=
this._coerce(b)};a.prototype.shift=function(){this._checkFixed();return 0===this._buffer.length?void 0:this._buffer.shift()};a.prototype._checkFixed=function(){this._fixed&&throwError("RangeError",Errors.VectorFixedError)};a.prototype.unshift=function(){if(arguments.length){this._checkFixed();for(var a=[],b=0;b<arguments.length;b++)a.push(this._coerce(arguments[b]));this._buffer.unshift.apply(this._buffer,a)}};Object.defineProperty(a.prototype,"length",{get:function(){return this._buffer.length},
set:function(a){a>>>=0;if(a>this._buffer.length)for(var b=this._buffer.length;b<a;b++)this._buffer[b]=this._defaultValue;else this._buffer.length=a;!0}});a.prototype._spliceHelper=function(a,b,d,g,f){b=clamp(b,0,g.length-f);d=clamp(d,0,this._buffer.length-a);for(var l=[],m=0;m<b;m++)l.push(this._coerce(g.asGetNumericProperty(f+m)));this._buffer.splice.apply(this._buffer,[a,d].concat(l))};a.prototype.asGetEnumerableKeys=function(){if(a.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);
for(var e=[],b=0;b<this._buffer.length;b++)e.push(b);return e};a.prototype.asHasProperty=function(e,b,d){if(a.prototype===this||!isNumeric(b))return Object.prototype.asHasProperty.call(this,e,b,d);e=toNumber(b);return 0<=e&&e<this._buffer.length};return a}();GenericVector.prototype.asGetProperty=function(a,e,b){return"number"===typeof e?this.asGetNumericProperty(e):asGetProperty.call(this,a,e,b)};
GenericVector.prototype.asSetProperty=function(a,e,b,d){if("number"===typeof e)this.asSetNumericProperty(e,d);else return asSetProperty.call(this,a,e,b,d)};function arraySort(a,e){if(0===e.length)return a.sort();var b,d=0;e[0]instanceof Function?b=e[0]:isNumber(e[0])&&(d=e[0]);isNumber(e[1])&&(d=e[1]);a.sort(function(a,e){return asCompare(a,e,d,b)});return a}
function ArrayClass(a,e,b,d){a=new Class("Array",Array,ApplicationDomain.passthroughCallable(Array));a.extendBuiltin(d);var g=createEmptyObject();a.native={"static":{_pop:function(a){return a.pop()},_reverse:function(a){return a.reverse()},_concat:function(a,b){return a.concat.apply(a,b)},_shift:function(a){return a.shift()},_slice:function(a,b,d){return a.slice(b,d)},_unshift:function(a,b){return a.unshift.apply(a,b)},_splice:function(a,b){return a.splice.apply(a,b)},_sort:function(a,b){if(0===b.length)return a.sort();
var d,e=0;b[0]instanceof Function?d=b[0]:isNumber(b[0])&&(e=b[0]);isNumber(b[1])&&(e=b[1]);a.sort(function(a,b){return asCompare(a,b,e,d)});return a},_sortOn:function(a,b,d){isString(b)&&(b=[b]);isNumber(d)&&(d=[d]);for(var e=b.length-1;0<=e;e--){var r=Multiname.getPublicQualifiedName(b[e]);if(d[e]&16){var v="var x = toNumber(a."+r+"), y = toNumber(b."+r+");",v=d[e]&2?v+"return x < y ? 1 : (x > y ? -1 : 0);":v+"return x < y ? -1 : (x > y ? 1 : 0);",u=g[v];u||(u=g[v]=new Function("a","b",v));a.sort(u)}else a.sort(function(a,
b){return asCompare(a[r],b[r],d[e]|0)})}return a},_indexOf:function(a,b,d){return a.indexOf(b,d)},_lastIndexOf:function(a,b,d){return a.lastIndexOf(b,d)},_every:function(a,b,d){for(var e=0;e<a.length&&!0===b.call(d,a[e],e,a);e++);return!1},_filter:function(a,b,d){for(var e=[],g=0;g<a.length;g++)!0===b.call(d,a[g],g,a)&&e.push(a[g]);return e},_forEach:function(a,b,d){return a.forEach(b,d)},_map:function(a,b,d){return a.map(b,d)},_some:function(a,b,d){return a.some(b,d)}},instance:{pop:Array.prototype.pop,
push:Array.prototype.push,unshift:Array.prototype.unshift,length:{get:function(){return this.length},set:function(a){this.length=a}}}};a.coerce=function(a){return a};a.isInstanceOf=function(){return!0};return a}var XMLClass,XMLListClass,QNameClass,ASXML,XML,ASXMLList,XMLList,isXMLType,isXMLName,XMLParser;
(function(){function a(){function a(b,d){if(b.isXML)switch(b.kind){case "element":return d.element(b);case "attribute":return d.attribute(b);case "text":return d.text(b);case "cdata":return d.cdata(b);case "comment":return d.comment(b);case "processing-instruction":return d.pi(b)}else{if(b.isXMLList)return d.list(b);throw"Not implemented";}}this.encode=function(b){return a(b,{element:function(b){var d,e,g=b.name.mn.namespaces[0],f=g.prefix?g.prefix+":":"";d="<"+f+b.name.localName;var l=[];(g.prefix||
g.originalURI)&&l.push(g);f&&(l[g.prefix]=!0);for(e=b;e;){for(var m=0;m<e.inScopeNamespaces.length;m++)g=e.inScopeNamespaces[m],l[g.prefix]||(l.push(g),l[g.prefix]=!0);e=e.parent}for(m=0;m<l.length;m++)e=l[m],d=e.prefix?d+(" xmlns:"+e.prefix+'="'+e.originalURI+'"'):d+(' xmlns="'+e.originalURI+'"');for(m=0;m<b.attributes.length;m++)e=b.attributes[m],g=b.name.uri,f=b.prefix?g.prefix+":":"",d+=" "+(f+e.name.localName)+'="'+e.value+'"';if(b.children.length){d+=">";for(m=0;m<b.children.length;m++)d+=a(b.children[m],
this);d+="</"+f+b.name.mn.name+">"}else d+="/>";return d},text:function(a){return e(a.value)},attribute:function(a){return e(a.value)},cdata:function(){},comment:function(){},pi:function(){},doctype:function(){},list:function(a){for(var b="",e=0;e<a.children.length;e++)0<e&&(b+="\n"),b+=d(a.children[e],[]);return b}})}}function e(a){return a.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;")}function b(a){if("object"===typeof a&&null!==a)switch(a.kind){case "text":case "attribute":return a.value;
default:if(a.hasSimpleContent()){var e="";a.children.forEach(function(a){e+=b(a)});return e}return d(a)}else return String(a)}function d(b,d,e){return(new a(d,e,!0)).encode(b)}function g(a){if(null===a)throw new TypeError(formatErrorMessage(Errors.ConvertNullToObjectError));if(void 0===a)throw new TypeError(formatErrorMessage(Errors.ConvertUndefinedToObjectError));if(a.isXML)return a;if(a.isXMLList){if(1===a.length())return a.children[0];throw new TypeError(formatErrorMessage(Errors.XMLMarkupMustBeWellFormed));
}a=A.parseFromString(String(a));if(0===a.length())return a=new XML("text");if(1===a.length())return a.children[0].parent=null,a.children[0];throw"SyntaxError in ToXML";}function f(a){if(null===a)throw new TypeError(formatErrorMessage(Errors.ConvertNullToObjectError));if(void 0===a)throw new TypeError(formatErrorMessage(Errors.ConvertUndefinedToObjectError));if(a instanceof XML){var b=new XMLList(a.parent,a.name);b.append(a);return b}if(a instanceof XMLList)return a;a=new ASXML("<parent xmlns='"+z+
"'>"+String(a)+"</parent>");for(var b=new XMLList,d=0;d<a.length();d++){var e=a.children[d];e.parent=null;b.append(e)}return b}function l(a){if(void 0===a||null===a||"boolean"===typeof a||"number"===typeof a)throw"TypeError: invalid operand to ToAttributeName()";if(isXMLType(a))a=b(a);else if(a instanceof Object&&null!==a){if(a instanceof QName)return new QName(a.uri,a.localName,!0);a=b(a)}if("string"===typeof a)var d=new ASNamespace,d=new QName(d,a,!0);return d}function m(a){for(;a;){var b=a.object;
if(void 0!==b.defaultNamepsace)return b.defaultNamespace;a=a.parent}return ShumwayNamespace.createNamespace("","")}function p(a,b,d,e){a=isNumeric(b)?toNumber(b):b instanceof QName?b.mn:new Multiname(a?a:[ShumwayNamespace.PUBLIC],b,d);return this.getProperty(a,e)}function r(a,b,d,e){a=isNumeric(b)?toNumber(b):b instanceof QName?b.mn:new Multiname(a?a:[ShumwayNamespace.PUBLIC],b,d);this.setProperty(a,e)}function v(a,b,d){a=isNumeric(b)?toNumber(b):b instanceof QName?b.mn:new Multiname(a?a:[ShumwayNamespace.PUBLIC],
b,d);return this.hasProperty(a)}function u(a,b,d,e,g){var f=e?null:this,l=this.asGetProperty(a,b,d,!0);return!l?this.toString().asCallProperty(a?a:[ShumwayNamespace.PUBLIC],b,d,e,g):l.apply(f,g)}function w(a){var b=0,b=a.isAttribute()?b|1:b|2;a.isAnyName()&&(b|=4);a.isAnyNamespace()&&(b|=8);return b}XMLParser=function(){this.parseFromString=function(a){var b=new XML("element","","",""),d=[],e={beginElement:function(a,e,g,f){var l=b;d.push(l);b=new XML("element",a.namespace,a.localName,a.prefix);for(a=
0;a<e.length;++a){var m=e[a],r=new XML("attribute",m.name.namespace,m.name.localName,m.name.prefix);r.value=m.value;b.attributes.push(r)}e=g.namespaces;for(a=0;a<e.length;++a)g=e[a],g=ShumwayNamespace.createNamespace(g.uri,g.prefix),b.inScopeNamespaces.push(g);l.insert(l.length(),b);f&&(b=d.pop())},endElement:function(){b=d.pop()},text:function(a){var d=new XML("text","","",void 0);d.value=a;b.insert(b.length(),d)},cdata:function(a){var d=new XML("text","","",void 0);d.value=a;b.insert(b.length(),
d)},comment:function(){},pi:function(){},doctype:function(){}},g=function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},f=function(a){return a.replace(/&([^;]+);/g,function(a,b){if("#x"===b.substring(0,2))return String.fromCharCode(parseInt(b.substring(2),16));if("#"===b.substring(0,1))return String.fromCharCode(parseInt(b.substring(1),10));switch(b){case "lt":return"<";case "gt":return">";case "amp":return"&"}throw"Unknown entity: "+b;})},l=function(a,b){var d=a.indexOf(":");if(0<=d){var e;
a:{e=a.substring(0,d);for(var g=p.length-1;0<=g;--g)if(p[g].namespaces.hasOwnProperty(e)){e=p[g].namespaces[e];break a}throw"Unknown namespace: "+e;}g=a.substring(0,d);d=a.substring(d+1);return{name:e+"::"+d,localName:d,prefix:g,namespace:e}}if(b){a:{for(d=p.length-1;0<=d;--d)if(p[d].hasOwnProperty("xmlns")){d=p[d].xmlns;break a}d=void 0}d={name:a,localName:a,prefix:"",namespace:d}}else d={name:a,localName:a,prefix:"",namespace:""};return d},m=function(a,b){function d(){for(;e<a.length&&a.charCodeAt(e)in
v;)++e}for(var e=b,g,l=[];e<a.length&&!(a.charCodeAt(e)in v)&&">"!==a.charAt(e)&&"/"!==a.charAt(e);)++e;g=a.substring(b,e);for(d();e<a.length&&">"!==a.charAt(e)&&"/"!==a.charAt(e)&&"?"!==a.charAt(e);){d();for(var m="",r="";e<a.length&&!(a.charCodeAt(e)in v)&&"="!==a.charAt(e);)m+=a.charAt(e),++e;d();if("="!==a.charAt(e))throw"'=' expected";++e;d();r=a.charAt(e);if('"'!==r&&"'"!==r)throw"Quote expected";var p=a.indexOf(r,++e);if(0>p)throw new "Unexpected EOF[6]";r=a.substring(e,p);l.push({name:m,value:f(r)});
e=p+1;d()}return{name:g,attributes:l,parsed:e-b}},r=0,p=[{space:"default",xmlns:"",namespaces:{xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace"}}],v={10:!0,13:!0,9:!0,32:!0};for(;r<a.length;){var u=a.charAt(r),w=r;if("<"===u)switch(++w,a.charAt(w)){case "/":++w;r=a.indexOf(">",w);if(0>r)throw"Unexpected EOF[1]";w=l(a.substring(w,r),!0);e.endElement(w);p.pop();w=r+1;break;case "?":++w;u=m(a,w);if("?>"!=a.substring(w+u.parsed,w+u.parsed+2))throw"Unexpected EOF[2]";e.pi(u.name,
u.attributes);w+=u.parsed+2;break;case "!":if("--"===a.substring(w+1,w+3)){r=a.indexOf("--\x3e",w+3);if(0>r)throw"Unexpected EOF[3]";e.comment(a.substring(w+3,r));w=r+3}else if("[CDATA["===a.substring(w+1,w+8)){r=a.indexOf("]]\x3e",w+8);if(0>r)throw"Unexpected EOF[4]";e.cdata(a.substring(w+8,r));w=r+3}else if("DOCTYPE"===a.substring(w+1,w+8)){var A=a.indexOf("[",w+8),u=!1,r=a.indexOf(">",w+8);if(0>r)throw"Unexpected EOF[5]";if(0<A&&r>A){r=a.indexOf("]>",w+8);if(0>r)throw"Unexpected EOF[7]";u=!0}w=
a.substring(w+8,r+(u?1:0));e.doctype(w);w=r+(u?2:1)}else throw"Unknown !tag";break;default:u=m(a,w);A=!1;if("/>"===a.substring(w+u.parsed,w+u.parsed+2))A=!0;else if(">"!==a.substring(w+u.parsed,w+u.parsed+1))throw"Unexpected EOF[2]";for(var z={namespaces:[]},H=u.attributes,r=0;r<H.length;++r){var P=H[r],M=P.name;if("xmlns:"===M.substring(0,6))M=M.substring(6),P=P.value,z.namespaces[M]=g(P),z.namespaces.push({uri:P,prefix:M}),delete H[r];else if("xmlns"===M)P=P.value,z.namespaces.xmlns=g(P),z.namespaces.push({uri:P,
prefix:""}),delete H[r];else if("xml:"===M.substring(0,4))z[M.substring(4)]=g(P.value);else if("xml"===M.substring(0,3))throw"Invalid xml attribute";}p.push(z);M=[];for(r=0;r<H.length;++r)(P=H[r])&&M.push({name:l(P.name,!1),value:P.value});e.beginElement(l(u.name,!0),M,z,A);w+=u.parsed+(A?2:1);A&&p.pop()}else{do if(++w>=a.length)break;while("<"!==a.charAt(w));r=a.substring(r,w);u=0===r.replace(/^\s+/,"").length;if(!(A=!u))a:{for(A=p.length-1;0<=A;--A)if("preserve"===p[A].space){A=!0;break a}A=!1}A&&
e.text(f(r),u)}r=w}return b}};var A=new XMLParser;isXMLType=function(a){return a.isXML||a.isXMLList};var z="";isXMLName=function(a){try{new QName(a)}catch(b){return!1}return!0};XMLClass=function(a,e,f,A){ASXML=function(a){if(!(this instanceof ASXML))return a instanceof ASXML?a:new ASXML(a);if(null===a||void 0===a)a="";var b=g(a);isXMLType(a)&&(b=b.deepCopy());return b};XML=function(a,b,d,e){void 0===a&&(a="text");void 0===b&&(b="");void 0===d&&(d="");this.init(a,b,d,e)};var z=new Class("XML",ASXML,
ApplicationDomain.passthroughCallable(ASXML));z.flags=15;z.prettyIndent=2;z.extend(A);var C=XML.prototype=ASXML.prototype;C.init=function(a,b,d,e){this.name=new QName(new Multiname([new ASNamespace(e,b)],d));this.kind=a;this.parent=null;this.inScopeNamespaces=[];switch(a){case "element":this.attributes=[];this.children=[];break;case "attribute":case "text":this.value=""}return this};C.length=function(){return!this.children?0:this.children.length};C.canHandleProperties=!0;C.deepCopy=function(){return new ASXML(d(this))};
C.resolveValue=function(){return this};C.hasSimpleContent=function(){if("comment"===this.kind||"processing-instruction"===this.kind)return!1;var a=!0;this.children&&this.children.forEach(function(b){"element"===b.kind&&(a=!1)});return a};C.asGetEnumerableKeys=function(){if(C===this)return Object.prototype.asGetEnumerableKeys.call(this);var a=[];this.children.forEach(function(b){a.push(b.name)});return a};C.setProperty=function(a,d){var g,f,l;if(a===a>>>0)throw"TypeError in XML.prototype.setProperty(): invalid property name "+
a;if(!("text"===this.kind||"comment"===this.kind||"processing-instruction"===this.kind||"attribute"===this.kind))if(f=!d||!d.isXML&&!d.isXMLList||"text"===d.kind||"attribute"===d.kind?b(d):d.deepCopy(),l=new QName(a),l.isAttr)this.attributes&&(this.attributes.forEach(function(a,b,d){a.name===l.localName&&delete d[b]}),g=new XML("attribute",l.uri,l.localName),g.value=d,g.parent=this,this.attributes.push(g));else if(isXMLName(l)||"*"===l.localName){g=void 0;for(var r=!isXMLType(f)&&"*"!==l.localName,
p=this.length()-1;0<=p;p--)if((l.isAny||"element"===this.children[p].kind&&this.children[p].name.localName===l.localName)&&(null===l.uri||"element"===this.children[p].kind&&this.children[p].name.uri===l.uri))void 0!==g&&this.deleteByIndex(String(g)),g=p;if(void 0===g&&(g=this.length(),r)){var v=null===l.uri?new QName(m(e),l):new QName(l),p=new XML("element",v.uri,v.localName,v.prefix);p.parent=this;v=v.getNamespace();this.replace(String(g),p);p.addInScopeNamespace(v)}r?(this.children[g].children=
[],f=b(f),""!==f&&this.children[g].replace("0",f)):this.replace(String(g),f)}};C.asGetProperty=p;C.asGetResolvedStringProperty=asGetResolvedStringPropertyFallback;C.asSetProperty=r;C.asHasProperty=v;C.asCallProperty=u;C.getProperty=function(a,b){if(b){var d=Multiname.isQName(a)?a:resolveMultiname(this,a);return this[Multiname.getQualifiedName(d)]}if(isNumeric(a))return 0===Number(0)?this:null;var e=new QName(a),g=new XMLList(this,e),d=w(e.mn),f=d&4,l=d&8;d&1?this.attributes&&this.attributes.forEach(function(a){(f||
a.name.localName===e.localName)&&(l||a.name.uri===e.uri)&&g.append(a)}):this.children.forEach(function(a){(f||"element"===a.kind&&a.name.localName===e.localName)&&(l||"element"===a.kind&&a.name.uri===e.uri)&&g.append(a)});return g};C.hasProperty=function(a,b){if(b){var d=Multiname.isQName(a)?a:resolveMultiname(this,a);return!!this[Multiname.getQualifiedName(d)]}if(isNumeric(a))return 0===Number(0)?!0:!1;var e=new QName(a),d=w(e.mn),g=d&4,f=d&8;if(d&1)return this.attributes.some(function(a){if((g||
a.name.localName===e.localName)&&(f||a.name.uri===e.uri))return!0});if(this.children.some(function(a){if((g||"element"===a.kind&&a.name.localName===e.localName)&&(f||"element"===a.kind&&a.name.uri===e.uri))return!0}))return!0;d=Multiname.isQName(a)?a:resolveMultiname(this,a);return!!this[Multiname.getQualifiedName(d)]};C.delete=function(){notImplemented("XML.[[Delete]]")};C.deleteByIndex=function(a){var b=a>>>0;if(String(b)!==String(a))throw"TypeError in XML.prototype.deleteByIndex(): invalid index "+
a;if(a<this.length()&&this.children[a]){this.children[a].parent=null;delete this.children[a];for(q=b+1;q<this.length();q++)this.children[q-1]=this.children[q];this.children.length-=1}};C.isXML=!0;C.insert=function(a,b){var d,e;if(!("text"===this.kind||"comment"===this.kind||"processing-instruction"===this.kind||"attribute"===this.kind)){d=a>>>0;if(String(a)!==String(d))throw"TypeError in XML.prototype.insert(): invalid property name "+a;if("element"===this.kind)for(e=this;e;){if(e===b)throw"Error in XML.prototype.insert()";
e=e.parent}if(this.isXMLList){if(e=this.length(),0===e)return}else e=1;for(var g=this.length()-1;g>=d;g--)this[g+e]=this[g];if(this.isXMLList){e=b.length();for(g=0;g<e;g++)b.children[g].parent=this,this[d+g]=b[g]}else b.parent=this,this.children[d]=b}};C.replace=function(a,d){var e;if(!("text"===this.kind||"comment"===this.kind||"processing-instruction"===this.kind||"attribute"===this.kind)){e=a>>>0;if(String(a)!==String(e))throw"TypeError in XML.prototype.replace(): invalid name "+a;e>=this.length()&&
(a=String(this.length()));if("element"===d.kind)for(e=this;e;){if(e===d)throw"Error in XML.prototype.replace()";e=e.parent}"element"===d.kind||"text"===d.kind||"comment"===d.kind||"processing-instruction"===d.kind?(d.parent=this,this[a]&&(this.children[a].parent=null),this.children[a]=d):this.isXMLList?(this.deleteByIndex(a),this.insert(a,d)):(e=b(d),t=new XML,t.parent=this,t.value=e,this[a]&&(this.children[a].parent=null),this.children[a]=t)}};C.addInScopeNamespace=function(a){var b;b=this;if(!("text"===
b.kind||"comment"===b.kind||"processing-instruction"===b.kind||"attribute"===b.kind)&&void 0!==a.prefix&&!(""===a.prefix&&""===b.name.uri)){var d=null;b.inScopeNamespaces.forEach(function(b){b.prefix===a.prefix&&(d=b)});null!==d&&d.uri!==a.uri&&b.inScopeNamespaces.forEach(function(e,g){e.prefix===d.prefix&&(b.inScopeNamespaces[g]=a)});b.name.prefix===a.prefix&&(b.name.prefix=void 0);b.attributes.forEach(function(b){b.name.prefix===a.name.prefix&&(b.name.prefix=void 0)})}};C.descendants=function(a){a=
new QName(a);var b=new XMLList;if("element"!==this.kind)return b;a.isAttr?this.attributes.forEach(function(d){(a.isAny||a.localName===d.name.localName)&&b.append(d)}):this.children.forEach(function(d){(a.isAny||a.localName===d.name.localName)&&b.append(d)});this.children.forEach(function(d){b.append(d.descendants(a))});return b};C.comments=function(){var a=new XMLList(this,null);this.children.forEach(function(b){"comment"===b.kind&&a.append(b)});return a};C.text=function(){var a=new XMLList(this,
null);this.children.forEach(function(b){"text"===b.kind&&a.append(b)});return a};z.native={"static":{ignoreComments:{get:function(){return getBitFlags(z.flags,1)},set:function(a){z.flags=setBitFlags(z.flags,1,a)}},ignoreProcessingInstructions:{get:function(){return getBitFlags(z.flags,2)},set:function(a){z.flags=setBitFlags(z.flags,2,a)}},ignoreWhitespace:{get:function(){return getBitFlags(z.flags,4)},set:function(a){z.flags=setBitFlags(z.flags,4,a)}},prettyPrinting:{get:function(){return getBitFlags(z.flags,
8)},set:function(a){z.flags=setBitFlags(z.flags,8,a)}},prettyIndent:{get:function(){return z.prettyIndent},set:function(a){z.prettyIndent=a}}},instance:{toString:function(){return b(this)},hasOwnProperty:function(a){somewhatImplemented("XML.hasOwnProperty");return this.hasProperty(a)},propertyIsEnumerable:function(){notImplemented("XML.propertyIsEnumerable")},addNamespace:function(){notImplemented("XML.addNamespace")},appendChild:function(a){var b=this.getProperty("*");b.setProperty(b.length(),a);
return this},attribute:function(a){return this.getProperty(l(a))},attributes:function(){return this.getProperty(l("*"))},child:function(a){return this.getProperty(a)},childIndex:function(){notImplemented("XML.childIndex")},children:function(){var a=new XMLList;Array.prototype.push.apply(a.children,this.children);return a},comments:function(){return this.comments()},contains:function(){notImplemented("XML.contains")},copy:function(){return this.deepCopy()},descendants:function(a){void 0===a&&(a="*");
return this.descendants(a)},elements:function(a){var b=!1;void 0===a&&(a="*",b=!0);a=new QName(a);var d=new XMLList(this.parent,a);this.children.forEach(function(e){"element"===e.kind&&((b||e.name.localName===a.localName)&&(null===a.uri||"element"===e.kind&&e.name.uri===a.uri))&&d.append(e)});return d},hasComplexContent:function(){notImplemented("XML.hasComplexContent")},hasSimpleContent:function(){return this.hasSimpleContent()},inScopeNamespaces:function(){notImplemented("XML.inScopeNamespaces")},
insertChildAfter:function(){notImplemented("XML.insertChildAfter")},insertChildBefore:function(){notImplemented("XML.insertChildBefore")},localName:function(){return this.name.localName},name:function(){return this.name},_namespace:function(){somewhatImplemented("XML._namespace()");return this.name.uri},namespaceDeclarations:function(){return new XMLList},nodeKind:function(){return this.kind},normalize:function(){notImplemented("XML.normalize")},parent:function(){notImplemented("XML.parent")},processingInstructions:function(){notImplemented("XML.processingInstructions")},
prependChild:function(){notImplemented("XML.prependChild")},removeNamespace:function(){notImplemented("XML.removeNamespace")},replace:function(a,b){var d,e;if("text"===this.kind||"comment"===this.kind||"processing-instruction"===this.kind||"attribute"===this.kind)return this;d=isXMLType(b)?b.deepCopy():b.toString();if(String(a)===String(a>>>0))return this.replace(a,d),this;n=new QName(a);e=void 0;for(k=this.length()-1;0<=k;k--){var g=this.children[k];if(n.isAny||"element"===g.kind&&g.name.localName===
n.localName&&(null===n.uri||"element"===g.kind&&g.name.uri===n.uri))void 0!==e&&this.deleteByIndex(String(e)),e=k}void 0!==e&&this.replace(e.toString(),d);return this},setChildren:function(){notImplemented("XML.setChildren")},setLocalName:function(){notImplemented("XML.setLocalName")},setName:function(){notImplemented("XML.setName")},setNamespace:function(){notImplemented("XML.setNamespace")},text:function(){return this.text()},toXMLString:function(){return d(this)},notification:function(){notImplemented("XML.notification")},
setNotification:function(){notImplemented("XML.setNotification")}}};return z};XMLListClass=function(a,e,m,w){ASXMLList=function(a){if(!(this instanceof ASXMLList)){if(null===a||void 0===a)a="";return f(a)}if(null===a||void 0===a)a="";if(a.isXMLList){var b=new XMLList;b.append(a);a=b}else a=f(a);return a};XMLList=function(a,b){this.targetObject=a?a:null;this.targetProperty=b?b:null;this.children=[]};a=new Class("XMLList",ASXMLList,ApplicationDomain.passthroughCallable(ASXMLList));a.extend(w);var A=
XMLList.prototype=ASXMLList.prototype;A.canHandleProperties=!0;A.hasSimpleContent=function(){if(0===this.length())return!0;if(1===this.length())return g(this).hasSimpleContent();var a=!0;this.children.forEach(function(b){"element"===b.kind&&(a=!1)});return a};A.asGetProperty=p;A.asGetResolvedStringProperty=asGetResolvedStringPropertyFallback;A.asSetProperty=r;A.asHasProperty=v;A.asCallProperty=u;A.setProperty=function(a,d){var e,g,f;e=this;g=a>>>0;if(String(a)===String(g)){f=this.targetObject;var m=
this.targetProperty;if(null!==f){if(f=f.resolveValue(),null===f)return}else f=null;if(g>=e.length()){if(f&&f.isXMLList){if(1!==f.length)return;f=f.children[0]}if(f&&"element"!==f.kind)return;var r=new XML;r.parent=f;r.name=e.targetProperty;if(null===m||"*"===m.localName)r.name=null,r.kind="text";else if(m.isAttr){if(0<f.getProperty(r.name).length())return;f.kind="attribute"}else r.kind="element";g=e.length();if("attribute"!==r.kind){if(null!==f){if(0<g)for(m=0;m<f.length()-1&&f.children[m]!==e.children[g-
1];)m++;else m=f.length()-1;f.insert(String(m+1),r)}d.isXML?r.name=d.name:d.isXMLList&&(r.name=d.targetProperty)}e.append(r)}if(!d.isXML&&!d.isXMLList||"text"===d.kind||"attribute"===d.kind)d=b(d);if("attribute"===e.children[g].kind)f=l(e.children[g].name),e.children[g].parent.setProperty(f,d),f=e.children[g].parent.getProperty(f),e.children[g]=f.children[0];else if(d.isXMLList){var p=d.deepCopy(),v=e.children[g].parent;if(null!==v){var u;v.children.some(function(a,b){if(a==e.children[g])return u=
b,!0});v.replace(u,p);p.children.forEach(function(a,b){p.children[b]=v.children[u>>>0+b]})}if(0===p.length())for(m=e+1;m<e.length()-1;m++)e.children[String(m-1)]=e.children[m];else for(m=e.length()-1;m>=g+1;m--)e.children[String(m+p.length()-1)]=e.children[m];for(m=0;m<p.length();m++)e.children[g+m]=p.children[m]}else d.isXML||"text"===(k=e.children[g].kind)||"comment"===k||"processing-instruction"===k?(v=e.children[g].parent,null!==v&&(v.children.some(function(a,b){if(a==e.children[g])return u=b,
!0}),v.replace(u,d),d=v.children[u]),"string"===typeof d?(f=new XML("text"),f.parent=e,f.value=d,e.children[g]=f):e.children[g]=d):e.children[g].setProperty("*",d)}else if(1>=e.length()){if(0===e.length()){f=e.resolveValue();if(null===f||1!==f.length())return;e.append(f)}e.children[0].setProperty(a,d)}};A.getProperty=function(a,b){if(b){var d=Multiname.isQName(a)?a:resolveMultiname(this,a);return this[Multiname.getQualifiedName(d)]}if(String(a)===String(a>>>0))return this.children[a];var d=new QName(a),
e=new XMLList(this,d);this.children.forEach(function(b){"element"===b.kind&&(b=b.getProperty(a),0<b.length()&&e.append(b))});return e};A.hasProperty=function(a,b){if(b){var d=Multiname.isQName(a)?a:resolveMultiname(this,a);return!!this[Multiname.getQualifiedName(d)]}if(String(a)===String(a>>>0))return!!this.children[a];new QName(a);return this.children.some(function(b){if(0<b.getProperty(a).length())return!0})};A.delete=function(){};A.append=function(a){if(a.isXMLList){if(this.targetObject=a.targetObject,
this.targetProperty=a.targetProperty,0!==a.length())for(var b=0;b<a.length();b++)this.children.push(a.children[b])}else a.isXML&&this.children.push(a)};A.length=function(){return this.children.length};A.resolve=function(){var a=this.targetObject.resolveValue();if(null===a)return null;var b=this.targetObject.getProperty(this.targetProperty);if(0===a.length)return notImplemented("XMLList.resolve"),a.setProperty(this.targetProperty,""),b=a.getProperty(this.targetProperty)};A.deepCopy=function(){var a=
new XMLList;this.children.forEach(function(b,d){a.children[d]=b.deepCopy()});return a};A.descendants=function(a){var b=new XMLList(null);this.children.forEach(function(d){"element"===d.kind&&b.append(d.descendants(a))});return b};A.resolveValue=function(){if(0<this.length())return this;var a=this.name,b=this.targetObject,d=this.targetProperty;if(null===b||null===d||a.isAttr||a.isAny)return null;a=b.resolveValue();if(null===a)return null;b=a.getProperty(d);if(0===b.length()){if(a.isXMLList&&1<a.length())return null;
a.setProperty(d,"");b=a.getProperty(d)}return b};A.asGetEnumerableKeys=function(){if(A===this)return Object.prototype.asGetEnumerableKeys.call(this);var a=[];this.children.forEach(function(b,d){a.push(d)});return a};a.native={instance:{init:function(){}}};A.isXMLList=!0;a.native={"static":{},instance:{toString:function(){return b(this)},hasOwnProperty:function(a){somewhatImplemented("XMLList.hasOwnProperty");return this.hasProperty(a)},propertyIsEnumerable:function(){notImplemented("XMLList.propertyIsEnumerable")},
attribute:function(a){return this.getProperty(l(a))},attributes:function(){return this.getProperty(l("*"))},child:function(){notImplemented("XMLList.child")},children:function(){for(var a=new XMLList,b=0;b<this.children.length;b++)Array.prototype.push.apply(a.children,this.children[b].children);return a},comments:function(){var a=new XMLList(this,null);this.children.forEach(function(b){"element"===b.kind&&a.append(b.comments())});return a},contains:function(a){for(var b=0;b<this.children.length;b++)if(this.children[b]===
a)return!0;return!1},copy:function(){return this.deepCopy()},descendants:function(a){return this.descendants(void 0===a?"*":a)},elements:function(a){void 0===a&&(a="*");a=new QName(a);var b=new XMLList(this,a);this.children.forEach(function(a){"element"===a.kind&&b.append(a.comments())});return b},hasComplexContent:function(){notImplemented("XMLList.hasComplexContent")},hasSimpleContent:function(){return this.hasSimpleContent()},length:function(){return this.children.length},name:function(){return g(this).name},
normalize:function(){notImplemented("XMLList.normalize")},parent:function(){notImplemented("XMLList.parent")},processingInstructions:function(){notImplemented("XMLList.processingInstructions")},text:function(){var a=new XMLList(this,null);this.children.forEach(function(b){("text"===b.kind||"element"===b.kind)&&a.append(b.text())});return a},toXMLString:function(){return d(this)},addNamespace:function(){notImplemented("XMLList.addNamespace")},appendChild:function(a){g(this).appendChild(a);return this},
childIndex:function(){notImplemented("XMLList.childIndex")},inScopeNamespaces:function(){notImplemented("XMLList.inScopeNamespaces")},insertChildAfter:function(){notImplemented("XMLList.insertChildAfter")},insertChildBefore:function(){notImplemented("XMLList.insertChildBefore")},nodeKind:function(){return g(this).kind},_namespace:function(){notImplemented("XMLList._namespace")},localName:function(){notImplemented("XMLList.localName")},namespaceDeclarations:function(){somewhatImplemented("XMLList.prototype.namespaceDeclarations()");
return new XMLList},prependChild:function(){notImplemented("XMLList.prependChild")},removeNamespace:function(){notImplemented("XMLList.removeNamespace")},replace:function(a,b){g(this).replace(a,b);return this},setChildren:function(){notImplemented("XMLList.setChildren")},setLocalName:function(){notImplemented("XMLList.setLocalName")},setName:function(){notImplemented("XMLList.setName")},setNamespace:function(){notImplemented("XMLList.setNamespace")}}};return a};QNameClass=function(a,d,e,g){QName=
function C(a,e,g){if(!(this instanceof C))return void 0===e&&a instanceof C?a:new C(a,e);void 0===e&&(e=a,a=void 0);if("string"===typeof a||a instanceof C)a=new ASNamespace(a);e instanceof C?a=void 0===a?e.mn:new Multiname([a],e.mn.getName()):e instanceof Multiname?a=void 0===a?e.isQName()||e.isAnyName()||e.isAnyNamespace()?e:new Multiname([m(d)],e.getName(),e.flags):new Multiname([a],e.getName(),e.flags):"*"===e?a=new Multiname([],null,g?Multiname.ATTRIBUTE:0):"@*"===e?a=new Multiname([],null,Multiname.ATTRIBUTE):
(a=void 0===a?m(d):a,a=void 0===e?new Multiname([a],""):new Multiname([a],b(e),g?Multiname.ATTRIBUTE:0));this.mn=a;this.isAny=a.isAnyName();this.isAnyNamespace=a.isAnyNamespace();this.isAttr=a.isAttribute()};a=new Class("QName",QName,ApplicationDomain.passthroughCallable(QName));a.extend(g);QNp=QName.prototype;defineNonEnumerableGetter(QNp,"localName",function(){this._localName||(this._localName=this.isAny?"*":this.mn.getName());return this._localName});defineNonEnumerableGetter(QNp,"uri",function(){if(!this._uri){var a=
this.mn.namespaces[0];this._uri=a&&a.originalURI?a.originalURI:this.isAny||this.isAnyNamespace?null:""}return this._uri});defineNonEnumerableGetter(QNp,"prefix",function(){return this.mn.namespaces[0].prefix});defineNonEnumerableSetter(QNp,"prefix",function(a){this.mn.namespaces[0].prefix=a});QNp.getNamespace=function(a){if(null===this.uri)throw"TypeError in QName.prototype.getNamespace()";a||(a=[]);for(var b,d=0;d<a.length;d++)this.uri===a[d].uri&&(b=a[d]);b||(b=ShumwayNamespace.createNamespace(this.uri));
return b};a.native={"static":{},instance:{localName:{get:function(){return this.localName}},uri:{get:function(){return this.uri}}}};return a}})();
var AMFUtils=function(){function a(a,b){if(65535<b.length)throw"AMF short string exceeded";if(b.length){var d=utf8decode(b);a.writeByte(d.length>>8&255);a.writeByte(d.length&255);for(var e=0;e<d.length;e++)a.writeByte(d[e])}else a.writeByte(0),a.writeByte(0)}function e(a){var b=a.readByte()<<8|a.readByte();if(!b)return"";for(var d=new Uint8Array(b),e=0;e<b;e++)d[e]=a.readByte();return utf8encode(d)}function b(a,b){var d=new ArrayBuffer(8),e=new DataView(d);e.setFloat64(0,b,!1);for(var g=0;g<d.byteLength;g++)a.writeByte(e.getUint8(g))}
function d(a){for(var b=new ArrayBuffer(8),d=new DataView(b),e=0;e<b.byteLength;e++)d.setUint8(e,a.readByte());return d.getFloat64(0,!1)}function g(a){var b=a.readByte();if(0===(b&128))return b;var d=a.readByte();if(0===(d&128))return(b&127)<<7|d;var e=a.readByte();if(0===(e&128))return(b&127)<<14|(d&127)<<7|e;a=a.readByte();return(b&127)<<22|(d&127)<<15|(e&127)<<8|a}function f(a,b){if(0===(b&4294967168))a.writeByte(b&127);else if(0===(b&4294950912))a.writeByte(128|b>>7&127),a.writeByte(b&127);else if(0===
(b&4292870144))a.writeByte(128|b>>14&127),a.writeByte(128|b>>7&127),a.writeByte(b&127);else if(0===(b&3221225472))a.writeByte(128|b>>22&127),a.writeByte(128|b>>15&127),a.writeByte(128|b>>8&127),a.writeByte(b&255);else throw"AMF3 U29 range";}function l(a,b){var d=g(a);if(1===d)return"";var e=b.stringsCache||(b.stringsCache=[]);if(0===(d&1))return e[d>>1];for(var d=d>>1,f=new Uint8Array(d),l=0;l<d;l++)f[l]=a.readByte();d=utf8encode(f);e.push(d);return d}function m(a,b,d){if(""===b)a.writeByte(1);else{d=
d.stringsCache||(d.stringsCache=[]);var e=d.indexOf(b);if(0<=e)f(a,e<<1);else{d.push(b);b=utf8decode(b);f(a,1|b.length<<1);for(d=0;d<b.length;d++)a.writeByte(b[d])}}}function p(a,b){var e=a.readByte();switch(e){case 1:return null;case 0:break;case 2:return!1;case 3:return!0;case 4:return g(a);case 5:return d(a);case 6:return l(a,b);case 8:return new Date(d(a));case 10:var f=g(a);if(0===(f&1))return b.objectsCache[f>>1];if(0!==(f&4))throw"AMF3 Traits-Ext is not supported";var m;if(0===(f&2))e=b.traitsCache[f>>
2],m=e.class;else{var e={},r=l(a,b);m=(e.className=r)&&u.names[r];e.class=m;e.isDynamic=0!==(f&8);e.members=[];for(var v=m&&m.instanceBindings.slots,r=0,f=f>>4;r<f;r++){for(var G=l(a,b),C=null,f=1;v&&f<v.length;f++)if(v[f].name.name===G){C=v[f];break}e.members.push(C?Multiname.getQualifiedName(C.name):Multiname.getPublicQualifiedName(G))}(b.traitsCache||(b.traitsCache=[])).push(e)}m=m?m.createInstance():{};(b.objectsCache||(b.objectsCache=[])).push(m);for(r=0;r<e.members.length;r++)v=p(a,b),m[e.members[r]]=
v;if(e.isDynamic)for(;;){r=l(a,b);if(!r.length)break;v=p(a,b);m.asSetPublicProperty(r,v)}return m;case 9:f=g(a);if(0===(f&1))return b.objectsCache[f>>1];m=[];(b.objectsCache||(b.objectsCache=[])).push(m);for(e=f>>1;;){r=l(a,b);if(!r.length)break;v=p(a,b);m.asSetPublicProperty(r,v)}for(r=0;r<e;r++)v=p(a,b),m.asSetPublicProperty(r,v);return m;default:throw"AMF3 Unknown marker "+e;}}function r(a,b,d){d=d.objectsCache||(d.objectsCache=[]);var e=d.indexOf(b);if(0>e)return d.push(b),!1;f(a,e<<1);return!0}
function v(a,d,e){switch(typeof d){case "boolean":a.writeByte(d?3:2);break;case "number":d===(d|0)?(a.writeByte(4),f(a,d)):(a.writeByte(5),b(a,d));break;case "undefined":a.writeByte(0);break;case "string":a.writeByte(6);m(a,d,e);break;case "object":if(null===d)a.writeByte(1);else if(Array.isArray(d)){a.writeByte(9);if(r(a,d,e))break;for(var g=0;g in d;)++g;f(a,g<<1|1);forEachPublicProperty(d,function(b,d){if(!isNumeric(b)||!(0<=b&&b<g))m(a,b,e),v(a,d,e)});m(a,"",e);for(var l=0;l<g;l++)v(a,d[l],e)}else if(d instanceof
Date){a.writeByte(8);if(r(a,d,e))break;f(a,1);b(a,d.valueOf())}else{a.writeByte(10);if(r(a,d,e))break;var l=!0,p=d.class;if(p){var l=!p.classInfo.instanceInfo.isSealed(),D=u.classes.get(p)||"",G,C=e.traitsCache||(e.traitsCache=[]),E=e.traitsInfos||(e.traitsInfos=[]),I=C.indexOf(p);if(0>I){var K=p.instanceBindings.slots;G=[];for(var I=[],S=1;S<K.length;S++){var R=K[S];R.name.getNamespace().isPublic()&&(G.push(Multiname.getQualifiedName(R.name)),I.push(R.name.name))}C.push(p);E.push(G);p=I.length;f(a,
(l?11:3)+(p<<4));m(a,D,e);for(S=0;S<p;S++)m(a,I[S],e)}else G=E[I],p=G.length,f(a,1+(I<<2));for(S=0;S<p;S++)v(a,d[G[S]],e)}else f(a,11),m(a,"",e);l&&(forEachPublicProperty(d,function(b,d){m(a,b,e);v(a,d,e)}),m(a,"",e))}}}var u={classes:new WeakMap,names:Object.create(null)};return{encodings:[{write:function(d,e){switch(typeof e){case "boolean":d.writeByte(1);d.writeByte(e?1:0);break;case "number":d.writeByte(0);b(d,e);break;case "undefined":d.writeByte(6);break;case "string":d.writeByte(2);a(d,e);
break;case "object":null===e?d.writeByte(5):(Array.isArray(e)?(d.writeByte(8),d.writeByte(e.length>>>24&255),d.writeByte(e.length>>16&255),d.writeByte(e.length>>8&255),d.writeByte(e.length&255),forEachPublicProperty(e,function(b,e){a(d,b);this.write(d,e)},this)):(d.writeByte(3),forEachPublicProperty(e,function(b,e){a(d,b);this.write(d,e)},this)),d.writeByte(0),d.writeByte(0),d.writeByte(9))}},read:function(a){var b=a.readByte();switch(b){case 0:return d(a);case 1:return!!a.readByte();case 2:return e(a);
case 3:for(b={};;){var g=e(a);if(!g.length)break;var f=this.read(a);b.asSetPublicProperty(g,f)}if(9!==a.readByte())throw"AMF0 End marker is not found";return b;case 5:return null;case 6:break;case 8:b=[];for(b.length=a.readByte()<<24|a.readByte()<<16|a.readByte()<<8|a.readByte();;){g=e(a);if(!g.length)break;f=this.read(a);b.asSetPublicProperty(g,f)}if(9!==a.readByte())throw"AMF0 End marker is not found";return b;case 10:b=[];b.length=a.readByte()<<24|a.readByte()<<16|a.readByte()<<8|a.readByte();
for(g=0;g<b.length;g++)b[g]=this.read(a);return b;case 17:return p(a,{});default:throw"AMF0 Unknown marker "+b;}}},null,null,{write:function(a,b){v(a,b,{})},read:function(a){return p(a,{})}}],aliasesCache:u}}();function ProxyClass(a,e,b,d){function g(){somewhatImplemented("Proxy")}a=new Class("Proxy",g,ApplicationDomain.coerceCallable(g));a.extendBuiltin(d);return a}var proxyTrapQns={getProperty:null,setProperty:null,hasProperty:null,callProperty:null},name;
for(name in proxyTrapQns)proxyTrapQns[name]="method_"+Multiname.getQualifiedName(new Multiname([ShumwayNamespace.PROXY],name));var VM_IS_PROXY="vm is proxy",VM_CALL_PROXY="vm call proxy";function isProxyObject(a){return a["vm is proxy"]}function nameFromQualifiedName(a){if(isNumeric(a))return a;a=Multiname.fromQualifiedName(a);return void 0===a?void 0:a.name}function hasNonProxyingCaller(){for(var a=arguments.callee,e=0;5>e&&a;e++){if(a===nonProxyingHasProperty)return!0;a=a.caller}return!1}
function installProxyClassWrapper(a){var e=a.instanceConstructor;a.instanceConstructor=function(){var a=Object.create(e.prototype),d=Proxy.create({get:function(d,e){if("vm is proxy"===e)return!0;if("vm call proxy"===e)return function(e,f,l){f=(f=Multiname.isQName(e)?e:resolveMultiname(a,e))?Multiname.getQualifiedName(f):Multiname.getPublicQualifiedName(e.name);if(!nameInTraits(a,f))return a[proxyTrapQns.callProperty](e.name,l);if(a["vm open methods"]&&a["vm open methods"][f])return a["vm open methods"][f].apply(d,
l)};if(!hasNonProxyingCaller()){var l=nameFromQualifiedName(e);if(void 0!==l&&!nameInTraits(a,e))return a[proxyTrapQns.getProperty](l)}return a["vm open methods"]&&a["vm open methods"][e]?bindSafely(a["vm open methods"][e],d):a[e]},set:function(d,e,l){if(!hasNonProxyingCaller()&&(d=nameFromQualifiedName(e),void 0!==d&&!nameInTraits(a,e))){a[proxyTrapQns.setProperty](d,l);return}a[e]=l},has:function(d){if(!hasNonProxyingCaller()){var e=nameFromQualifiedName(d);if(void 0!==e&&!nameInTraits(a,d))return a[proxyTrapQns.hasProperty](e)}return d in
a},hasOwn:function(d){if(!hasNonProxyingCaller()){var e=nameFromQualifiedName(d);if(void 0!==e&&!nameInTraits(a,d))return a[proxyTrapQns.hasProperty](e)}return!!Object.getOwnPropertyDescriptor(a,d)},enumerate:function(){notImplemented("enumerate")},keys:function(){notImplemented("keys")}},e.prototype);e.apply(d,sliceArguments(arguments,0));return d}}
function DictionaryClass(a,e,b,d){function g(a){this.weakKeys=a;this.map=new WeakMap;a||(this.keys=[]);this.primitiveMap=createEmptyObject()}function f(a){if("string"===typeof a||"number"===typeof a)return a}a=new Class("Dictionary",g,ApplicationDomain.passthroughCallable(g));a.extendNative(d,g);var l=g.prototype;defineNonEnumerableProperty(l,"asGetProperty",function(a,b){var d=f(b);return void 0!==d?this.primitiveMap[d]:this.map.get(Object(b))});defineNonEnumerableProperty(l,"asGetResolvedStringProperty",
asGetResolvedStringPropertyFallback);defineNonEnumerableProperty(l,"asSetProperty",function(a,b,d,e){a=f(b);void 0!==a?this.primitiveMap[a]=e:(this.map.set(Object(b),e),!this.weakKeys&&0>this.keys.indexOf(b)&&this.keys.push(b))});defineNonEnumerableProperty(l,"asCallProperty",function(){notImplemented("asCallProperty")});defineNonEnumerableProperty(l,"asHasProperty",function(a,b){var d=f(b);return void 0!==d?d in this.primitiveMap:this.map.has(Object(b))});defineNonEnumerableProperty(l,"asDeleteProperty",
function(a,b){var d=f(b);void 0!==d&&delete this.primitiveMap[d];this.map.delete(Object(b));var e;!this.weakKeys&&0<=(e=this.keys.indexOf(b))&&this.keys.splice(e,1);return!0});defineNonEnumerableProperty(l,"asGetEnumerableKeys",function(){if(l===this)return Object.prototype.asGetEnumerableKeys.call(this);var a=[],b;for(b in this.primitiveMap)a.push(b);return this.weakKeys?a:a.concat(this.keys)});a.native={instance:{init:function(){}}};return a}
function debugBreak(a){debugger;print("\u001b[91mdebugBreak: "+a+"\u001b[0m")}
var ASNamespace,natives=function(){function a(a,b){var d;if(a){var e="Vector$"+a.classInfo.instanceInfo.name.name;switch(e){case "Vector$int":d=Int32Vector;break;case "Vector$uint":d=Uint32Vector;break;case "Vector$Number":d=Float64Vector;break;case "Vector$Object":d=GenericVector;break;default:unexpected()}}else d=GenericVector.applyType(null);var g=d.prototype,f=new Class(e,d,p(d.callable));d===GenericVector&&(f.applyType=function(){return f});f.extendWrapper(b,d);f.native={instance:{fixed:{get:function(){return this._fixed},
set:function(a){this._fixed=a}},length:{get:function(){return this.length},set:function(a){this.length=a}},push:g.push,pop:g.pop,shift:g.shift,unshift:g.unshift,_reverse:g.reverse,_filter:g.filter,_map:g.map,newThisType:function(){return new f.instanceConstructor},_spliceHelper:function(a,b,d,e,g){return this._spliceHelper(a,b,d,e,g)}},"static":{_some:function(a,b,d){return a.some(b,d)},_every:function(a,b,d){return a.every(b,d)},_forEach:function(a,b,d){return a.forEach(b,d)},_sort:arraySort}};f.vectorType=
a;f.coerce=function(a){return a};f.isInstanceOf=function(){return!0};f.isInstance=function(a){return null===a||"object"!==typeof a?!1:!this.instanceConstructor.vectorType&&a.class.vectorType?!0:this.instanceConstructor.prototype.isPrototypeOf(a)};return f}function e(a){return a|0}function b(a){return Object(a|0)}function d(a){return a>>>0}function g(a){return Object(a>>>0)}function f(a){var b={__glue__:{script:{instance:{message:"public message",name:"public name"}},"native":{instance:{getStackTrace:function(){somewhatImplemented("Error.getStackTrace()");
return AVM2.getStackTrace()}},"static":{getErrorMessage:getErrorMessage}}}};return function(d,e,g,f){d=new Class(a,g);d.extend(f);"Error"===a&&(d.link(b),d.linkNatives(b));return d}}function l(a,b,d,e){a=new Class("RegExp",XRegExp,p(XRegExp));a.extendBuiltin(e);l.exec=function(){var a=this.exec.apply(this,arguments);if(!a)return a;for(var b=Object.keys(a),d=0;d<b.length;d++){var e=b[d];isNumeric(e)||void 0===a[e]&&(a[e]="")}publicizeProperties(a);return a};l.test=function(){return null!==this.exec.apply(this,
arguments)};a.native={instance:{global:{get:function(){return this.global}},source:{get:function(){return this.source}},ignoreCase:{get:function(){return this.ignoreCase}},multiline:{get:function(){return this.multiline}},lastIndex:{get:function(){return this.lastIndex},set:function(a){this.lastIndex=a}},dotall:{get:function(){return this.dotall}},extended:{get:function(){return this.extended}},exec:l.exec,test:l.test}};return a}function m(a){return function(){return a}}var p=ApplicationDomain.passthroughCallable;
return{print:m(print),notImplemented:m(notImplemented),debugBreak:m(debugBreak),bugzilla:m(function(a){switch(a){case 574600:return!0}return!1}),decodeURI:m(decodeURI),decodeURIComponent:m(decodeURIComponent),encodeURI:m(encodeURI),encodeURIComponent:m(encodeURIComponent),isNaN:m(isNaN),isFinite:m(isFinite),parseInt:m(parseInt),parseFloat:m(parseFloat),escape:m(escape),unescape:m(unescape),isXMLName:m("undefined"!==typeof isXMLName?isXMLName:function(){notImplemented("Chrome doesn't support isXMLName.")}),
Function:Function,String:String,Array:Array,Number:Number,Boolean:Boolean,Math:Math,Date:Date,RegExp:RegExp,Object:Object,ObjectClass:function(){var a=new Class("Object",Object,p(Object));a.native={instance:{isPrototypeOf:Object.prototype.isPrototypeOf,hasOwnProperty:function(a){if(void 0===a)return!1;a=Multiname.getPublicQualifiedName(a);return Object.prototype.hasOwnProperty.call(this,a)?!0:Object.getPrototypeOf(this).hasOwnProperty(a)},propertyIsEnumerable:function(a){if(void 0===a)return!1;a=
Multiname.getPublicQualifiedName(a);return Object.prototype.propertyIsEnumerable.call(this,a)}},"static":{_setPropertyIsEnumerable:function(a,b){b=Multiname.getPublicQualifiedName(b);var d=Object.getOwnPropertyDescriptor(a,b);d.enumerable=!1;Object.defineProperty(a,b,d)}}};a.dynamicPrototype=a.traitsPrototype=Object.prototype;a.setDefaultProperties();a.defaultValue=null;a.coerce=function(a){return asCoerceObject(a)};a.isInstanceOf=function(a){return null===a?!1:!0};a.isInstance=function(a){return null===
a||void 0===a?!1:!0};return a},Class:function(a,b,d,e){var g=Class;g.debugName="Class";g.prototype.extendBuiltin.call(g,e);g.coerce=function(a){return a};g.isInstanceOf=function(){return!0};g.isInstance=function(a){return a instanceof g.instanceConstructor};return g},NamespaceClass:function(a,b,d,e){ASNamespace=function(a,b){void 0===b&&(b=a,a=void 0);var d,e;if(void 0===a)void 0===b?e=d="":"object"===typeof b?(d=b.prefix,b instanceof ShumwayNamespace?e=b.originalURI:b instanceof QName&&(e=b.uri)):
(e=b+"",d=""===e?"":void 0);else if(e="object"===typeof b&&b instanceof QName&&null!==b.uri?b.uri:b+"",""===e)if(void 0===a||""===a+"")d="";else throw"type error";else d=void 0===a||""===a?void 0:a+"";return ShumwayNamespace.createNamespace(e,d)};a=new Class("Namespace",ASNamespace,p(ASNamespace));a.extendNative(e,ShumwayNamespace);e=ShumwayNamespace.prototype;a.native={instance:{prefix:{get:e.getPrefix},uri:{get:e.getURI}}};return a},FunctionClass:function(a,b,d,e){a=new Class("Function",Function,
p(Function));a.extendBuiltin(e);a.native={instance:{prototype:{get:function(){return this.prototype},set:function(a){this.prototype=a}},length:{get:function(){return this.hasOwnProperty("vm length")?this["vm length"]:this.length}},call:Function.prototype.call,apply:Function.prototype.apply}};a.coerce=function(a){return a};a.isInstanceOf=function(a){return"function"===typeof a};a.isInstance=function(a){return"function"===typeof a};return a},MethodClosureClass:function(a,b,d,e){a=new Class("MethodClosure",
MethodClosure);a.extendBuiltin(e);return a},BooleanClass:function(a,b,d,e){a=new Class("Boolean",Boolean,p(Boolean));a.extendBuiltin(e);a.native={instance:{toString:Boolean.prototype.toString,valueOf:Boolean.prototype.valueOf}};a.coerce=Boolean;a.isInstanceOf=function(a){return"boolean"===typeof a||a instanceof Boolean};a.isInstance=function(a){return"boolean"===typeof a||a instanceof Boolean?!0:!1};return a},StringClass:function(a,b,d,e){a=new Class("String",String,p(String));a.extendBuiltin(e);
var g=String.prototype;a.native={instance:{length:{get:function(){return this.length}},indexOf:g.indexOf,lastIndexOf:g.lastIndexOf,charAt:g.charAt,charCodeAt:g.charCodeAt,concat:g.concat,localeCompare:g.localeCompare,match:function(a){if(void 0===a||null===a)return null;if(a instanceof RegExp&&a.global){for(var b=[],d;d=a.exec(this);)b.push(d[0]);return b}!(a instanceof RegExp)&&"string"!==typeof a&&(a=String(a));return this.match(a)},replace:g.replace,search:function(a){return void 0===a?-1:this.search(a)},
slice:g.slice,split:g.split,substr:g.substr,substring:g.substring,toLowerCase:g.toLowerCase,toLocaleLowerCase:g.toLocaleLowerCase,toUpperCase:function(){var a=g.toUpperCase.apply(this);return a=a.replace(/\u039C/g,String.fromCharCode(181))},toLocaleUpperCase:function(){var a=g.toLocaleUpperCase.apply(this);return a=a.replace(/\u039C/g,String.fromCharCode(181))},toString:g.toString,valueOf:g.valueOf},"static":String};a.isInstance=function(a){return null!==a&&void 0!==a&&"string"===typeof a.valueOf()};
a.coerce=function(a){return null===a||void 0===a?null:String(a)};a.isInstanceOf=function(a){return Object(a)instanceof String};a.isInstance=function(a){return Object(a)instanceof String};return a},NumberClass:function(a,b,d,e){a=new Class("Number",Number,p(Number));a.extendBuiltin(e);a.native={instance:Number.prototype};a.defaultValue=Number(0);a.isInstance=function(a){return null!==a&&void 0!==a&&"number"===typeof a.valueOf()};a.coerce=Number;a.isInstanceOf=function(a){return Object(a)instanceof
Number};a.isInstance=function(a){return Object(a)instanceof Number};return a},intClass:function(a,d,g,f){a=new Class("int",b,p(e));a.extendBuiltin(f);a.defaultValue=0;a.coerce=e;a.isInstanceOf=function(){return!1};a.isInstance=function(a){a instanceof Number&&(a=a.valueOf());return(a|0)===a};return a},uintClass:function(a,b,e,f){a=new Class("uint",g,p(d));a.extend(f);a.defaultValue=0;a.isInstanceOf=function(){return!1};a.isInstance=function(a){a instanceof Number&&(a=a.valueOf());return a>>>0===a};
a.coerce=d;return a},ArrayClass:ArrayClass,VectorClass:function(b,d,e,g){return a(void 0,g)},ObjectVectorClass:function(b,d,e,g){return a(b.getClass("Object"),g)},IntVectorClass:function(b,d,e,g){return a(b.getClass("int"),g)},UIntVectorClass:function(b,d,e,g){return a(b.getClass("uint"),g)},DoubleVectorClass:function(b,d,e,g){return a(b.getClass("Number"),g)},ByteArrayClass:function(a,b,d,e){b=function(){ByteArray.call(this)};a=b.prototype=Object.create(ByteArray.prototype);b=new Class("ByteArray",
b,p(b));b.extendBuiltin(e);a.asGetNumericProperty=function(a){return a>=this.length?void 0:this.uint8v[a]};a.asSetNumericProperty=function(a,b){var d=a+1;this.ensureCapacity(d);this.uint8v[a]=b;d>this.length&&(this.length=d)};a.readUTF=function(){return this.readUTFBytes(this.readShort())};a.readUTFBytes=function(a){var b=this.position;b+a>this.length&&throwEOFError();this.position+=a;return utf8encode(new Int8Array(this.a,b,a))};a.writeUTF=function(a){a=utf8decode(a);this.writeShort(a.length);this.writeRawBytes(a)};
a.writeUTFBytes=function(a){a=utf8decode(a);this.writeRawBytes(a)};a.toString=function(){return utf8encode(new Int8Array(this.a,0,this.length))};b.native={instance:{length:{get:function(){return this.length},set:function(a){a>this.a.byteLength&&this.ensureCapacity(a);this.length=a;this.position=clamp(this.position,0,this.length)}},bytesAvailable:{get:function(){return this.length-this.position}},position:{get:function(){return this.position},set:function(a){this.position=a}},endian:{get:function(){return this.le?
"littleEndian":"bigEndian"},set:function(a){this.le="littleEndian"===a}},objectEncoding:{get:function(){return this.objectEncoding},set:function(a){this.objectEncoding=a}},writeBytes:a.writeBytes,writeBoolean:a.writeBoolean,writeByte:a.writeByte,writeShort:a.writeShort,writeInt:a.writeInt,writeUnsignedInt:a.writeUnsignedInt,writeFloat:a.writeFloat,writeDouble:a.writeDouble,writeMultiByte:a.writeMultiByte,writeObject:function(a){return AMFUtils.encodings[this.objectEncoding].write(this,a)},writeUTF:a.writeUTF,
writeUTFBytes:a.writeUTFBytes,readBoolean:a.readBoolean,readByte:a.readByte,readBytes:a.readBytes,readUnsignedByte:a.readUnsignedByte,readShort:a.readShort,readUnsignedShort:a.readUnsignedShort,readInt:a.readInt,readUnsignedInt:a.readUnsignedInt,readFloat:a.readFloat,readDouble:a.readDouble,readMultiByte:a.readMultiByte,readObject:function(){return AMFUtils.encodings[this.objectEncoding].read(this)},readUTF:a.readUTF,readUTFBytes:a.readUTFBytes,toString:a.toString,clear:a.clear,_compress:a.compress,
_uncompress:a.uncompress},"static":{defaultObjectEncoding:{get:function(){return ByteArray.DEFAULT_OBJECT_ENCODING},set:function(a){ByteArray.DEFAULT_OBJECT_ENCODING=a}}}};return b},ProxyClass:ProxyClass,ErrorClass:f("Error"),DefinitionErrorClass:f("DefinitionError"),EvalErrorClass:f("EvalError"),RangeErrorClass:f("RangeError"),ReferenceErrorClass:f("ReferenceError"),SecurityErrorClass:f("SecurityError"),SyntaxErrorClass:f("SyntaxError"),TypeErrorClass:f("TypeError"),URIErrorClass:f("URIError"),VerifyErrorClass:f("VerifyError"),
UninitializedErrorClass:f("UninitializedError"),ArgumentErrorClass:f("ArgumentError"),DateClass:function(a,b,d,e){a=new Class("Date",Date,p(Date));a.extendBuiltin(e);a.native={instance:Date.prototype,"static":Date};return a},MathClass:function(){var a=new Class("Math");a.native={"static":Math};return a},RegExpClass:l,DictionaryClass:DictionaryClass,XMLClass:XMLClass,XMLListClass:XMLListClass,QNameClass:QNameClass,JSONClass:function(a,b,d,e){function g(a){if("object"!==typeof a)return a;for(var b=
Object.keys(a),d=a instanceof Array?[]:{},e=0;e<b.length;e++)d.asSetPublicProperty(b[e],g(a[b[e]]));return d}function f(a){if("object"!==typeof a)return a;for(var b=Object.keys(a),d=a instanceof Array?[]:{},e=0;e<b.length;e++){var g=b[e],l=g;isNumeric(g)||(l=fromResolvedName(g));d[l]=f(a[g])}return d}function l(){}a=new Class("JSON",l,p(l));a.extend(e);a.native={"static":{parseCore:function(a){return g(JSON.parse(a))},stringifySpecializedToString:function(a,b,d,e){return JSON.stringify(f(a),d,e)}}};
return a},ShumwayClass:function(a,b,d,e){function g(){}a=new Class("Shumway",g,p(g));a.extend(e);a.native={"static":{info:function(a){console.info(a)},json:function(a){return JSON.stringify(a)},eval:function(a){return eval(a)},"debugger":function(){debugger}}};return a},CapabilitiesClass:function(a,b,d,e){function g(){}a=new Class("Capabilities",g,p(g));a.extend(e);a.native={"static":{playerType:{get:function(){return"AVMPlus"}}}};return a},FileClass:function(a,b,d,e){function g(){}a=new Class("File",
g,p(g));a.extend(e);a.native={"static":{exists:function(){notImplemented("File.exists");return!1},read:function(a){return snarf(a)},write:function(){notImplemented("File.write");return!0},readByteArray:function(a){var b=AVM2.currentDomain().getClass("flash.utils.ByteArray").createInstance();b.writeRawBytes(snarf(a,"binary"));return b},writeByteArray:function(a,b){write("bin/"+a,b.getBytes());return!0}}};return a},DomainClass:function(a,b,d,e){a=new Class("File",d,p(d));a.extend(e);a.native={instance:{init:function(a){this.base=
a;this.nativeObject=new ApplicationDomain(avm2,a?a.nativeObject:null)},loadBytes:function(a){this.nativeObject.executeAbc(new AbcFile(a.readRawBytes()))},getClass:function(a){return this.nativeObject.getClass(a)}},"static":{currentDomain:{get:function(){var a=Object.create(d.prototype);a.nativeObject=AVM2.currentDomain();return a}}}};return a},SystemClass:function(a,b,d,e){a=new Class("System",d,p(d));a.extend(e);a.native={"static":{swfVersion:{get:function(){return 19}},apiVersion:{get:function(){return 26}},
getArgv:function(){return[]},getRunmode:function(){return"mixed"}}};return a},getQualifiedClassName:m(function(a){if(null===a)return"null";if(void 0===a)return"void";switch(typeof a){case "number":return(a|0)===a?"int":"Number";case "string":return"String";case "boolean":return"Boolean";case "object":if(a instanceof Date)return"Date";var b;a instanceof Class?b=a:a.class?b=a.class:a.classInfo&&(b=a);if(b)return a=b.classInfo.instanceInfo.name,(b=a.namespaces[0].originalURI)?b+"::"+a.name:a.name}return notImplemented(a+
" ("+typeof a+")")}),getQualifiedSuperclassName:m(function(a){switch(typeof a){case "number":case "string":case "boolean":return"Object";case "function":return"Function";case "object":if(a instanceof Date)return"Object";var b;a.class?b=a.class:a.classInfo&&(b=a);return b&&b.baseClass?(a=b.baseClass.classInfo.instanceInfo.name,(b=a.namespaces[0].originalURI)?b+"::"+a.name:a.name):"Object"}return notImplemented(a+" (superOf "+typeof a+")")}),getDefinitionByName:m(function(a){a=String(a).replace("::",
".");return AVM2.currentDomain().getClass(a)}),describeTypeJSON:m(function(a,b){function d(a){return Multiname.getPublicQualifiedName(a)}function e(a){var b=a.name;return(a=a.namespaces[0])&&a.originalURI?a.originalURI+"::"+b:b}function g(a){var b={};b[D]=a.name;b[E]=a.value.map(function(a){return a});return b}var f=d("declaredBy"),l=d("metadata"),m=d("access"),p=d("uri"),D=d("name"),G=d("type"),C=d("returnType"),E=d("value");d("key");var I=d("parameters"),K=d("optional"),S=a.classInfo?a:Object.getPrototypeOf(a).class;
!0;var R=S.classInfo,L={};L[D]=e(R.instanceInfo.name);L[d("isDynamic")]=S===a?!0:!(R.instanceInfo.flags&1);L[d("isStatic")]=S===a;L[d("isFinal")]=S===a?!0:!(R.instanceInfo.flags&2);if(b&256){var F=d("traits"),O=function(a){!0;for(var b=0;a&&b<a.length;b++){var d=a[b];if(N[d.kind]&&(d.name.getNamespace().isPublic()||d.name.uri)){var r=e(d.name);if($[r]){var v=$[r];v[m]="readwrite";2===d.kind&&(v[G]=e(d.methodInfo.returnType))}else{v={};if(P&&d.metadata){var u=v[l]=[],E;for(E in d.metadata)u.push(g(d.metadata[E]))}else v[l]=
null;v[f]=ca;v[p]=void 0===d.name.uri?null:d.name.uri;v[D]=r;if(d.typeName||d.methodInfo&&d.methodInfo.returnType)switch(v[d.kind===TRAIT_Method?C:G]=e(0===d.kind?d.typeName:d.methodInfo.returnType),d.kind){case 0:v[m]="readwrite";W.push(v);break;case 1:r=v[I]=[];d=d.methodInfo.parameters;for(u=0;u<d.length;u++){var F=d[u],H={};H[G]=F.type?e(F.type):"*";H[K]="value"in F;r.push(H)}fa.push(v);break;case 2:case 3:v[m]=2===d.kind?"read":"write",ga.push(v),$[r]=v}}}}},N=[b&8,b&32,b&16,b&16],H=b&2,P=b&
64,M={},U=M[d("bases")]=H?[]:null;if(b&4){var J=M[d("interfaces")]=[];if(b&512)for(var Q in S.implementedInterfaces)J.push(e(S.implementedInterfaces[Q].name))}else M[d("interfaces")]=null;var W=M[d("variables")]=b&8?[]:null,ga=M[d("accessors")]=b&16?[]:null,fa=M[d("methods")]=b&32?[]:null,$={};for(Q=!1;S;){var ca=e(S.classInfo.instanceInfo.name);H&&Q?U.push(ca):Q=!0;b&512?O(S.classInfo.instanceInfo.traits):O(S.classInfo.traits);S=S.baseClass}L[F]=M}F=null;R.metadata&&(F=Object.keys(R.metadata).map(function(a){return g(R.metadata[a])}));
L[l]=F;return L}),original:jsGlobal["vm originals"]}}();function getNative(a){a=a.split(".");for(var e=natives,b=0,d=a.length;b<d;b++)e=e&&e[a[b]];!0;return e}var disassemblerOptions=systemOptions.register(new OptionSet("Disassembler Options")),filter=disassemblerOptions.register(new Option("f","filter","string","SpciMsmNtu","[S]ource, constant[p]ool, [c]lasses, [i]nstances, [M]etadata, [s]cripts, [m]ethods, multi[N]ames, S[t]atistics, [u]tf"));
function traceArray(a,e,b,d){0!==b.length&&(a.enter(e+" {"),b.forEach(function(b){b.trace(a,d)}),a.leave("}"))}
AbcFile.prototype.trace=function(a){0<=filter.value.indexOf("p")&&this.constantPool.trace(a);0<=filter.value.indexOf("N")&&this.constantPool.traceMultinamesOnly(a);0<=filter.value.indexOf("c")&&traceArray(a,"classes",this.classes);0<=filter.value.indexOf("i")&&traceArray(a,"instances",this.instances);0<=filter.value.indexOf("M")&&traceArray(a,"metadata",this.metadata);0<=filter.value.indexOf("s")&&traceArray(a,"scripts",this.scripts);0<=filter.value.indexOf("m")&&traceArray(a,"methods",this.methods,
this);0<=filter.value.indexOf("S")&&traceSource(a,this);0<=filter.value.indexOf("t")&&traceStatistics(a,this);0<=filter.value.indexOf("u")&&print(JSON.stringify({strings:this.constantPool.strings,positionAfterUTFStrings:this.constantPool.positionAfterUTFStrings},null,2))};
ConstantPool.prototype.trace=function(a){a.enter("constantPool {");for(var e in this)"namespaces"===e?(a.enter("namespaces {"),this.namespaces.forEach(function(b,d){a.writeLn((""+d).padRight(" ",3)+(b?b.toString():"*"))}),a.leave("}")):this[e]instanceof Array&&(a.enter(e+" "+this[e].length+" {"),a.writeArray(this[e]),a.leave("}"));a.leave("}")};ConstantPool.prototype.traceMultinamesOnly=function(a){a.writeArray(this.multinames,null,!0)};
ClassInfo.prototype.trace=function(a){a.enter("class "+this+" {");traceArray(a,"traits",this.traits);a.leave("}")};MetaDataInfo.prototype.trace=function(a){a.enter(this+" {");this.value.forEach(function(e){a.writeLn((e.key?e.key+": ":"")+'"'+e.value+'"')});a.leave("}")};InstanceInfo.prototype.trace=function(a){a.enter("instance "+this+" {");traceArray(a,"traits",this.traits);a.leave("}")};ScriptInfo.prototype.trace=function(a){a.enter("script "+this+" {");traceArray(a,"traits",this.traits);a.leave("}")};
Trait.prototype.trace=function(a){if(this.metadata)for(var e in this.metadata)this.metadata.hasOwnProperty(e)&&this.metadata[e].trace(a);a.writeLn(this)};function traceAbc(a,e){e.trace(a)}
function traceOperand(a,e,b){var d=0;switch(a.size){case "s08":d=b.readS8();break;case "u08":d=b.readU8();break;case "s16":d=b.readS16();break;case "s24":d=b.readS24();break;case "u30":d=b.readU30();break;case "u32":d=b.readU32();break;default:!0}b="";switch(a.type){case "":break;case "I":b=e.constantPool.ints[d];break;case "U":b=e.constantPool.uints[d];break;case "D":b=e.constantPool.doubles[d];break;case "S":b=e.constantPool.strings[d];break;case "N":b=e.constantPool.namespaces[d];break;case "CI":b=
e.classes[d];break;case "M":return e.constantPool.multinames[d];default:b="?"}return a.name+":"+d+(""===b?"":" ("+b+")")}function traceOperands(a,e,b,d){d=d||!1;var g=b.position,f="";null===a.operands?f="null":a.operands.forEach(function(d,g){f+=traceOperand(d,e,b);g<a.operands.length-1&&(f+=", ")});d&&b.seek(g);return f}
MethodInfo.prototype.trace=function(a){var e=this.abc;a.enter("method"+(this.name?" "+this.name:"")+" {");a.writeLn("flags: "+getFlags(this.flags,"NEED_ARGUMENTS NEED_ACTIVATION NEED_REST HAS_OPTIONAL  NATIVE SET_DXN HAS_PARAM_NAMES".split(" ")));a.writeLn("parameters: "+this.parameters.map(function(a){return(a.type?Multiname.getQualifiedName(a.type)+"::":"")+a.name}));if(this.code){var b=new AbcStream(this.code);traceArray(a,"traits",this.traits);for(a.enter("code {");0<b.remaining();){var d=b.readU8(),
g=opcodeTable[d],f;f=(""+b.position).padRight(" ",6);switch(d){case 27:f+=g.name+": defaultOffset: "+b.readS24();d=b.readU30();f+=", caseCount: "+d;for(g=0;g<d+1;g++)f+=" offset: "+b.readS24();a.writeLn(f);break;default:g?(f+=g.name.padRight(" ",20),g.operands?(0<g.operands.length&&(f+=traceOperands(g,e,b)),a.writeLn(f)):!0):!0}}a.leave("}")}a.leave("}")};
var SourceTracer=function(){function a(a){return void 0===a?"undefined":null===a?"null":"string"===typeof a?'"'+a+'"':String(a)}function e(b,e){return b.parameters.map(function(b){var d=b.name;e||(b.type&&(d+=":"+b.type.getName()),void 0!==b.value&&(d+=" = "+a(b.value)));return d}).join(", ")}function b(a){this.writer=a}b.prototype={traceTraits:function(b,g,f){var l=this.writer,m=this;b.forEach(function(b){var d;d=Multiname.getAccessModifier(b.name);var v=b.name.namespaces[0].originalURI;v&&("http://adobe.com/AS3/2006/builtin"===
v&&(v="AS3"),d="public"===d?f===v?"":v:d);g&&(d+=" static");if(b.isSlot()||b.isConst())m.traceMetadata(b.metadata),d=b.isConst()?d+" const":d+" var",d+=" "+b.name.getName(),b.typeName&&(d+=":"+b.typeName.getName()),b.value&&(d+=" = "+a(b.value)),l.writeLn(d+";");else if(b.isMethod()||b.isGetter()||b.isSetter()){m.traceMetadata(b.metadata);v=b.methodInfo;b.attributes&2&&(d+=" override");v.isNative()&&(d+=" native");d=d+" function"+(b.isGetter()?" get":b.isSetter()?" set":"");d+=" "+b.name.getName();
d+="("+e(v)+")";d+=v.returnType?":"+v.returnType.getName():"";var u;b.holder instanceof ClassInfo?(u=b.holder.instanceInfo.name,u.getName()):b.holder instanceof InstanceInfo&&(u=b.holder.name,u.getName());b.isGetter()||b.isSetter();v.isNative();v.isNative()?l.writeLn(d+";"):f?l.writeLn(d+";"):l.writeLn(d+' { notImplemented("'+b.name.getName()+'"); }')}else b.isClass()?(u=b.classInfo.instanceInfo.name,l.enter("package "+u.namespaces[0].originalURI+" {\n"),m.traceMetadata(b.metadata),m.traceClass(b.classInfo),
l.leave("\n}"),m.traceClassStub(b)):notImplemented()})},traceClassStub2:function(a){function b(a){var d=[];a.forEach(function(a){(a.isMethod()||a.isGetter()||a.isSetter())&&a.methodInfo.isNative()&&d.push(a)});d.forEach(function(a,b){var g=a.methodInfo,l=a.name.getName();f.writeLn("// "+l+" :: "+(g.parameters.length?e(g):"void")+" -> "+(g.returnType?g.returnType.getName():"any"));var m;m=a.isGetter()?'"get '+l+'"':a.isSetter()?'"set '+l+'"':l;f.enter(m+": function "+l+"("+e(g,!0)+") {");f.writeLn('  notImplemented("'+
p+"."+l+'");');f.leave("}"+(b===d.length-1?"":",\n"))})}var f=this.writer,l=a.classInfo,m=l.instanceInfo,p=m.name.getName();a=a.metadata?a.metadata.native:null;if(!a)return!1;f.writeLn("Cut and paste the following into `native.js' and edit accordingly");f.writeLn("8< --------------------------------------------------------------");f.enter("natives."+a.cls+" = function "+a.cls+"(runtime, scope, instanceConstructor, baseClass) {");f.writeLn('var c = new Class("'+p+'", instanceConstructor, ApplicationDomain.passthroughCallable(instanceConstructor));');
f.writeLn("c.extend(baseClass);\n");f.enter("c.nativeStatics = {");b(l.traits,!0);f.leave("};\n");f.enter("c.nativeMethods = {");b(m.traits);f.leave("};\n");f.writeLn("return c;");f.leave("};");f.writeLn("-------------------------------------------------------------- >8");return!0},traceClassStub:function(a){function b(a,d,g){function l(a,b){var d=a.methodInfo,p=a.name.getName(),r="// ("+(d.parameters.length?e(d):"void")+") -> "+(d.returnType?d.returnType.getName():"any"),v=p;a.isGetter()?v="get":
a.isSetter()&&(v="set");f.enter(v+": function "+p+"("+e(d,!0)+") { "+r);f.writeLn('notImplemented("'+m+"."+p+'");');g||(a.isGetter()?f.writeLn("return this._"+p+";"):a.isSetter()&&f.writeLn("this._"+p+" = "+d.parameters[0].name+";"));f.leave("}"+(b?",":""))}var p=a;a={properties:p.filter(function(a){return!d&&!(a.isMethod()||a.isGetter()||a.isSetter())}),methods:p.filter(function(a){return(a.isMethod()||a.isGetter()||a.isSetter())&&d===a.methodInfo.isNative()})};var z=[],s=createEmptyObject();a.methods.forEach(function(a){var b=
a.name.getName();a.isGetter()||a.isSetter()?(s[b]||(s[b]=[]),s[b].push(a)):z.push(a)});for(p=0;p<z.length;p++)l(z[p],p<z.length-1);for(var B=toKeyValueArray(s),y=0;y<B.length;y++){f.enter(B[y][0]+": {");for(var D=B[y][1],p=0;p<D.length;p++)l(D[p],p<D.length-1);f.leave("}"+(y<B.length-1?",":""))}a.properties.forEach(function(b,d){var e=b.name.getName(),g=d===a.properties.length-1;b.name.getNamespace().isPublic()&&f.writeLn(e+": "+("'public "+b.name.name+"'")+(g?"":","))})}var f=this.writer;a=a.classInfo;
var l=a.instanceInfo,m=l.name.getName();f.writeLn("Cut and paste the following glue and edit accordingly.");f.writeLn("Class "+l);f.writeLn("8< --------------------------------------------------------------");var p=l.name.namespaces[0].originalURI;f.enter("var "+m+"Definition = (function () {");f.enter("return {");f.writeLn("// ("+e(l.init,!1)+")");f.writeLn('__class__: "'+p+"."+m+'",');f.enter("initialize: function () {");f.leave("},");f.enter("__glue__: {");f.enter("native: {");f.enter("static: {");
b(a.traits,!0,!0);f.leave("},");f.enter("instance: {");b(l.traits,!0);f.leave("}");f.leave("},");f.enter("script: {");f.writeLn("instance: Glue.ALL");f.leave("}");f.leave("}");f.leave("};");f.leave("}).call(this);");f.writeLn("-------------------------------------------------------------- >8");return!0},traceClass:function(a){var b=this.writer,f=a.instanceInfo,l=f.name,m=Multiname.getAccessModifier(l);f.isFinal()&&(m+=" final");f.isSealed()||(m+=" dynamic");m+=f.isInterface()?" interface ":" class ";
m+=l.getName();f.superName&&"Object"!==f.superName.getName()&&(m+=" extends "+f.superName.getName());f.interfaces.length&&(m+=" implements "+f.interfaces.map(function(a){return a.getName()}).join(", "));b.enter(m+" {");f.isInterface()||b.writeLn("public function "+l.getName()+"("+e(f.init)+") {}");var p;f.isInterface()&&(p=l.namespaces[0].originalURI+":"+l.name);this.traceTraits(a.traits,!0,p);this.traceTraits(f.traits,!1,p);b.leave("}")},traceMetadata:function(a){var b=this.writer,e;for(e in a)a.hasOwnProperty(e)&&
0!==e.indexOf("__")&&b.writeLn("["+e+"("+a[e].value.map(function(a){return(a.key?a.key+"=":"")+'"'+a.value+'"'}).join(", ")+")]")}};return b}();function traceSource(a,e){var b=new SourceTracer(a);e.scripts.forEach(function(a){b.traceTraits(a.traits)})}
function traceStatistics(a,e){var b=new metrics.Counter(!0),d=new metrics.Counter(!0),g=new metrics.Counter(!0),f=new metrics.Counter(!0),l={},m={},p={};e.classes.forEach(function(a){l[a.instanceInfo.name.name]=!0});e.scripts.forEach(function(a){a.traits.forEach(function(a){if(a.isClass()){var b=a.classInfo.instanceInfo.superName?a.classInfo.instanceInfo.superName.name:"?";b in l||d.count(b);a.classInfo.traits.forEach(function(a){a.isMethod()?m[a.name.name]=!0:p[a.name.name]=!0});a.classInfo.instanceInfo.traits.forEach(function(a){a.isMethod()&&
!(a.attributes&2)?m[a.name.name]=!0:p[a.name.name]=!0})}})});var r=new metrics.Counter(!0);e.methods.forEach(function(a){function d(a){var b=0;switch(a.size){case "s08":b=w.readS8();break;case "u08":b=w.readU8();break;case "s16":b=w.readS16();break;case "s24":b=w.readS24();break;case "u30":b=w.readU30();break;case "u32":b=w.readU32();break;default:!0}var g="";switch(a.type){case "":break;case "I":g=e.constantPool.ints[b];break;case "U":g=e.constantPool.uints[b];break;case "D":g=e.constantPool.doubles[b];
break;case "S":g=e.constantPool.strings[b];break;case "N":g=e.constantPool.namespaces[b];break;case "CI":g=e.classes[b];break;case "M":g=e.constantPool.multinames[b];break;default:g="?"}return g}if(a.code)for(var w=new AbcStream(a.code);0<w.remaining();){a=w.readU8();var A=opcodeTable[a],z=null;if(A)switch(r.count(A.name),A.operands&&(z=A.operands.map(d)),a){case 65:case 67:continue;case 70:case 76:case 79:case 68:case 69:case 78:z[0]&&!(z[0].name in m)&&g.count(z[0].name);break;case 74:z[0]&&!(z[0].name in
l)&&b.count(z[0].name);break;case 102:case 97:z[0]&&!(z[0].name in p)&&f.count(z[0].name)}}});a.writeLn(JSON.stringify({definedClasses:l,definedMethods:m,definedProperties:p,libraryClasses:b.counts,librarySuperClasses:d.counts,libraryMethods:g.counts,libraryProperties:f.counts,operations:r.counts},null,2))}
var Interpreter=new (function(){function a(){}function e(a,d,e){e.flags=d.flags;e.name=d.isRuntimeName()?a.pop():d.name;e.namespaces=d.isRuntimeNamespace()?[a.pop()]:d.namespaces}a.prototype={interpretMethod:function(a,d,g,f){!0;Counter.count("Interpret Method");var l=d.abc,m=l.constantPool.ints,p=l.constantPool.uints,r=l.constantPool.doubles,v=l.constantPool.strings,u=l.methods,w=l.constantPool.multinames,A=l.applicationDomain,z=d.exceptions;a=[a];for(var s=[],B=new ScopeStack(g),y=d.parameters.length,
D=f.length,G,C=0;C<y;C++){var E=d.parameters[C];G=C<D?f[C]:E.value;E.type&&!E.type.isAnyName()&&(G=asCoerceByMultiname(A,E.type,G));a.push(G)}d.needsRest()?a.push(sliceArguments(f,y)):d.needsArguments()&&a.push(sliceArguments(f,0));f=d.analysis.bytecodes;var I,K,S,R,L,F,y=[],D=Multiname.TEMPORARY,E=0,O=f.length;a:for(;E<O;)try{var N=f[E],H=N.op;switch(H|0){case 3:throw s.pop();case 4:e(s,w[N.index],D);s.push(s.pop().asGetSuper(g,D.namespaces,D.name,D.flags));break;case 5:G=s.pop();e(s,w[N.index],
D);s.pop().asSetSuper(g,D.namespaces,D.name,D.flags,G);break;case 8:a[N.index]=void 0;break;case 12:F=s.pop();L=s.pop();E=!(L<F)?N.offset:E+1;continue;case 24:F=s.pop();L=s.pop();E=L>=F?N.offset:E+1;continue;case 13:F=s.pop();L=s.pop();E=!(L<=F)?N.offset:E+1;continue;case 23:F=s.pop();L=s.pop();E=L>F?N.offset:E+1;continue;case 14:F=s.pop();L=s.pop();E=!(L>F)?N.offset:E+1;continue;case 22:F=s.pop();L=s.pop();E=L<=F?N.offset:E+1;continue;case 15:F=s.pop();L=s.pop();E=!(L>=F)?N.offset:E+1;continue;case 21:F=
s.pop();L=s.pop();E=L<F?N.offset:E+1;continue;case 16:E=N.offset;continue;case 17:E=s.pop()?N.offset:E+1;continue;case 18:E=!s.pop()?N.offset:E+1;continue;case 19:F=s.pop();L=s.pop();E=L==F?N.offset:E+1;continue;case 20:F=s.pop();L=s.pop();E=L!=F?N.offset:E+1;continue;case 25:F=s.pop();L=s.pop();E=L===F?N.offset:E+1;continue;case 26:F=s.pop();L=s.pop();E=L!==F?N.offset:E+1;continue;case 27:K=s.pop();if(0>K||K>=N.offsets.length)K=N.offsets.length-1;E=N.offsets[K];continue;case 28:B.push(boxValue(s.pop()),
!0);break;case 29:B.pop();break;case 30:K=s.pop();s[s.length-1]=boxValue(s[s.length-1]).asNextName(K);break;case 35:K=s.pop();s[s.length-1]=boxValue(s[s.length-1]).asNextValue(K);break;case 50:R=asHasNext2(a[N.object],a[N.index]);a[N.object]=R.object;a[N.index]=R.index;s.push(!!R.index);break;case 32:s.push(null);break;case 33:s.push(void 0);break;case 36:case 37:s.push(N.value);break;case 44:s.push(v[N.index]);break;case 45:s.push(m[N.index]);break;case 46:s.push(p[N.index]);break;case 47:s.push(r[N.index]);
break;case 38:s.push(!0);break;case 39:s.push(!1);break;case 40:s.push(NaN);break;case 41:s.pop();break;case 42:s.push(s[s.length-1]);break;case 43:I=s[s.length-1];s[s.length-1]=s[s.length-2];s[s.length-2]=I;break;case 48:B.push(boxValue(s.pop()));break;case 64:s.push(createFunction(u[N.index],B.topScope(),!0));break;case 65:popManyInto(s,N.argCount,y);I=s.pop();s[s.length-1]=s[s.length-1].apply(I,y);break;case 66:popManyInto(s,N.argCount,y);s[s.length-1]=construct(s[s.length-1],y);break;case 71:return;
case 72:return d.returnType?asCoerceByMultiname(A,d.returnType,s.pop()):s.pop();case 73:popManyInto(s,N.argCount,y);I=s.pop();g.object.baseClass.instanceConstructorNoInitialize.apply(I,y);break;case 74:popManyInto(s,N.argCount,y);e(s,w[N.index],D);I=boxValue(s[s.length-1]);I=I.asConstructProperty(D.namespaces,D.name,D.flags,y);s[s.length-1]=I;break;case 75:notImplemented();break;case 76:case 70:case 79:popManyInto(s,N.argCount,y);e(s,w[N.index],D);R=boxValue(s.pop()).asCallProperty(D.namespaces,D.name,
D.flags,76===H,y);79!==H&&s.push(R);break;case 69:case 78:popManyInto(s,N.argCount,y);e(s,w[N.index],D);R=s.pop().asCallSuper(g,D.namespaces,D.name,D.flags,y);78!==H&&s.push(R);break;case 83:popManyInto(s,N.argCount,y);s[s.length-1]=applyType(A,s[s.length-1],y);break;case 85:I={};for(C=0;C<N.argCount;C++)G=s.pop(),I[Multiname.getPublicQualifiedName(s.pop())]=G;s.push(I);break;case 86:I=[];popManyInto(s,N.argCount,y);I.push.apply(I,y);s.push(I);break;case 87:!0;s.push(createActivation(d));break;case 88:s[s.length-
1]=createClass(l.classes[N.index],s[s.length-1],B.topScope());break;case 89:e(s,w[N.index],D);s.push(getDescendants(s.pop(),D));break;case 90:!0;s.push(z[N.index].scopeObject);break;case 94:case 93:e(s,w[N.index],D);s.push(B.topScope().findScopeProperty(D.namespaces,D.name,D.flags,A,93===H));break;case 96:S=w[N.index];I=B.topScope().findScopeProperty(S.namespaces,S.name,S.flags,A,!0);s.push(I.asGetProperty(S.namespaces,S.name,S.flags));break;case 104:case 97:G=s.pop();e(s,w[N.index],D);boxValue(s.pop()).asSetProperty(D.namespaces,
D.name,D.flags,G);break;case 98:s.push(a[N.index]);break;case 99:a[N.index]=s.pop();break;case 100:s.push(g.global.object);break;case 101:s.push(B.get(N.index));break;case 102:e(s,w[N.index],D);s[s.length-1]=boxValue(s[s.length-1]).asGetProperty(D.namespaces,D.name,D.flags);break;case 106:e(s,w[N.index],D);s[s.length-1]=boxValue(s[s.length-1]).asDeleteProperty(D.namespaces,D.name,D.flags);break;case 108:s[s.length-1]=asGetSlot(s[s.length-1],N.index);break;case 109:G=s.pop();I=s.pop();asSetSlot(I,
N.index,G);break;case 112:s[s.length-1]+="";break;case 131:case 115:s[s.length-1]|=0;break;case 136:case 116:s[s.length-1]>>>=0;break;case 132:case 117:s[s.length-1]=+s[s.length-1];break;case 129:case 118:s[s.length-1]=!!s[s.length-1];break;case 120:s[s.length-1]=checkFilter(s[s.length-1]);break;case 128:s[s.length-1]=asCoerce(A.getType(w[N.index]),s[s.length-1]);break;case 130:break;case 133:s[s.length-1]=asCoerceString(s[s.length-1]);break;case 135:s[s.length-2]=asAsType(s.pop(),s[s.length-1]);
break;case 137:I=s[s.length-1];s[s.length-1]=void 0==I?null:I;break;case 144:s[s.length-1]=-s[s.length-1];break;case 145:++s[s.length-1];break;case 146:++a[N.index];break;case 147:--s[s.length-1];break;case 148:--a[N.index];break;case 149:s[s.length-1]=asTypeOf(s[s.length-1]);break;case 150:s[s.length-1]=!s[s.length-1];break;case 151:s[s.length-1]=~s[s.length-1];break;case 160:s[s.length-2]=asAdd(s[s.length-2],s.pop());break;case 161:s[s.length-2]-=s.pop();break;case 162:s[s.length-2]*=s.pop();break;
case 163:s[s.length-2]/=s.pop();break;case 164:s[s.length-2]%=s.pop();break;case 165:s[s.length-2]<<=s.pop();break;case 166:s[s.length-2]>>=s.pop();break;case 167:s[s.length-2]>>>=s.pop();break;case 168:s[s.length-2]&=s.pop();break;case 169:s[s.length-2]|=s.pop();break;case 170:s[s.length-2]^=s.pop();break;case 171:s[s.length-2]=s[s.length-2]==s.pop();break;case 172:s[s.length-2]=s[s.length-2]===s.pop();break;case 173:s[s.length-2]=s[s.length-2]<s.pop();break;case 174:s[s.length-2]=s[s.length-2]<=
s.pop();break;case 175:s[s.length-2]=s[s.length-2]>s.pop();break;case 176:s[s.length-2]=s[s.length-2]>=s.pop();break;case 177:s[s.length-2]=asIsInstanceOf(s.pop(),s[s.length-1]);break;case 178:s[s.length-1]=asIsType(A.getType(w[N.index]),s[s.length-1]);break;case 179:s[s.length-2]=asIsType(s.pop(),s[s.length-1]);break;case 180:s[s.length-2]=boxValue(s.pop()).asHasProperty(null,s[s.length-1]);break;case 192:s[s.length-1]=(s[s.length-1]|0)+1;break;case 193:s[s.length-1]=(s[s.length-1]|0)-1;break;case 194:a[N.index]=
(a[N.index]|0)+1;break;case 195:a[N.index]=(a[N.index]|0)-1;break;case 196:s[s.length-1]=~s[s.length-1];break;case 197:s[s.length-2]=s[s.length-2]+s.pop()|0;break;case 198:s[s.length-2]=s[s.length-2]-s.pop()|0;break;case 199:s[s.length-2]=s[s.length-2]*s.pop()|0;break;case 208:case 209:case 210:case 211:s.push(a[H-208]);break;case 212:case 213:case 214:case 215:a[H-OP_setlocal0]=s.pop();break;case 239:case 240:case 241:break;default:notImplemented(opcodeName(H))}E++}catch(P){if(1>z.length)throw P;
for(var P=translateError(A,P),C=0,M=z.length;C<M;C++){var U=z[C];if(E>=U.start&&E<=U.end&&(!U.typeName||A.getType(U.typeName).isInstance(P))){s.length=0;s.push(P);B.clear();E=U.offset;continue a}}throw P;}}};return a}()),AVM2=function(){function a(a){if(!g)return null;for(var b=0;b<a.namespaces.length;b++){var d=g.map[a.namespaces[b].originalURI+":"+a.name];if(d)break}return d?(a=d,a=(b=g.scripts[a])?new AbcFile(new Uint8Array(g.abcs,b.offset,b.length),a):null,a):null}function e(a,b){return new Promise(function(d,
e){var g=new XMLHttpRequest;g.open("GET",a);g.responseType=b;g.onload=function(){g.response?d(g.response):e("Unable to load "+a+": "+g.statusText)};g.send()})}function b(b,d,e){this.systemDomain=new ApplicationDomain(this,null,b,!0);this.applicationDomain=new ApplicationDomain(this,this.systemDomain,d,!1);this.findDefiningAbc=a;this.loadAVM1=e;this.isAVM1Loaded=!1;this.exception={value:void 0};this.exceptions=[]}var d,g;b.currentAbc=function(){for(var a=arguments.callee,b=null,d=0;20>d&&a;d++){var e=
a.methodInfo;if(e){b=e.abc;break}a=a.caller}return b};b.currentDomain=function(){return this.currentAbc().applicationDomain};b.isPlayerglobalLoaded=function(){return!!g};b.loadPlayerglobal=function(a,b){return d?Promise.reject("Playerglobal is already loaded"):d=Promise.all([e(a,"arraybuffer"),e(b,"json")]).then(function(a){g={abcs:a[0],map:Object.create(null),scripts:Object.create(null)};a=a[1];for(var b=0;b<a.length;b++){var d=a[b];g.scripts[d.name]=d;if("string"===typeof d.defs)g.map[d.defs]=d.name;
else for(var e=0;e<d.defs.length;e++)g.map[d.defs[e]]=d.name}},function(a){console.error(a)})};b.prototype={notifyConstruct:function(){}};return b}();enableVerifier.value=!0;
var release=enableC4.value=!0,avm2Root=SHUMWAY_ROOT+"avm2/",builtinPath=avm2Root+"generated/builtin/builtin.abc",avm1Path=avm2Root+"generated/avm1lib/avm1lib.abc",BinaryFileReader=function(){function a(a,b){this.url=a;this.responseType=b||"arraybuffer"}a.prototype={readAll:function(a,b){var d=this.url,g=new XMLHttpRequest;g.open("GET",this.url,!0);g.responseType=this.responseType;a&&(g.onprogress=function(b){a(g.response,b.loaded,b.total)});g.onreadystatechange=function(){4===g.readyState&&(200!==
g.status&&0!==g.status?(unexpected("Path: "+d+" not found."),b(null,g.statusText)):b(g.response))};g.send(null)},readAsync:function(a,b,d,g,f){var l=new XMLHttpRequest({mozSystem:!0}),m=this.url;l.open(this.method||"GET",m,!0);var p;try{l.responseType="moz-chunked-arraybuffer",p="moz-chunked-arraybuffer"!==l.responseType}catch(r){p=!0}p&&(l.responseType="arraybuffer");l.onprogress=function(b){p||a(new Uint8Array(l.response),{loaded:b.loaded,total:b.total})};l.onreadystatechange=function(){2===l.readyState&&
f&&f(m,l.status,l.getAllResponseHeaders());if(4===l.readyState){200!==l.status&&0!==l.status&&b(l.statusText);if(p){var r=l.response;a(new Uint8Array(r),{loaded:r.byteLength,total:r.byteLength})}g&&g()}else 2===l.readyState&&d&&d()};l.send(null)}};return a}(),libraryAbcs;function grabAbc(a){var e=libraryScripts[a];return e?new AbcFile(new Uint8Array(libraryAbcs,e.offset,e.length),a):null}var avm2;
function createAVM2(a,e,b,d,g,f){avm2=new AVM2(d,g,function(a){(new BinaryFileReader(b)).readAll(null,function(b){m=new AbcFile(new Uint8Array(b),"avm1.abc");avm2.systemDomain.executeAbc(m);a()})});var l,m;AVM2.loadPlayerglobal(e.abcs,e.catalog).then(function(){(new BinaryFileReader(a)).readAll(null,function(a){l=new AbcFile(new Uint8Array(a),"builtin.abc");avm2.builtinsLoaded=!1;avm2.systemDomain.onMessage.register("classCreated",Stubs.onClassCreated);avm2.systemDomain.executeAbc(l);avm2.builtinsLoaded=
!0;console.info(JSON.stringify(Counter.toJSON()));console.timeEnd("Load AVM2");f(avm2)})})}
var MAX_SNAP_DRAW_SCALE_TO_CACHE=8,CACHE_SNAP_DRAW_AFTER=3,BitmapDefinition=function(){function a(a){this._bitmapData&&(this._bitmapData._changeNotificationTarget=null);if(this._bitmapData=a)this._bitmapData._changeNotificationTarget=this;a?(a=a._drawable,this._bbox={xMin:0,yMin:0,xMax:20*a.width,yMax:20*a.height}):this._bbox={xMin:0,yMin:0,xMax:0,yMax:0};this._drawableChanged();this._invalidateBounds();this._invalidateTransform()}return{__class__:"flash.display.Bitmap",draw:function(a,b,d){if(this._bitmapData){var g;
a.save();if("auto"===this._pixelSnapping||"always"===this._pixelSnapping){b=this._getConcatenatedTransform(null,!0);var f=Math.abs(Math.round(b.a)),l=Math.abs(Math.round(b.d));1<=f&&8>=f&&1<=l&&8>=l&&0.001>=Math.abs(Math.abs(b.a)/f-1)&&0.001>=Math.abs(Math.abs(b.d)/l-1)&&0.001>=Math.abs(b.b)&&0.001>=Math.abs(b.c)?1===f&&1===l?f=!0:(g=f+"x"+l,this._snapImageCache.size!==g&&(this._snapImageCache.size=g,this._snapImageCache.hits=0,this._snapImageCache.image=null),3===++this._snapImageCache.hits&&this._cacheSnapImage(g,
f,l),g=this._snapImageCache.image,f=!!g):f=!1;f&&a.setTransform(0>b.a?-1:1,0,0,0>b.d?-1:1,b.tx/20|0,b.ty/20|0)}d.setAlpha(a,!0);a.imageSmoothingEnabled=a.mozImageSmoothingEnabled=this._smoothing;a.drawImage(g||this._bitmapData._getDrawable(),0,0);a.imageSmoothingEnabled=a.mozImageSmoothingEnabled=!1;a.restore();traceRenderer.value&&frameWriter.writeLn("Bitmap.draw() snapping: "+this._pixelSnapping+", dimensions: "+this._bitmapData._drawable.width+" x "+this._bitmapData._drawable.height)}},_drawableChanged:function(){this._invalidate();
this._snapImageCache.image=null;this._snapImageCache.hints=0},_cacheSnapImage:function(a,b,d){Counter.count("Cache scaled image");var g=this._bitmapData._getDrawable(),f=document.createElement("canvas");f.width=b*g.width;f.height=d*g.height;b=f.getContext("2d");b.imageSmoothingEnabled=b.mozImageSmoothingEnabled=this._smoothing;b.drawImage(g,0,0,g.width,g.height,0,0,f.width,f.height);var l=this._snapImageCache,m=document.createElement("img");l._tmp=[f,m];"toBlob"in f?f.toBlob(function(b){l.size===
a&&(m.onload=function(){URL.revokeObjectURL(b);l.size===a&&(l.image=m)},m.src=URL.createObjectURL(b))}):(m.onload=function(){l.size===a&&(l.image=m)},m.src=f.toDataURL())},initialize:function(){},__glue__:{"native":{"static":{},instance:{ctor:function(e,b,d){this._pixelSnapping="never"===b||"always"===b?b:"auto";this._smoothing=!!d;this._snapImageCache={hits:0,size:"",image:null};!e&&this.symbol&&(b=this.symbol,e=new flash.display.BitmapData(b.width,b.height,!0,0),e._ctx.imageSmoothingEnabled=this._smoothing,
e._ctx.mozImageSmoothingEnabled=this._smoothing,e._ctx.drawImage(b.img,0,0),e._ctx.imageSmoothingEnabled=!1,e._ctx.mozImageSmoothingEnabled=!1);a.call(this,e||null)},pixelSnapping:{get:function(){return this._pixelSnapping},set:function(a){this._pixelSnapping=a}},smoothing:{get:function(){return this._smoothing},set:function(a){this._smoothing=a}},bitmapData:{get:function(){return this._bitmapData},set:a}}}}}}.call(this),CACHE_DRAWABLE_AFTER=10,BitmapDataDefinition=function(){function a(a,b,e,l,m,
p){255>p&&a.clearRect(b,e,l,m);0<p&&a.fillRect(b,e,l,m)}var e={__class__:"flash.display.BitmapData",initialize:function(){this._changeNotificationTarget=null;this._locked=!1;this._requested=0;this._cache=null;this.symbol&&(this._img=this.symbol.img,this._skipCopyToCanvas=this.symbol.skipCopyToCanvas)},_checkCanvas:function(){if(null===this._drawable)throw ArgumentError();},ctor:function(a,b,e,l){this._img?(a=this._img.naturalWidth||this._img.width,b=this._img.naturalHeight||this._img.height):(isNaN(a+
b)||0>=a||0>=b)&&throwError("ArgumentError",Errors.ArgumentError);this._transparent=void 0===e?!0:!!e;this._backgroundColor=void 0===l?4294967295:l;this._transparent||(this._backgroundColor|=4278190080);this._skipCopyToCanvas?this._drawable=this._img:(e=document.createElement("canvas"),this._ctx=e.getContext("2d"),e.width=a|0,e.height=b|0,this._drawable=e,(!this._transparent||!this._img&&this._backgroundColor)&&this.fillRect(new flash.geom.Rectangle(0,0,a|0,b|0),this._backgroundColor),this._img&&
this._ctx.drawImage(this._img,0,0))},dispose:function(){this._ctx=null;this._drawable.width=0;this._drawable.height=0;this._drawable=null},draw:function(a,b,e,l,m,p){this._checkCanvas();e=this._ctx;e.save();e.beginPath();m&&(0<m.width&&0<m.height)&&(e.rect(m.x,m.y,m.width,m.height),e.clip());b&&e.transform(b.a,b.b,b.c,b.d,b.tx,b.ty);e.globalCompositeOperation=getBlendModeName(l);e.imageSmoothingEnabled=e.mozImageSmoothingEnabled=!!p;flash.display.BitmapData.class.isInstanceOf(a)?e.drawImage(a._drawable,
0,0):(new RenderVisitor(a,e,null,!0)).startFragment(b);e.imageSmoothingEnabled=e.mozImageSmoothingEnabled=!1;e.restore();this._invalidate()},fillRect:function(b,e){this._checkCanvas();this._transparent||(e|=4278190080);var f=this._ctx;f.fillStyle=argbUintToStr(e);a(f,b.x,b.y,b.width,b.height,e>>>24&255);this._invalidate()},getPixel:function(a,b){this._checkCanvas();var e=this._ctx.getImageData(a,b,1,1).data;return dataToRGB(e)},getPixel32:function(a,b){this._checkCanvas();var e=this._ctx.getImageData(a,
b,1,1).data;return dataToARGB(e)},_invalidate:function(a){a&&somewhatImplemented("BitmapData._invalidate(changeRect)");this._locked||(this._changeNotificationTarget&&this._changeNotificationTarget._drawableChanged(),this._requested=0,this._cache=null)},_getDrawable:function(){if(this._img===this._drawable)return this._drawable;this._requested++;if(10<=this._requested){if(!this._cache){Counter.count("Cache drawable");var a=document.createElement("img");"toBlob"in this._drawable?this._drawable.toBlob(function(b){a.src=
URL.createObjectURL(b);a.onload=function(){URL.revokeObjectURL(b)}}):a.src=this._drawable.toDataURL();this._cache=a}if(0<this._cache.width)return this._cache}return this._drawable},setPixel:function(a,b,e){this.fillRect({x:a,y:b,width:1,height:1},e|4278190080);this._invalidate()},setPixel32:function(a,b,e){this.fillRect({x:a,y:b,width:1,height:1},e);this._invalidate()},copyPixels:function(a,b,e,l,m,p){l&&notImplemented("BitmapData.copyPixels w/ alpha");l=b.width;m=b.height;var r=b.x;b=b.y;var v=e.x;
e=e.y;var u=-Math.min(0,r,v),w=-Math.min(0,b,e),A=Math.min(0,this._ctx.canvas.width-v-l,a._drawable.width-r-l)-u,z=Math.min(0,this._ctx.canvas.height-e-m,a._drawable.height-b-m)-w;p||this._ctx.clearRect(v,e,l,m);0<l+A&&0<m+z&&this._ctx.drawImage(a._drawable,r+u,b+w,l+A,m+z,v+u,e+w,l+A,m+z);this._invalidate()},lock:function(){this._locked=!0},unlock:function(a){this._locked=!1;this._invalidate(a)},clone:function(){this._checkCanvas();var a=new flash.display.BitmapData(this._drawable.width,this._drawable.height,
!0,0);a._ctx.drawImage(this._drawable,0,0);return a},scroll:function(b,e){this._checkCanvas();this._ctx.draw(this._drawable,b,e);this._ctx.save();var f=this._img?0:this._backgroundColor;this._transparent||(f|=4278190080);var l=f>>>24&255;this._ctx.fillStyle=argbUintToStr(f);var f=this._drawable.width,m=this._drawable.height;0<b?a(this._ctx,0,0,b,m,l):0>b&&a(this._ctx,f+b,0,-b,m,l);0<e?a(this._ctx,0,0,f,e,l):0>e&&a(this._ctx,m+e,f,-e,l);this._ctx.restore();this._invalidate()},get width(){return this._drawable.width},
get height(){return this._drawable.height}},b=Object.getOwnPropertyDescriptor;e.__glue__={"native":{instance:{ctor:e.ctor,fillRect:e.fillRect,dispose:e.dispose,getPixel:e.getPixel,getPixel32:e.getPixel32,setPixel:e.setPixel,setPixel32:e.setPixel32,copyPixels:e.copyPixels,lock:e.lock,unlock:e.unlock,draw:e.draw,clone:e.clone,scroll:e.scroll,width:b(e,"width"),height:b(e,"height")}}};return e}.call(this);function dataToRGB(a){return a[0]<<16|a[1]<<8|a[2]}
function dataToARGB(a){return a[3]<<24|dataToRGB(a)}
var DisplayObjectDefinition=function(){var a,e=1,b={advanceFrame:!1,enterFrame:!0,constructChildren:!1,frameConstructed:!0,executeFrame:!1,exitFrame:!0,render:!0},d={x:0,y:0},g={__class__:"flash.display.DisplayObject",initialize:function(){var b=flash.display.BlendMode.class;this._alpha=1;this._animated=!1;this._bitmap=this._bbox=null;this._blendMode=b.NORMAL;this._bounds={xMin:0,xMax:0,yMin:0,yMax:0,invalid:!0};this._cacheAsBitmap=!1;this._children=[];this._clipDepth=null;this._currentTransform=
{a:1,b:0,c:0,d:1,tx:0,ty:0};this._concatenatedTransform={a:1,b:0,c:0,d:1,tx:0,ty:0,invalid:!0};this._graphics=this._cxform=this._current3DTransform=null;this._filters=[];this._loader=null;this._mouseChildren=!0;this._mouseOver=!1;this._mouseY=this._mouseX=0;this._opaqueBackground=this._name=null;this._owned=!1;this._parent=null;this._rotation=0;this._rotationCos=1;this._rotationSin=0;this._scale9Grid=null;this._scaleY=this._scaleX=1;this._stage=null;this._visible=!0;this._destroyed=this._wasCachedAsBitmap=
this._hidden=!1;this._scrollRect=this._maskedObject=null;this._invalid=!1;this._region=null;this._depth=this._index=this._level=-1;this._invisible=this._isContainer=!1;this._zindex=0;a=[b.NORMAL,b.NORMAL,b.LAYER,b.MULTIPLY,b.SCREEN,b.LIGHTEN,b.DARKEN,b.DIFFERENCE,b.ADD,b.SUBTRACT,b.INVERT,b.ALPHA,b.ERASE,b.OVERLAY,b.HARDLIGHT,b.SHADER];if(b=this.symbol){this._animated=b.animated||!1;this._bbox=b.bbox||null;this._blendMode=this._resolveBlendMode(b.blendMode);this._children=b.children||[];this._clipDepth=
b.clipDepth||null;this._cxform=b.cxform||null;this._loader=b.loader||null;this._name=b.name||null;this._owned=b.owned||!1;this._parent=b.parent||null;this._level=isNaN(b.level)?-1:b.level;this._index=isNaN(b.index)?-1:b.index;this._depth=isNaN(b.depth)?-1:b.depth;this._root=b.root||null;this._stage=b.stage||null;var d=b.scale9Grid;d&&(this._scale9Grid=new flash.geom.Rectangle(d.left,d.top,d.right-d.left,d.bottom-d.top));(b=b.currentTransform)&&this._setTransformMatrix(b,!1)}this._accessibilityProperties=
null;var e=this;this._onBroadcastMessage=function(a){e._listeners[a]&&e._dispatchEvent(a)}},_addEventListener:function(a,d,e,g){!1===b[a]?avm2.systemDomain.onMessage.register(a,d):(a in b&&!this._listeners[a]&&avm2.systemDomain.onMessage.register(a,this._onBroadcastMessage),this._addEventListenerImpl(a,d,e,g))},_removeEventListener:function(a,d,e){!1===b[a]?avm2.systemDomain.onMessage.unregister(a,d):(this._removeEventListenerImpl(a,d,e),a in b&&!this._listeners[a]&&avm2.systemDomain.onMessage.unregister(a,
this._onBroadcastMessage))},_resolveBlendMode:function(b){return a[b]||flash.display.BlendMode.class.NORMAL},_getConcatenatedTransform:function(a,b){var d=this._stage;if(this===this._stage)return b?this._concatenatedTransform:this._currentTransform;if(a===this._parent)return this._currentTransform;var e=null,g,f;for(g=this;g!==d;)g._concatenatedTransform.invalid&&(e=g),g===a&&(f=g._concatenatedTransform),g=g._parent;if(e)if(this._parent===d)e=this._concatenatedTransform,g=this._currentTransform,e.a=
g.a,e.b=g.b,e.c=g.c,e.d=g.d,e.tx=g.tx,e.ty=g.ty;else{var w=[];for(g=this;g!==e;)w.push(g),g=g._parent;var A=e;do{var z=A._parent,e=A._concatenatedTransform;g=A._currentTransform;z?z!==d&&(z=z._concatenatedTransform,e.a=g.a*z.a+g.b*z.c,e.b=g.a*z.b+g.b*z.d,e.c=g.c*z.a+g.d*z.c,e.d=g.d*z.d+g.c*z.b,e.tx=g.tx*z.a+z.tx+g.ty*z.c,e.ty=g.ty*z.d+z.ty+g.tx*z.b):(e.a=g.a,e.b=g.b,e.c=g.c,e.d=g.d,e.tx=g.tx,e.ty=g.ty);e.invalid=!1;g=w.pop();A=A._children;for(z=0;z<A.length;z++){var s=A[z];s!==g&&(s._concatenatedTransform.invalid=
!0)}A=g}while(A)}else e=this._concatenatedTransform;return a&&a!==this._stage?(g=f||a._getConcatenatedTransform(null,!1),d=1,w=f=0,A=1,s=z=0,g.b||g.c?(A=1/(g.a*g.d-g.b*g.c),d=g.d*A,f=-g.b*A,w=-g.c*A,A*=g.a,z=-(d*g.tx+w*g.ty),s=-(f*g.tx+A*g.ty)):(d=1/g.a,A=1/g.d,z=g.tx*-d,s=g.ty*-A),{a:d*e.a+w*e.b,b:f*e.a+A*e.b,c:d*e.c+w*e.d,d:f*e.c+A*e.d,tx:d*e.tx+w*e.ty+z,ty:f*e.tx+A*e.ty+s}):b&&d?(g=d._concatenatedTransform,{a:e.a*g.a,b:e.b*g.d,c:e.c*g.a,d:e.d*g.d,tx:e.tx*g.a+g.tx,ty:e.ty*g.d+g.ty}):e},_applyCurrentTransform:function(a){var b=
this._getConcatenatedTransform(null,!1),d=a.x,e=a.y;a.x=b.a*d+b.c*e+b.tx|0;a.y=b.d*e+b.b*d+b.ty|0},_applyConcatenatedInverseTransform:function(a){var b=this._getConcatenatedTransform(null,!1),d=1/(b.a*b.d-b.b*b.c),e=a.x-b.tx,g=a.y-b.ty;a.x=(b.d*e-b.c*g)*d|0;a.y=(b.a*g-b.b*e)*d|0},_hitTest:function(a,b,e,g,f){if(a){d.x=b;d.y=e;this._applyConcatenatedInverseTransform(d);f=this._getContentBounds();if(!(d.x>=f.xMin&&d.x<f.xMax&&d.y>=f.yMin&&d.y<f.yMax))return!1;if(!g||!this._graphics)return!0;if(this._graphics){a=
this._graphics._paths;g=0;for(f=a.length;g<f;g++){var u=a[g];if(u.isPointInPath(d.x,d.y))return!0;if(u.strokeStyle){var w=u._strokePath;w||(w=u.strokePath(u.drawingStyles),u._strokePath=w);if(w.isPointInPath(d.x,d.y))return!0}}}a=this._children;g=0;for(f=a.length;g<f;g++)if(u=a[g],u._hitTest&&u._hitTest(!0,b,e,!0,null))return!0;return!1}g=this.getBounds(this._stage);f=f.getBounds(f._stage);b=Math.max(g.xMin,f.xMin);e=Math.max(g.yMin,f.yMin);b=Math.min(g.xMax,f.xMax)-b;e=Math.min(g.yMax,f.yMax)-e;
return 0<b&&0<e},_invalidate:function(){this._invalid=!0},_invalidateBounds:function(){for(var a=this;a&&!a._bounds.invalid;)a._bounds.invalid=!0,a=a._parent},_invalidateTransform:function(){this._concatenatedTransform.invalid=!0;this._parent&&this._parent._invalidateBounds()},_setTransformMatrix:function(a,b){var d=a.a,e=a.b,g=a.c,f=a.d,w,A;b?(w=20*a.tx|0,A=20*a.ty|0):(w=a.tx,A=a.ty);var z=0!==d?Math.atan(e/d):0<e?Math.PI/2:-Math.PI/2;this._rotation=180*z/Math.PI;this._rotationCos=Math.cos(z);this._rotationSin=
Math.sin(z);z=Math.sqrt(d*d+e*e);this._scaleX=0<d?z:-z;z=Math.sqrt(f*f+g*g);this._scaleY=0<f?z:-z;z=this._currentTransform;z.a=d;z.b=e;z.c=g;z.d=f;z.tx=w;z.ty=A;this._invalidateTransform()},get accessibilityProperties(){return this._accessibilityProperties},set accessibilityProperties(a){this._accessibilityProperties=a},get alpha(){return this._alpha},set alpha(a){a!==this._alpha&&(this._invalidate(),this._alpha=a,this._animated=!1)},get blendMode(){return this._blendMode},set blendMode(b){0<=a.indexOf(b)?
this._blendMode=b:throwError("ArgumentError",Errors.InvalidEnumError,"blendMode");this._animated=!1},get cacheAsBitmap(){return this._cacheAsBitmap},set cacheAsBitmap(a){this._cacheAsBitmap=this._filters.length?!0:a;this._animated=!1},get filters(){return this._filters},set filters(a){a.length?(this._filters.length||(this._wasCachedAsBitmap=this._cacheAsBitmap),this._cacheAsBitmap=!0):this._cacheAsBitmap=this._wasCachedAsBitmap;this._filters=a;this._animated=!1},get height(){var a=this._getContentBounds(),
b=this._currentTransform;return Math.abs(b.b)*(a.xMax-a.xMin)+Math.abs(b.d)*(a.yMax-a.yMin)|0},set height(a){if(!(0>a)){var b=Math.abs(this._rotationCos),d=Math.abs(this._rotationSin),e=this._getContentBounds(),g=d*(e.xMax-e.xMin)+b*(e.yMax-e.yMin);g&&(this.scaleX=this.width/(b*(e.xMax-e.xMin)+d*(e.yMax-e.yMin)),this.scaleY=a/g)}},get loaderInfo(){return this._loader&&this._loader._contentLoaderInfo||this._parent.loaderInfo},get mask(){return this._mask},set mask(a){if(this._mask!==a){this._invalidate();
a&&a._maskedObject&&(a._maskedObject.mask=null);if(this._mask=a)a._maskedObject=this;this._animated=!1}},get name(){return this._name||(this._name="instance"+e++)},set name(a){this._name=a},get mouseX(){if(!this._stage)return 0;d.x=this._stage._mouseX;d.y=this._stage._mouseY;this._applyConcatenatedInverseTransform(d);return d.x},get mouseY(){if(!this._stage)return 0;d.x=this._stage._mouseX;d.y=this._stage._mouseY;this._applyConcatenatedInverseTransform(d);return d.y},get opaqueBackground(){return this._opaqueBackground},
set opaqueBackground(a){this._opaqueBackground=a;this._animated=!1},get parent(){return-1<this._index?this._parent:null},get root(){return this._stage&&this._stage._root},get rotation(){return this._rotation},set rotation(a){a%=360;180<a&&(a-=360);if(a!==this._rotation){this._invalidate();this._invalidateTransform();this._rotation=a;var b;switch(a){case 0:case 360:a=1;b=0;break;case 90:case -270:a=0;b=1;break;case 180:case -180:a=-1;b=0;break;case 270:case -90:a=0;b=-1;break;default:b=this._rotation/
180*Math.PI,a=Math.cos(b),b=Math.sin(b)}this._rotationCos=a;this._rotationSin=b;var d=this._currentTransform;d.a=a*this._scaleX;d.b=b*this._scaleX;d.c=-b*this._scaleY;d.d=a*this._scaleY;this._animated=!1}},get rotationX(){return 0},set rotationX(a){somewhatImplemented("DisplayObject.rotationX")},get rotationY(){return 0},set rotationY(a){somewhatImplemented("DisplayObject.rotationY")},get rotationZ(){return this.rotation},set rotationZ(a){this.rotation=a;somewhatImplemented("DisplayObject.rotationZ")},
get stage(){return this._stage},get scaleX(){return this._scaleX},set scaleX(a){if(a!==this._scaleX){this._invalidate();this._invalidateTransform();this._scaleX=a;var b=this._currentTransform;b.a=this._rotationCos*a;b.b=this._rotationSin*a;this._animated=!1}},get scaleY(){return this._scaleY},set scaleY(a){if(a!==this._scaleY){this._invalidate();this._invalidateTransform();this._scaleY=a;var b=this._currentTransform;b.c=-this._rotationSin*a;b.d=this._rotationCos*a;this._animated=!1}},get scaleZ(){return 1},
set scaleZ(a){somewhatImplemented("DisplayObject.scaleZ")},get scale9Grid(){return this._scale9Grid},set scale9Grid(a){somewhatImplemented("DisplayObject.scale9Grid");this._scale9Grid=a;this._animated=!1},get scrollRect(){return this._scrollRect},set scrollRect(a){somewhatImplemented("DisplayObject.scrollRect");this._scrollRect=a},get transform(){return new flash.geom.Transform(this)},set transform(a){var b=this.transform;b.colorTransform=a.colorTransform;a.matrix3D?b.matrix3D=a.matrix3D:b.matrix=
a.matrix},get visible(){return this._visible},set visible(a){a!==this._visible&&(this._invalidate(),this._visible=a,this._animated=!1)},get width(){var a=this._getContentBounds(),b=this._currentTransform;return Math.abs(b.a)*(a.xMax-a.xMin)+Math.abs(b.c)*(a.yMax-a.yMin)|0},set width(a){if(!(0>a)){var b=Math.abs(this._rotationCos),d=Math.abs(this._rotationSin),e=this._getContentBounds(),g=b*(e.xMax-e.xMin)+d*(e.yMax-e.yMin);g&&(this.scaleY=this.height/(d*(e.xMax-e.xMin)+b*(e.yMax-e.yMin)),this.scaleX=
a/g)}},get x(){return this._currentTransform.tx},set x(a){a!==this._currentTransform.tx&&(this._invalidate(),this._invalidateTransform(),this._currentTransform.tx=a,this._animated=!1)},get y(){return this._currentTransform.ty},set y(a){a!==this._currentTransform.ty&&(this._invalidate(),this._invalidateTransform(),this._currentTransform.ty=a,this._animated=!1)},get z(){return 0},set z(a){somewhatImplemented("DisplayObject.z")},_getContentBounds:function(){var a=this._bounds;if(a.invalid){var b=this._bbox,
d=Number.MAX_VALUE,e=Number.MIN_VALUE,g=Number.MAX_VALUE,f=Number.MIN_VALUE;if(b)d=b.xMin,e=b.xMax,g=b.yMin,f=b.yMax;else{for(var b=this._children,w=b.length,A=0;A<w;A++){var z=b[A];if(flash.display.DisplayObject.class.isInstanceOf(z))var s=z.getBounds(this),z=s.xMin,B=s.yMin,y=s.xMax,s=s.yMax,d=Math.min(d,z,y),e=Math.max(e,z,y),g=Math.min(g,B,s),f=Math.max(f,B,s)}this._graphics&&(s=this._graphics._getBounds(!0),s.xMin!==s.xMax&&s.yMin!==s.yMax&&(z=s.xMin,B=s.yMin,y=s.xMax,s=s.yMax,d=Math.min(d,z,
y),e=Math.max(e,z,y),g=Math.min(g,B,s),f=Math.max(f,B,s)))}d===Number.MAX_VALUE&&(d=e=g=f=0);a.xMin=d;a.xMax=e;a.yMin=g;a.yMax=f;a.invalid=!1}return a},_getRegion:function(a){var b,d=this._filters;if(d.length){var e=Number.MAX_VALUE,g=Number.MIN_VALUE,f=Number.MAX_VALUE,w=Number.MIN_VALUE;if(this._graphics&&(b=this._graphics._getBounds(!0)))e=b.xMin,g=b.xMax,f=b.yMin,w=b.yMax;for(var A=this._children,z=0;z<A.length;z++)b=A[z]._getRegion(this),b.xMin<e&&(e=b.xMin),b.xMax>g&&(g=b.xMax),b.yMin<f&&(f=
b.yMin),b.yMax>w&&(w=b.yMax);if(e===Number.MAX_VALUE)return{xMin:0,xMax:0,yMin:0,yMax:0};b={xMin:e,xMax:g,yMin:f,yMax:w};for(z=0;z<d.length;z++)d[z]._updateFilterBounds(b)}else b=this._graphics?this._graphics._getBounds(!0):this._getContentBounds();return this._getTransformedRect(b,a)},getBounds:function(a){return this._getTransformedRect(this._getContentBounds(),a)},_getTransformedRect:function(a,b){if(!b||b===this)return a;var d=a.xMin,e=a.xMax,g=a.yMin,f=a.yMax;if(0===e-d||0===f-g)return{xMin:0,
yMin:0,xMax:0,yMax:0};var w=b&&!flash.display.DisplayObject.class.isInstanceOf(b)?b:this._getConcatenatedTransform(b,!1),A=w.a*d+w.c*g+w.tx|0,z=w.b*d+w.d*g+w.ty|0,s=w.a*e+w.c*g+w.tx|0,g=w.b*e+w.d*g+w.ty|0,B=w.a*e+w.c*f+w.tx|0,e=w.b*e+w.d*f+w.ty|0,y=w.a*d+w.c*f+w.tx|0,d=w.b*d+w.d*f+w.ty|0,f=0;A>s&&(f=A,A=s,s=f);B>y&&(f=B,B=y,y=f);z>g&&(f=z,z=g,g=f);e>d&&(f=e,e=d,d=f);return{xMin:A<B?A:B,yMin:z<e?z:e,xMax:s>y?s:y,yMax:g>d?g:d}},hitTestObject:function(a){return this._hitTest(!1,0,0,!1,a)},hitTestPoint:function(a,
b,d){return this._hitTest(!0,a,b,d,null)},destroy:function(){this._destroyed||(this._destroyed=!0,this.cleanupBroadcastListeners())},cleanupBroadcastListeners:function(){var a=this._listeners,b;for(b in a)avm2.systemDomain.onMessage.unregister(b,this._onBroadcastMessage)}},f=Object.getOwnPropertyDescriptor;g.__glue__={"native":{instance:{root:f(g,"root"),stage:f(g,"stage"),name:f(g,"name"),parent:f(g,"parent"),mask:f(g,"mask"),visible:f(g,"visible"),x:{get:function(){return this.x/20},set:function(a){this.x=
20*a|0}},y:{get:function(){return this.y/20},set:function(a){this.y=20*a|0}},z:{get:function(){return this.z/20},set:function(a){this.z=20*a|0}},scaleX:f(g,"scaleX"),scaleY:f(g,"scaleY"),scaleZ:f(g,"scaleZ"),mouseX:{get:function(){return this.mouseX/20},set:function(a){this.mouseX=20*a|0}},mouseY:{get:function(){return this.mouseY/20},set:function(a){this.mouseY=20*a|0}},rotation:f(g,"rotation"),rotationX:f(g,"rotationX"),rotationY:f(g,"rotationY"),rotationZ:f(g,"rotationZ"),alpha:f(g,"alpha"),width:{get:function(){return this.width/
20},set:function(a){this.width=20*a|0}},height:{get:function(){return this.height/20},set:function(a){this.height=20*a|0}},_hitTest:function(a,b,d,e,g){return this._hitTest(a,20*b|0,20*d|0,e,g)},cacheAsBitmap:f(g,"cacheAsBitmap"),opaqueBackground:f(g,"opaqueBackground"),scrollRect:f(g,"scrollRect"),filters:f(g,"filters"),blendMode:f(g,"blendMode"),transform:f(g,"transform"),scale9Grid:f(g,"scale9Grid"),loaderInfo:f(g,"loaderInfo"),accessibilityProperties:f(g,"accessibilityProperties"),globalToLocal:function(a){d.x=
20*a.x|0;d.y=20*a.y|0;this._applyConcatenatedInverseTransform(d);return new flash.geom.Point(d.x/20,d.y/20)},localToGlobal:function(a){d.x=20*a.x|0;d.y=20*a.y|0;this._applyCurrentTransform(d);return new flash.geom.Point(d.x/20,d.y/20)},getBounds:function(a){a=this.getBounds(a);return new flash.geom.Rectangle(a.xMin/20,a.yMin/20,(a.xMax-a.xMin)/20,(a.yMax-a.yMin)/20)},getRect:function(a){somewhatImplemented("DisplayObject.getRect");a=this.getBounds(a);return new flash.geom.Rectangle(a.xMin/20,a.yMin/
20,(a.xMax-a.xMin)/20,(a.yMax-a.yMin)/20)}}}};return g}.call(this),DisplayObjectContainerDefinition=function(){var a={get mouseChildren(){return this._mouseChildren},set mouseChildren(a){this._mouseChildren=a},get numChildren(){return this._children.length},get tabChildren(){return this._tabChildren},set tabChildren(a){this._tabChildren=a},get textSnapshot(){notImplemented()},addChild:function(a){return this.addChildAt(a,this._children.length)},addChildAt:function(b,d){b===this&&throwError("ArgumentError",
Errors.CantAddSelfError);if(b._parent===this)return this.setChildIndex(b,d);var e=this._children;(0>d||d>e.length)&&throwError("RangeError",Errors.ParamRangeError);-1<b._index&&(avm2.systemDomain.getClass("flash.display.Loader").isInstanceOf(b._parent)?a.removeChild.call(b._parent,b):b._parent.removeChild(b));if(!this._sparse)for(var f=e.length;f&&f>d;f--)e[f-1]._index++;e.splice(d,0,b);b._invalidateTransform();b._owned=!1;b._parent=this;b._stage=this._stage;b._index=d;b._dispatchEvent("added",void 0,
!0);this._stage&&this._stage._addToStage(b);return b},areInaccessibleObjectsUnderPoint:function(){notImplemented()},contains:function(a){return a._parent===this},getChildAt:function(a){var d=this._children;(0>a||a>d.length)&&throwError("RangeError",Errors.ParamRangeError);a=d[a];return!flash.display.DisplayObject.class.isInstanceOf(a)?null:a},getChildByName:function(a){for(var d=this._children,e=0,f=d.length;e<f;e++)if(d[e].name===a)return this.getChildAt(e);return null},getChildIndex:function(a){a._parent!==
this&&throwError("ArgumentError",Errors.NotAChildError);return this._sparse?this._children.indexOf(a):a._index},getObjectsUnderPoint:function(){notImplemented()},removeChild:function(a){a._parent!==this&&throwError("ArgumentError",Errors.NotAChildError);return this.removeChildAt(this.getChildIndex(a))},removeChildAt:function(a){var d=this._children;(0>a||a>=d.length)&&throwError("RangeError",Errors.ParamRangeError);var e=d[a];e._dispatchEvent("removed",void 0,!0);this._stage&&this._stage._removeFromStage(e);
if(!this._sparse)for(var f=d.length;f&&f>a;f--)d[f-1]._index--;d.splice(a,1);e._invalidateTransform();e._owned=!1;e._parent=null;e._index=-1;return e},setChildIndex:function(a,d){a._parent!==this&&throwError("ArgumentError",Errors.NotAChildError);var e=this.getChildIndex(a);if(e!==d){var f=this._children;(0>d||d>f.length)&&throwError("RangeError",Errors.ParamRangeError);f.splice(e,1);f.splice(d,0,a);if(!this._sparse)for(e=e<d?e:d;e<f.length;)f[e]._index=e++;a._owned=!1;a._invalidate();return a}},
removeChildren:function(a,d){a=1>arguments.length?0:a|0;d=2>arguments.length?2147483647:d|0;var e=this._children.length;(0>a||0>d||d<a)&&throwError("RangeError",Errors.ParamRangeError);if(0!==e){d>e-1&&(d=e-1);for(e=d-a+1;e--;)this.removeChildAt(a)}},swapChildren:function(a,d){(a._parent!==this||d._parent!==this)&&throwError("ArgumentError",Errors.NotAChildError);this.swapChildrenAt(this.getChildIndex(a),this.getChildIndex(d))},swapChildrenAt:function(a,d){var e=this._children,f=e.length;(0>a||a>
f||0>d||d>f)&&throwError("RangeError",Errors.ParamRangeError);var f=e[a],l=e[d];e[a]=l;e[d]=f;f._index=d;l._index=a;f._owned=!1;l._owned=!1;f._invalidate();l._invalidate()},destroy:function(){this._destroyed||(this._destroyed=!0,this._children.forEach(function(a){a.destroy&&a.destroy()}),this.cleanupBroadcastListeners())}},e=Object.getOwnPropertyDescriptor;a.initialize=function(){this._tabChildren=this._mouseChildren=!0;this._sparse=!1;this._isContainer=!0};a.__glue__={"native":{instance:{numChildren:e(a,
"numChildren"),tabChildren:e(a,"tabChildren"),mouseChildren:e(a,"mouseChildren"),textSnapshot:e(a,"textSnapshot"),addChild:a.addChild,addChildAt:a.addChildAt,removeChild:a.removeChild,removeChildAt:a.removeChildAt,getChildIndex:a.getChildIndex,setChildIndex:a.setChildIndex,getChildAt:a.getChildAt,getChildByName:a.getChildByName,contains:a.contains,swapChildrenAt:a.swapChildrenAt,swapChildren:a.swapChildren,removeChildren:a.removeChildren}}};return a}.call(this),FrameLabelDefinition=function(){return{__class__:"flash.display.FrameLabel",
initialize:function(){},__glue__:{"native":{"static":{},instance:{ctor:function(a,e){this._name=a;this._frame=e},name:{get:function(){return this._name}},frame:{get:function(){return this._frame}}}}}}}.call(this),GraphicsDefinition=function(){var a={__class__:"flash.display.Graphics",initialize:function(){this._paths=[];this.beginPath();this._bitmap=null;this._parent=0;this.strokeBbox=this.bbox=null},_invalidate:function(){this.strokeBbox=this.bbox=null;this._parent._invalidate();this._parent._invalidateBounds()},
beginPath:function(){var a=this._currentPath;if(!a||!(0===a.commands.length||1===a.commands.length&&1===a.commands[0])){var b=this._currentPath=new ShapePath(null,null);this._paths.push(b);a&&(b.fillStyle=a.fillStyle,b.lineStyle=a.lineStyle,b.fillRule=a.fillRule)}},_drawPathObject:function(a){"flash.display.GraphicsPath"===a.__class__?this.drawPath(a.commands,a.data,a.winding):"flash.display.GraphicsTrianglePath"===a.__class__&&this.drawTriangles(a.vertices,a.indices,a.uvtData,a.culling)},draw:function(a,
b,d,g){for(var f=this._paths,l=0;l<f.length;l++)f[l].draw(a,b,d,g)},beginFill:function(a,b){void 0===b&&(b=1);this.beginPath();this._currentPath.fillStyle=b?{style:rgbIntAlphaToStr(a,b)}:null},beginGradientFill:function(a,b,d,g,f,l,m,p){a=createGradientStyle(a,b,d,g,f,l,m,p);this.beginPath();this._currentPath.fillStyle=a},beginBitmapFill:function(a,b,d,g){this.beginPath();this._currentPath.fillStyle=createPatternStyle(a,b,!1!==d,!!g)},clear:function(){this._invalidate();this._paths=[];this._currentPath=
null;this.beginPath()},copyFrom:function(){notImplemented("Graphics#copyFrom")},cubicCurveTo:function(a,b,d,g,f,l){this._invalidate();this._currentPath.cubicCurveTo(20*a|0,20*b|0,20*d|0,20*g|0,20*f|0,20*l|0)},curveTo:function(a,b,d,g){this._invalidate();this._currentPath.curveTo(20*a|0,20*b|0,20*d|0,20*g|0)},drawCircle:function(a,b,d){var g=2*d;this.drawRoundRect(a-d,b-d,g,g,g,g)},drawEllipse:function(a,b,d,g){this.drawRoundRect(a,b,d,g,d,g)},drawPath:function(a,b,d){this._invalidate();this.beginPath();
this._currentPath.fillRule=d||"evenOdd";this._currentPath.commands=a;this._currentPath.data=b},drawRect:function(a,b,d,g){isNaN(d+g)&&throwError("ArgumentError",Errors.InvalidParamError);this._invalidate();this._currentPath.rect(20*a|0,20*b|0,20*d|0,20*g|0)},drawRoundRect:function(a,b,d,g,f,l){(isNaN(d+g+f)||void 0!==l&&isNaN(l))&&throwError("ArgumentError",Errors.InvalidParamError);this._invalidate();void 0===l&&(l=f);a=20*a|0;b=20*b|0;d=20*d|0;g=20*g|0;if(!l||!f)this._currentPath.rect(a,b,d,g);
else{f=20*(f/2)|0;l=20*(l/2)|0;var m=d/2|0,p=g/2|0;f>m&&(f=m);l>p&&(l=p);m===f&&p===l?f===l?this._currentPath.circle(a+f,b+l,f):this._currentPath.ellipse(a+f,b+l,f,l):(d=a+d,g=b+g,m=a+f,f=d-f,p=b+l,l=g-l,this._currentPath.moveTo(d,l),this._currentPath.curveTo(d,g,f,g),this._currentPath.lineTo(m,g),this._currentPath.curveTo(a,g,a,l),this._currentPath.lineTo(a,p),this._currentPath.curveTo(a,b,m,b),this._currentPath.lineTo(f,b),this._currentPath.curveTo(d,b,d,p),this._currentPath.lineTo(d,l))}},drawRoundRectComplex:function(a,
b,d,g,f,l,m,p){isNaN(d+g+f+l+m+p)&&throwError("ArgumentError",Errors.InvalidParamError);this._invalidate();a=20*a|0;b=20*b|0;d=20*d|0;g=20*g|0;if(!f&&!l&&!m&&!p)this._currentPath.rect(a,b,d,g);else{f=20*f|0;l=20*l|0;m=20*m|0;p=20*p|0;d=a+d;g=b+g;var r=a+f;this._currentPath.moveTo(d,g-p);this._currentPath.curveTo(d,g,d-p,g);this._currentPath.lineTo(a+m,g);this._currentPath.curveTo(a,g,a,g-m);this._currentPath.lineTo(a,b+f);this._currentPath.curveTo(a,b,r,b);this._currentPath.lineTo(d-l,b);this._currentPath.curveTo(d,
b,d,b+l);this._currentPath.lineTo(d,g-p)}},drawTriangles:function(a,b,d,g){if(!(null===a||0===a.length)){var f=a.length/2;b?b.length%3&&throwError("ArgumentError",Errors.InvalidParamError):a.length%6&&throwError("ArgumentError",Errors.InvalidParamError);d&&d.length!=2*f&&d.length!=3*f&&throwError("ArgumentError",Errors.InvalidParamError);"none"!==g&&"negative"!==g&&"positive"!==g&&throwError("ArgumentError",Errors.InvalidEnumError,"culling");notImplemented("Graphics#drawTriangles")}},endFill:function(){this.beginPath();
this._currentPath.fillStyle=null},lineBitmapStyle:function(a,b,d,g){this.beginPath();this._currentPath.lineStyle=createPatternStyle(a,b,d,g)},lineGradientStyle:function(a,b,d,g,f,l,m,p){a=createGradientStyle(a,b,d,g,f,l,m,p);this.beginPath();this._currentPath.lineStyle=a},lineStyle:function(a,b,d,g,f,l,m,p){this.beginPath();a?(void 0===d&&(d=1),void 0===p&&(p=3),this._currentPath.lineStyle={style:rgbIntAlphaToStr(b,d),lineCap:l||"round",lineJoin:l||"round",width:20*a|0,miterLimit:2*p}):this._currentPath.lineStyle=
null},lineTo:function(a,b){this._invalidate();this._currentPath.lineTo(20*a|0,20*b|0)},moveTo:function(a,b){this._currentPath.moveTo(20*a|0,20*b|0)},_getBounds:function(a){var b=a?this.strokeBbox:this.bbox;if(b)return b;for(var b=this._paths,d=[],g=[],f=[],l=[],m=0,p=b.length;m<p;m++){var r=b[m];if(r.commands.length&&(r=r.getBounds(a)))d.push(r.xMin),g.push(r.yMin),f.push(r.xMax),l.push(r.yMax)}b=0===d.length?{xMin:0,yMin:0,xMax:0,yMax:0}:{xMin:Math.min.apply(Math,d),yMin:Math.min.apply(Math,g),xMax:Math.max.apply(Math,
f),yMax:Math.max.apply(Math,l)};a?this.strokeBbox=b:this.bbox=b;return b}};a.__glue__={"native":{instance:{beginFill:a.beginFill,beginGradientFill:a.beginGradientFill,beginBitmapFill:a.beginBitmapFill,beginFillObject:a.beginFillObject,beginStrokeObject:a.beginStrokeObject,clear:a.clear,copyFrom:a.copyFrom,cubicCurveTo:a.cubicCurveTo,curveTo:a.curveTo,drawCircle:a.drawCircle,drawEllipse:a.drawEllipse,drawPath:a.drawPath,drawRect:a.drawRect,drawRoundRect:a.drawRoundRect,drawRoundRectComplex:a.drawRoundRectComplex,
drawTriangles:a.drawTriangles,endFill:a.endFill,lineBitmapStyle:a.lineBitmapStyle,lineGradientStyle:a.lineGradientStyle,lineStyle:a.lineStyle,moveTo:a.moveTo,lineTo:a.lineTo}}};return a}.call(this);function createPatternStyle(a,e,b,d){return{style:factoryCtx.createPattern(a._drawable,!1===b?"no-repeat":"repeat"),transform:e?{a:e.a,b:e.b,c:e.c,d:e.d,e:e.tx,f:e.ty}:{a:1,b:0,c:0,d:1,e:0,f:0},smooth:d}}
function createGradientStyle(a,e,b,d,g,f,l,m){null===a||void 0===a&&throwError("TypeError",Errors.NullPointerError,"type");null===e||void 0===a&&throwError("TypeError",Errors.NullPointerError,"colors");"linear"===a||"radial"===a||throwError("ArgumentError",Errors.InvalidEnumError,"type");f=[];l=0;for(var p=e.length;l<p;l++)f.push({ratio:d[l]/255,color:rgbIntAlphaToStr(e[l],b[l])});return{style:"linear"===a?buildLinearGradientFactory(f):buildRadialGradientFactory(m||0,f),transform:g?{a:819.2*g.a,b:819.2*
g.b,c:819.2*g.c,d:819.2*g.d,e:g.tx,f:g.ty}:{a:819.2,b:0,c:0,d:819.2,e:0,f:0}}}function drawGraphicsData(a){if(null!==a)for(var e=0;e<a.length;e++){var b=a[e];flash.display.IGraphicsPath.class.isInstanceOf(b)?this._drawPathObject(b):flash.display.IGraphicsStroke.class.isInstanceOf(b)?this.beginStrokeObject(b):flash.display.IGraphicsFill.class.isInstanceOf(b)&&this.beginFillObject(b)}}
var InteractiveObjectDefinition=function(){var a={initialize:function(){this._contextMenu=null;this._doubleClickEnabled=!1;this._focusRect=null;this._mouseEnabled=!0;this._tabEnabled=!1},get accessibilityImplementation(){return null},set accessibilityImplementation(a){somewhatImplemented("accessibilityImplementation")},get contextMenu(){somewhatImplemented("contextMenu");return this._contextMenu},set contextMenu(a){somewhatImplemented("contextMenu");this._contextMenu=a},get doubleClickEnabled(){return this._doubleClickEnabled},
set doubleClickEnabled(a){this._doubleClickEnabled=a},get focusRect(){return this._focusRect},set focusRect(a){this._focusRect=a},get mouseEnabled(){return this._mouseEnabled},set mouseEnabled(a){this._mouseEnabled=a},get needsSoftKeyboard(){return!1},set needsSoftKeyboard(a){notImplemented()},get softKeyboardInputAreaOfInterest(){return null},set softKeyboardInputAreaOfInterest(a){notImplemented()},get tabEnabled(){return this._tabEnabled},set tabEnabled(a){var d=this._tabEnabled;this._tabEnabled=
a;d!==a&&this._dispatchEvent(new flash.events.Event("tabEnabledChange",!1,!1))},requestSoftKeyboard:function(){notImplemented()}},e=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{tabEnabled:e(a,"tabEnabled"),tabIndex:{get:function(){return this._tabIndex},set:function(a){this._tabIndex=a}},focusRect:e(a,"focusRect"),mouseEnabled:e(a,"mouseEnabled"),doubleClickEnabled:e(a,"doubleClickEnabled"),accessibilityImplementation:e(a,"accessibilityImplementation"),softKeyboardInputAreaOfInterest:e(a,
"softKeyboardInputAreaOfInterest"),needsSoftKeyboard:e(a,"needsSoftKeyboard"),contextMenu:e(a,"contextMenu"),requestSoftKeyboard:a.requestSoftKeyboard}}};return a}.call(this),$RELEASE=!1,LoaderDefinition=function(){var a=document.head;a.insertBefore(document.createElement("style"),a.firstChild);var e=document.styleSheets[0],a={__class__:"flash.display.Loader",initialize:function(){this._contentLoaderInfo=new flash.display.LoaderInfo;this._contentLoaderInfo._loader=this;this._dictionary={};this._dictionaryResolved=
{};this._displayList=null;this._timeline=[];this._worker=this._uncaughtErrorEvents=this._lastPromise=null;var a=AVM2.currentAbc();a&&a.env.loader&&(this._contentLoaderInfo._loaderURL=a.env.loader._contentLoaderInfo._url)},_commitData:function(a){switch(a.command){case "init":this._init(a.result);break;case "progress":this._updateProgress(a.result);break;case "complete":var d=new Promise(function(a){avm2.systemDomain.onMessage.register("frameConstructed",function l(b){"frameConstructed"===b&&(a(),
avm2.systemDomain.onMessage.unregister("frameConstructed",l))})});Promise.all([d,this._lastPromise]).then(function(){this._content._complete=!0;this._contentLoaderInfo._dispatchEvent("complete")}.bind(this));(a=a.stats)&&TelemetryService.reportTelemetry(a);this._worker&&this._worker.terminate();break;case "empty":this._lastPromise=Promise.resolve();break;case "error":this._contentLoaderInfo._dispatchEvent("ioError",flash.events.IOErrorEvent);break;default:if(0===a.id)break;a.isSymbol?this._commitSymbol(a):
"frame"===a.type?this._commitFrame(a):"image"===a.type&&this._commitImage(a)}},_updateProgress:function(a){var d=this._contentLoaderInfo;d._bytesLoaded=a.bytesLoaded||0;d._bytesTotal=a.bytesTotal||0;a=new flash.events.ProgressEvent("progress",!1,!1,d._bytesLoaded,d._bytesTotal);d._dispatchEvent(a)},_buildFrame:function(a,d,e,f){var l=this._dictionary,m=this._dictionaryResolved,p={},r=[],v=f.depths;if(a)for(var u=a.depths,w=0;w<u.length;w++){var A=u[w];null!==v[A]&&(p[A]=a[A],r.push(A))}for(A in v)if(u=
v[A]){if(u.move){var w=u,u=cloneObject(a[A]),z;for(z in w){var s=w[z];s&&(u[z]=s)}}u.symbolId&&((w=l[u.symbolId])&&!m[u.symbolId]&&e.push(w),u=cloneObject(u),Object.defineProperty(u,"symbolInfo",{get:function(a,b){return function(){return a[b]}}(m,u.symbolId)}));p[A]||r.push(A);p[A]=u}r.sort(sortNumeric);p.depths=r;for(w=f.repeat;w--;)d.push(p);return p},_commitFrame:function(a){var d=a.abcBlocks,e=a.actionBlocks,f=a.initActionBlocks,l=a.exports,m=a.symbolClasses,p=a.sceneData,r=this,v=r._dictionary,
u=r._contentLoaderInfo,w=r._timeline,A=w.length+1,z,s=new Promise(function(a){z=a}),B=a.labelName,y=this._lastPromise;this._lastPromise=s;s=[y];this._displayList=this._buildFrame(this._displayList,w,s,a,A);var D=w.length;a.bgcolor?u._backgroundColor=a.bgcolor:isNullOrUndefined(u._backgroundColor)&&(u._backgroundColor={red:255,green:255,blue:255,alpha:255});Promise.all(s).then(function(){if(d&&r._isAvm2Enabled)for(var a=avm2.applicationDomain,b=0,e=d.length;b<e;b++){var g=new AbcFile(d[b].data,"abc_block_"+
b);g.env.loader=r;d[b].flags?a.loadAbc(g):a.executeAbc(g)}if(m&&r._isAvm2Enabled){for(var f=[],b=0,e=m.length;b<e;b++)if(a=m[b],g=v[a.symbolId])g.then(function(a){return function(b){b.className=a;avm2.applicationDomain.getClass(a).setSymbol(b.props)}}(a.className)),f.push(g);return Promise.all(f)}if(l&&!r._isAvm2Enabled){f=[];b=0;for(e=l.length;b<e;b++)if(a=l[b],g=v[a.symbolId])g.then(function(a){return function(b){r._avm1Context.addAsset(a,b.props)}}(a.className)),f.push(g);return Promise.all(f)}}).then(function(){var d=
r._content,l;if(d){if(d._framesLoaded=D,B&&d._labelMap&&void 0===d._labelMap[B]){d._labelMap[B]=A;for(var m=0,v=d.symbol.scenes.length;m<v;m++)if(H=d.symbol.scenes[m],A>=H._startFrame&&A<=H._endFrame){H.labels.push(new flash.display.FrameLabel(B,A-H._startFrame));break}}}else{m=r._parent;!0;d=r._dictionaryResolved[0];v=avm2.applicationDomain.getClass(d.className);d=v.createAsSymbol({framesLoaded:D,loader:r,parent:m||r,index:m?0:-1,level:m?0:-1,timeline:w,totalFrames:d.props.totalFrames,stage:r._stage,
complete:a.complete});if(!r._isAvm2Enabled){var s=r._avm1Context,y=d;if(m&&m!==r._stage){for(y=m.loaderInfo._loader;y._parent&&y._parent!==r._stage;)y=y._parent.loaderInfo._loader;if(y._isAvm2Enabled){somewhatImplemented("AVM1Movie");this._worker&&this._worker.terminate();return}y=y._content}y=y._getAS2Object();s.globals.asSetPublicProperty("_root",y);s.globals.asSetPublicProperty("_level0",y);s.globals.asSetPublicProperty("_level1",y);var R=r.loaderInfo._parameters;for(l in R)l in y||(y[l]=R[l])}m&&
m==r._stage&&0===r._stage._children.length?(m._frameRate=u._frameRate,m._stageHeight=u._height,m._stageWidth=u._width,m._root=d,m._setup()):r._children.push(d);l=d.symbol.labelMap=createEmptyObject();if(p){for(var y=[],L=d.symbol.totalFrames-1,F=p.scenes,O=p.labels,m=F.length;m--;){for(var N=F[m],R=N.offset,H=[],P=O.length;P--;){var M=O[P];M.frame>=R&&M.frame<=L&&(l[M.name]=M.frame+1,H.unshift(new flash.display.FrameLabel(M.name,M.frame-R+1)))}var H=new flash.display.Scene(N.name,H,L-R+1);H._startFrame=
R+1;H._endFrame=L+1;y.unshift(H);L=R-1}d.symbol.scenes=y}else H=[],B&&(l[B]=A,H.push(new flash.display.FrameLabel(B,A))),H=new flash.display.Scene("Scene 1",H,d.symbol.totalFrames),H._startFrame=1,H._endFrame=d.symbol.totalFrames,d.symbol.scenes=[H];r._stage&&(r._stage._children[0]=d);v.instanceConstructor.call(d);r._content=d}a.startSounds&&d._registerStartSounds(A,a.startSounds);a.soundStream&&d._initSoundStream(a.soundStream);a.soundStreamBlock&&d._addSoundStreamBlock(A,a.soundStreamBlock);if(!r._isAvm2Enabled){s=
r._avm1Context;if(f)for(m=0;m<f.length;m++)d.addFrameScript(A-1,function(a,b,d){if(!d.executed)return d.executed=!0,executeActions(a,s,this._getAS2Object())}.bind(d,f[m].actionsData,f[m].spriteId,{executed:!1}));if(e)for(m=0;m<e.length;m++)d.addFrameScript(A-1,function(a){return function(){return executeActions(a,s,this._getAS2Object())}}(e[m]))}1===A&&u._dispatchEvent(new flash.events.Event("init",!1,!1));z(a)})},_commitImage:function(a){var d=this,e;this._lastPromise=new Promise(function(a){e=a});
var f=new Image;a.props.img=f;f.onload=function(){var f=avm2.systemDomain.getClass("flash.display.Bitmap"),m=avm2.systemDomain.getClass("flash.display.BitmapData"),p=a.props;p.parent=d._parent;p.stage=d._stage;p.skipCopyToCanvas=!0;p=m.createAsSymbol(p);m.instanceConstructor.call(p,0,0,!0,4294967295);m=f.createAsSymbol(p);f.instanceConstructor.call(m,p);m._parent=d;d._children.push(m);d._invalidateBounds();d._content=m;e(a);f=d._contentLoaderInfo;f._width=m.width;f._height=m.height;f._dispatchEvent("init")};
f.src=URL.createObjectURL(a.data);a.data=null},_commitSymbol:function(a){var d=this._dictionary,g=this._dictionaryResolved;if("updates"in a)d[a.id].then(function(d){for(var e in a.updates)d.props[e]=a.updates[e]});else{var f="flash.display.DisplayObject",l=a.require,m=[],p={symbolId:a.id,loader:this},r,v=new Promise(function(a){r=a});if(l&&l.length)for(var u=0,w=l.length;u<w;u++){var A=l[u],z=d[A];z&&!g[A]&&m.push(z)}switch(a.type){case "button":var w={},s;for(s in a.states){for(var A=[],l={},z=a.states[s],
B=Object.keys(z),u=0;u<B.length;u++){var y=B[u],D=z[y],G=d[D.symbolId];G&&!g[D.symbolId]&&m.push(G);A.push(G);l[y]=Object.create(D,{symbolInfo:{get:function(a,b){return function(){return a[b]}}(g,D.symbolId)}})}B.sort(sortNumeric);l.depths=B;w[s]={className:"flash.display.Sprite",props:{loader:this,timeline:[l]}}}f="flash.display.SimpleButton";p.states=w;p.buttonActions=a.buttonActions;break;case "font":if(fromCharCode.apply(null,a.codes)&&(e.insertRule('@font-face{font-family:"'+a.uniqueName+'";src:url(data:font/opentype;base64,'+
btoa(a.data)+")}",e.cssRules.length),!/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.test(window.navigator.userAgent))){var C=document.createElement("div");C.setAttribute("style",'position: absolute; top: 0; right: 0;visibility: hidden; z-index: -500;font-family:"'+a.uniqueName+'";');C.textContent="font test";document.body.appendChild(C);u=new Promise(function(a){setTimeout(function(){a();document.body.removeChild(C)},200)});m.push(u)}f="flash.text.Font";p.name=a.name;p.uniqueName=a.uniqueName;p.charset=a.charset;
p.bold=a.bold;p.italic=a.italic;p.metrics=a.metrics;this._registerFont(f,p);break;case "image":var E=new Image,I,u=new Promise(function(a){I=a});E.onload=function(){if(a.mask){var d=document.createElement("canvas");d.width=a.width;d.height=a.height;var e=d.getContext("2d");e.drawImage(E,0,0);for(var g=e.getImageData(0,0,a.width,a.height),f=g.data,l=a.mask,m=g.width*g.height,r=0,v=3;r<m;r++,v+=4)f[v]=l[r];e.putImageData(g,0,0);p.img=d}I()};E.src=URL.createObjectURL(a.data);m.push(u);f="flash.display.Bitmap";
p.img=E;p.width=a.width;p.height=a.height;break;case "label":u=new Function("c,r,ct",a.data);f="flash.text.StaticText";p.bbox=a.bbox;p.draw=u;break;case "text":p.bbox=a.bbox;p.html=a.html;"label"===a.type?f="flash.text.StaticText":(f="flash.text.TextField",p.tag=a.tag,p.variableName=a.variableName);break;case "shape":f=a.morph?"flash.display.MorphShape":"flash.display.Shape";p.bbox=a.bbox;p.strokeBbox=a.strokeBbox;p.paths=a.paths;p.dictionaryResolved=g;break;case "sound":if(!a.pcm&&!PLAY_USING_AUDIO_TAG){var K,
u=new Promise(function(a){K=a});MP3DecoderSession.processAll(a.packaged.data,function(a,b,d,e){a.pcm=b||new Uint8Array(0);K();e&&console.error("ERROR: "+e)}.bind(null,p));m.push(u)}f="flash.media.Sound";p.sampleRate=a.sampleRate;p.channels=a.channels;p.pcm=a.pcm;p.packaged=a.packaged;break;case "binary":p.data=a.data;break;case "sprite":l=null;s=a.frameCount;A={};z=1;D=a.frames;B=[];y=[];u=0;for(w=D.length;u<w;u++){G=D[u];z=B.length+1;G.labelName&&(A[G.labelName]=z);if(G.startSounds){y[z]=G.startSounds;
for(var S=0;S<G.startSounds.length;S++){var R=G.startSounds[S].soundId,L=d[R];L&&!g[R]&&m.push(L)}}l=this._buildFrame(l,B,m,G,z)}l={};if(!this._isAvm2Enabled&&a.frameScripts){w=a.frameScripts;for(u=0;u<w.length;u+=2)z=w[u]+1,D=function(a,b){return function(){return executeActions(a,b._avm1Context,this._getAS2Object())}}(w[u+1],this),l[z]?l[z].push(D):l[z]=[D]}f="flash.display.MovieClip";p.timeline=B;p.framesLoaded=s;p.labelMap=A;p.frameScripts=l;p.totalFrames=s;p.startSoundRegistrations=y}d[a.id]=
v;Promise.all(m).then(function(){var d={className:f,props:p};g[a.id]=d;r(d)})}},_registerFont:function(a,d){this._vmPromise.then(function(){var e=avm2.applicationDomain.getClass(a),f=e.createAsSymbol(d);e.instanceConstructor.call(f)})},_init:function(a){var d=this,e=d._contentLoaderInfo;e._swfVersion=a.swfVersion;var f=a.bbox;e._width=f.xMax-f.xMin;e._height=f.yMax-f.yMin;e._frameRate=a.frameRate;var l,m,p=new Promise(function(a,b){l=a;m=b});p.resolve=l;p.reject=m;e=new Promise(function(e){p.then(function(){var g=
{className:"flash.display.MovieClip",props:{totalFrames:a.frameCount}};d._dictionaryResolved[0]=g;e(g)})});d._dictionary[0]=e;d._lastPromise=e;d._vmPromise=p;d._isAvm2Enabled=a.fileAttributes.doAbc;this._setup()},_load:function(a){flash.net.URLRequest.class.isInstanceOf(a)&&(this._contentLoaderInfo._url=a._url);var d;d=new Worker(SHUMWAY_ROOT+"shumway-worker.js");var e=this;e._worker=d;d.onmessage=function(a){"exception"===a.data.type?avm2.exceptions.push({source:"parser",message:a.data.message,stack:a.data.stack}):
e._commitData(a.data)};if(flash.net.URLRequest.class.isInstanceOf(a)){var f=FileLoadingService.createSession();f.onprogress=function(a,b){d.postMessage({data:a,progress:b})};f.onerror=function(a){e._commitData({command:"error",error:a})};f.onopen=function(){d.postMessage("pipe:")};f.onclose=function(){d.postMessage({data:null})};f.open(a._toFileRequest())}else d.postMessage(a)},_setup:function(){var a=this,d=a._stage;if(a._isAvm2Enabled)avm2.systemDomain.getClass("flash.ui.Mouse")._stage=d,a._vmPromise.resolve();
else if(avm2.loadAVM1){var e=function(){var e=new AS2Context(a._contentLoaderInfo._swfVersion);e.stage=d;a._avm1Context=e;avm1lib.AS2Key.class.$bind(d);avm1lib.AS2Mouse.class.$bind(d);d._addEventListener("frameConstructed",e.flushPendingScripts.bind(e),!1,Number.MAX_VALUE);a._vmPromise.resolve()};avm2.isAVM1Loaded?AS2Context.instance?(a._avm1Context=AS2Context.instance,a._vmPromise.resolve()):e():(avm2.isAVM1Loaded=!0,avm2.loadAVM1(e))}else a._vmPromise.reject("AVM1 loader is not found")},get contentLoaderInfo(){return this._contentLoaderInfo},
get content(){somewhatImplemented("Loader.content");return this._content}};a.__glue__={"native":{instance:{content:Object.getOwnPropertyDescriptor(a,"content"),contentLoaderInfo:Object.getOwnPropertyDescriptor(a,"contentLoaderInfo"),_getJPEGLoaderContextdeblockingfilter:function(){return 0},_load:a._load,_loadBytes:function(a,d,e,f,l,m,p,r,v){this._load(a.a,d,e,f,l,m,p,r,v)},_unload:function(){somewhatImplemented("Loader._unload, do we even need to do anything here?")},_close:function(){somewhatImplemented("Loader._close")},
_getUncaughtErrorEvents:function(){somewhatImplemented("Loader._getUncaughtErrorEvents");return this._uncaughtErrorEvents},_setUncaughtErrorEvents:function(a){somewhatImplemented("Loader._setUncaughtErrorEvents");this._uncaughtErrorEvents=a}}}};return a}.call(this),LoaderInfoDefinition=function(){return{__class__:"flash.display.LoaderInfo",initialize:function(){this._bytes=this._backgroundColor=this._actionScriptVersion=null;this._bytesTotal=this._bytesLoaded=0;this._uncaughtErrorEvents=this._width=
this._url=this._swfVersion=this._loaderURL=this._loader=this._height=this._frameRate=this._contentType=this._content=null},__glue__:{"native":{"static":{getLoaderInfoByDefinition:function(){notImplemented("LoaderInfo.getLoaderInfoByDefinition")}},instance:{_getArgs:function(){var a=this._parameters,e={},b;for(b in a)e[Multiname.getPublicQualifiedName(b)]=a[b];return e},_getUncaughtErrorEvents:function(){somewhatImplemented("Loader._getUncaughtErrorEvents");return this._uncaughtErrorEvents},_setUncaughtErrorEvents:function(a){somewhatImplemented("Loader._setUncaughtErrorEvents");
this._uncaughtErrorEvents=a},loaderURL:{get:function(){return this._loaderURL}},url:{get:function(){return this._url}},isURLInaccessible:{get:function(){return this._isURLInaccessible}},bytesLoaded:{get:function(){return this._bytesLoaded}},bytesTotal:{get:function(){return this._bytesTotal}},applicationDomain:{get:function(){return new flash.system.ApplicationDomain(avm2.applicationDomain)}},swfVersion:{get:function(){return this._swfVersion}},actionScriptVersion:{get:function(){return this._actionScriptVersion}},
frameRate:{get:function(){return this._frameRate}},width:{get:function(){return this._width}},height:{get:function(){return this._height}},contentType:{get:function(){return this._contentType}},sharedEvents:{get:function(){return this._sharedEvents}},parentSandboxBridge:{get:function(){return this._parentSandboxBridge},set:function(a){this._parentSandboxBridge=a}},childSandboxBridge:{get:function(){return this._childSandboxBridge},set:function(a){this._childSandboxBridge=a}},sameDomain:{get:function(){return this._sameDomain}},
childAllowsParent:{get:function(){return this._childAllowsParent}},parentAllowsChild:{get:function(){return this._parentAllowsChild}},loader:{get:function(){return this._loader}},content:{get:function(){return this._loader._content}},bytes:{get:function(){return this._bytes}}}},script:{instance:scriptProperties("public",["swfVersion","bytesTotal","bytesLoaded","parameters","uncaughtErrorEvent"])}}}}.call(this),MorphShapeDefinition=function(){return{__class__:"flash.display.MorphShape",initialize:function(){var a=
this._graphics=new flash.display.Graphics,e=this.symbol;e&&e.paths&&(a._paths=e.paths,a.bbox=e.bbox,a.strokeBbox=e.strokeBbox,this._stage&&("low"===this._stage._quality&&!a._bitmap)&&a._cacheAsBitmap(this._bbox))},__glue__:{"native":{instance:{graphics:{get:function(){return this._graphics}}}}}}}.call(this),MovieClipDefinition=function(){var a={__class__:"flash.display.MovieClip",initialize:function(){this._currentFrame=this._playHead=1;this._currentLabel=this._currentFrameLabel=null;this._currentScene=
0;this._enabled=!0;this._frameScripts={};this._framesLoaded=1;this._isPlaying=!1;this._labelMap={};this._sceneFrameMap={};this._sceneMap={};this._timeline=this._scenes=null;this._totalFrames=1;this._startSoundRegistrations=[];this._complete=this._allowFrameNavigation=!0;var a=this.symbol;if(a){this._timeline=a.timeline||null;this._framesLoaded=a.framesLoaded||1;this._labelMap=Object.create(a.labelMap||null);this._frameScripts=Object.create(a.frameScripts||null);this._totalFrames=a.totalFrames||1;
this._startSoundRegistrations=a.startSoundRegistrations||[];this._scenes=a.scenes||null;this._complete=!1===a.complete?!1:!0;var a=this._labelMap,d;for(d in a)1==a[d]&&(this._currentFrameLabel=this._currentLabel=d)}this._enterFrame(1);var e=this;this._onExecuteFrame=function l(){e._removeEventListener("executeFrame",l);e._allowFrameNavigation=!1;e._callFrame(e._currentFrame);e._allowFrameNavigation=!0;e._playHead!==e._currentFrame&&e._gotoFrame(e._playHead,!0);e._postConstructChildren()};this._addEventListener("executeFrame",
this._onExecuteFrame);if(this._complete&&1>=this._totalFrames)return this;this._onAdvanceFrame=function(){var a=e._playHead+1;if(e._complete&&a>e._totalFrames)a=1;else if(a>e._framesLoaded)return;e._updateDisplayList(a);e._sparse&&e._addEventListener("constructChildren",e._onConstructChildren);e._startSounds(a);e._enterFrame(a);a in e._frameScripts&&e._addEventListener("executeFrame",e._onExecuteFrame)};this._onConstructChildren=function m(){e._removeEventListener("constructChildren",m);e._constructChildren()};
this.play()},_updateDisplayList:function(a){this._destructChildren(a);this._declareChildren(a)},_declareChildren:function(a){var d=this._currentFrame;if(a!==d){var e=this._timeline;a=e[a-1];if(a!==e[d-1])for(var d=null,e=this._currentDisplayList,f=a.depths,l=this._children.length,m=f.length;m--;){for(var p=f[m],r=p|0;e&&e.depth>r;)d=e,e=e.next;var v=null;e&&e.depth===r&&(v=e.obj)&&v._owned&&(l=this.getChildIndex(v));r=e&&e.depth===r?e.cmd:null;if((p=a[p])&&p!==r)r&&v&&p.symbolId===r.symbolId&&p.ratio===
r.ratio?(v._animated&&(v._invalidate(),p.hasMatrix&&v._setTransformMatrix(p.matrix,!1),p.hasCxform&&(v._cxform=p.cxform),p.clip&&(v._clipDepth=p.clipDepth),p.hasName&&(v.name=p.name),p.blend&&(v._blendMode=this._resolveBlendMode(p.blendMode))),e.cmd=p):(v=this._addTimelineChild(p,l),v.next=e,d?d.next=v:this._currentDisplayList=v,d=v)}}},_destructChildren:function(a){var d=this._currentFrame;if(a!==d){var e=this._timeline;a=e[a-1];if(a!==e[d-1]){for(var e=null,f=this._currentDisplayList,d=null;f;){var l=
f.cmd,m=a[f.depth];!m||m.symbolId!==l.symbolId||m.ratio!==l.ratio?(l=f.next,e?e.next=l:this._currentDisplayList=l,f.next=d,d=f,f=l):(e=f,f=f.next)}for(;d;){if((a=d.obj)&&a._owned)this._sparse=!0,this.removeChild(a),a.destroy(),a._isPlaying&&a.stop();d=d.next}}}},_gotoFrame:function(a,d){var e=a!==this._currentFrame;this._allowFrameNavigation||!this._loader._isAvm2Enabled?(e&&(this._updateDisplayList(a),this._enterFrame(a)),this._constructChildren(),this._loader._isAvm2Enabled&&10<=this.loaderInfo._swfVersion?
(e&&this._addEventListener("executeFrame",this._onExecuteFrame),e=avm2.systemDomain,e.broadcastMessage("frameConstructed"),e.broadcastMessage("executeFrame"),e.broadcastMessage("exitFrame")):(e&&(d||!this._loader._isAvm2Enabled)&&this._callFrame(a),this._postConstructChildren())):e&&(this._playHead=a)},_enterFrame:function(a){if(a!==this._currentFrame){this._currentFrameLabel=null;1===a&&(this._currentLabel=null);var d=this._labelMap,e;for(e in d)if(d[e]===a){this._currentFrameLabel=this._currentLabel=
e;break}if(this._scenes){d=this._scenes;e=0;for(var f=d.length;e<f;e++){var l=d[e];if(a>=l._startFrame&&a<=l._endFrame){this._currentScene=e;break}}}this._playHead=this._currentFrame=a}},_callFrame:function(a){if(isNaN(a)&&(a=this._labelMap[a],void 0===a))return;if(a in this._frameScripts){a=this._frameScripts[a];try{for(var d=0,e=a.length;d<e;d++)a[d].call(this)}catch(f){throw TelemetryService.reportTelemetry({topic:"error",error:2}),this.stop(),f;}}},_gotoButtonState:function(a){this._enabled&&
this.gotoLabel("_"+a)},_getAbsFrameNum:function(a,d){1>a&&(a=1);if(d&&this._scenes&&1<this._scenes.length)for(var e=this._scenes,f=0;f<e.length;f++){var l=e[f];if(l.name===d){a+=l._startFrame-1;a>l._endFrame&&(a=l._endFrame);break}}return a>this._framesLoaded?this._framesLoaded:a},_registerStartSounds:function(a,d){this._startSoundRegistrations[a]=d},_initSoundStream:function(a){this._soundStream=new MovieClipSoundStream(a,this)},_addSoundStreamBlock:function(a,d){this._soundStream.appendBlock(a,
d)},_startSounds:function(a){var d=this._startSoundRegistrations[a];if(d)for(var e=this._sounds||(this._sounds={}),f=this.loaderInfo._loader,l=0;l<d.length;l++){var m=d[l],p=m.soundId,m=m.soundInfo,r=e[p];if(!r){var v=f._dictionaryResolved[p];if(!v)continue;r=avm2.systemDomain.findClass(v.className)?avm2.systemDomain.getClass(v.className):avm2.applicationDomain.getClass(v.className);v=r.createAsSymbol(v.props);r.instanceConstructor.call(v);e[p]=r={object:v}}r.channel&&(r.channel.stop(),r.channel=
null);m.stop||(r.channel=r.object.play(0,m.hasLoops?m.loopCount:0))}this._soundStream&&this._soundStream.playFrame(a)},_getAS2Object:function(){if(!this.$as2Object)if(this._avm1SymbolClass){var a=this,d=this._avm1SymbolClass,e=function(){this.init(a);d.call(this)};e.prototype=Object.create(d.prototype);e.instanceConstructor=e;e.debugName="avm1 <symbol constructor wrapper>";construct(e)}else new avm1lib.AS2MovieClip(this);return this.$as2Object},get currentFrame(){var a=this._currentFrame;return this._scenes?
a-this.currentScene._startFrame+1:a},get currentFrameLabel(){return this._currentFrameLabel},get currentLabel(){return this._currentLabel},get currentLabels(){if(this._scenes)return this._scenes[this._currentScene].labels;var a=[],d=this._labelMap,e;for(e in d)a.push(new flash.display.FrameLabel(e,d[e]));return a},get currentScene(){return this._scenes?this._scenes[this._currentScene]:new flash.display.Scene("",this.currentLabels,this._framesLoaded)},get enabled(){return this._enabled},set enabled(a){this._enabled=
a},get framesLoaded(){return this._framesLoaded},get totalFrames(){return this._totalFrames},get scenes(){return this._scenes||[new flash.display.Scene("",this.currentLabels,this._framesLoaded)]},get trackAsMenu(){return!1},set trackAsMenu(a){notImplemented()},addFrameScript:function(){for(var a=this._frameScripts,d=0,e=arguments.length;d<e;d+=2){var f=arguments[d]+1,l=arguments[d+1];if(l){var m=a[f];m?m.push(l):a[f]=[l];f===this._currentFrame&&this._addEventListener("executeFrame",this._onExecuteFrame)}}},
gotoAndPlay:function(a,d){this.play();isNaN(a)?this.gotoLabel(a):this._gotoFrame(this._getAbsFrameNum(a,d))},gotoAndStop:function(a,d){this.stop();isNaN(a)?this.gotoLabel(a):this._gotoFrame(this._getAbsFrameNum(a,d))},gotoLabel:function(a){a=this._labelMap[a];void 0!==a&&this._gotoFrame(a)},isPlaying:function(){return this._isPlaying},nextFrame:function(){this.stop();this._currentFrame<this._framesLoaded&&this._gotoFrame(this._currentFrame+1)},nextScene:function(){this._scenes&&this._currentScene<
this._scenes.length-1&&this._gotoFrame(this._scenes[this._currentScene+1]._startFrame)},play:function(){this._isPlaying||this._complete&&1>=this._totalFrames||(this._isPlaying=!0,this._addEventListener("advanceFrame",this._onAdvanceFrame))},prevFrame:function(){this.stop();1<this._currentFrame&&this._gotoFrame(this._currentFrame-1)},prevScene:function(){this._scenes&&0<this._currentScene&&this._gotoFrame(this._scenes[this._currentScene-1]._startFrame)},stop:function(){this._isPlaying&&!(this._complete&&
1>=this._totalFrames)&&(this._isPlaying=!1,this._removeEventListener("advanceFrame",this._onAdvanceFrame))}},e=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{currentFrame:e(a,"currentFrame"),framesLoaded:e(a,"framesLoaded"),totalFrames:e(a,"totalFrames"),trackAsMenu:e(a,"trackAsMenu"),scenes:e(a,"scenes"),currentScene:e(a,"currentScene"),currentLabel:e(a,"currentLabel"),currentFrameLabel:e(a,"currentFrameLabel"),enabled:e(a,"enabled"),isPlaying:e(a,"isPlaying"),play:a.play,stop:a.stop,
nextFrame:a.nextFrame,prevFrame:a.prevFrame,gotoAndPlay:a.gotoAndPlay,gotoAndStop:a.gotoAndStop,addFrameScript:a.addFrameScript,prevScene:a.prevScene,nextScene:a.nextScene}}};return a}.call(this),MovieClipSoundStream=function(){function a(a,d){var e;try{e=d.addSourceBuffer("audio/mpeg"),a.mediaSource=d,a.sourceBuffer=e,a.rawFrames.forEach(function(a){e.appendBuffer(a)}),delete a.rawFrames}catch(f){console.error("MediaSource mp3 playback is not supported: "+f)}}function e(b,d){this.movieClip=d;this.data=
{sampleRate:b.sampleRate,channels:b.channels};this.seekIndex=[];this.position=0;var e="mp3"===b.format;if(e&&PLAY_USING_AUDIO_TAG){var f=document.createElement("audio");f.preload="metadata";var l=f.loop=!1,m,p;f.addEventListener("timeupdate",function(){if(l){var a=f.currentTime-m,b=performance.now()-p;d._stage._frameScheduler.setDelta(b-1E3*a)}else m=f.currentTime,p=performance.now(),l=!0,d._stage._frameScheduler.startTrackDelta()});f.addEventListener("pause",function(){d._stage._frameScheduler.endTrackDelta();
l=!1});f.addEventListener("seeking",function(){d._stage._frameScheduler.endTrackDelta();l=!1});if(f.canPlayType("audio/mpeg")){this.element=f;"undefined"!==typeof MediaSource?(e=new MediaSource,e.addEventListener("sourceopen",a.bind(null,this,e)),f.src=URL.createObjectURL(e)):console.warn("MediaSource is not supported");this.rawFrames=[];return}}this.data.pcm=new Float32Array(b.samplesCount*b.channels);if(e){var r=this;r.decoderPosition=0;r.decoderSession=new MP3DecoderSession;r.decoderSession.onframedata=
function(a){var b=r.decoderPosition;r.data.pcm.set(a,b);r.decoderPosition=b+a.length}.bind(this);r.decoderSession.onerror=function(a){console.error("ERROR: MP3DecoderSession: "+a)}}}e.prototype={appendBlock:function(a,d){var e=this.position;this.seekIndex[a]=e+d.seek*this.data.channels;this.position=e+d.samplesCount*this.data.channels;if(this.sourceBuffer)this.sourceBuffer.appendBuffer(d.data);else if(this.rawFrames)this.rawFrames.push(d.data);else{var f=this.decoderSession;f?f.pushAsync(d.data):
this.data.pcm.set(d.pcm,e)}},playFrame:function(a){if(!isNaN(this.seekIndex[a])){var d=this.element;if(d){var e=this.data,f=this.seekIndex[a]/e.sampleRate/e.channels;if(!this.channel&&(this.movieClip._complete||this.sourceBuffer))this.sourceBuffer||(a=new Blob(this.rawFrames),d.src=URL.createObjectURL(a)),a=flash.media.SoundChannel.class,e=a.createAsSymbol({element:d}),a.instanceConstructor.call(e),this.channel=e,this.waitFor=this.expectedFrame=0;else if(this.sourceBuffer||!isNaN(d.duration))this.mediaSource&&
this.movieClip._complete&&(this.mediaSource.endOfStream(),this.mediaSource=null),e=d.currentTime,this.expectedFrame!==a?d.paused?(d.play(),d.addEventListener("playing",function p(){d.removeEventListener("playing",p);d.currentTime=f})):d.currentTime=f:0<this.waitFor?this.waitFor<=f&&(d.paused&&d.play(),this.waitFor=0):1<e-f?(console.warn("Sound is faster than frames by "+(e-f)),this.waitFor=e-0.25,d.pause()):1<f-e&&(console.warn("Sound is slower than frames by "+(f-e)),d.currentTime=f+0.25),this.expectedFrame=
a+1}else if(!this.sound){a=flash.media.Sound.class;var l=a.createAsSymbol(this.data);a.instanceConstructor.call(l);e=l.play();this.sound=l;this.channel=e}}}};return e}(),NativeMenuDefinition=function(){return{__class__:"flash.display.NativeMenu",initialize:function(){},__glue__:{"native":{"static":{},instance:{}}}}}.call(this),NativeMenuItemDefinition=function(){return{__class__:"flash.display.NativeMenuItem",initialize:function(){},__glue__:{"native":{"static":{},instance:{enabled:{get:function(){somewhatImplemented("NativeMenuItem.enabled");
return this._enabled},set:function(a){somewhatImplemented("NativeMenuItem.enabled");this._enabled=a}}}}}}}.call(this),SceneDefinition=function(){return{__class__:"flash.display.Scene",initialize:function(){this._endFrame=this._startFrame=1},__glue__:{"native":{"static":{},instance:{}},script:{"static":{},instance:{name:{get:function(){notImplemented("Scene.name");return this._name}},labels:{get:function(){notImplemented("Scene.labels");return this._labels}},numFrames:{get:function(){notImplemented("Scene.numFrames");
return this._numFrames}}}}}}}.call(this),ShaderDefinition=function(){return{__class__:"flash.display.Shader",initialize:function(){this._data=null},__glue__:{"native":{"static":{},instance:{data:{get:function(){return this._data},set:function(a){this._data=a}},precisionHint:{get:function(){return this._precisionHint},set:function(a){this._precisionHint=a}}}},script:{instance:Glue.ALL}}}}.call(this),ShaderDataDefinition=function(){return{__class__:"flash.display.ShaderData",initialize:function(){this._byteCode=
null},__glue__:{"native":{"static":{},instance:{_setByteCode:function(a){this._byteCode=a}}},script:{instance:Glue.ALL}}}}.call(this),ShapeDefinition=function(){return{__class__:"flash.display.Shape",initialize:function(){var a=this._graphics=new flash.display.Graphics;a._parent=this;var e=this.symbol;if(e&&e.paths){a._paths=e.paths;for(var b=0;b<e.paths.length;b++)e.paths[b]=finishShapePath(e.paths[b],e.dictionaryResolved);a.bbox=e.bbox;a.strokeBbox=e.strokeBbox;this._stage&&("low"===this._stage._quality&&
!a._bitmap)&&a._cacheAsBitmap(this._bbox);this.ratio=e.ratio||0}},__glue__:{"native":{instance:{graphics:{get:function(){return this._graphics}}}}}}}.call(this),SimpleButtonDefinition=function(){var a=[0,37,39,36,35,45,46,0,8,0,0,0,0,13,38,40,33,34,9,27],e=[0,0,1,128,64,0,0,32,2,0,0,4,256,16,8,0];return{__class__:"flash.display.SimpleButton",initialize:function(){this._enabled=this._useHandCursor=!0;this._trackAsMenu=!1;this._hitTestState=this._downState=this._overState=this._upState=null;this._currentButtonState=
"up";this._mouseChildren=!1;this._buttonMode=!0;this._avm1StateCode=this._prevAvm1StateCode=0;this._avm1MouseEvents=null;this._isContainer=!0;var a=this.symbol;if(a){var d=a.states;d.down&&(this._downState=this._constructState(d.down,this));d.hitTest&&(this._hitTestState=this._constructState(d.hitTest,this));d.over&&(this._overState=this._constructState(d.over,this));d.up&&(this._upState=this._constructState(d.up,this))}this._loader&&(!this._loader._isAvm2Enabled&&a&&a.buttonActions)&&this._addEventListener("addedToStage",
function(){this._initAvm1Events(a.buttonActions)}.bind(this),!1)},_constructState:function(a){var d=avm2.systemDomain.findClass(a.className)?avm2.systemDomain.getClass(a.className):avm2.applicationDomain.getClass(a.className);a=d.createAsSymbol(a.props);d.instanceConstructor.call(a);1===a._children.length&&(a=a._children[0],a._parent=null,a._index=-1);return a},_updateButton:function(){var a=null;switch(this._currentButtonState){case "up":a=this._upState;break;case "over":a=this._overState;break;
case "down":a=this._downState}if(a){var d=this._children[0];if(d){if(d===a)return;this._stage&&this._stage._removeFromStage(d);d._invalidateTransform()}a?(this._children[0]=a,a._parent=this,a._invalidateTransform(),this._stage&&this._stage._addToStage(a)):this._children.shift()}},_gotoButtonState:function(a){this._invalidateBounds();this._currentButtonState=a;this._updateButton();this._avm1MouseEvents&&this._processAvm1MouseEvents(this._avm1MouseEvents)},_getRegion:function(a){if(!this._hitTestState)return{xMin:0,
yMin:0,xMax:0,yMax:0};var d=this._hitTestState.getBounds(null);return this._getTransformedRect(d,a)},_getAS2Object:function(){this.$as2Object||new avm1lib.AS2Button(this);return this.$as2Object},_initAvm1Events:function(b){for(var d=this._loader._avm1Context,e=null,f=0;f<b.length;f++){var l=b[f],m=function(a){return executeActions(a,d,this._getAS2Object())}.bind(this.parent,l.actionsData),p=l.mouseEventFlags;p&&(this._avm1MouseEvents||(this._avm1MouseEvents=[])).push({flags:p,listener:m});if(l=l.keyPress)e=
e||(e=[]),e.push({keyCode:a[l]||0,charCode:l,listener:m})}if(e){var r=function(a){for(var b=0;b<e.length;b++){var d=e[b];(d.keyCode?d.keyCode===a.keyCode:d.charCode===a.charCode)&&d.listener()}},v=flash.events.KeyboardEvent;this.stage._addEventListener(v.class.KEY_DOWN,r,!1);this._addEventListener("removedFromStage",function(a){a._removeEventListener(v.class.KEY_DOWN,r,!1)}.bind(this,this.stage),!1)}},_processAvm1MouseEvents:function(a){var d=this._avm1StateCode,g=("down"===this._currentButtonState?
1:0)|("up"!==this._currentButtonState?2:0);if(d!==g){this._prevAvm1StateCode=d;this._avm1StateCode=g;d=e[d<<2|g];for(g=0;g<a.length;g++){var f=a[g];0!==(f.flags&d)&&f.listener()}}},__glue__:{"native":{instance:{_updateButton:function(){this._updateButton()},useHandCursor:{get:function(){return this._useHandCursor},set:function(a){this._useHandCursor=a}},enabled:{get:function(){return this._enabled},set:function(a){this._enabled=a}},trackAsMenu:{get:function(){notImplemented("SimpleButton.trackAsMenu");
return this._trackAsMenu},set:function(a){notImplemented("SimpleButton.trackAsMenu");this._trackAsMenu=a}},upState:{get:function(){return this._upState},set:function(a){this._upState=a;this._updateButton()}},overState:{get:function(){return this._overState},set:function(a){this._overState=a;this._updateButton()}},downState:{get:function(){return this._downState},set:function(a){this._downState=a;this._updateButton()}},hitTestState:{get:function(){return this._hitTestState},set:function(a){a!==this._hitTestState&&
(this._invalidate(),this._hitTestState=a)}},soundTransform:{get:function(){notImplemented("SimpleButton.soundTransform");return this._soundTransform},set:function(a){notImplemented("SimpleButton.soundTransform");this._soundTransform=a}}}}}}}.call(this),SpriteDefinition=function(){var a={__class__:"flash.display.Sprite",initialize:function(){this._buttonMode=!1;this._hitArea=null;this._useHandCursor=!0;this._currentDisplayList=this._hitTarget=null;var a=this.symbol;if(a){if(this._graphics=a.graphics||
new flash.display.Graphics,a.timeline&&(a=a.timeline[0]))for(var d=a.depths,e=0;e<d.length;e++){var f=a[d[e]];f&&(f=this._addTimelineChild(f),f.next=this._currentDisplayList,this._currentDisplayList=f)}}else this._graphics=new flash.display.Graphics;this._graphics._parent=this},_addTimelineChild:function(a,d){var e=a.symbolInfo,f=Object.create(e.props);f.symbolId=a.symbolId;f.depth=a.depth;a.clip&&(f.clipDepth=a.clipDepth);a.hasCxform&&(f.cxform=a.cxform);a.hasMatrix&&(f.currentTransform=a.matrix);
a.hasName&&(f.name=a.name);a.hasRatio&&(f.ratio=a.ratio/65535);a.blend&&(f.blendMode=a.blendMode);e={cmd:a,depth:a.depth,className:e.className,props:f,events:a.events,obj:null};void 0!==d?this._children.splice(d,0,e):this._children.push(e);this._sparse=!0;return e},_constructChildren:function(){if(this._sparse){for(var a=this._loader,d=this._children,e=0;e<d.length;e++){var f=d[e];Counter.count("constructChild");if(flash.display.DisplayObject.class.isInstanceOf(f))f._index=e;else{var l=avm2.systemDomain.findClass(f.className)?
avm2.systemDomain.getClass(f.className):avm2.applicationDomain.getClass(f.className),m=Object.create(f.props),p=m.name;m.animated=!0;m.owned=!0;m.parent=this;m.stage=this._stage;-1<this._level&&(m.level=this._level+1);m.index=e;var r=l.createAsSymbol(m);p&&(this[Multiname.getPublicQualifiedName(p)]=r);l.instanceConstructor.call(r);flash.display.BitmapData.class.isInstanceOf(r)&&(l=r,r=flash.display.Bitmap.class.createAsSymbol(m),flash.display.Bitmap.class.instanceConstructor.call(r,l));a._isAvm2Enabled?
r._dispatchEvent("load"):(this._initAvm1Bindings(r,p,f.events),r._dispatchEvent("init"),r._dispatchEvent("construct"),r._needLoadEvent=!0);r._dispatchEvent("added",void 0,!0);this._stage&&this._stage._addToStage(r);d[e]=r;f.obj=r}}this._sparse=!1}},_postConstructChildren:function(){var a=this._loader;if(a&&!a._isAvm2Enabled)for(var a=this._children,d=0;d<a.length;d++){var e=a[d];e._needLoadEvent&&(e._needLoadEvent=!1,e._dispatchEvent("load"))}},_duplicate:function(a,d){var e=this._loader,f=this._parent,
l=f._children,m=this.class,p=this.symbol,r=Object.create(p);r.name=a;r.parent=f;r.depth=d;r=m.createAsSymbol(r);a&&(e&&!e._isAvm2Enabled&&!f.asHasProperty(void 0,a,0,!1))&&f.asSetPublicProperty(a,r);m.instanceConstructor.call(r);r._index=l.length;l.push(r);e._isAvm2Enabled||(f._initAvm1Bindings(r,a,p&&p.events),r._dispatchEvent("init"),r._dispatchEvent("construct"));r._dispatchEvent("load");r._dispatchEvent("added");this._stage&&r._invalidate();return r},_insertChildAtDepth:function(a){this.addChild(a);
var d=a._name,e=this._loader;d&&(e&&!e._isAvm2Enabled&&!this._getAS2Object().asHasProperty(void 0,d,0,!0))&&this._getAS2Object().asSetPublicProperty(d,a._getAS2Object())},_initAvm1Bindings:function(a,d,e){var f=this._loader._avm1Context,l=a.symbol;l&&l.variableName&&a._getAS2Object().asSetPublicProperty("variable",l.variableName);if(e){for(var l=[],m=0;m<e.length;m++){var p=e[m];if(p.eoe)break;var r=function(a){return executeActions(a,f,this._getAS2Object())}.bind(a,p.actionsData),v;for(v in p)if(0===
v.indexOf("on")&&p[v]){var u=v[2].toLowerCase()+v.substring(3);"enterFrame"===u&&(u="frameConstructed");var w=a;if("mouseDown"===u||"mouseUp"===u||"mouseMove"===u)w=this._stage;w._addEventListener(u,r,!1);l.push({name:u,fn:r,target:w})}}0<l.length&&a._addEventListener("removed",function(a){for(var b=0;b<a.length;b++)a[b].target._removeEventListener(a[b].name,a[b].fn,!1)}.bind(a,l),!1)}d&&(this._getAS2Object&&a._getAS2Object)&&this._getAS2Object().asSetPublicProperty(d,a._getAS2Object())},_gotoButtonState:function(){},
get buttonMode(){return this._buttonMode},set buttonMode(a){this._buttonMode=a},get graphics(){return this._graphics},get hitArea(){return this._hitArea},set hitArea(a){if(this._hitArea!==a&&(a&&a._hitTarget&&(a._hitTarget.hitArea=null),this._hitArea=a))a._hitTarget=this},get soundTransform(){notImplemented()},set soundTransform(a){notImplemented()},get useHandCursor(){return this._useHandCursor},set useHandCursor(a){this._useHandCursor=a;this._stage&&(this._stage._mouseMoved=!0)},startDrag:function(){notImplemented()},
startTouchDrag:function(){notImplemented()},stopDrag:function(){notImplemented()},stopTouchDrag:function(){notImplemented()}},e=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{graphics:e(a,"graphics"),buttonMode:e(a,"buttonMode"),dropTarget:e(a,"dropTarget"),startDrag:a.startDrag,stopDrag:a.stopDrag,startTouchDrag:a.startTouchDrag,stopTouchDrag:a.stopTouchDrag,constructChildren:a._constructChildren,hitArea:e(a,"hitArea"),useHandCursor:e(a,"useHandCursor"),soundTransform:e(a,"soundTransform")}}};
return a}.call(this),StageDefinition=function(){return{__class__:"flash.display.Stage",initialize:function(){this._frameRate=24;this._scaleMode="showAll";this._align="";this._stageHeight=this._stageWidth=0;this._quality="high";this._color=4294967295;this._stage=this;this._deferRenderEvent=!1;this._focus=null;this._showDefaultContextMenu=!0;this._displayState="normal";this._colorCorrection="default";this._stageFocusRect=!0;this._fullScreenSourceRect=null;this._wmodeGPU=!1;this._qtree=this._root=null;
this._invalidRegions=new RegionCluster;this._mouseMoved=!1;this._mouseTarget=this;this._mouseEvents=[];this._cursor="auto";this._stageVideos=[];this._concatenatedTransform.invalid=!1},_setup:function(){this._qtree=new QuadTree(0,0,this._stageWidth,this._stageHeight,null);this._invalid=!0},_addToStage:function(a){a._stage=this;a._level=a._parent._level+1;a._invalid=!0;for(var e=a._children,b=0;b<e.length;b++){var d=e[b];null===d._stage&&this._addToStage(d)}a._dispatchEvent("addedToStage")},_removeFromStage:function(a){for(var e=
a._children,b=0;b<e.length;b++)e[b]._stage&&this._removeFromStage(e[b]);a._dispatchEvent("removedFromStage");a._stage=null;a._level=-1;a._region&&(this._qtree.remove(a._region),this._invalidRegions.insert(a._region),a._region=null)},_processInvalidations:function(a){for(var e=this._qtree,b=this._invalidRegions,d=[],g=0,f=this._children,l=f.length;l--;){var m=f[l];a&&(m._invalid=!0);m._invisible=!m._visible;d.push(m)}for(;d.length;){for(var p=d.pop(),r=p._concatenatedTransform,f=p._children,l=f.length;l--;)m=
f[l],flash.display.DisplayObject.class.isInstanceOf(m)&&(p._invalid&&(m._invalid=!0),r.invalid&&(m._concatenatedTransform.invalid=!0),m._invisible=p._invisible||!m._visible,d.push(m));p._level&&r.invalid&&(l=p._currentTransform,f=p._parent._concatenatedTransform,r.a=l.a*f.a+l.b*f.c,r.b=l.a*f.b+l.b*f.d,r.c=l.c*f.a+l.d*f.c,r.d=l.d*f.d+l.c*f.b,r.tx=l.tx*f.a+f.tx+l.ty*f.c,r.ty=l.ty*f.d+f.ty+l.tx*f.b,r.invalid=!1);l=p._region;r=p._getRegion(r);f=p._invisible||!r||0===r.xMax-r.xMin||0===r.yMax-r.yMin||
0>=r.xMax||r.xMin>=this._stageWidth||0>=r.yMax||r.yMin>=this._stageHeight;p._invalid&&(l&&b.insert(l),!f&&(!l||r.xMin!==l.xMin||r.yMin!==l.yMin||r.xMax!==l.xMax||r.yMax!==l.yMax)&&b.insert(r));f?l&&(e.remove(l),p._region=null):l?(l.xMin=r.xMin,l.xMax=r.xMax,l.yMin=r.yMin,l.yMax=r.yMax,e.update(l)):(r.obj=p,e.insert(r),p._region=r);p._zindex=g++}d=new ShapePath;if(a)return d.rect(0,0,this._stageWidth,this._stageHeight),b.reset(),d;a=b.retrieve();for(l=0;l<a.length;l++){for(var f=a[l],g=f.xMin-f.xMin%
20-40,p=f.yMin-f.yMin%20-40,r=f.xMax-f.xMax%20+80,f=f.yMax-f.yMax%20+80,m=e.retrieve(g,r,p,f),v=0;v<m.length;v++)m[v].obj._invalid=!0;d.rect(g,p,r-g,f-p)}b.reset();return d},_handleMouseButtons:function(){if(0!==this._mouseEvents.length)switch(this._mouseEvents.shift()){case "mousedown":this._mouseTarget._buttonMode&&this._mouseTarget._gotoButtonState("down");this._mouseTarget._dispatchEvent("mouseDown");break;case "mouseup":this._mouseTarget._buttonMode&&this._mouseTarget._gotoButtonState("over"),
this._mouseTarget._dispatchEvent("mouseUp")}},_handleMouse:function(){for(var a=this._mouseX,e=this._mouseY,b=this._qtree.retrieve(a,a,e,e),d=[],g=0;g<b.length;g++){var f=b[g].obj,l=!1;if(flash.display.SimpleButton.class.isInstanceOf(f)){if(!f._enabled)continue;var m=f._hitTestState;m._parent=f;l=m._hitTest(!0,a,e,!0);m._parent=null}else l=f._hitTest(!0,a,e,!0);if(l){l=null;flash.display.InteractiveObject.class.isInstanceOf(f)||(l=f,f=f._parent);do f._mouseEnabled?null===l&&(l=f):l=null,f=f._parent;
while(f);d.push(l)}}var p;if(d.length){d.sort(sortByZindex);for(g=d.length;g--;){p=null;f=d[g];if(!flash.display.InteractiveObject.class.isInstanceOf(f))for(a=g;a--;)d[a]._parent===f._parent&&flash.display.InteractiveObject.class.isInstanceOf(d[a])&&(f=d[a],g=a);do{if(flash.display.InteractiveObject.class.isInstanceOf(f)&&(!p||!f._mouseChildren)&&!f._hitArea)p=f;f=f._parent}while(f);if(!(p!==d[g]&&flash.display.SimpleButton.class.isInstanceOf(p)))break}}p?p._hitTarget&&(p=p._hitTarget):p=this;if(p===
this._mouseTarget)p._dispatchEvent("mouseMove");else{this._mouseTarget._buttonMode&&this._mouseTarget._gotoButtonState("up");this._mouseTarget._dispatchEvent("mouseOut");d=this._mouseTarget;g=d._parent;a=p;e=a._parent;for(b="auto";0<=d._level&&d!==e;)d._hasEventListener("rollOut")&&d._dispatchEvent("rollOut"),d=d._parent;for(;0<=a._level&&a!==g;)a._hasEventListener("rollOver")&&a._dispatchEvent("rollOver"),a._buttonMode&&a._useHandCursor&&(b="pointer"),a=a._parent;p._buttonMode&&p._gotoButtonState("over");
p._dispatchEvent("mouseOver");this._mouseTarget=p;this._cursor=b}},_as2SetLevel:function(a,e){somewhatImplemented("Stage._as2SetLevel");this.addChild(e)},__glue__:{"native":{instance:{invalidate:function(){this._deferRenderEvent=this._invalid=!0},isFocusInaccessible:function(){notImplemented("Stage.isFocusInaccessible")},set_displayState:function(a){somewhatImplemented("Stage.set_displayState");this._displayState=a},get_simulatedFullScreenWidth:function(){notImplemented("Stage.get_simulatedFullScreenWidth")},
get_simulatedFullScreenHeight:function(){notImplemented("Stage.get_simulatedFullScreenHeight")},removeChildAt:function(){notImplemented("Stage.removeChildAt")},swapChildrenAt:function(){notImplemented("Stage.swapChildrenAt")},requireOwnerPermissions:function(){somewhatImplemented("Stage.requireOwnerPermissions")},frameRate:{get:function(){return this._frameRate},set:function(a){this._frameRate=a}},scaleMode:{get:function(){return this._scaleMode},set:function(a){this._scaleMode=a;this._invalid=!0}},
align:{get:function(){return this._align},set:function(a){this._align=a;this._invalid=!0}},stageWidth:{get:function(){return this._stageWidth/20},set:function(a){notImplemented("Stage.stageWidth");this._stageWidth=20*a|0}},stageHeight:{get:function(){return this._stageHeight/20},set:function(a){notImplemented("Stage.stageHeight");this._stageHeight=20*a|0}},showDefaultContextMenu:{get:function(){return this._showDefaultContextMenu},set:function(a){somewhatImplemented("Stage.showDefaultContextMenu");
this._showDefaultContextMenu=a}},focus:{get:function(){return this._focus},set:function(a){somewhatImplemented("Stage.focus");this._focus=a}},colorCorrection:{get:function(){return this._colorCorrection},set:function(a){notImplemented("Stage.colorCorrection");this._colorCorrection=a}},colorCorrectionSupport:{get:function(){return!1}},stageFocusRect:{get:function(){return this._stageFocusRect},set:function(a){somewhatImplemented("Stage.stageFocusRect");this._stageFocusRect=a}},quality:{get:function(){return this._quality},
set:function(a){somewhatImplemented("Stage.stageFocusRect");this._quality=a}},displayState:{get:function(){return this._displayState},set:function(a){this._displayState=a}},simulatedDisplayState:{get:function(){notImplemented("Stage.simulatedDisplayState");return this._simulatedDisplayState},set:function(a){notImplemented("Stage.simulatedDisplayState");this._simulatedDisplayState=a}},fullScreenSourceRect:{get:function(){return this._fullScreenSourceRect},set:function(a){notImplemented("Stage.fullScreenSourceRect");
this._fullScreenSourceRect=a}},simulatedFullScreenSourceRect:{get:function(){notImplemented("Stage.simulatedFullScreenSourceRect");return this._simulatedFullScreenSourceRect},set:function(a){notImplemented("Stage.simulatedFullScreenSourceRect");this._simulatedFullScreenSourceRect=a}},stageVideos:{get:function(){somewhatImplemented("Stage.stageVideos");return this._stageVideos}},stage3Ds:{get:function(){notImplemented("Stage.stage3Ds");return this._stage3Ds}},color:{get:function(){return this._color},
set:function(a){this._color=a;this._invalid=!0}},fullScreenWidth:{get:function(){notImplemented("Stage.fullScreenWidth");return this._fullScreenWidth}},fullScreenHeight:{get:function(){notImplemented("Stage.fullScreenHeight");return this._fullScreenHeight}},wmodeGPU:{get:function(){somewhatImplemented("Stage.wmodeGPU");return this._wmodeGPU}},softKeyboardRect:{get:function(){notImplemented("Stage.softKeyboardRect");return this._softKeyboardRect}},allowsFullScreen:{get:function(){return!1}},displayContextInfo:{get:function(){notImplemented("Stage.displayContextInfo");
return this._displayContextInfo}}}}}}}.call(this),EventDefinition=function(){return{__class__:"flash.events.Event",initialize:function(){this._isDefaultPrevented=this._stopImmediatePropagation=this._stopPropagation=!1;this._currentTarget=this._target=null;this._eventPhase=2},__glue__:{"native":{instance:{ctor:function(a,e,b){Counter.count("Event: "+a);this._type=a;this._bubbles=e;this._cancelable=b},stopPropagation:function(){this._stopPropagation=!0},stopImmediatePropagation:function(){this._stopImmediatePropagation=
this._stopPropagation=!0},preventDefault:function(){this._cancelable&&(this._isDefaultPrevented=!0)},isDefaultPrevented:function(){return this._isDefaultPrevented},type:{get:function(){return this._type}},bubbles:{get:function(){return this._bubbles}},cancelable:{get:function(){return this._cancelable}},target:{get:function(){return this._target}},currentTarget:{get:function(){return this._currentTarget}},eventPhase:{get:function(){return this._eventPhase}}}},script:{"static":Glue.ALL,instance:{clone:"open public clone"}}}}}.call(this),
EventDispatcherDefinition=function(){function a(a,g,f,l){var m=a._target,p=g._type||g;a=a._listeners[p];if(l||"string"===typeof g&&b[g]||g._bubbles){for(var r=[],v=m._parent;v;)v._hasEventListener(p)&&r.push(v),v=v._parent;if(!a&&!r.length)return!0;for(var u=!0,v=r.length;v--&&u;)var u=r[v],w=u._captureListeners[p],u=e(w,g,f,l,m,u,1);a&&u&&(u=e(a,g,f,l,m));for(v=0;v<r.length&&u;v++)u=r[v],w=u._listeners[p],u=e(w,g,f,l,m,u,3)}else a&&e(a,g,f,l,m);return!g._isDefaultPrevented}function e(a,e,f,l,m,p,
r){if(a){a=a.slice();l=!0;try{for(var v=0;v<a.length;v++){var u=a[v],w=u.handleEvent.methodInfo;if(w&&w.parameters.length&&!w.parameters[0].isUsed)u.handleEvent();else if(l&&("string"===typeof e?f?e=new f(e):b[e]?(e=new flash.events.MouseEvent(e,b[e]),m._stage&&(e._localX=m.mouseX,e._localY=m.mouseY)):e=new flash.events.Event(e):e._target&&(e=e.clone()),e._target=m,e._currentTarget=p||m,e._eventPhase=r||2,l=!1),u.handleEvent(e),e._stopImmediatePropagation)break}}catch(A){throw avm2.exceptions.push({source:"avm2",
message:A.message,stack:A.stack}),A;}}return!e._stopPropagation}var b={click:!0,contextMenu:!0,doubleClick:!0,middleClick:!0,middleMouseDown:!0,middleMouseUp:!0,mouseDown:!0,mouseMove:!0,mouseOut:!0,mouseOver:!0,mouseUp:!0,mouseWheel:!0,releaseOutside:!0,rightClick:!0,rightMouseDown:!0,rightMouseUp:!0,rollOut:!1,rollOver:!1};return{__class__:"flash.events.EventDispatcher",initialize:function(){this._target=this;this._listeners={};this._captureListeners={}},_addEventListenerImpl:function(a,b,e,l){"function"!==
typeof b&&throwError("TypeError",Errors.CheckTypeFailedError,b,"Function");var m=e?this._captureListeners:this._listeners;e=m[a];var p={handleEvent:b,priority:l||0};if(e){for(m=a=e.length;m--;){var r=e[m];if(r.handleEvent===b)return;l>r.priority&&(a=m)}e.splice(a,0,p)}else m[a]=[p]},_addEventListener:function(a,b,e,l){this._addEventListenerImpl(a,b,e,l)},_removeEventListenerImpl:function(a,b,e){"function"!==typeof b&&throwError("TypeError",Errors.CheckTypeFailedError,b,"Function");e=e?this._captureListeners:
this._listeners;var l=e[a];if(l)for(var m=0;m<l.length;m++)if(l[m].handleEvent===b){l.splice(m,1);l.length||(e[a]=null);break}},_removeEventListener:function(a,b,e){this._removeEventListenerImpl(a,b,e)},_hasEventListener:function(a){return this._listeners[a]||this._captureListeners[a]},_dispatchEvent:function(b,e,f){a(this,b,e,f)},__glue__:{"native":{instance:{ctor:function(a){this._target=a||this},addEventListener:function(a,b,e,l){this._addEventListener(a,b,e,l)},removeEventListener:function(a,
b,e){this._removeEventListener(a,b,e)},hasEventListener:function(a){return this._hasEventListener(a)},willTrigger:function(a){var b=this._target;do if(b._hasEventListener(a))return!0;while(b=b._parent);return!1},dispatchEventFunction:function(b){return a(this,b)}}}}}}.call(this),KeyboardEventDefinition=function(){return{__class__:"flash.events.KeyboardEvent",__glue__:{"native":{instance:{updateAfterEvent:function(){notImplemented("KeyboardEvent.updateAfterEvent")},charCode:{get:function(){return this._charCode},
set:function(a){this._charCode=a}},ctrlKey:{get:function(){return this._ctrlKey},set:function(a){this._ctrlKey=a}},altKey:{get:function(){return this._altKey},set:function(a){this._altKey=a}},shiftKey:{get:function(){return this._shiftKey},set:function(a){this._shiftKey=a}}}},script:{"static":Glue.ALL,instance:{keyCode:"public keyCode"}}}}}.call(this),MouseEventDefinition=function(){return{__class__:"flash.events.MouseEvent",initialize:function(){this._localY=this._localX=NaN},__glue__:{"native":{instance:{updateAfterEvent:function(){},
getStageX:function(){if(this._target){var a=this._target._getConcatenatedTransform(null,!1);return(a.a*this._localX+a.c*this._localY+a.tx)/20}return this._localX/20},getStageY:function(){if(this._target){var a=this._target._getConcatenatedTransform(null,!1);return(a.d*this._localY+a.b*this._localX+a.ty)/20}return this._localY/20},localX:{get:function(){return this._localX/20},set:function(a){this._localX=20*a|0}},localY:{get:function(){return this._localY/20},set:function(a){this._localY=20*a|0}}}},
script:{"static":Glue.ALL}}}}.call(this),TextEventDefinition=function(){return{__class__:"flash.events.TextEvent",__glue__:{"native":{instance:{copyNativeData:function(){notImplemented("TextEvent.copyNativeData")}}}}}}.call(this),TimerEventDefinition=function(){return{__class__:"flash.events.TimerEvent",__glue__:{"native":{instance:{updateAfterEvent:function(){notImplemented("TimerEvent.updateAfterEvent")}}}}}}.call(this),ExternalInterfaceDefinition=function(){function a(a,e){if(b.hasOwnProperty(a))return b[a](a,
e)}var e=!1,b={};return{__class__:"flash.external.ExternalInterface",initialize:function(){},__glue__:{"native":{"static":{_initJS:function(){e||(TelemetryService.reportTelemetry({topic:"feature",feature:1}),e=!0,FirefoxCom.initJS(a))},_getPropNames:function(a){var b=[];forEachPublicProperty(a,function(a){b.push(a)});return b},_addCallback:function(a,e,f){FirefoxCom.request("externalCom",{action:"register",functionName:a,remove:f});f?delete b[a]:b[a]=e},_evalJS:function(a){return FirefoxCom.requestSync("externalCom",
{action:"eval",expression:a})},_callOut:function(a){return FirefoxCom.requestSync("externalCom",{action:"call",request:a})},available:{get:function(){return!0}},objectID:{get:function(){return FirefoxCom.requestSync("externalCom",{action:"getId"})}},activeX:{get:function(){return!1}}},instance:{}}}}}.call(this),BevelFilterDefinition=function(){return{__class__:"flash.filters.BevelFilter",initialize:function(){},_updateFilterBounds:function(){},__glue__:{}}}.call(this),BitmapFilterDefinition=function(){return{__class__:"flash.filters.BitmapFilter",
initialize:function(){},_updateFilterBounds:function(){},__glue__:{}}}.call(this),BlurFilterDefinition=function(){return{__class__:"flash.filters.BlurFilter",initialize:function(){},_updateFilterBounds:function(a){var e=20*this._blurX*this._quality,b=20*this._blurY*this._quality;a.xMin-=e;a.xMax+=e;a.yMin-=b;a.yMax+=b},__glue__:{"native":{"static":{},instance:{blurX:{get:function(){return this._blurX},set:function(a){this._blurX=a}},blurY:{get:function(){return this._blurY},set:function(a){this._blurY=
a}},quality:{get:function(){return this._quality},set:function(a){this._quality=a}}}}}}}.call(this),ColorMatrixFilterDefinition=function(){return{__class__:"flash.filters.ColorMatrixFilter",initialize:function(){},_updateFilterBounds:function(){},__glue__:{"native":{instance:{matrix:{get:function(){return this._matrix},set:function(a){this._matrix=a}}}}}}}.call(this),ConvolutionFilterDefinition=function(){return{__class__:"flash.filters.ConvolutionFilter",initialize:function(){},_updateFilterBounds:function(){},
__glue__:{}}}.call(this),DisplacementMapFilterDefinition=function(){return{__class__:"flash.filters.DisplacementMapFilter",initialize:function(){},_updateFilterBounds:function(){},__glue__:{}}}.call(this),DropShadowFilterDefinition=function(){return{__class__:"flash.filters.DropShadowFilter",initialize:function(){},_updateFilterBounds:function(a){var e=this._angle*Math.PI/180,b=Math.sin(e)*this._distance,e=Math.cos(e)*this._distance,d=20*this._blurX*this._quality,g=20*this._blurY*this._quality;a.xMin-=
d-(0<e?0:e);a.xMax+=d+Math.abs(e);a.yMin-=g-(0<b?0:b);a.yMax+=g+Math.abs(b)},__glue__:{"native":{instance:{distance:{get:function(){return this._distance},set:function(a){this._distance=a}},angle:{get:function(){return this._angle},set:function(a){this._angle=a}},color:{get:function(){return this._color},set:function(a){this._color=a}},alpha:{get:function(){return this._alpha},set:function(a){this._alpha=a}},blurX:{get:function(){return this._blurX},set:function(a){this._blurX=a}},blurY:{get:function(){return this._blurY},
set:function(a){this._blurY=a}},hideObject:{get:function(){return this._hideObject},set:function(a){this._hideObject=a}},inner:{get:function(){return this._inner},set:function(a){this._inner=a}},knockout:{get:function(){return this._knockout},set:function(a){this._knockout=a}},quality:{get:function(){return this._quality},set:function(a){this._quality=a}},strength:{get:function(){return this._strength},set:function(a){this._strength=a}}}}}}}.call(this),GlowFilterDefinition=function(){return{__class__:"flash.filters.GlowFilter",
initialize:function(){},_updateFilterBounds:function(a){var e=20*this._blurX*this._quality,b=20*this._blurY*this._quality;a.xMin-=e;a.xMax+=e;a.yMin-=b;a.yMax+=b},__glue__:{"native":{"static":{},instance:{color:{get:function(){return this._color},set:function(a){this._color=a}},alpha:{get:function(){return this._alpha},set:function(a){this._alpha=a}},blurX:{get:function(){return this._blurX},set:function(a){this._blurX=a}},blurY:{get:function(){return this._blurY},set:function(a){this._blurY=a}},
inner:{get:function(){return this._inner},set:function(a){this._inner=a}},knockout:{get:function(){return this._knockout},set:function(a){this._knockout=a}},quality:{get:function(){return this._quality},set:function(a){this._quality=a}},strength:{get:function(){return this._strength},set:function(a){this._strength=a}}}}}}}.call(this),GradientBevelFilterDefinition=function(){return{__class__:"flash.filters.GradientBevelFilter",initialize:function(){},_updateFilterBounds:function(){},__glue__:{}}}.call(this),
GradientGlowFilterDefinition=function(){return{__class__:"flash.filters.GradientGlowFilter",initialize:function(){},_updateFilterBounds:function(){},__glue__:{}}}.call(this),ShaderFilterDefinition=function(){return{__class__:"flash.filters.ShaderFilter",initialize:function(){},_updateFilterBounds:function(){},__glue__:{}}}.call(this),ColorTransformDefinition=function(){return{__class__:"flash.geom.ColorTransform",__glue__:{script:{instance:Glue.ALL}}}}.call(this),MatrixDefinition=function(){return{__class__:"flash.geom.Matrix",
__glue__:{script:{instance:Glue.ALL}}}}.call(this),Matrix3DDefinition=function(){function a(a,d,e,f,l,m,p){var r=d*d,v=e*e,u=f*f,w=r+v+u,A=Math.sqrt(w);d/=A;e/=A;f/=A;r/=w;v/=w;u/=w;w=Math.cos(a);a=Math.sin(a);return new flash.geom.Matrix3D([r+(v+u)*w,d*e*(1-w)+f*a,d*f*(1-w)-e*a,0,d*e*(1-w)-f*a,v+(r+u)*w,e*f*(1-w)+d*a,0,d*f*(1-w)+e*a,e*f*(1-w)-d*a,u+(r+v)*w,0,(l*(v+u)-d*(m*e+p*f))*(1-w)+(m*f-p*e)*a,(m*(r+u)-e*(l*d+p*f))*(1-w)+(p*d-l*f)*a,(p*(r+v)-f*(l*d+m*e))*(1-w)+(l*e-m*d)*a,1])}var e=new Uint32Array([0,
4,8,12,1,5,9,13,2,6,10,14,3,7,11,15]);return{__class__:"flash.geom.Matrix3D",initialize:function(){},__glue__:{"native":{"static":{interpolate:function(){notImplemented("Matrix3D.interpolate")}},instance:{ctor:function(a){this._matrix=new Float32Array(16);a&&16<=a.length?this.copyRawDataFrom(a,0,!1):this.identity()},clone:function(){return new flash.geom.Matrix3D(this._matrix)},copyToMatrix3D:function(a){a._matrix.set(this._matrix)},append:function(a){var d=a._matrix,e=this._matrix;a=this._matrix;
var f=d[0],l=d[4],m=d[8],p=d[12],r=d[1],v=d[5],u=d[9],w=d[13],A=d[2],z=d[6],s=d[10],B=d[14],y=d[3],D=d[7],G=d[11],d=d[15],C=e[0],E=e[4],I=e[8],K=e[12],S=e[1],R=e[5],L=e[9],F=e[13],O=e[2],N=e[6],H=e[10],P=e[14],M=e[3],U=e[7],J=e[11],e=e[15];a[0]=f*C+l*S+m*O+p*M;a[1]=r*C+v*S+u*O+w*M;a[2]=A*C+z*S+s*O+B*M;a[3]=y*C+D*S+G*O+d*M;a[4]=f*E+l*R+m*N+p*U;a[5]=r*E+v*R+u*N+w*U;a[6]=A*E+z*R+s*N+B*U;a[7]=y*E+D*R+G*N+d*U;a[8]=f*I+l*L+m*H+p*J;a[9]=r*I+v*L+u*H+w*J;a[10]=A*I+z*L+s*H+B*J;a[11]=y*I+D*L+G*H+d*J;a[12]=f*
K+l*F+m*P+p*e;a[13]=r*K+v*F+u*P+w*e;a[14]=A*K+z*F+s*P+B*e;a[15]=y*K+D*F+G*P+d*e},prepend:function(a){var d=this._matrix,e=a._matrix;a=this._matrix;var f=d[0],l=d[4],m=d[8],p=d[12],r=d[1],v=d[5],u=d[9],w=d[13],A=d[2],z=d[6],s=d[10],B=d[14],y=d[3],D=d[7],G=d[11],d=d[15],C=e[0],E=e[4],I=e[8],K=e[12],S=e[1],R=e[5],L=e[9],F=e[13],O=e[2],N=e[6],H=e[10],P=e[14],M=e[3],U=e[7],J=e[11],e=e[15];a[0]=f*C+l*S+m*O+p*M;a[1]=r*C+v*S+u*O+w*M;a[2]=A*C+z*S+s*O+B*M;a[3]=y*C+D*S+G*O+d*M;a[4]=f*E+l*R+m*N+p*U;a[5]=r*E+
v*R+u*N+w*U;a[6]=A*E+z*R+s*N+B*U;a[7]=y*E+D*R+G*N+d*U;a[8]=f*I+l*L+m*H+p*J;a[9]=r*I+v*L+u*H+w*J;a[10]=A*I+z*L+s*H+B*J;a[11]=y*I+D*L+G*H+d*J;a[12]=f*K+l*F+m*P+p*e;a[13]=r*K+v*F+u*P+w*e;a[14]=A*K+z*F+s*P+B*e;a[15]=y*K+D*F+G*P+d*e},invert:function(){var a=this.determinant;if(1E-7>Math.abs(a))return!1;var a=1/a,d=this._matrix,e=d[0],f=d[1],l=d[2],m=d[3],p=d[4],r=d[5],v=d[6],u=d[7],w=d[8],A=d[9],z=d[10],s=d[11],B=d[12],y=d[13],D=d[14],G=d[15];d[0]=a*(r*(z*G-D*s)-A*(v*G-D*u)+y*(v*s-z*u));d[1]=-a*(f*(z*
G-D*s)-A*(l*G-D*m)+y*(l*s-z*m));d[2]=a*(f*(v*G-D*u)-r*(l*G-D*m)+y*(l*u-v*m));d[3]=-a*(f*(v*s-z*u)-r*(l*s-z*m)+A*(l*u-v*m));d[4]=-a*(p*(z*G-D*s)-w*(v*G-D*u)+B*(v*s-z*u));d[5]=a*(e*(z*G-D*s)-w*(l*G-D*m)+B*(l*s-z*m));d[6]=-a*(e*(v*G-D*u)-p*(l*G-D*m)+B*(l*u-v*m));d[7]=a*(e*(v*s-z*u)-p*(l*s-z*m)+w*(l*u-v*m));d[8]=a*(p*(A*G-y*s)-w*(r*G-y*u)+B*(r*s-A*u));d[9]=-a*(e*(A*G-y*s)-w*(f*G-y*m)+B*(f*s-A*m));d[10]=a*(e*(r*G-y*u)-p*(f*G-y*m)+B*(f*u-r*m));d[11]=-a*(e*(r*s-A*u)-p*(f*s-A*m)+w*(f*u-r*m));d[12]=-a*(p*
(A*D-y*z)-w*(r*D-y*v)+B*(r*z-A*v));d[13]=a*(e*(A*D-y*z)-w*(f*D-y*l)+B*(f*z-A*l));d[14]=-a*(e*(r*D-y*v)-p*(f*D-y*l)+B*(f*v-r*l));d[15]=a*(e*(r*z-A*v)-p*(f*z-A*l)+w*(f*v-r*l));return!0},identity:function(){var a=this._matrix;a[0]=a[5]=a[10]=a[15]=1;a[1]=a[2]=a[3]=a[4]=a[6]=a[7]=a[8]=a[9]=a[11]=a[12]=a[13]=a[14]=0},decompose:function(){notImplemented("Matrix3D.decompose")},recompose:function(){notImplemented("Matrix3D.recompose")},appendTranslation:function(a,d,e){var f=this._matrix,l=f[3],m=f[7],p=
f[11],r=f[15];f[0]+=a*l;f[1]+=d*l;f[2]+=e*l;f[4]+=a*m;f[5]+=d*m;f[6]+=e*m;f[8]+=a*p;f[9]+=d*p;f[10]+=e*p;f[12]+=a*r;f[13]+=d*r;f[14]+=e*r},appendRotation:function(b,d,e){this.append(a(b/180*Math.PI,d.x,d.y,d.z,e?e.x:0,e?e.y:0,e?e.z:0))},appendScale:function(a,d,e){var f=this._matrix;f[0]*=a;f[1]*=d;f[2]*=e;f[4]*=a;f[5]*=d;f[6]*=e;f[8]*=a;f[9]*=d;f[10]*=e;f[12]*=a;f[13]*=d;f[14]*=e},prependTranslation:function(a,d,e){var f=this._matrix,l=f[1],m=f[5],p=f[9],r=f[2],v=f[6],u=f[10],w=f[3],A=f[7],z=f[11];
f[12]+=f[0]*a+f[4]*d+f[8]*e;f[13]+=l*a+m*d+p*e;f[14]+=r*a+v*d+u*e;f[15]+=w*a+A*d+z*e},prependRotation:function(b,d,e){this.prepend(a(b/180*Math.PI,d.x,d.y,d.z,e?e.x:0,e?e.y:0,e?e.z:0))},prependScale:function(a,d,e){var f=this._matrix;f[0]*=a;f[1]*=a;f[2]*=a;f[3]*=a;f[4]*=d;f[5]*=d;f[6]*=d;f[7]*=d;f[8]*=e;f[9]*=e;f[10]*=e;f[11]*=e},transformVector:function(a){var d=this._matrix,e=a.x,f=a.y;a=a.z;return new flash.geom.Vector3D(d[0]*e+d[4]*f+d[8]*a+d[12],d[1]*e+d[5]*f+d[9]*a+d[13],d[2]*e+d[6]*f+d[10]*
a+d[14])},deltaTransformVector:function(a){var d=this._matrix,e=a.x,f=a.y;a=a.z;return new flash.geom.Vector3D(d[0]*e+d[4]*f+d[8]*a,d[1]*e+d[5]*f+d[9]*a,d[2]*e+d[6]*f+d[10]*a)},transformVectors:function(a,d){for(var e=this._matrix,f=e[0],l=e[4],m=e[8],p=e[12],r=e[1],v=e[5],u=e[9],w=e[13],A=e[2],z=e[6],s=e[10],e=e[14],B=0;B<a.length-2;B+=3){var y=a.asGetNumericProperty(B),D=a.asGetNumericProperty(B+1),G=a.asGetNumericProperty(B+2);d.push(f*y+l*D+m*G+p);d.push(r*y+v*D+u*G+w);d.push(A*y+z*D+s*G+e)}},
transpose:function(){var a=this._matrix,d;d=a[1];a[1]=a[4];a[4]=d;d=a[2];a[2]=a[8];a[5]=d;d=a[3];a[3]=a[12];a[12]=d;d=a[6];a[6]=a[9];a[9]=d;d=a[7];a[7]=a[13];a[13]=d;d=a[11];a[11]=a[14];a[14]=d},pointAt:function(){notImplemented("Matrix3D.pointAt")},interpolateTo:function(){notImplemented("Matrix3D.interpolateTo")},copyFrom:function(a){this._matrix.set(a._matrix)},copyRawDataTo:function(a,d,g){var f=this._matrix;if(g){g=0;for(d|=0;16>g;g++,d++)a.asSetNumericProperty(d,f[e[g]])}else{g=0;for(d|=0;16>
g;g++,d++)a.asSetNumericProperty(d,f[g])}},copyRawDataFrom:function(a,d,g){var f=this._matrix;if(g){g=0;for(d|=0;16>g;g++,d++)f[e[g]]=a.asGetNumericProperty(d)||0}else{g=0;for(d|=0;16>g;g++,d++)f[g]=a.asGetNumericProperty(d)||0}},copyRowTo:function(a,d){var e=a|0,f=this._matrix;d.x=f[e];d.y=f[e+4];d.z=f[e+8];d.w=f[e+12]},copyColumnTo:function(a,d){var e=a<<2,f=this._matrix;d.x=f[e];d.y=f[e+1];d.z=f[e+2];d.w=f[e+3]},copyRowFrom:function(a,d){var e=a|0,f=this._matrix;f[e]=d.x;f[e+4]=d.y;f[e+8]=d.z;
f[e+12]=d.w},copyColumnFrom:function(a,d){var e=a<<2,f=this._matrix;f[e]=d.x;f[e+1]=d.y;f[e+2]=d.z;f[e+3]=d.w},rawData:{get:function(){var a=new Float64Vector;this.copyRawDataTo(a,0,!1);return a},set:function(a){this.copyRawDataFrom(a,0,!1)}},position:{get:function(){var a=this._matrix;return new flash.geom.Vector3D(a[12],a[13],a[14])},set:function(a){var d=this._matrix;d[12]=a.x;d[13]=a.y;d[14]=a.z}},determinant:{get:function(){var a=this._matrix,d=a[4],e=a[8],f=a[12],l=a[5],m=a[9],p=a[13],r=a[6],
v=a[10],u=a[14],w=a[7],A=a[11],z=a[15];return a[0]*(l*(v*z-A*u)-r*(m*z-A*p)+w*(m*u-v*p))-a[1]*(d*(v*z-A*u)-r*(e*z-A*f)+w*(e*u-v*f))+a[2]*(d*(m*z-A*p)-l*(e*z-A*f)+w*(e*p-m*f))-a[3]*(d*(m*u-v*p)-l*(e*u-v*f)+r*(e*p-m*f))}}}},script:{instance:Glue.ALL}}}}.call(this),PointDefinition=function(){return{__class__:"flash.geom.Point",__glue__:{script:{"static":Glue.ALL,instance:Glue.ALL}}}}.call(this),RectangleDefinition=function(){return{__class__:"flash.geom.Rectangle",__glue__:{script:{instance:Glue.ALL}}}}.call(this),
TransformDefinition=function(){var a={__class__:"flash.geom.Transform",get colorTransform(){var a=this._target._cxform;return a?new flash.geom.ColorTransform(a.redMultiplier/256,a.greenMultiplier/256,a.blueMultiplier/256,a.alphaMultiplier/256,a.redOffset,a.greenOffset,a.blueOffset,a.alphaOffset):new flash.geom.ColorTransform},set colorTransform(a){avm2.systemDomain.getClass("flash.geom.ColorTransform").isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.geom.ColorTransform");
this._target._cxform={redMultiplier:256*a.redMultiplier,greenMultiplier:256*a.greenMultiplier,blueMultiplier:256*a.blueMultiplier,alphaMultiplier:256*a.alphaMultiplier,redOffset:a.redOffset,greenOffset:a.greenOffset,blueOffset:a.blueOffset,alphaOffset:a.alphaOffset};this._target._invalidate()},get concatenatedColorTransform(){var a=this.colorTransform;a.concat(this._target.parent.transform.concatenatedColorTransform);return a},get concatenatedMatrix(){if(this._target._current3DTransform)return null;
var a=this._target._getConcatenatedTransform(null,!1);return new flash.geom.Matrix(a.a,a.b,a.c,a.d,a.tx/20,a.ty/20)},get matrix(){if(this._target._current3DTransform)return null;var a=this._target._currentTransform;return new flash.geom.Matrix(a.a,a.b,a.c,a.d,a.tx/20,a.ty/20)},set matrix(a){flash.geom.Matrix.class.isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.geom.Matrix");var d=this._target;d._invalidate();d._setTransformMatrix(a,!0);d._current3DTransform=null;d._animated=
!1},get matrix3D(){var a=this._target._current3DTransform;return a&&a.clone()},set matrix3D(a){avm2.systemDomain.getClass("flash.geom.Matrix3D").isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.geom.Matrix3D");var d=a.rawData;this.matrix=new flash.geom.Matrix(d.asGetPublicProperty(0),d.asGetPublicProperty(1),d.asGetPublicProperty(4),d.asGetPublicProperty(5),d.asGetPublicProperty(12),d.asGetPublicProperty(13));this._target._current3DTransform=a},ctor:function(a){this._target=
a}},e=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{colorTransform:e(a,"colorTransform"),concatenatedColorTransform:e(a,"concatenatedColorTransform"),concatenatedMatrix:e(a,"concatenatedMatrix"),matrix:e(a,"matrix"),matrix3D:e(a,"matrix3D"),ctor:a.ctor}}};return a}.call(this),Vector3DDefinition=function(){return{__class__:"flash.geom.Vector3D",initialize:function(){},__glue__:{script:{instance:Glue.ALL}}}}.call(this),ID3InfoDefinition=function(){return{__glue__:{script:{instance:{songName:"public songName",
genre:"public genre",artist:"public artist",track:"public track",album:"public album",year:"public year",comment:"public comment"}}}}}.call(this),MicrophoneDefinition=function(){return{__class__:"flash.media.Microphone",initialize:function(){},__glue__:{"native":{"static":{getMicrophone:function(){notImplemented("Microphone.getMicrophone")},getEnhancedMicrophone:function(){notImplemented("Microphone.getEnhancedMicrophone")},names:{get:function(){notImplemented("Microphone.names")}},isSupported:{get:function(){notImplemented("Microphone.isSupported")}}},
instance:{setSilenceLevel:function(){notImplemented("Microphone.setSilenceLevel")},setUseEchoSuppression:function(){notImplemented("Microphone.setUseEchoSuppression")},setLoopBack:function(){notImplemented("Microphone.setLoopBack")},gain:{set:function(a){notImplemented("Microphone.gain");this._gain=a},get:function(){notImplemented("Microphone.gain");return this._gain}},rate:{set:function(a){notImplemented("Microphone.rate");this._rate=a},get:function(){notImplemented("Microphone.rate");return this._rate}},
codec:{set:function(a){notImplemented("Microphone.codec");this._codec=a},get:function(){notImplemented("Microphone.codec");return this._codec}},framesPerPacket:{get:function(){notImplemented("Microphone.framesPerPacket");return this._framesPerPacket},set:function(a){notImplemented("Microphone.framesPerPacket");this._framesPerPacket=a}},encodeQuality:{get:function(){notImplemented("Microphone.encodeQuality");return this._encodeQuality},set:function(a){notImplemented("Microphone.encodeQuality");this._encodeQuality=
a}},noiseSuppressionLevel:{get:function(){notImplemented("Microphone.noiseSuppressionLevel");return this._noiseSuppressionLevel},set:function(a){notImplemented("Microphone.noiseSuppressionLevel");this._noiseSuppressionLevel=a}},enableVAD:{get:function(){notImplemented("Microphone.enableVAD");return this._enableVAD},set:function(a){notImplemented("Microphone.enableVAD");this._enableVAD=a}},activityLevel:{get:function(){notImplemented("Microphone.activityLevel");return this._activityLevel}},index:{get:function(){notImplemented("Microphone.index");
return this._index}},muted:{get:function(){notImplemented("Microphone.muted");return this._muted}},name:{get:function(){notImplemented("Microphone.name");return this._name}},silenceLevel:{get:function(){notImplemented("Microphone.silenceLevel");return this._silenceLevel}},silenceTimeout:{get:function(){notImplemented("Microphone.silenceTimeout");return this._silenceTimeout}},useEchoSuppression:{get:function(){notImplemented("Microphone.useEchoSuppression");return this._useEchoSuppression}},soundTransform:{get:function(){notImplemented("Microphone.soundTransform");
return this._soundTransform},set:function(a){notImplemented("Microphone.soundTransform");this._soundTransform=a}},enhancedOptions:{get:function(){notImplemented("Microphone.enhancedOptions");return this._enhancedOptions},set:function(a){notImplemented("Microphone.enhancedOptions");this._enhancedOptions=a}}}},script:{instance:Glue.ALL}}}}.call(this),PLAY_USING_AUDIO_TAG=!0,SoundDefinition=function(){function a(a,b){var e=document.createElement("audio");if(e.canPlayType(a.mimeType)){e.preload="metadata";
var l=new Blob([a.data],{type:a.mimeType});e.src=URL.createObjectURL(l);e.load();e.addEventListener("loadedmetadata",function(){b({duration:1E3*this.duration})})}else b({duration:0})}var e={initialize:function(){this._playQueue=[];this._url=null;this._bytesLoaded=this._bytesTotal=this._length=0;this._id3=new flash.media.ID3Info;var b=this.symbol;if(b){var e={};b.pcm&&(e.sampleRate=b.sampleRate,e.channels=b.channels,e.pcm=b.pcm,e.end=b.pcm.length);e.completed=!0;b.packaged&&(e.data=b.packaged.data.buffer,
e.mimeType=b.packaged.mimeType);var f=this;a(e,function(a){f._length=a.duration});this._soundData=e}TelemetryService.reportTelemetry({topic:"feature",feature:5})},close:function(){somewhatImplemented("Sound.close")},extract:function(){notImplemented("Sound.extract")},_load:function(b){if(b){var e=this,f=this._stream=new flash.net.URLStream,l=avm2.systemDomain.getClass("flash.utils.ByteArray").createInstance(),m=0,p={completed:!1};f._addEventListener("progress",function(a){e._bytesLoaded=a[Multiname.getPublicQualifiedName("bytesLoaded")];
e._bytesTotal=a[Multiname.getPublicQualifiedName("bytesTotal")];var b=f.bytesAvailable;f.readBytes(l,m,b);m+=b;e._dispatchEvent(a)});f._addEventListener("complete",function(b){e._dispatchEvent(b);p.data=l.a;p.mimeType="audio/mpeg";p.completed=!0;e._soundData=p;a(p,function(a){e._length=a.duration});e._playQueue.forEach(function(a){a.channel._playSoundDataViaAudio(p,a.startTime)})});f.load(b)}},loadCompressedDataFromByteArray:function(){notImplemented("Sound#loadCompressedDataFromByteArray")},loadPCMFromByteArray:function(){notImplemented("Sound#loadPCMFromByteArray")},
play:function(a,b,e){a=a||0;b=b||0;var l=new flash.media.SoundChannel;l._sound=this;l._soundTransform=isNullOrUndefined(e)?new flash.media.SoundTransform:e;this._playQueue.push({channel:l,startTime:a});this._soundData&&l._playSoundDataViaAudio(this._soundData,a,b);return l},get bytesLoaded(){return this._bytesLoaded},get bytesTotal(){return this._bytesTotal},get id3(){return this._id3},get isBuffering(){notImplemented("Sound#isBuffering")},get isURLInaccessible(){notImplemented("Sound#isURLInaccessible")},
get length(){return this._length},get url(){return this._url}},b=Object.getOwnPropertyDescriptor;e.__glue__={"native":{instance:{close:e.close,extract:e.extract,_load:e._load,loadCompressedDataFromByteArray:e.loadCompressedDataFromByteArray,loadPCMFromByteArray:e.loadPCMFromByteArray,play:e.play,bytesLoaded:b(e,"bytesLoaded"),bytesTotal:b(e,"bytesTotal"),id3:b(e,"id3"),isBuffering:b(e,"isBuffering"),isURLInaccessible:b(e,"isURLInaccessible"),length:b(e,"length"),url:b(e,"url")}}};return e}.call(this),
SoundChannelDefinition=function(){return{initialize:function(){this._element=null;this._rightPeak=this._leftPeak=this._position=0;this._pcmData=null;this._soundTransform=new flash.media.SoundTransform;this._soundMixerClass=avm2.systemDomain.getClass("flash.media.SoundMixer");var a=this.symbol;a&&(this._element=a.element||null);this._element&&this._registerWithSoundMixer()},_registerWithSoundMixer:function(){this._soundMixerClass.native.static._registerChannel(this)},_unregisterWithSoundMixer:function(){this._soundMixerClass.native.static._unregisterChannel(this)},
_applySoundTransform:function(){var a=this._soundTransform._volume;this._soundMixerClass._soundTransform&&(a*=this._soundMixerClass._soundTransform._volume);a*=this._soundMixerClass.native.static._getMasterVolume();this._element&&(this._element.volume=clamp(a,0,1))},_playSoundDataViaChannel:function(a,e,b){this._registerWithSoundMixer();var d=this,g=Math.round(e/1E3*a.sampleRate)*a.channels,f=g;this._position=e;this._audioChannel=createAudioChannel(a.sampleRate,a.channels);this._audioChannel.ondatarequested=
function(e){var m=a.end;if(f>=m&&a.completed)d._unregisterWithSoundMixer(),d._audioChannel.stop(),d._dispatchEvent(new flash.events.Event("soundComplete",!1,!1));else{var p=e.count;e=e.data;var r=a.pcm;do{for(var v=Math.min(m-f,p),u=0;u<v;u++)e[u]=r[f++];p-=v;if(f>=m){if(!b)break;b--;f=g}}while(0<p);d._position=1E3*(f/a.sampleRate/a.channels)}};this._audioChannel.start();this._applySoundTransform()},_playSoundDataViaAudio:function(a,e,b){if(a.mimeType){this._registerWithSoundMixer();this._position=
e;var d=this,g=0,f=document.createElement("audio");f.canPlayType(a.mimeType)?(f.preload="metadata",f.loop=0<b,a=new Blob([a.data],{type:a.mimeType}),f.src=URL.createObjectURL(a),f.addEventListener("loadeddata",function(){f.currentTime=e/1E3;f.play()}),f.addEventListener("timeupdate",function(){var a=f.currentTime;b&&g>a&&(--b,b||(f.loop=!1),a<e/1E3&&(f.currentTime=e/1E3));d._position=1E3*(g=a)}),f.addEventListener("ended",function(){d._unregisterWithSoundMixer();d._dispatchEvent(new flash.events.Event("soundComplete",
!1,!1));d._element=null}),this._element=f,this._applySoundTransform()):console.error('ERROR: "'+a.mimeType+'" type playback is not supported by the browser')}},__glue__:{"native":{"static":{},instance:{stop:function(){this._element&&(this._unregisterWithSoundMixer(),this._element.pause());this._audioChannel&&(this._unregisterWithSoundMixer(),this._audioChannel.stop())},position:{get:function(){return this._position}},leftPeak:{get:function(){return this._leftPeak}},rightPeak:{get:function(){return this.rightPeak}},
soundTransform:{get:function(){somewhatImplemented("SoundChannel.soundTransform");return new flash.media.SoundTransform(this._soundTransform._volume,this._soundTransform.pan)},set:function(a){somewhatImplemented("SoundChannel.soundTransform");this._soundTransform=isNullOrUndefined(a)?new flash.media.SoundTransform:a;this._applySoundTransform()}}}},script:{instance:scriptProperties("public",["stop"])}}}}.call(this);
function createAudioChannel(a,e){if(WebAudioChannel.isSupported)return new WebAudioChannel(a,e);error("PCM data playback is not supported by the browser")}function AudioResampler(a,e){this.sourceRate=a;this.targetRate=e;this.tail=[];this.sourceOffset=0}
AudioResampler.prototype={ondatarequested:function(){},getData:function(a,e){for(var b=this.sourceRate/this.targetRate,d=this.sourceOffset,g=Math.ceil((e-1)*b+d)+1,f=[],l=0;l<a.length;l++)f.push(new Float32Array(g));this.ondatarequested({data:f,count:g});for(l=0;l<a.length;l++){for(var m=a[l],p=f[l],r=0;r<e;r++){var v=r*b+d,u=v|0,w=Math.ceil(v)|0,A=0>u?this.tail[l]:p[u];u===w?m[r]=A:(v-=u,m[r]=A*(1-v)+p[w]*v)}this.tail[l]=p[g-1]}this.sourceOffset=(e-1)*b+d-(g-1)}};
function WebAudioChannel(a,e){var b=WebAudioChannel.context;b||(b="undefined"!==typeof AudioContext?new AudioContext:new webkitAudioContext,WebAudioChannel.context=b);this.context=b;this.contextSampleRate=b.sampleRate||44100;this.channels=e;this.sampleRate=a;this.contextSampleRate!=a&&(this.resampler=new AudioResampler(a,this.contextSampleRate),this.resampler.ondatarequested=function(a){this.requestData(a.data,a.count)}.bind(this))}
WebAudioChannel.prototype={start:function(){var a=this.context.createScriptProcessor?this.context.createScriptProcessor(2048,0,this.channels):this.context.createJavaScriptNode(2048,0,this.channels),e=this;a.onaudioprocess=function(a){for(var d=[],g=0;g<e.channels;g++)d.push(a.outputBuffer.getChannelData(g));a=d[0].length;e.resampler?e.resampler.getData(d,a):e.requestData(d,a)};a.connect(this.context.destination);this.source=a},stop:function(){this.source.disconnect(this.context.destination)},requestData:function(a,
e){var b=this.channels,d=new Float32Array(e*b);this.ondatarequested({data:d,count:d.length});for(var g=0,f=0;g<e;g++)for(var l=0;l<b;l++)a[l][g]=d[f++]}};WebAudioChannel.isSupported=function(){return"undefined"!==typeof AudioContext||"undefined"!=typeof webkitAudioContext}();
var SoundMixerDefinition=function(){var a=1,e=[];return{__class__:"flash.media.SoundMixer",initialize:function(){},__glue__:{"native":{"static":{_registerChannel:function(a){e.push(a)},_unregisterChannel:function(a){a=e.indexOf(a);0<=a&&e.splice(a,1)},_getMasterVolume:function(){return a},_setMasterVolume:function(b){a=b;e.forEach(function(a){a._applySoundTransform()})},stopAll:function(){e.forEach(function(a){a.stop()});e=[]},computeSpectrum:function(a){somewhatImplemented("SoundMixer.computeSpectrum");
for(var d=new Float32Array(1024),e=0;1024>e;e++)d[e]=Math.random();a.writeRawBytes(d);a.position=0},areSoundsInaccessible:function(){notImplemented("SoundMixer.areSoundsInaccessible")},bufferTime:{get:function(){notImplemented("SoundMixer.bufferTime")},set:function(){notImplemented("SoundMixer.bufferTime")}},soundTransform:{get:function(){somewhatImplemented("SoundMixer.soundTransform");return isNullOrUndefined(this._soundTransform)?new flash.media.SoundTransform:new flash.media.SoundTransform(this._soundTransform._volume,
this._soundTransform.pan)},set:function(a){somewhatImplemented("SoundMixer.soundTransform");this._soundTransform=isNullOrUndefined(a)?new flash.media.SoundTransform:a;e.forEach(function(a){a._applySoundTransform()})}},audioPlaybackMode:{get:function(){notImplemented("SoundMixer.audioPlaybackMode")},set:function(){notImplemented("SoundMixer.audioPlaybackMode")}},useSpeakerphoneForVoice:{get:function(){notImplemented("SoundMixer.useSpeakerphoneForVoice")},set:function(){notImplemented("SoundMixer.useSpeakerphoneForVoice")}}},
instance:{}}}}}.call(this),SoundTransformDefinition=function(){return{__class__:"flash.media.SoundTransform",initialize:function(){},_updateTransform:function(){somewhatImplemented("SoundTransform._updateTransform")},__glue__:{"native":{"static":{},instance:{volume:{get:function(){return this._volume},set:function(a){this._volume=a;this._updateTransform()}},leftToLeft:{get:function(){return this._leftToLeft},set:function(a){this._leftToLeft=a;this._updateTransform()}},leftToRight:{get:function(){return this._leftToRight},
set:function(a){this._leftToRight=a;this._updateTransform()}},rightToRight:{get:function(){return this._rightToRight},set:function(a){this._rightToRight=a;this._updateTransform()}},rightToLeft:{get:function(){return this._rightToLeft},set:function(a){this._rightToLeft=a;this._updateTransform()}}}},script:{instance:{pan:"public pan"}}}}}.call(this),StageVideoDefinition=function(){return{__class__:"flash.media.StageVideo",initialize:function(){},__glue__:{"native":{"static":{},instance:{attachNetStream:function(){notImplemented("StageVideo.attachNetStream")},
attachCamera:function(){notImplemented("StageVideo.attachCamera")},viewPort:{get:function(){notImplemented("StageVideo.viewPort");return this._viewPort},set:function(a){notImplemented("StageVideo.viewPort");this._viewPort=a}},pan:{set:function(a){notImplemented("StageVideo.pan");this._pan=a},get:function(){notImplemented("StageVideo.pan");return this._pan}},zoom:{set:function(a){notImplemented("StageVideo.zoom");this._zoom=a},get:function(){notImplemented("StageVideo.zoom");return this._zoom}},depth:{set:function(a){notImplemented("StageVideo.depth");
this._depth=a},get:function(){notImplemented("StageVideo.depth");return this._depth}},videoWidth:{get:function(){notImplemented("StageVideo.videoWidth");return this._videoWidth}},videoHeight:{get:function(){notImplemented("StageVideo.videoHeight");return this._videoHeight}},colorSpaces:{get:function(){notImplemented("StageVideo.colorSpaces");return this._colorSpaces}}}}}}}.call(this),VideoDefinition=function(){var a={initialize:function(){TelemetryService.reportTelemetry({topic:"feature",feature:4})},
attachNetStream:function(a){this._netStream!==a&&(this._netStream&&this._netStream._videoReady.then(function(a){this._element=null;this._added&&(a.remove(),this._added=!1)}.bind(this)),(this._netStream=a)&&a._videoReady.then(function(b){this._element=b;a._videoMetadataReady.then(function(){this._element.width=this._videoWidth=this._element.videoWidth;this._element.height=this._videoHeight=this._element.videoHeight;this.stage&&(this.stage._invalid=!0)}.bind(this))}.bind(this)))},ctor:function(a,b){if(!a||
0>a)a=320;if(!b||0>b)b=240;this._bbox={xMin:0,yMin:0,xMax:20*a,yMax:20*b};this._initialWidth=this._videoWidth=a;this._initialHeight=this._videoHeight=b;this._element=this._netStream=null;this._added=!1},draw:function(a,b,d,g){if(this._element){!this._added&&this._stage&&(this._stage._domContainer.appendChild(this._element),this._added=!0);var f=this._initialWidth,l=this._initialHeight;b=this._getConcatenatedTransform(null,!0);d=this.stage&&this.stage._contentsScaleFactor||1;var m=b.a/d,p=b.b/d,r=
b.c/d,v=b.d/d,u=b.tx/20/d,w=b.ty/20/d;0<f&&0<l&&(a.save(),a.beginPath(),a.rect(0,0,f,l),a.clip(),a.clearRect(0,0,f,l),a.restore(),g.forEach(function(a){a.save();a.setTransform(m,p,r,v,u,w);a.save();a.beginPath();a.rect(0,0,f,l);a.clip();a.clearRect(0,0,f,l);a.restore();a.restore()}));a=f/this._videoWidth;g=l/this._videoHeight;a="transform: matrix("+a*m+","+a*p+","+g*r+","+g*v+","+u+","+w+");";this._currentCssTransform!==a&&(this._currentCssTransform=a,this._element.setAttribute("style","position: absolute; top:0; left:0; z-index: -100;transform-origin: 0px 0px 0;"+
a+"-webkit-transform-origin: 0px 0px 0; -webkit-"+a))}}};a.__glue__={"native":{instance:{attachNetStream:a.attachNetStream,ctor:a.ctor,smoothing:{get:function(){return this._smoothing},set:function(a){somewhatImplemented("Video.smoothing");this._smoothing=a}},videoHeight:{get:function(){return this._videoHeight}},videoWidth:{get:function(){return this._videoWidth}}}}};return a}.call(this),FileFilterDefinition=function(){return{__class__:"flash.net.FileFilter",initialize:function(){this._macType=this._extension=
this._description=null},__glue__:{"native":{"static":{},instance:{description:{get:function(){return this._description},set:function(a){this._description=a}},extension:{get:function(){return this._extension},set:function(a){this._extension=a}},macType:{get:function(){return this._macType},set:function(a){this._macType=a}}}}}}}.call(this),LocalConnectionDefinition=function(){return{__class__:"flash.net.LocalConnection",initialize:function(){},__glue__:{"native":{"static":{},instance:{close:function(){notImplemented("LocalConnection.close")},
connect:function(){notImplemented("LocalConnection.connect")},send:function(){notImplemented("LocalConnection.send")},allowDomain:function(){notImplemented("LocalConnection.allowDomain")},allowInsecureDomain:function(){notImplemented("LocalConnection.allowInsecureDomain")},domain:{get:function(){somewhatImplemented("LocalConnection.domain");var a=FileLoadingService.resolveUrl("/");return(a=/:\/\/(.+?)[:?#\/]/.exec(a))&&a[1]}},client:{get:function(){notImplemented("LocalConnection.client");return this._client},
set:function(a){notImplemented("LocalConnection.client");this._client=a}},isPerUser:{get:function(){notImplemented("LocalConnection.isPerUser");return this._isPerUser},set:function(a){notImplemented("LocalConnection.isPerUser");this._isPerUser=a}}}}}}}.call(this),NetConnectionDefinition=function(){return{__class__:"flash.net.NetConnection",initialize:function(){TelemetryService.reportTelemetry({topic:"feature",feature:6})},_invoke:function(a){var e=!1;switch(a){case 2:e=!0}(e?somewhatImplemented:
notImplemented)("NetConnection._invoke ("+a+")")},__glue__:{"native":{"static":{defaultObjectEncoding:{get:function e(){return e},set:function b(){somewhatImplemented("NetConnection.defaultObjectEncoding");return b}}},instance:{ctor:function(){this._uri=null;this._connected=!1;this._client=null;this._proxyType="none";this._objectEncoding=3},connect:function(b){var d=flash.events.NetStatusEvent;somewhatImplemented("NetConnection.connect");(this._uri=b)?this._dispatchEvent(new d(d.class.NET_STATUS,
!1,!1,wrapJSObject({level:"status",code:"NetConnection.Connect.Failed"}))):(this._connected=!0,this._dispatchEvent(new d(d.class.NET_STATUS,!1,!1,wrapJSObject({level:"status",code:"NetConnection.Connect.Success"}))))},call:function(){notImplemented("NetConnection.call")},connected:{get:function(){return this._connected}},uri:{get:function(){return this._uri}},client:{get:function(){return this._client},set:function(b){this._client=b}},objectEncoding:{get:function(){return this._objectEncoding},set:function(b){somewhatImplemented("NetConnection.objectEncoding");
this._objectEncoding=b}},proxyType:{get:function(){return this._proxyType},set:function(b){notImplemented("NetConnection.proxyType");this._proxyType=b}},connectedProxyType:{get:function(){notImplemented("NetConnection.connectedProxyType");return this._connectedProxyType}},usingTLS:{get:function(){somewhatImplemented("NetConnection.usingTLS");return!1}},protocol:{get:function(){notImplemented("NetConnection.protocol");return this._protocol}},maxPeerConnections:{get:function(){notImplemented("NetConnection.maxPeerConnections");
return this._maxPeerConnections},set:function(b){notImplemented("NetConnection.maxPeerConnections");this._maxPeerConnections=b}},nearID:{get:function(){notImplemented("NetConnection.nearID");return this._nearID}},farID:{get:function(){notImplemented("NetConnection.farID");return this._farID}},nearNonce:{get:function(){notImplemented("NetConnection.nearNonce");return this._nearNonce}},farNonce:{get:function(){notImplemented("NetConnection.farNonce");return this._farNonce}},unconnectedPeerStreams:{get:function(){notImplemented("NetConnection.unconnectedPeerStreams");
return this._unconnectedPeerStreams}},invoke:function(b){return this._invoke(b,Array.prototype.slice.call(arguments,1))},invokeWithArgsArray:function(b,d){return this._invoke.call(this,b,d)}}}}}}.call(this),USE_MEDIASOURCE_API=!1,NetStreamDefinition=function(){return{__class__:"flash.net.NetStream",initialize:function(){},_invoke:function(a,e){var b=!1,d,g=this._videoElement;switch(a){case 4:this._videoState.bufferTime=e[0];b=!0;break;case 202:switch(e[1]){case "pause":b=!0;g&&(!1!==e[3]&&!g.paused?
g.pause():!0!==e[3]&&g.paused&&g.play(),g.currentTime=e[4]/1E3);break;case "seek":b=!0,g&&!g.paused&&(g.currentTime=e[3]/1E3)}break;case 300:d=g?g.currentTime:0;b=!0;break;case 302:d=this._videoState.bufferTime;b=!0;break;case 303:d=g?g.duration:0;b=!0;break;case 305:d="full"===this._videoState.buffer?100:"progress"===this._videoState.buffer?50:0;b=!0;break;case 306:d=100,b=!0}(b?somewhatImplemented:notImplemented)("NetStream._invoke ("+a+")");return d},_createVideoElement:function(a){var e=flash.events.NetStatusEvent,
b=this;/\.mp4$/i.test(a)&&/Intel Mac OS X.*?Firefox\/\d+/.test(window.navigator.userAgent)&&(a="http://videos-cdn.mozilla.net/brand/Mozilla_2011_Story.webm");var d=document.createElement("video");d.preload="metadata";d.src=a;d.addEventListener("play",function(){b._videoState.started||(b._videoState.started=!0,b._dispatchEvent(new e(e.class.NET_STATUS,!1,!1,wrapJSObject({code:"NetStream.Play.Start",level:"status"}))))});d.addEventListener("ended",function(){b._videoState.started=!1;b._dispatchEvent(new e(e.class.NET_STATUS,
!1,!1,wrapJSObject({code:"NetStream.Play.Stop",level:"status"})))});d.addEventListener("loadeddata",function(){b._videoState.buffer="full";b._dispatchEvent(new e(e.class.NET_STATUS,!1,!1,wrapJSObject({code:"NetStream.Buffer.Full",level:"status"})))});d.addEventListener("progress",function(){b._videoState.buffer="progress"});d.addEventListener("waiting",function(){b._videoState.buffer="empty";b._dispatchEvent(new e(e.class.NET_STATUS,!1,!1,wrapJSObject({code:"NetStream.Buffer.Empty",level:"status"})))});
d.addEventListener("loadedmetadata",function(){b._videoMetadataReady.resolve({videoWidth:d.videoWidth,videoHeight:d.videoHeight});if(b._client){var a={};a.asSetPublicProperty("width",d.videoWidth);a.asSetPublicProperty("height",d.videoHeight);a.asSetPublicProperty("duration",d.duration);b._client.asCallPublicProperty("onMetaData",[a])}});d.addEventListener("error",function(a){b._dispatchEvent(new e(e.class.NET_STATUS,!1,!1,wrapJSObject({code:4===a.target.error.code?"NetStream.Play.NoSupportedTrackFound":
3===a.target.error.code?"NetStream.Play.FileStructureInvalid":"NetStream.Play.StreamNotFound",level:"error"})))});d.play();this._videoElement=d;this._videoReady.resolve(d)},__glue__:{script:{instance:scriptProperties("public",["appendBytes","appendBytesAction"])},"native":{"static":{},instance:{ctor:function(){somewhatImplemented("NetStream.ctor");this._mediaSource=this._contentTypeHint=null;this._checkPolicyFile=!0;this._videoElement=null;var a,e;this._videoReady=new Promise(function(b,d){a=b;e=
d});this._videoReady.resolve=a;this._videoReady.reject=e;var b,d;this._videoMetadataReady=new Promise(function(a,e){b=a;d=e});this._videoMetadataReady.resolve=b;this._videoMetadataReady.reject=d;this._videoState={started:!1,buffer:"empty",bufferTime:0.1}},onResult:function(){notImplemented("NetStream.onResult")},dispose:function(){notImplemented("NetStream.dispose")},play:function(a){var e=!1;e&&"undefined"===typeof MediaSource&&(console.warn("MediaSource API is not enabled, falling back to regular playback"),
e=!1);if(e){var b=new MediaSource;b.addEventListener("sourceopen",function(){this._mediaSource=b}.bind(this));b.addEventListener("sourceend",function(){this._mediaSource=null}.bind(this));this._createVideoElement(window.URL.createObjectURL(b));if(a){a=new flash.net.URLRequest(a);a._checkPolicyFile=this._checkPolicyFile;var d=new flash.net.URLStream;d._addEventListener("httpStatus",function(a){if((a=a.asGetPublicProperty("responseHeaders").filter(function(a){return"Content-Type"===a.asGetPublicProperty("name")})[0])&&
"application/octet-stream"!==a.asGetPublicProperty("value"))this._contentTypeHint=a.asGetPublicProperty("value")}.bind(this));d._addEventListener("progress",function(){var a=d.bytesAvailable,b=avm2.systemDomain.getClass("flash.utils.ByteArray").createInstance();d.readBytes(b,0,a);this.appendBytes(b)}.bind(this));d._addEventListener("complete",function(){this.appendBytesAction("endSequence")}.bind(this));d.load(a)}}else somewhatImplemented("NetStream.play"),this._createVideoElement(FileLoadingService.resolveUrl(a))},
play2:function(){notImplemented("NetStream.play2")},invoke:function(a){return this._invoke(a,Array.prototype.slice.call(arguments,1))},invokeWithArgsArray:function(a,e){return this._invoke.call(this,a,e)},appendBytes:function(a){this._mediaSource&&(this._mediaSourceBuffer||(this._mediaSourceBuffer=this._mediaSource.addSourceBuffer(this._contentTypeHint)),this._mediaSourceBuffer.appendBuffer(new Uint8Array(a.a,0,a.length)));somewhatImplemented("NetStream.appendBytes")},appendBytesAction:function(a){"endSequence"===
a&&this._mediaSource&&this._mediaSource.endOfStream();somewhatImplemented("NetStream.appendBytesAction")},info:{get:function(){notImplemented("NetStream.info");return this._info}},multicastInfo:{get:function(){notImplemented("NetStream.multicastInfo");return this._multicastInfo}},soundTransform:{get:function(){return this._soundTransform},set:function(a){somewhatImplemented("NetStream.soundTransform");this._soundTransform=a}},checkPolicyFile:{get:function(){return this._checkPolicyFile},set:function(a){this._checkPolicyFile=
a}},client:{get:function(){somewhatImplemented("NetStream.client");return this._client},set:function(a){somewhatImplemented("NetStream.client");this._client=a}},objectEncoding:{get:function(){notImplemented("NetStream.objectEncoding");return this._objectEncoding}},multicastPushNeighborLimit:{get:function(){notImplemented("NetStream.multicastPushNeighborLimit");return this._multicastPushNeighborLimit},set:function(a){notImplemented("NetStream.multicastPushNeighborLimit");this._multicastPushNeighborLimit=
a}},multicastWindowDuration:{get:function(){notImplemented("NetStream.multicastWindowDuration");return this._multicastWindowDuration},set:function(a){notImplemented("NetStream.multicastWindowDuration");this._multicastWindowDuration=a}},multicastRelayMarginDuration:{get:function(){notImplemented("NetStream.multicastRelayMarginDuration");return this._multicastRelayMarginDuration},set:function(a){notImplemented("NetStream.multicastRelayMarginDuration");this._multicastRelayMarginDuration=a}},multicastAvailabilityUpdatePeriod:{get:function(){notImplemented("NetStream.multicastAvailabilityUpdatePeriod");
return this._multicastAvailabilityUpdatePeriod},set:function(a){notImplemented("NetStream.multicastAvailabilityUpdatePeriod");this._multicastAvailabilityUpdatePeriod=a}},multicastFetchPeriod:{get:function(){notImplemented("NetStream.multicastFetchPeriod");return this._multicastFetchPeriod},set:function(a){notImplemented("NetStream.multicastFetchPeriod");this._multicastFetchPeriod=a}},multicastAvailabilitySendToAll:{get:function(){notImplemented("NetStream.multicastAvailabilitySendToAll");return this._multicastAvailabilitySendToAll},
set:function(a){notImplemented("NetStream.multicastAvailabilitySendToAll");this._multicastAvailabilitySendToAll=a}},farID:{get:function(){notImplemented("NetStream.farID");return this._farID}},nearNonce:{get:function(){notImplemented("NetStream.nearNonce");return this._nearNonce}},farNonce:{get:function(){notImplemented("NetStream.farNonce");return this._farNonce}},peerStreams:{get:function(){notImplemented("NetStream.peerStreams");return this._peerStreams}},audioReliable:{get:function(){notImplemented("NetStream.audioReliable");
return this._audioReliable},set:function(a){notImplemented("NetStream.audioReliable");this._audioReliable=a}},videoReliable:{get:function(){notImplemented("NetStream.videoReliable");return this._videoReliable},set:function(a){notImplemented("NetStream.videoReliable");this._videoReliable=a}},dataReliable:{get:function(){notImplemented("NetStream.dataReliable");return this._dataReliable},set:function(a){notImplemented("NetStream.dataReliable");this._dataReliable=a}},audioSampleAccess:{get:function(){notImplemented("NetStream.audioSampleAccess");
return this._audioSampleAccess},set:function(a){notImplemented("NetStream.audioSampleAccess");this._audioSampleAccess=a}},videoSampleAccess:{get:function(){notImplemented("NetStream.videoSampleAccess");return this._videoSampleAccess},set:function(a){notImplemented("NetStream.videoSampleAccess");this._videoSampleAccess=a}},useHardwareDecoder:{get:function(){notImplemented("NetStream.useHardwareDecoder");return this._useHardwareDecoder},set:function(a){notImplemented("NetStream.useHardwareDecoder");
this._useHardwareDecoder=a}},useJitterBuffer:{get:function(){notImplemented("NetStream.useJitterBuffer");return this._useJitterBuffer},set:function(a){notImplemented("NetStream.useJitterBuffer");this._useJitterBuffer=a}},videoStreamSettings:{get:function(){notImplemented("NetStream.videoStreamSettings");return this._videoStreamSettings},set:function(a){notImplemented("NetStream.videoStreamSettings");this._videoStreamSettings=a}}}}}}}.call(this),ObjectEncodingDefinition=function(){return{__class__:"flash.net.ObjectEncoding",
initialize:function(){},__glue__:{"native":{"static":{dynamicPropertyWriter:{get:function(){notImplemented("ObjectEncoding.dynamicPropertyWriter")},set:function(){notImplemented("ObjectEncoding.dynamicPropertyWriter")}}},instance:{}}}}}.call(this),ResponderDefinition=function(){var a={ctor:function(){}};a.__glue__={"native":{instance:{ctor:a.ctor}}};return a}.call(this),SharedObjectDefinition=function(){var a=3,e=createEmptyObject();return{__class__:"flash.net.SharedObject",initialize:function(){this._data=
this._path=null;this._objectEncoding=a;TelemetryService.reportTelemetry({topic:"feature",feature:3})},__glue__:{"native":{"static":{deleteAll:function(){notImplemented("SharedObject.deleteAll")},getDiskUsage:function(){notImplemented("SharedObject.getDiskUsage")},getLocal:function(a,d){var g=(d||"")+"/"+a;if(e[g])return e[g];var f=new flash.net.SharedObject;f._path=g;g=sessionStorage.getItem(g);f._data=g?JSON.parse(g):{};return f},getRemote:function(){notImplemented("SharedObject.getRemote")},defaultObjectEncoding:{get:function(){return a},
set:function(b){a=b}}},instance:{setDirty:function(){somewhatImplemented("SharedObject.setDirty")},invoke:function(a){var d=a;Array.prototype.slice.call(arguments,1);var e=!1,f;switch(d){case 4:f=JSON.stringify(this._data).length-2;e=!0;break;case 6:this._data={};sessionStorage.removeItem(this._path);e=!0;break;case 2:sessionStorage.setItem(this._path,JSON.stringify(this._data));f=e=!0;break;case 3:e=!0}(e?somewhatImplemented:notImplemented)("SharedObject.invoke ("+d+")");return f},invokeWithArgsArray:function d(a,
e){return d.call(this,a,e)},data:{get:function(){return this._data}},objectEncoding:{get:function(){return this._objectEncoding},set:function(a){this._objectEncoding=a}},client:{get:function(){notImplemented("SharedObject.client");return this._client},set:function(a){notImplemented("SharedObject.client");this._client=a}}}}}}}.call(this),SocketDefinition=function(){return{__class__:"flash.net.Socket",initialize:function(){this._connected=!1},__glue__:{"native":{"static":{},instance:{internalGetSecurityErrorMessage:function(){somewhatImplemented("Socket.internalGetSecurityErrorMessage");
return"SecurityErrorEvent"},internalConnect:function(a,e){somewhatImplemented("Socket.internalConnect");throwError("SecurityError",Errors.SocketConnectError,a,e)},didFailureOccur:function(){somewhatImplemented("Socket.didFailureOccur");return!0},readBytes:function(){notImplemented("Socket.readBytes")},writeBytes:function(){notImplemented("Socket.writeBytes")},writeBoolean:function(){notImplemented("Socket.writeBoolean")},writeByte:function(){notImplemented("Socket.writeByte")},writeShort:function(){notImplemented("Socket.writeShort")},
writeInt:function(){notImplemented("Socket.writeInt")},writeUnsignedInt:function(){notImplemented("Socket.writeUnsignedInt")},writeFloat:function(){notImplemented("Socket.writeFloat")},writeDouble:function(){notImplemented("Socket.writeDouble")},writeMultiByte:function(){notImplemented("Socket.writeMultiByte")},writeUTF:function(){notImplemented("Socket.writeUTF")},writeUTFBytes:function(){notImplemented("Socket.writeUTFBytes")},readBoolean:function(){notImplemented("Socket.readBoolean")},readByte:function(){notImplemented("Socket.readByte")},
readUnsignedByte:function(){notImplemented("Socket.readUnsignedByte")},readShort:function(){notImplemented("Socket.readShort")},readUnsignedShort:function(){notImplemented("Socket.readUnsignedShort")},readInt:function(){notImplemented("Socket.readInt")},readUnsignedInt:function(){notImplemented("Socket.readUnsignedInt")},readFloat:function(){notImplemented("Socket.readFloat")},readDouble:function(){notImplemented("Socket.readDouble")},readMultiByte:function(){notImplemented("Socket.readMultiByte")},
readUTF:function(){notImplemented("Socket.readUTF")},readUTFBytes:function(){notImplemented("Socket.readUTFBytes")},internalClose:function(){notImplemented("Socket.internalClose")},flush:function(){notImplemented("Socket.flush")},writeObject:function(){notImplemented("Socket.writeObject")},readObject:function(){notImplemented("Socket.readObject")},bytesAvailable:{get:function(){notImplemented("Socket.bytesAvailable");return this._bytesAvailable}},connected:{get:function(){somewhatImplemented("Socket.connected");
return this._connected}},objectEncoding:{get:function(){notImplemented("Socket.objectEncoding");return this._objectEncoding},set:function(a){notImplemented("Socket.objectEncoding");this._objectEncoding=a}},endian:{get:function(){notImplemented("Socket.endian");return this._endian},set:function(a){notImplemented("Socket.endian");this._endian=a}},bytesPending:{get:function(){notImplemented("Socket.bytesPending");return this._bytesPending}}}},script:{instance:Glue.ALL}}}}.call(this),URLLoaderDefinition=
function(){return{initialize:function(){},__glue__:{"native":{"static":{},instance:{}},script:{"static":{},instance:{data:"public data",dataFormat:"public dataFormat",bytesTotal:"public bytesTotal",bytesLoaded:"public bytesLoaded",load:"public load"}}}}}.call(this),URLRequestDefinition=function(){function a(){var a={};a.url=this._url;a.method=this._method;a.checkPolicyFile=this._checkPolicyFile;if(this._data)if(a.mimeType=this._contentType,avm2.systemDomain.getClass("flash.utils.ByteArray").isInstanceOf(this._data))a.data=
new Uint8Array(this._data.a,0,this._data.length);else{var b=this._data.asGetPublicProperty("toString").call(this._data);if("GET"===this._method){var e=a.url.lastIndexOf("?");a.url=(0>e?a.url:a.url.substring(0,e))+"?"+b}else a.data=b}return a}var e={initialize:function(){this._url=null;this._method="GET";this._digest=this._data=null;this._contentType="application/x-www-form-urlencoded";this._requestHeaders=null;this._checkPolicyFile=!0;this._toFileRequest=a},setMethod:function(a){this._method=a},setRequestHeaders:function(a){this._requestHeaders=
a},get contentType(){return this._contentType},set contentType(a){this._contentType=a},get data(){return this._data},set data(a){this._data=a},get digest(){return this._digest},set digest(a){this._digest=a},get method(){return this._method},set method(a){this._method=a},get requestHeaders(){return this._requestHeaders},set requestHeaders(a){this._requestHeaders=a},get url(){return this._url},set url(a){this._url=a}},b=Object.getOwnPropertyDescriptor;e.__glue__={"native":{instance:{setMethod:e.setMethod,
setRequestHeaders:e.setRequestHeaders,contentType:b(e,"contentType"),data:b(e,"data"),digest:b(e,"digest"),method:b(e,"method"),requestHeaders:b(e,"requestHeaders"),url:b(e,"url")}}};return e}.call(this),URLStreamDefinition=function(){var a={initialize:function(){this._stream=null;this._littleEndian=this._connected=!1},close:function(){this._session.close()},load:function(a){var d=FileLoadingService.createSession(),e=this,f=!0;d.onprogress=function(a,b){if(f){f=!1;var d=Math.max(b.bytesTotal,a.length),
r=new ArrayBuffer(d);e._stream=new Stream(r,0,0,d)}else e._stream.end+a.length>e._stream.bytes.length&&(d=e._stream.end+a.length,r=new ArrayBuffer(d),d=new Stream(r,0,0,d),d.push(e._stream.bytes.subarray(0,e._stream.end)),e._stream=d);e._stream.push(a);d=avm2.systemDomain.getClass("flash.events.ProgressEvent");e._dispatchEvent(d.createInstance(["progress",!1,!1,b.bytesLoaded,b.bytesTotal]))};d.onerror=function(a){e._connected=!1;e._stream||(e._stream=new Stream(new ArrayBuffer(0),0,0,0));e._dispatchEvent(new flash.events.IOErrorEvent(flash.events.IOErrorEvent.class.IO_ERROR,
!1,!1,a))};d.onopen=function(){e._connected=!0;e._dispatchEvent(new flash.events.Event("open",!1,!1))};d.onhttpstatus=function(a,b,d){var f=avm2.systemDomain.getClass("flash.events.HTTPStatusEvent"),v=avm2.systemDomain.getClass("flash.net.URLRequestHeader");b=f.createInstance(["httpStatus",!1,!1,b]);var u=[];d.split(/(?:\n|\r?\n)/g).forEach(function(b){if(b=/^([^:]+): (.*)$/.exec(b))u.push(v.createInstance([b[1],b[2]])),"Location"===b[1]&&(a=b[2])});b.asSetPublicProperty("responseHeaders",u);b.asSetPublicProperty("responseURL",
a);e._dispatchEvent(b)};d.onclose=function(){e._connected=!1;e._stream||(e._stream=new Stream(new ArrayBuffer(0),0,0,0));e._dispatchEvent(new flash.events.Event("complete",!1,!1))};d.open(a._toFileRequest());this._session=d},readBoolean:function(){notImplemented("URLStream.readBoolean")},readByte:function(){var a=this._stream;a.ensure(1);return a.bytes[a.pos++]},readBytes:function(a,d,e){if(0>e)throw"Invalid length argument";var f=this._stream;e?f.ensure(e):e=f.remaining();a.writeRawBytes(f.bytes.subarray(f.pos,
f.pos+e),d,e);f.pos+=e},readDouble:function(){notImplemented("URLStream.readDouble")},readFloat:function(){notImplemented("URLStream.readFloat")},readInt:function(){notImplemented("URLStream.readInt")},readMultiByte:function(){notImplemented("URLStream.readMultiByte")},readObject:function(){notImplemented("URLStream.readObject")},readShort:function(){notImplemented("URLStream.readShort")},readUTF:function(){return this.readUTFBytes(this.readUnsignedShort())},readUTFBytes:function(a){if(0>a)throw"Invalid length argument";
var d=this._stream;d.ensure(a);var e=utf8encode(d.bytes.subarray(d.pos,d.pos+a));d.pos+=a;return e},readUnsignedByte:function(){notImplemented("URLStream.readUnsignedByte")},readUnsignedInt:function(){notImplemented("URLStream.readUnsignedInt")},readUnsignedShort:function(){var a=this._stream;a.ensure(2);var d=a.getUint16(a.pos,this._littleEndian);a.pos+=2;return d},get bytesAvailable(){return this._stream.remaining()},get connected(){return this._connected},get endian(){return this._littleEndian?
"littleEndian":"bigEndian"},set endian(a){this._littleEndian="littleEndian"==a},get objectEncoding(){notImplemented("URLStream.objectEncoding")},set objectEncoding(a){notImplemented("URLStream.objectEncoding")}},e=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{close:a.close,load:a.load,readBoolean:a.readBoolean,readByte:a.readByte,readBytes:a.readBytes,readDouble:a.readDouble,readFloat:a.readFloat,readInt:a.readInt,readMultiByte:a.readMultiByte,readObject:a.readObject,readShort:a.readShort,
readUTF:a.readUTF,readUTFBytes:a.readUTFBytes,readUnsignedByte:a.readUnsignedByte,readUnsignedInt:a.readUnsignedInt,readUnsignedShort:a.readUnsignedShort,bytesAvailable:e(a,"bytesAvailable"),connected:e(a,"connected"),endian:e(a,"endian"),objectEncoding:e(a,"objectEncoding")}}};return a}.call(this),ApplicationDomainDefinition=function(){return{__class__:"flash.system.ApplicationDomain",initialize:function(){},__glue__:{"native":{"static":{currentDomain:{get:function(){return new flash.system.ApplicationDomain(AVM2.currentDomain())}},
MIN_DOMAIN_MEMORY_LENGTH:{get:function(){notImplemented("ApplicationDomain.MIN_DOMAIN_MEMORY_LENGTH")}}},instance:{ctor:function(a){a instanceof ApplicationDomain?this.nativeObject=a:(a=a?a.nativeObject:AVM2.currentDomain().system,this.nativeObject=new ApplicationDomain(a.vm,a))},getDefinition:function(a){a=a.replace("::",".");return this.nativeObject.getProperty(Multiname.fromSimpleName(a),!0,!0)},hasDefinition:function(a){if(void 0===a)return!1;a=a.replace("::",".");return!!this.nativeObject.findDomainProperty(Multiname.fromSimpleName(a),
!1,!1)},getQualifiedDefinitionNames:function(){notImplemented("ApplicationDomain.getQualifiedDefinitionNames")},parentDomain:{get:function(){var a=this.nativeObject.base;return!a?void 0:new flash.system.ApplicationDomain(a)}},domainMemory:{get:function(){notImplemented("ApplicationDomain.domainMemory");return this._domainMemory},set:function(a){notImplemented("ApplicationDomain.domainMemory");this._domainMemory=a}}}},script:{"static":Glue.ALL,instance:Glue.ALL}}}}.call(this),CapabilitiesDefinition=
function(){var a={},e,b=window.navigator.userAgent;0<b.indexOf("Macintosh")?e="Mac OS 10.5.2":0<b.indexOf("Windows")?e="Windows XP":0<b.indexOf("Linux")?e="Linux":/(iPad|iPhone|iPod|Android)/.test(b)?e="iPhone3,1":notImplemented();a.__glue__={"native":{"static":{version:{get:function(){return"SHUMWAY 10,0,0,0"},enumerable:!0},os:{get:function(){return e},enumerable:!0},serverString:{get:function(){var a=toKeyValueArray({OS:e}).map(function(a){return a[0]+"="+encodeURIComponent(a[1])}).join("&");somewhatImplemented("Capabilities.serverString: "+
a);return a}},hasAccessibility:{get:function(){somewhatImplemented("Capabilities.hasAccessibility");return!1}},isDebugger:{get:function(){return!1}},screenResolutionX:{get:function(){return window.screen.width}},screenResolutionY:{get:function(){return window.screen.height}},manufacturer:{get:function(){somewhatImplemented("Capabilities.manufacturer");return"Mozilla Research"}},language:{get:function(){somewhatImplemented("Capabilities.language");return"en"}},playerType:{get:function(){somewhatImplemented("Capabilities.playerType");
return"PlugIn"}}}},script:{"static":scriptProperties("public",["version","os"])}};return a}.call(this),FSCommandDefinition=function(){return{__glue__:{"native":{"static":{_fscommand:function(a,e){console.log("FSCommand: "+a+"; "+e);switch(a.toLowerCase()){case "quit":renderingTerminated=!0;break;case "debugger":debugger}}}}}}}.call(this),SecurityDefinition=function(){var a;return{__class__:"flash.system.Security",initialize:function(){},__glue__:{"native":{"static":{allowDomain:function(){somewhatImplemented('Security.allowDomain ["'+
Array.prototype.join.call(arguments,'", "')+'"]')},allowInsecureDomain:function(){somewhatImplemented("Security.allowInsecureDomain")},loadPolicyFile:function(){somewhatImplemented("Security.loadPolicyFile")},duplicateSandboxBridgeInputArguments:function(){notImplemented("Security.duplicateSandboxBridgeInputArguments")},duplicateSandboxBridgeOutputArgument:function(){notImplemented("Security.duplicateSandboxBridgeOutputArgument")},showSettings:function(){notImplemented("Security.showSettings")},exactSettings:{get:function(){return a},
set:function(e){a=e}},disableAVM1Loading:{get:function(){notImplemented("Security.disableAVM1Loading")},set:function(){notImplemented("Security.disableAVM1Loading")}},sandboxType:{get:function(){somewhatImplemented("Security.sandboxType");return"remote"}},pageDomain:{get:function(){somewhatImplemented("Security.pageDomain");var a=FileLoadingService.resolveUrl("/").split("/");a.pop();return a.pop()}}}}}}}.call(this),SecurityDomainDefinition=function(){return{__class__:"flash.system.SecurityDomain",
initialize:function(){},_currentDomain:null,__glue__:{"native":{"static":{currentDomain:{get:function(){return this._currentDomain}}},instance:{ctor_impl:function(){notImplemented("SecurityDomain.ctor_impl")},domainID:{get:function(){notImplemented("SecurityDomain.domainID");return this._domainID}}}}}}}.call(this),SystemDefinition=function(){return{__class__:"flash.system.System",initialize:function(){},__glue__:{"native":{"static":{setClipboard:function(a){FirefoxCom.request("setClipboard",a);TelemetryService.reportTelemetry({topic:"feature",
feature:2})},pause:function(){somewhatImplemented("System.pause")},resume:function(){somewhatImplemented("System.resume")},exit:function(){somewhatImplemented("System.exit");renderingTerminated=!0},gc:function(){somewhatImplemented("System.gc")},pauseForGCIfCollectionImminent:function(){notImplemented("System.pauseForGCIfCollectionImminent")},disposeXML:function(){notImplemented("System.disposeXML")},ime:{get:function(){notImplemented("System.ime")}},totalMemoryNumber:{get:function(){return performance.memory?
performance.memory.usedJSHeapSize:0}},freeMemory:{get:function(){notImplemented("System.freeMemory")}},privateMemory:{get:function(){return 0}},processCPUUsage:{get:function(){notImplemented("System.processCPUUsage")}},useCodePage:{get:function(){somewhatImplemented("System.useCodePage");return!1},set:function(){notImplemented("System.useCodePage")}},vmVersion:{get:function(){somewhatImplemented("System.vmVersion");return"1.0 shumway"}},swfVersion:{get:function(){return 19}},apiVersion:{get:function(){return 26}},
getArgv:function(){return[]},getRunmode:function(){return"mixed"}},instance:{}}}}}.call(this),FontDefinition=function(){function a(){if(g)return g;var a=window.navigator.userAgent;return g=-1<a.indexOf("Windows")?DEVICE_FONT_METRICS_WIN:/(Macintosh|iPad|iPhone|iPod|Android)/.test(a)?DEVICE_FONT_METRICS_MAC:DEVICE_FONT_METRICS_LINUX}var e=[],b=Object.create(null),d=Object.create(null),g,f={__class__:"flash.text.Font",initialize:function(){var a=this.symbol;a&&(this._fontName=a.name||null,this._uniqueName=
a.uniqueName,this._fontStyle=a.bold?a.italic?"boldItalic":"bold":a.italic?"italic":"regular",a=a.metrics,a.height=a.ascent+a.descent+a.leading,this._metrics=a,this._fontType="embedded",e.push(this),b[this._uniqueName]=this,a=this._fontName.toLowerCase()+"_"+this._fontStyle+"_embedded",d[a]=this)},get fontName(){return this._fontName},get fontStyle(){return this._fontStyle},get fontType(){return this._fontType},hasGlyphs:function(){return!0},getFont:function(b,e,f){f=b.toLowerCase()+"_"+e+(f?"_embedded":
"_device");var g=d[f];if(g)return g;g=new flash.text.Font;g._fontName=g._uniqueName=b;g._fontStyle=e;g._fontType="device";b=a()[b];b||(b=a().serif,g._fontName=g._uniqueName="serif");g._metrics={ascent:b[0],descent:b[1],leading:b[2]};g._metrics.height=b[0]+b[1]+b[2];return d[f]=g},getFontByUniqueName:function(a){return b[a]}},l=Object.getOwnPropertyDescriptor;f.__glue__={"native":{instance:{fontName:l(f,"fontName"),fontStyle:l(f,"fontStyle"),fontType:l(f,"fontType"),hasGlyphs:f.hasGlyphs},"static":{enumerateFonts:function(){return e.slice()},
registerFont:function(){somewhatImplemented("Font.registerFont")}}}};return f}.call(this),DEVICE_FONT_METRICS_WIN={serif:[1,0.25,0],"sans-serif":[1,0.25,0],monospace:[1,0.25,0],"birch std":[0.9167,0.25,0],"blackoak std":[1,0.3333,0],"chaparral pro":[0.8333,0.3333,0],"chaparral pro light":[0.8333,0.3333,0],"charlemagne std":[0.9167,0.25,0],"cooper std black":[0.9167,0.25,0],"giddyup std":[0.8333,0.3333,0],"hobo std":[1.0833,0.3333,0],"kozuka gothic pro b":[1,0.4167,0],"kozuka gothic pro el":[1.0833,
0.25,0],"kozuka gothic pro h":[1,0.4167,0],"kozuka gothic pro l":[1,0.3333,0],"kozuka gothic pro m":[1.0833,0.3333,0],"kozuka gothic pro r":[1,0.3333,0],"kozuka mincho pro b":[1.0833,0.25,0],"kozuka mincho pro el":[1.0833,0.25,0],"kozuka mincho pro h":[1.1667,0.25,0],"kozuka mincho pro l":[1.0833,0.25,0],"kozuka mincho pro m":[1.0833,0.25,0],"kozuka mincho pro r":[1.0833,0.25,0],"mesquite std":[0.9167,0.25,0],"minion pro cond":[1,0.3333,0],"minion pro med":[1,0.3333,0],"minion pro smbd":[1,0.3333,
0],"myriad arabic":[1,0.4167,0],"nueva std":[0.75,0.25,0],"nueva std cond":[0.75,0.25,0],"ocr a std":[0.8333,0.25,0],"orator std":[1.0833,0.25,0],"poplar std":[0.9167,0.25,0],"prestige elite std":[0.9167,0.25,0],"rosewood std regular":[0.8333,0.3333,0],"stencil std":[1,0.3333,0],"trajan pro":[1,0.25,0],"kozuka gothic pr6n b":[1.4167,0.4167,0],"kozuka gothic pr6n el":[1.4167,0.3333,0],"kozuka gothic pr6n h":[1.4167,0.4167,0],"kozuka gothic pr6n l":[1.4167,0.3333,0],"kozuka gothic pr6n m":[1.5,0.3333,
0],"kozuka gothic pr6n r":[1.4167,0.3333,0],"kozuka mincho pr6n b":[1.3333,0.3333,0],"kozuka mincho pr6n el":[1.3333,0.3333,0],"kozuka mincho pr6n h":[1.4167,0.3333,0],"kozuka mincho pr6n l":[1.3333,0.3333,0],"kozuka mincho pr6n m":[1.3333,0.3333,0],"kozuka mincho pr6n r":[1.3333,0.3333,0],"letter gothic std":[1,0.25,0],"minion pro":[1,0.3333,0],"myriad hebrew":[0.8333,0.3333,0],"myriad pro":[0.9167,0.25,0],"myriad pro cond":[0.9167,0.25,0],"myriad pro light":[1,0.25,0],marlett:[1,0,0],arial:[1,0.25,
0],"arabic transparent":[1,0.25,0],"arial baltic":[1,0.25,0],"arial ce":[1,0.25,0],"arial cyr":[1,0.25,0],"arial greek":[1,0.25,0],"arial tur":[1,0.25,0],batang:[0.8333,0.1667,0],batangche:[0.8333,0.1667,0],gungsuh:[0.8333,0.1667,0],gungsuhche:[0.8333,0.1667,0],"courier new":[1,0.25,0],"courier new baltic":[1,0.25,0],"courier new ce":[1,0.25,0],"courier new cyr":[1,0.25,0],"courier new greek":[1,0.25,0],"courier new tur":[1,0.25,0],daunpenh:[0.6667,0.6667,0],dokchampa:[1.4167,0.5833,0],"estrangelo edessa":[0.75,
0.3333,0],euphemia:[1.0833,0.3333,0],gautami:[1.1667,0.8333,0],vani:[1.0833,0.75,0],gulim:[0.8333,0.1667,0],gulimche:[0.8333,0.1667,0],dotum:[0.8333,0.1667,0],dotumche:[0.8333,0.1667,0],impact:[1.0833,0.25,0],"iskoola pota":[1,0.3333,0],kalinga:[1.0833,0.5,0],kartika:[1,0.4167,0],"khmer ui":[1.0833,0.3333,0],"lao ui":[1,0.25,0],latha:[1.0833,0.4167,0],"lucida console":[0.75,0.25,0],"malgun gothic":[1,0.25,0],mangal:[1.0833,0.3333,0],meiryo:[1.0833,0.4167,0],"meiryo ui":[1,0.25,0],"microsoft himalaya":[0.5833,
0.4167,0],"microsoft jhenghei":[1,0.3333,0],"microsoft yahei":[1.0833,0.3333,0],mingliu:[0.8333,0.1667,0],pmingliu:[0.8333,0.1667,0],mingliu_hkscs:[0.8333,0.1667,0],"mingliu-extb":[0.8333,0.1667,0],"pmingliu-extb":[0.8333,0.1667,0],"mingliu_hkscs-extb":[0.8333,0.1667,0],"mongolian baiti":[0.8333,0.25,0],"ms gothic":[0.8333,0.1667,0],"ms pgothic":[0.8333,0.1667,0],"ms ui gothic":[0.8333,0.1667,0],"ms mincho":[0.8333,0.1667,0],"ms pmincho":[0.8333,0.1667,0],"mv boli":[1.1667,0.25,0],"microsoft new tai lue":[1,
0.4167,0],nyala:[0.9167,0.3333,0],"microsoft phagspa":[1.0833,0.25,0],"plantagenet cherokee":[1,0.4167,0],raavi:[1.0833,0.6667,0],"segoe script":[1.0833,0.5,0],"segoe ui":[1,0.25,0],"segoe ui semibold":[1,0.25,0],"segoe ui light":[1,0.25,0],"segoe ui symbol":[1,0.25,0],shruti:[1.0833,0.5,0],simsun:[0.8333,0.1667,0],nsimsun:[0.8333,0.1667,0],"simsun-extb":[0.8333,0.1667,0],sylfaen:[1,0.3333,0],"microsoft tai le":[1,0.3333,0],"times new roman":[1,0.25,0],"times new roman baltic":[1,0.25,0],"times new roman ce":[1,
0.25,0],"times new roman cyr":[1,0.25,0],"times new roman greek":[1,0.25,0],"times new roman tur":[1,0.25,0],tunga:[1.0833,0.75,0],vrinda:[1,0.4167,0],"shonar bangla":[0.8333,0.5,0],"microsoft yi baiti":[0.8333,0.1667,0],tahoma:[1,0.1667,0],"microsoft sans serif":[1.0833,0.1667,0],"angsana new":[0.9167,0.4167,0],aparajita:[0.75,0.4167,0],"cordia new":[0.9167,0.5,0],ebrima:[1.0833,0.5,0],gisha:[0.9167,0.25,0],kokila:[0.8333,0.3333,0],leelawadee:[0.9167,0.25,0],"microsoft uighur":[1.0833,0.5,0],moolboran:[0.6667,
0.6667,0],symbol:[1,0.25,0],utsaah:[0.8333,0.4167,0],vijaya:[1.0833,0.25,0],wingdings:[0.9167,0.25,0],andalus:[1.3333,0.4167,0],"arabic typesetting":[0.8333,0.5,0],"simplified arabic":[1.3333,0.5,0],"simplified arabic fixed":[1,0.4167,0],"sakkal majalla":[0.9167,0.5,0],"traditional arabic":[1.3333,0.5,0],aharoni:[0.75,0.25,0],david:[0.75,0.25,0],frankruehl:[0.75,0.25,0],fangsong:[0.8333,0.1667,0],simhei:[0.8333,0.1667,0],kaiti:[0.8333,0.1667,0],"browallia new":[0.8333,0.4167,0],"lucida sans unicode":[1.0833,
0.25,0],"arial black":[1.0833,0.3333,0],calibri:[0.9167,0.25,0],cambria:[0.9167,0.25,0],"cambria math":[3.0833,2.5,0],candara:[0.9167,0.25,0],"comic sans ms":[1.0833,0.3333,0],consolas:[0.9167,0.25,0],constantia:[0.9167,0.25,0],corbel:[0.9167,0.25,0],"franklin gothic medium":[1,0.3333,0],gabriola:[1.1667,0.6667,0],georgia:[1,0.25,0],"palatino linotype":[1.0833,0.3333,0],"segoe print":[1.25,0.5,0],"trebuchet ms":[1.0833,0.4167,0],verdana:[1,0.1667,0],webdings:[1.0833,0.5,0],"lucida bright":[0.9167,
0.25,0],"lucida sans":[0.9167,0.25,0],"lucida sans typewriter":[0.9167,0.25,0],"gentium basic":[0.8333,0.25,0],"dejavu serif condensed":[0.9167,0.25,0],arimo:[1,0.25,0],"dejavu sans condensed":[0.9167,0.25,0],"dejavu sans":[0.9167,0.25,0],"dejavu sans light":[0.9167,0.25,0],opensymbol:[0.8333,0.1667,0],"gentium book basic":[0.8333,0.25,0],"dejavu sans mono":[0.9167,0.25,0],"dejavu serif":[0.9167,0.25,0],"calibri light":[0.9167,0.25,0]},DEVICE_FONT_METRICS_MAC={"al bayan plain":[1,0.5,0],"al bayan bold":[1,
0.5833,0],"american typewriter":[0.9167,0.25,0],"american typewriter bold":[0.9167,0.25,0],"american typewriter condensed":[0.9167,0.25,0],"american typewriter condensed bold":[0.9167,0.25,0],"american typewriter condensed light":[0.8333,0.25,0],"american typewriter light":[0.9167,0.25,0],"andale mono":[0.9167,0.25,0],"apple symbols":[0.6667,0.25,0],"arial bold italic":[0.9167,0.25,0],"arial bold":[0.9167,0.25,0],"arial italic":[0.9167,0.25,0],"arial hebrew":[0.75,0.3333,0],"arial hebrew bold":[0.75,
0.3333,0],arial:[0.9167,0.25,0],"arial narrow":[0.9167,0.25,0],"arial narrow bold":[0.9167,0.25,0],"arial narrow bold italic":[0.9167,0.25,0],"arial narrow italic":[0.9167,0.25,0],"arial rounded mt bold":[0.9167,0.25,0],"arial unicode ms":[1.0833,0.25,0],"avenir black":[1,0.3333,0],"avenir black oblique":[1,0.3333,0],"avenir book":[1,0.3333,0],"avenir book oblique":[1,0.3333,0],"avenir heavy":[1,0.3333,0],"avenir heavy oblique":[1,0.3333,0],"avenir light":[1,0.3333,0],"avenir light oblique":[1,0.3333,
0],"avenir medium":[1,0.3333,0],"avenir medium oblique":[1,0.3333,0],"avenir oblique":[1,0.3333,0],"avenir roman":[1,0.3333,0],"avenir next bold":[1,0.3333,0],"avenir next bold italic":[1,0.3333,0],"avenir next demi bold":[1,0.3333,0],"avenir next demi bold italic":[1,0.3333,0],"avenir next heavy":[1,0.3333,0],"avenir next heavy italic":[1,0.3333,0],"avenir next italic":[1,0.3333,0],"avenir next medium":[1,0.3333,0],"avenir next medium italic":[1,0.3333,0],"avenir next regular":[1,0.3333,0],"avenir next ultra light":[1,
0.3333,0],"avenir next ultra light italic":[1,0.3333,0],"avenir next condensed bold":[1,0.3333,0],"avenir next condensed bold italic":[1,0.3333,0],"avenir next condensed demi bold":[1,0.3333,0],"avenir next condensed demi bold italic":[1,0.3333,0],"avenir next condensed heavy":[1,0.3333,0],"avenir next condensed heavy italic":[1,0.3333,0],"avenir next condensed italic":[1,0.3333,0],"avenir next condensed medium":[1,0.3333,0],"avenir next condensed medium italic":[1,0.3333,0],"avenir next condensed regular":[1,
0.3333,0],"avenir next condensed ultra light":[1,0.3333,0],"avenir next condensed ultra light italic":[1,0.3333,0],ayuthaya:[1.0833,0.3333,0],baghdad:[0.9167,0.4167,0],"bangla mn":[0.9167,0.6667,0],"bangla mn bold":[0.9167,0.6667,0],"bangla sangam mn":[0.9167,0.4167,0],"bangla sangam mn bold":[0.9167,0.4167,0],baskerville:[0.9167,0.25,0],"baskerville bold":[0.9167,0.25,0],"baskerville bold italic":[0.9167,0.25,0],"baskerville italic":[0.9167,0.25,0],"baskerville semibold":[0.9167,0.25,0],"baskerville semibold italic":[0.9167,
0.25,0],"big caslon medium":[0.9167,0.25,0],"brush script mt italic":[0.9167,0.3333,0],chalkboard:[1,0.25,0],"chalkboard bold":[1,0.25,0],"chalkboard se bold":[1.1667,0.25,0],"chalkboard se light":[1.1667,0.25,0],"chalkboard se regular":[1.1667,0.25,0],chalkduster:[1,0.25,0],"charcoal cy":[1,0.25,0],cochin:[0.9167,0.25,0],"cochin bold":[0.9167,0.25,0],"cochin bold italic":[0.9167,0.25,0],"cochin italic":[0.9167,0.25,0],"comic sans ms":[1.0833,0.25,0],"comic sans ms bold":[1.0833,0.25,0],copperplate:[0.75,
0.25,0],"copperplate bold":[0.75,0.25,0],"copperplate light":[0.75,0.25,0],"corsiva hebrew":[0.6667,0.3333,0],"corsiva hebrew bold":[0.6667,0.3333,0],courier:[0.75,0.25,0],"courier bold":[0.75,0.25,0],"courier bold oblique":[0.75,0.25,0],"courier oblique":[0.75,0.25,0],"courier new bold italic":[0.8333,0.3333,0],"courier new bold":[0.8333,0.3333,0],"courier new italic":[0.8333,0.3333,0],"courier new":[0.8333,0.3333,0],biaukai:[0.8333,0.1667,0],damascus:[0.5833,0.4167,0],"damascus bold":[0.5833,0.4167,
0],"decotype naskh":[1.1667,0.6667,0],"devanagari mt":[0.9167,0.6667,0],"devanagari mt bold":[0.9167,0.6667,0],"devanagari sangam mn":[0.9167,0.4167,0],"devanagari sangam mn bold":[0.9167,0.4167,0],didot:[0.9167,0.3333,0],"didot bold":[1,0.3333,0],"didot italic":[0.9167,0.25,0],"euphemia ucas":[1.0833,0.25,0],"euphemia ucas bold":[1.0833,0.25,0],"euphemia ucas italic":[1.0833,0.25,0],"futura condensed extrabold":[1,0.25,0],"futura condensed medium":[1,0.25,0],"futura medium":[1,0.25,0],"futura medium italic":[1,
0.25,0],"gb18030 bitmap":[1,0.6667,0],"geeza pro":[0.9167,0.3333,0],"geeza pro bold":[0.9167,0.3333,0],geneva:[1,0.25,0],"geneva cy":[1,0.25,0],georgia:[0.9167,0.25,0],"georgia bold":[0.9167,0.25,0],"georgia bold italic":[0.9167,0.25,0],"georgia italic":[0.9167,0.25,0],"gill sans":[0.9167,0.25,0],"gill sans bold":[0.9167,0.25,0],"gill sans bold italic":[0.9167,0.25,0],"gill sans italic":[0.9167,0.25,0],"gill sans light":[0.9167,0.25,0],"gill sans light italic":[0.9167,0.25,0],"gujarati mt":[0.9167,
0.6667,0],"gujarati mt bold":[0.9167,0.6667,0],"gujarati sangam mn":[0.8333,0.4167,0],"gujarati sangam mn bold":[0.8333,0.4167,0],"gurmukhi mn":[0.9167,0.25,0],"gurmukhi mn bold":[0.9167,0.25,0],"gurmukhi sangam mn":[0.9167,0.3333,0],"gurmukhi sangam mn bold":[0.9167,0.3333,0],helvetica:[0.75,0.25,0],"helvetica bold":[0.75,0.25,0],"helvetica bold oblique":[0.75,0.25,0],"helvetica light":[0.75,0.25,0],"helvetica light oblique":[0.75,0.25,0],"helvetica oblique":[0.75,0.25,0],"helvetica neue":[0.9167,
0.25,0],"helvetica neue bold":[1,0.25,0],"helvetica neue bold italic":[1,0.25,0],"helvetica neue condensed black":[1,0.25,0],"helvetica neue condensed bold":[1,0.25,0],"helvetica neue italic":[0.9167,0.25,0],"helvetica neue light":[1,0.25,0],"helvetica neue light italic":[0.9167,0.25,0],"helvetica neue medium":[1,0.25,0],"helvetica neue ultralight":[0.9167,0.25,0],"helvetica neue ultralight italic":[0.9167,0.25,0],herculanum:[0.8333,0.1667,0],"hiragino kaku gothic pro w3":[0.9167,0.0833,0],"hiragino kaku gothic pro w6":[0.9167,
0.0833,0],"hiragino kaku gothic pron w3":[0.9167,0.0833,0],"hiragino kaku gothic pron w6":[0.9167,0.0833,0],"hiragino kaku gothic std w8":[0.9167,0.0833,0],"hiragino kaku gothic stdn w8":[0.9167,0.0833,0],"hiragino maru gothic pro w4":[0.9167,0.0833,0],"hiragino maru gothic pron w4":[0.9167,0.0833,0],"hiragino mincho pro w3":[0.9167,0.0833,0],"hiragino mincho pro w6":[0.9167,0.0833,0],"hiragino mincho pron w3":[0.9167,0.0833,0],"hiragino mincho pron w6":[0.9167,0.0833,0],"hiragino sans gb w3":[0.9167,
0.0833,0],"hiragino sans gb w6":[0.9167,0.0833,0],"hoefler text black":[0.75,0.25,0],"hoefler text black italic":[0.75,0.25,0],"hoefler text italic":[0.75,0.25,0],"hoefler text ornaments":[0.8333,0.1667,0],"hoefler text":[0.75,0.25,0],impact:[1,0.25,0],inaimathi:[0.8333,0.4167,0],"headlinea regular":[0.8333,0.1667,0],"pilgi regular":[0.8333,0.25,0],"gungseo regular":[0.8333,0.25,0],"pcmyungjo regular":[0.8333,0.25,0],"kailasa regular":[1.0833,0.5833,0],"kannada mn":[0.9167,0.25,0],"kannada mn bold":[0.9167,
0.25,0],"kannada sangam mn":[1,0.5833,0],"kannada sangam mn bold":[1,0.5833,0],"kefa bold":[0.9167,0.25,0],"kefa regular":[0.9167,0.25,0],"khmer mn":[1,0.6667,0],"khmer mn bold":[1,0.6667,0],"khmer sangam mn":[1.0833,0.6667,0],"kokonor regular":[1.0833,0.5833,0],krungthep:[1,0.25,0],kufistandardgk:[0.9167,0.5,0],"lao mn":[0.9167,0.4167,0],"lao mn bold":[0.9167,0.4167,0],"lao sangam mn":[1,0.3333,0],"apple ligothic medium":[0.8333,0.1667,0],"lihei pro":[0.8333,0.1667,0],"lisong pro":[0.8333,0.1667,
0],"lucida grande":[1,0.25,0],"lucida grande bold":[1,0.25,0],"malayalam mn":[1,0.4167,0],"malayalam mn bold":[1,0.4167,0],"malayalam sangam mn":[0.8333,0.4167,0],"malayalam sangam mn bold":[0.8333,0.4167,0],"marion bold":[0.6667,0.3333,0],"marion italic":[0.6667,0.3333,0],"marion regular":[0.6667,0.3333,0],"marker felt thin":[0.8333,0.25,0],"marker felt wide":[0.9167,0.25,0],"menlo bold":[0.9167,0.25,0],"menlo bold italic":[0.9167,0.25,0],"menlo italic":[0.9167,0.25,0],"menlo regular":[0.9167,0.25,
0],"microsoft sans serif":[0.9167,0.25,0],monaco:[1,0.25,0],"gurmukhi mt":[0.8333,0.4167,0],mshtakan:[0.9167,0.25,0],"mshtakan bold":[0.9167,0.25,0],"mshtakan boldoblique":[0.9167,0.25,0],"mshtakan oblique":[0.9167,0.25,0],"myanmar mn":[1,0.4167,0],"myanmar mn bold":[1,0.4167,0],"myanmar sangam mn":[0.9167,0.4167,0],nadeem:[0.9167,0.4167,0],"nanum brush script":[0.9167,0.25,0],nanumgothic:[0.9167,0.25,0],"nanumgothic bold":[0.9167,0.25,0],"nanumgothic extrabold":[0.9167,0.25,0],nanummyeongjo:[0.9167,
0.25,0],"nanummyeongjo bold":[0.9167,0.25,0],"nanummyeongjo extrabold":[0.9167,0.25,0],"nanum pen script":[0.9167,0.25,0],"optima bold":[0.9167,0.25,0],"optima bold italic":[0.9167,0.25,0],"optima extrablack":[1,0.25,0],"optima italic":[0.9167,0.25,0],"optima regular":[0.9167,0.25,0],"oriya mn":[0.9167,0.25,0],"oriya mn bold":[0.9167,0.25,0],"oriya sangam mn":[0.8333,0.4167,0],"oriya sangam mn bold":[0.8333,0.4167,0],osaka:[1,0.25,0],"osaka-mono":[0.8333,0.1667,0],"palatino bold":[0.8333,0.25,0],
"palatino bold italic":[0.8333,0.25,0],"palatino italic":[0.8333,0.25,0],palatino:[0.8333,0.25,0],papyrus:[0.9167,0.5833,0],"papyrus condensed":[0.9167,0.5833,0],"plantagenet cherokee":[0.6667,0.25,0],raanana:[0.75,0.25,0],"raanana bold":[0.75,0.25,0],"hei regular":[0.8333,0.1667,0],"kai regular":[0.8333,0.1667,0],stfangsong:[0.8333,0.1667,0],stheiti:[0.8333,0.1667,0],"heiti sc light":[0.8333,0.1667,0],"heiti sc medium":[0.8333,0.1667,0],"heiti tc light":[0.8333,0.1667,0],"heiti tc medium":[0.8333,
0.1667,0],stkaiti:[0.8333,0.1667,0],"kaiti sc black":[1.0833,0.3333,0],"kaiti sc bold":[1.0833,0.3333,0],"kaiti sc regular":[1.0833,0.3333,0],stsong:[0.8333,0.1667,0],"songti sc black":[1.0833,0.3333,0],"songti sc bold":[1.0833,0.3333,0],"songti sc light":[1.0833,0.3333,0],"songti sc regular":[1.0833,0.3333,0],stxihei:[0.8333,0.1667,0],sathu:[0.9167,0.3333,0],silom:[1,0.3333,0],"sinhala mn":[0.9167,0.25,0],"sinhala mn bold":[0.9167,0.25,0],"sinhala sangam mn":[1.1667,0.3333,0],"sinhala sangam mn bold":[1.1667,
0.3333,0],"skia regular":[0.75,0.25,0],symbol:[0.6667,0.3333,0],"tahoma negreta":[1,0.1667,0],"tamil mn":[0.9167,0.25,0],"tamil mn bold":[0.9167,0.25,0],"tamil sangam mn":[0.75,0.25,0],"tamil sangam mn bold":[0.75,0.25,0],"telugu mn":[0.9167,0.25,0],"telugu mn bold":[0.9167,0.25,0],"telugu sangam mn":[1,0.5833,0],"telugu sangam mn bold":[1,0.5833,0],thonburi:[1.0833,0.25,0],"thonburi bold":[1.0833,0.25,0],"times bold":[0.75,0.25,0],"times bold italic":[0.75,0.25,0],"times italic":[0.75,0.25,0],"times roman":[0.75,
0.25,0],"times new roman bold italic":[0.9167,0.25,0],"times new roman bold":[0.9167,0.25,0],"times new roman italic":[0.9167,0.25,0],"times new roman":[0.9167,0.25,0],"trebuchet ms bold italic":[0.9167,0.25,0],"trebuchet ms":[0.9167,0.25,0],"trebuchet ms bold":[0.9167,0.25,0],"trebuchet ms italic":[0.9167,0.25,0],verdana:[1,0.25,0],"verdana bold":[1,0.25,0],"verdana bold italic":[1,0.25,0],"verdana italic":[1,0.25,0],webdings:[0.8333,0.1667,0],"wingdings 2":[0.8333,0.25,0],"wingdings 3":[0.9167,
0.25,0],"yuppy sc regular":[1.0833,0.3333,0],"yuppy tc regular":[1.0833,0.3333,0],"zapf dingbats":[0.8333,0.1667,0],zapfino:[1.9167,1.5,0]},DEVICE_FONT_METRICS_LINUX={kacstfarsi:[1.0831,0.5215,0],meera:[0.682,0.4413,0],freemono:[0.8023,0.2006,0],undotum:[1.0029,0.2808,0],loma:[1.1634,0.4814,0],"century schoolbook l":[1.0029,0.3209,0],kacsttitlel:[1.0831,0.5215,0],undinaru:[1.0029,0.2407,0],ungungseo:[1.0029,0.2808,0],garuda:[1.3238,0.6017,0],rekha:[1.1232,0.2808,0],purisa:[1.1232,0.5215,0],"dejavu sans mono":[0.9628,
0.2407,0],vemana2000:[0.8825,0.8424,0],kacstoffice:[1.0831,0.5215,0],umpush:[1.2837,0.682,0],opensymbol:[0.8023,0.2006,0],sawasdee:[1.1232,0.4413,0],"urw palladio l":[1.0029,0.3209,0],freeserif:[0.9227,0.3209,0],kacstdigital:[1.0831,0.5215,0],"ubuntu condensed":[0.9628,0.2006,0],unpilgi:[1.0029,0.4413,0],mry_kacstqurn:[1.4442,0.7221,0],"urw gothic l":[1.0029,0.2407,0],dingbats:[0.8424,0.1605,0],"urw chancery l":[1.0029,0.3209,0],"phetsarath ot":[1.0831,0.5215,0],"tlwg typist":[0.8825,0.4012,0],kacstletter:[1.0831,
0.5215,0],utkal:[1.2035,0.6418,0],"dejavu sans light":[0.9628,0.2407,0],norasi:[1.2436,0.5215,0],"dejavu serif condensed":[0.9628,0.2407,0],kacstone:[1.2436,0.6418,0],"liberation sans narrow":[0.9628,0.2407,0],symbol:[1.043,0.3209,0],nanummyeongjo:[0.9227,0.2407,0],untitled1:[0.682,0.5616,0],"lohit gujarati":[0.9628,0.4012,0],"liberation mono":[0.8424,0.3209,0],kacstart:[1.0831,0.5215,0],mallige:[1.0029,0.682,0],"bitstream charter":[1.0029,0.2407,0],nanumgothic:[0.9227,0.2407,0],"liberation serif":[0.9227,
0.2407,0],"dejavu sans condensed":[0.9628,0.2407,0],ubuntu:[0.9628,0.2006,0],"courier 10 pitch":[0.8825,0.3209,0],"nimbus sans l":[0.9628,0.3209,0],takaopgothic:[0.8825,0.2006,0],"wenquanyi micro hei mono":[0.9628,0.2407,0],"dejavu sans":[0.9628,0.2407,0],kedage:[1.0029,0.682,0],kinnari:[1.3238,0.5215,0],tlwgmono:[0.8825,0.4012,0],"standard symbols l":[1.043,0.3209,0],"lohit punjabi":[1.2035,0.682,0],"nimbus mono l":[0.8424,0.2808,0],rachana:[0.682,0.5616,0],waree:[1.2436,0.4413,0],kacstposter:[1.0831,
0.5215,0],"khmer os":[1.2837,0.7622,0],freesans:[1.0029,0.3209,0],gargi:[0.9628,0.2808,0],"nimbus roman no9 l":[0.9628,0.3209,0],"dejavu serif":[0.9628,0.2407,0],"wenquanyi micro hei":[0.9628,0.2407,0],"ubuntu light":[0.9628,0.2006,0],tlwgtypewriter:[0.9227,0.4012,0],kacstpen:[1.0831,0.5215,0],"tlwg typo":[0.8825,0.4012,0],"mukti narrow":[1.2837,0.4413,0],"ubuntu mono":[0.8424,0.2006,0],"lohit bengali":[1.0029,0.4413,0],"liberation sans":[0.9227,0.2407,0],unbatang:[1.0029,0.2808,0],kacstdecorative:[1.1232,
0.5215,0],"khmer os system":[1.2436,0.6017,0],saab:[1.0029,0.682,0],kacsttitle:[1.0831,0.5215,0],"mukti narrow bold":[1.2837,0.4413,0],"lohit hindi":[1.0029,0.5215,0],kacstqurn:[1.0831,0.5215,0],"urw bookman l":[0.9628,0.2808,0],kacstnaskh:[1.0831,0.5215,0],kacstscreen:[1.0831,0.5215,0],pothana2000:[0.8825,0.8424,0],ungraphic:[1.0029,0.2808,0],"lohit tamil":[0.8825,0.361,0],kacstbook:[1.0831,0.5215,0]};DEVICE_FONT_METRICS_MAC.__proto__=DEVICE_FONT_METRICS_WIN;DEVICE_FONT_METRICS_LINUX.__proto__=DEVICE_FONT_METRICS_MAC;
var StaticTextDefinition=function(){var a={__class__:"flash.text.StaticText",initialize:function(){var a=this.symbol;a&&(this.draw=a.draw)},get text(){return this._text},set text(a){this._text=a}},e=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{text:e(a,"text")}}};return a}.call(this),StyleSheetDefinition=function(){return{__class__:"flash.text.StyleSheet",initialize:function(){},__glue__:{"native":{"static":{},instance:{_update:function(){somewhatImplemented("StyleSheet._update")},
_parseCSSInternal:function(){somewhatImplemented("StyleSheet._parseCSSInternal");return null},_parseCSSFontFamily:function(){notImplemented("StyleSheet._parseCSSFontFamily")},_parseColor:function(){notImplemented("StyleSheet._parseColor")},_styles:{get:function(){return this.__styles},set:function(a){somewhatImplemented("StyleSheet._styles");this.__styles=a}}}}}}}.call(this),TextFieldDefinition=function(){var a={__class__:"flash.text.TextField",initialize:function(){this._bbox={xMin:0,yMin:0,xMax:2E3,
yMax:2E3};var a={align:"LEFT",face:"serif",size:12,letterspacing:0,kerning:0,color:0,leading:0};this._content=new TextFieldContent(a);this._type="dynamic";this._embedFonts=!1;this._selectable=!0;this._autoSize="none";this._bottomScrollV=this._maxScrollV=this._scrollV=1;this._drawingOffsetH=0;this._border=this._background=!1;this._backgroundColor=16777215;this._backgroundColorStr="#ffffff";this._borderColor=0;this._borderColorStr="#000000";var d=this.symbol;if(d){var d=d.tag,e=d.bbox;this._currentTransform.tx+=
e.xMin;this._currentTransform.ty+=e.yMin;this._bbox.xMax=e.xMax-e.xMin;this._bbox.yMax=e.yMax-e.yMin;d.hasLayout&&(a.size=d.fontHeight/20,a.leading=(d.leading|0)/20);d.hasColor&&(a.color=rgbaObjToStr(d.color));d.hasFont&&(e=FontDefinition.getFontByUniqueName(d.font),a.font=e,a.face=e._fontName,a.bold=e.symbol.bold,a.italic=e.symbol.italic,a.str=this._content.makeFormatString(a));this._content.multiline=!!d.multiline;this._content.wordWrap=!!d.wordWrap;this._embedFonts=!!d.useOutlines;this._selectable=
!d.noSelect;this._border=!!d.border;switch(d.align){case 1:a.align="right";break;case 2:a.align="center";break;case 3:a.align="justified"}d.initialText?d.html?this.htmlText=d.initialText:this.text=d.initialText:this.text=""}else this._currentTransform.tx-=40,this._currentTransform.ty-=40,this._content.resolveFont(a,!1),this.text=""},_getAS2Object:function(){this.$as2Object||new avm1lib.AS2TextField(this);return this.$as2Object},replaceText:function(a,d,e){var f=this._content.text;this.text=f.substring(0,
a)+e+f.substring(d)},draw:function(a,d,e){this.ensureDimensions();var f=this._bbox;d=f.xMax/20;f=f.yMax/20;if(!(0>=d||0>=f)){a.save();a.beginPath();a.rect(0,0,d+1,f+1);a.clip();this._background&&(e.setFillStyle(a,this._backgroundColorStr),a.fill());this._border&&(e.setStrokeStyle(a,this._borderColorStr),a.lineCap="square",a.lineWidth=1,a.strokeRect(0.5,0.5,d|0,f|0));a.closePath();if(0!==this._content.lines.length){a.translate(2,2);a.save();e.setAlpha(a);d=this._content._textRuns;for(var f=this._content.lines[this._scrollV-
1].y,l=0;l<d.length;l++){var m=d[l];"f"===m.type?(a.restore(),a.font=m.format.str,e.setFillStyle(a,m.format.color),a.save(),e.setAlpha(a)):m.y<f||a.fillText(m.text,m.x-this._drawingOffsetH,m.y-f)}a.restore()}a.restore()}},invalidateDimensions:function(){this._invalidate();this._invalidateBounds();this._dimensionsValid=!1},ensureDimensions:function(){if(!this._dimensionsValid){var a=this._bbox,d=this._content.calculateMetrics(a,this._embedFonts);this._bottomScrollV=this._maxScrollV=this._scrollV=1;
var e=this._autoSize;if("none"===e){if(a=(a.yMax-80)/20,this._content.textHeight>a){d=this._content.lines;for(e=0;e<d.length;e++){var f=d[e];if(f.y+f.height>a){this._maxScrollV=e+1;this._bottomScrollV=0===e?1:e;break}}}}else{var f=Math.max(a.xMax/20-4,1),l=this._content.textWidth,m=0;if("mixed"!==d){switch(e){case "center":m=f-l>>1;break;case "right":m=f-l}if("left"===d)this._drawingOffsetH=0;else{var p;switch(e){case "left":p=f-l;break;case "center":p=m<<1;break;case "right":p=m}"center"===d&&(p>>=
1);this._drawingOffsetH=p}this._invalidateTransform();this._currentTransform.tx+=20*m|0;a.xMax=(20*l|0)+80}a.yMax=(20*this._content.textHeight|0)+80;console.log(a.yMax);this._invalidateBounds()}this._dimensionsValid=!0}},get text(){return this._content.text},set text(a){this._content.text=a;this.invalidateDimensions()},get htmlText(){return this._content.htmlText},set htmlText(a){this._content.htmlText=a;this.invalidateDimensions()},get defaultTextFormat(){var a=this._content.defaultTextFormat;return(new flash.text.TextFormat).fromObject(a)},
set defaultTextFormat(a){this._content.defaultTextFormat=a.toObject();this.invalidateDimensions()},getTextFormat:function(){return this.defaultTextFormat},setTextFormat:function(a){this.defaultTextFormat=a;this.text===this.htmlText&&(this.text=this.text);this.invalidateDimensions()},get x(){this.ensureDimensions();return this._currentTransform.tx},set x(a){a!==this._currentTransform.tx&&(this._invalidate(),this._invalidateBounds(),this._invalidateTransform(),this._currentTransform.tx=a)},get width(){this.ensureDimensions();
return this._bbox.xMax},set width(a){0>a||(this._bbox.xMax=a,this.invalidateDimensions())},get height(){this.ensureDimensions();return this._bbox.yMax},set height(a){0>a||(this._bbox.yMax=a,this._invalidate())},_getContentBounds:function(){this.ensureDimensions();return this._bbox},_getRegion:function(a){return this._getTransformedRect(this._getContentBounds(),a)},getLineMetrics:function(a){this.ensureDimensions();(0>a||a>=this._content.lines.length)&&throwError("RangeError",Errors.ParamRangeError);
a=this._content.lines[a];var d=a.largestFormat,e=d.font._metrics,d=d.size;return new flash.text.TextLineMetrics(a.x+2,a.width,a.height,e.ascent*d+0.49999|0,e.descent*d+0.49999|0,e.leading*d+0.49999+a.leading|0)},getCharBoundaries:function(){somewhatImplemented("TextField.getCharBoundaries");return new flash.geom.Rectangle(0,0,0,0)}},e=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{text:e(a,"text"),defaultTextFormat:e(a,"defaultTextFormat"),draw:a.draw,htmlText:e(a,"htmlText"),replaceText:a.replaceText,
getTextFormat:a.getTextFormat,setTextFormat:a.setTextFormat,getCharBoundaries:a.getCharBoundaries,autoSize:{get:function(){return this._autoSize},set:function(a){this._autoSize!==a&&(this._autoSize=a,this.invalidateDimensions())}},multiline:{get:function(){return this._content.multiline},set:function(a){this._content.multiline!==a&&(this._content.multiline=a,this.invalidateDimensions())}},textColor:{get:function(){return this._content.textColor},set:function(a){this._content.textColor!==a&&(this._content.textColor=
a,this._invalidate())}},selectable:{get:function(){return this._selectable},set:function(a){somewhatImplemented("TextField.selectable");this._selectable=a}},wordWrap:{get:function(){return this._content.wordWrap},set:function(a){this._content.wordWrap!==a&&(this._content.wordWrap=a,this.invalidateDimensions())}},textHeight:{get:function(){this.ensureDimensions();return this._content.textHeight}},textWidth:{get:function(){this.ensureDimensions();return this._content.textWidth}},length:{get:function(){return this.text.length}},
numLines:{get:function(){this.ensureDimensions();return this._content.lines.length}},getLineMetrics:function(a){return this.getLineMetrics(a)},setSelection:function(){somewhatImplemented("TextField.setSelection")},scrollV:{get:function(){return this._scrollV},set:function(a){this.ensureDimensions();this._scrollV=a=Math.max(1,Math.min(this._maxScrollV,a))}},bottomScrollV:{get:function(){this.ensureDimensions();if(1===this._scrollV)return this._bottomScrollV;for(var a=(this._bbox.yMax-80)/20,d=this._content.lines,
e=d[this._scrollV-1].y,f=this._bottomScrollV;f<d.length;f++){var l=d[f];if(l.y+l.height+e>a)return f+1}}},maxScrollV:{get:function(){this.ensureDimensions();return this._maxScrollV}},maxScrollH:{get:function(){this.ensureDimensions();return Math.max(this._content.textWidth-this._bbox.xMax/20+4,0)}},background:{get:function(){return this._background},set:function(a){this._background!==a&&(this._background=a,this._invalidate())}},backgroundColor:{get:function(){return this._backgroundColor},set:function(a){this._backgroundColor!==
a&&(this._backgroundColor=a,this._backgroundColorStr=rgbIntAlphaToStr(a,1),this._background&&this._invalidate())}},border:{get:function(){return this._border},set:function(a){this._border!==a&&(this._border=a,this._invalidate())}},borderColor:{get:function(){return this._borderColor},set:function(a){this._borderColor!==a&&(this._borderColor=a,this._borderColorStr=rgbIntAlphaToStr(a,1),this._border&&this._invalidate())}},type:{get:function(){return this._type},set:function(a){somewhatImplemented("TextField.type");
this._type=a}},embedFonts:{get:function(){return this._embedFonts},set:function(a){this.invalidateDimensions();this._embedFonts=a}},condenseWhite:{get:function(){return this._content.condenseWhite},set:function(a){somewhatImplemented("TextField.condenseWhite");this._content.condenseWhite=a}},sharpness:{get:function(){return this._sharpness},set:function(a){somewhatImplemented("TextField.sharpness");this._sharpness=a}}}}};return a}.call(this);
function TextFieldContent(a){this.defaultTextFormat=a;this.textHeight=this.textWidth=0;this.multiline=this.wordWrap=this.condenseWhite=!1;this.textColor=null;this._htmlText=this._text="";this._createTrunk();this._textRuns=null;this._htmlParser=document.createElement("p");this._measureCtx=document.createElement("canvas").getContext("2d")}TextFieldContent.knownNodeTypes={BR:!0,LI:!0,P:!0,B:!0,I:!0,FONT:!0,TEXTFORMAT:!0,U:!0,A:!0,IMG:!0,SPAN:!0};
TextFieldContent.WRAP_OPPORTUNITIES={" ":!0,".":!0,"-":!0,"\t":!0};TextFieldContent.TextLine=function(a){this.width=this.x=0;this.y=a;this.leading=this.height=0;this.runs=[];this.largestFormat=null};
TextFieldContent.prototype={get text(){return this._text},set text(a){a+="";if(this._text!==a){for(var e=[],b=0,d=0;d<a.length;){var g=a[d];if("\r"===g||"\n"===g)e.push(a.substring(b,d)),b=d,"\r"===g&&"\n"===a[d+1]&&d++;d++}e.push(a.substring(b,d));this._createTrunk();this._htmlText=this._text=a;this._tree.children[0].children[0]={type:"plain-text",lines:e}}},get htmlText(){return this._htmlText},set htmlText(a){this._htmlText!==a&&(this.defaultTextFormat.bold=!1,this.defaultTextFormat.italic=!1,
this._parseHtml(a))},calculateMetrics:function(a,e){var b=this.defaultTextFormat;this.resolveFont(b,e);this.lines=[];this._textRuns=[{type:"f",format:b}];var d=Math.max(a.xMax/20-4,1),g=Math.max(a.yMax/20-4,1),b={ctx:this._measureCtx,w:d,h:g,maxLineWidth:0,formats:[b],currentFormat:b,line:new TextFieldContent.TextLine(0),wordWrap:this.wordWrap,combinedAlign:null,textColor:this.textColor,embedFonts:e};this._collectRuns(b,this._tree);this._finishLine(b,!1);this.textWidth=b.maxLineWidth|0;this.textHeight=
b.line.y|0;return b.combinedAlign},makeFormatString:function(a){var e="";a.italic&&(e+="italic");a.bold&&(e+=" bold");return e+" "+a.size+"px "+(a.font._uniqueName||a.font._fontName)},resolveFont:function(a,e){var b=a.face.toLowerCase();"_sans"===b?b="sans-serif":"_serif"===b?b="serif":"_typewriter"===b&&(b="monospace");b=FontDefinition.getFont(b,a.bold?a.italic?"boldItalic":"bold":a.italic?"italic":"regular",e);a.font=b},_parseHtml:function(a){this._htmlParser.innerHTML=a;var e=1!==this._htmlParser.childNodes.length?
this._htmlParser:this._htmlParser.childNodes[0];this._text="";this._htmlText=a;this._createTrunk();3===e.nodeType&&this._convertNode(e,this._tree.children[0].children);a=[e];var b,d;if(1==a.length&&"P"==e.localName.toUpperCase()){a=this._extractAttributes(e);b=this._tree.format;for(d in a)b[d]=a[d];a=e.childNodes;e=e.childNodes[0]}if(1==a.length&&"FONT"==e.localName.toUpperCase()){a=this._extractAttributes(e);b=this._tree.children[0].format;for(d in a)b[d]=a[d];a=e.childNodes}this._convertNodeList(a,
this._tree.children[0].children)},_createTrunk:function(){var a=this.defaultTextFormat;this._tree={type:"SPAN",format:{ALIGN:a.align},children:[]};this._tree.children[0]={type:"FONT",format:{FACE:a.face,LETTERSPACING:a.letterSpacing,KERNING:a.kerning,LEADING:a.leading,COLOR:a.color},children:[]}},_convertNode:function(a,e){if((1===a.nodeType||3===a.nodeType)&&!a.prefix){var b;if(3===a.nodeType){var d=a.textContent;b={type:"text",text:d,format:null,children:null};this._text+=d;e.push(b)}else b=a.localName.toUpperCase(),
!TextFieldContent.knownNodeTypes[b]||!1===this.multiline&&("P"===b||"BR"===b)?("SBR"===b&&e.push({type:"BR",text:null,format:null,children:null}),this._convertNodeList(a.childNodes,e)):(b={type:b,text:null,format:this._extractAttributes(a),children:[]},this._convertNodeList(a.childNodes,b.children),e.push(b))}},_convertNodeList:function(a,e){for(var b=a.length,d=0;d<b;d++)this._convertNode(a[d],e)},_extractAttributes:function(a){a=a.attributes;for(var e={},b=0;b<a.length;b++){var d=a[b];d.prefix||
(e[d.localName.toUpperCase()]=d.value)}return e},_collectRuns:function(a,e){var b=!1,d=!1;switch(e.type){case "plain-text":for(var b=e.lines,g=0;g<b.length;g++)this._addRunsForText(a,b[g]),g<b.length-1&&this._finishLine(a,!0);return;case "text":this._addRunsForText(a,e.text);return;case "BR":this._finishLine(a,!0);return;case "LI":case "P":this._finishLine(a,!1);this._pushFormat(a,e);d=!0;break;case "B":case "I":case "FONT":case "TEXTFORMAT":this._pushFormat(a,e),b=!0}for(g=0;g<e.children.length;g++)this._collectRuns(a,
e.children[g]);b&&this._popFormat(a);d&&this._finishLine(a,!0)},_addRunsForText:function(a,e){if(e)if(a.wordWrap)for(;e.length;){var b=a.ctx.measureText(e).width,d=a.w-a.line.width;0>=d&&(this._finishLine(a,!1),d=a.w-a.line.width);if(b<=d){this._addTextRun(a,e,b);break}else{for(b=e.length/b*d|0;a.ctx.measureText(e.substr(0,b)).width<d&&b<e.length;)b++;for(var g=b;-1<g;){if(TextFieldContent.WRAP_OPPORTUNITIES[e[g]]){g++;break}g--}if(-1===g){if(0<a.line.width){this._finishLine(a,!1);continue}for(;a.ctx.measureText(e.substr(0,
b)).width>d;)b--;0===b&&(b=1);g=b}d=e.substr(0,g);b=a.ctx.measureText(d).width;this._addTextRun(a,d,b);a.wordWrap&&this._finishLine(a,!1);e=e.substr(g)}}else this._addTextRun(a,e,a.ctx.measureText(e).width)},_addTextRun:function(a,e,b){if(0!==e.length){var d=a.line,g=a.currentFormat,f=g.size;e={type:"t",text:e,x:d.width};this._textRuns.push(e);a.line.runs.push(e);d.width+=b|0;0===d.leading&&g.leading>d.leading&&(d.leading=g.leading);if(!d.largestFormat||f>d.largestFormat.size)d.largestFormat=g}},
_finishLine:function(a,e){var b=a.line;if(0===b.runs.length){if(e){var d=a.currentFormat;a.line.y+=d.font._metrics.height*d.size+d.leading|0}}else{for(var g=b.runs,d=b.largestFormat,f=b.y+d.font._metrics.ascent*d.size,l=g.length;l--;)g[l].y=f;l=(a.currentFormat.align||"").toLowerCase();null===a.combinedAlign?a.combinedAlign=l:a.combinedAlign!==l&&(a.combinedAlign="mixed");if("center"===l||"right"===l){f=Math.max(a.w-b.width,0);"center"===l&&(f>>=1);for(l=g.length;l--;)g[l].x+=f}b.height=d.font._metrics.height*
d.size+b.leading|0;a.maxLineWidth=Math.max(a.maxLineWidth,b.width);this.lines.push(b);a.line=new TextFieldContent.TextLine(b.y+b.height)}},_pushFormat:function(a,e){var b=e.format,d=Object.create(a.formats[a.formats.length-1]),g=!1;switch(e.type){case "P":if(b.ALIGN===d.align)return;d.align=b.ALIGN;break;case "B":g=d.bold=!0;break;case "I":g=d.italic=!0;break;case "FONT":void 0!==b.COLOR&&(d.color=b.COLOR),void 0!==b.FACE&&(d.face=b.FACE,g=!0),void 0!==b.SIZE&&(d.size=parseFloat(b.SIZE)),void 0!==
b.LETTERSPACING&&(d.letterspacing=parseFloat(b.LETTERSPACING)),void 0!==b.KERNING&&(d.kerning=b.KERNING&&!0);case "TEXTFORMAT":void 0!==b.LEADING&&(d.leading=parseFloat(b.LEADING));void 0!==b.INDENT&&(a.line.x=b.INDENT,a.line.width+=b.INDENT|0);break;default:warning("Unknown format node encountered: "+e.type);return}null!==a.textColor&&(d.color=rgbIntAlphaToStr(a.textColor,1));g&&this.resolveFont(d,a.embedFonts);d.str=this.makeFormatString(d);a.formats.push(d);this._textRuns.push({type:"f",format:d});
a.currentFormat=d;a.ctx.font=d.str},_popFormat:function(a){a.formats.pop();var e=a.currentFormat=a.formats[a.formats.length-1];this._textRuns.push({type:"f",format:e});a.ctx.font=a.str}};
var TextFormatDefinition=function(){var a;return{__class__:"flash.text.TextFormat",initialize:function(){},fromObject:function(a){this._font=a.face||null;this._size="number"===typeof a.size?a.size:null;this._color="number"===typeof a.color?a.color:null;this._bold="boolean"===typeof a.bold?a.bold:null;this._italic="boolean"===typeof a.italic?a.italic:null;this._underline="boolean"===typeof a.underline?a.underline:null;this._url=a.url||null;this._target=a.target||null;this._align=a.align||null;this._leftMargin=
"number"===typeof a.leftMargin?a.leftMargin:null;this._rightMargin="number"===typeof a.rightMargin?a.rightMargin:null;this._indent="number"===typeof a.indent?a.indent:null;this._leading="number"===typeof a.leading?a.leading:null;return this},toObject:function(){return{face:this._font||"serif",size:this._size||12,color:this._color||0,bold:this._bold||!1,italic:this._italic||!1,underline:this._underline||!1,url:this._url,target:this._target,align:this._align||"left",leftMargin:this._leftMargin||0,rightMargin:this._rightMargin||
0,indent:this._indent||0,leading:this._leading||0}},as2GetTextExtent:function(e,b){a||(a=new flash.text.TextField,a._multiline=!0);!isNaN(b)&&0<b?(a.width=b+4,a._wordWrap=!0):a._wordWrap=!1;a.defaultTextFormat=this;a.text=e;a.ensureDimensions();var d={},g=a._textWidth,f=a._textHeight;d.asSetPublicProperty("width",g);d.asSetPublicProperty("height",f);d.asSetPublicProperty("textFieldWidth",g+4);d.asSetPublicProperty("textFieldHeight",f+4);g=a.getLineMetrics(0);d.asSetPublicProperty("ascent",g.asGetPublicProperty("ascent"));
d.asSetPublicProperty("descent",g.asGetPublicProperty("descent"));return d},__glue__:{"native":{"static":{},instance:{align:{get:function(){return this._align},set:function(a){this._align=a}},blockIndent:{get:function(){return this._blockIndent},set:function(a){this._blockIndent=a}},bold:{get:function(){return this._bold},set:function(a){this._bold=a}},bullet:{get:function(){return this._bullet},set:function(a){this._bullet=a}},color:{get:function(){return this._color},set:function(a){this._color=
a}},display:{get:function(){return this._display},set:function(a){this._display=a}},font:{get:function(){return this._font},set:function(a){this._font=a}},indent:{get:function(){return this._indent},set:function(a){this._indent=a}},italic:{get:function(){return this._italic},set:function(a){this._italic=a}},kerning:{get:function(){return this._kerning},set:function(a){this._kerning=a}},leading:{get:function(){return this._leading},set:function(a){this._leading=a}},leftMargin:{get:function(){return this._leftMargin},
set:function(a){this._leftMargin=a}},letterSpacing:{get:function(){return this._letterSpacing},set:function(a){this._letterSpacing=a}},rightMargin:{get:function(){return this._rightMargin},set:function(a){this._rightMargin=a}},size:{get:function(){return this._size},set:function(a){this._size=a}},tabStops:{get:function(){return this._tabStops},set:function(a){this._tabStops=a}},target:{get:function(){return this._target},set:function(a){this._target=a}},underline:{get:function(){return this._underline},
set:function(a){this._underline=a}},url:{get:function(){return this._url},set:function(a){this._url=a}}}}}}}.call(this),ContentElementDefinition=function(){return{__class__:"flash.text.engine.ContentElement",initialize:function(){},__glue__:{"native":{"static":{},instance:{textBlock:{get:function(){notImplemented("ContentElement.textBlock");return this._textBlock}},textBlockBeginIndex:{get:function(){notImplemented("ContentElement.textBlockBeginIndex");return this._textBlockBeginIndex}},elementFormat:{get:function(){return this._elementFormat},
set:function(a){somewhatImplemented("ContentElement.elementFormat");this._elementFormat=a}},eventMirror:{get:function(){return this._eventMirror},set:function(a){somewhatImplemented("ContentElement.eventMirror");this._eventMirror=a}},groupElement:{get:function(){notImplemented("ContentElement.groupElement");return this._groupElement}},rawText:{get:function(){notImplemented("ContentElement.rawText");return this._rawText}},text:{get:function(){notImplemented("ContentElement.text");return this._text}},
textRotation:{get:function(){return this._textRotation},set:function(a){somewhatImplemented("ContentElement.textRotation");this._textRotation=a}}}}}}}.call(this),ElementFormatDefinition=function(){return{__class__:"flash.text.engine.ElementFormat",initialize:function(){},__glue__:{"native":{"static":{},instance:{getFontMetrics:function(){notImplemented("ElementFormat.getFontMetrics")},alignmentBaseline:{get:function(){return this._alignmentBaseline},set:function(a){somewhatImplemented("ElementFormat.alignmentBaseline");
this._alignmentBaseline=a}},alpha:{get:function(){return this._alpha},set:function(a){somewhatImplemented("ElementFormat.alpha");this._alpha=a}},baselineShift:{get:function(){return this._baselineShift},set:function(a){somewhatImplemented("ElementFormat.baselineShift");this._baselineShift=a}},breakOpportunity:{get:function(){return this._breakOpportunity},set:function(a){somewhatImplemented("ElementFormat.breakOpportunity");this._breakOpportunity=a}},color:{get:function(){return this._color},set:function(a){somewhatImplemented("ElementFormat.color");
this._color=a}},dominantBaseline:{get:function(){return this._dominantBaseline},set:function(a){somewhatImplemented("ElementFormat.dominantBaseline");this._dominantBaseline=a}},fontDescription:{get:function(){return this._fontDescription},set:function(a){somewhatImplemented("ElementFormat.fontDescription");this._fontDescription=a}},digitCase:{get:function(){return this._digitCase},set:function(a){somewhatImplemented("ElementFormat.digitCase");this._digitCase=a}},digitWidth:{get:function(){return this._digitWidth},
set:function(a){somewhatImplemented("ElementFormat.digitWidth");this._digitWidth=a}},ligatureLevel:{get:function(){return this._ligatureLevel},set:function(a){somewhatImplemented("ElementFormat.ligatureLevel");this._ligatureLevel=a}},fontSize:{get:function(){return this._fontSize},set:function(a){somewhatImplemented("ElementFormat.fontSize");this._fontSize=a}},kerning:{get:function(){return this._kerning},set:function(a){somewhatImplemented("ElementFormat.kerning");this._kerning=a}},locale:{get:function(){return this._locale},
set:function(a){somewhatImplemented("ElementFormat.locale");this._locale=a}},textRotation:{get:function(){return this._textRotation},set:function(a){somewhatImplemented("ElementFormat.textRotation");this._textRotation=a}},trackingRight:{get:function(){return this._trackingRight},set:function(a){somewhatImplemented("ElementFormat.trackingRight");this._trackingRight=a}},trackingLeft:{get:function(){return this._trackingLeft},set:function(a){somewhatImplemented("ElementFormat.trackingLeft");this._trackingLeft=
a}},typographicCase:{get:function(){return this._typographicCase},set:function(a){somewhatImplemented("ElementFormat.typographicCase");this._typographicCase=a}},locked:{get:function(){notImplemented("ElementFormat.locked");return this._locked},set:function(a){notImplemented("ElementFormat.locked");this._locked=a}}}}}}}.call(this),FontDescriptionDefinition=function(){return{__class__:"flash.text.engine.FontDescription",initialize:function(){},__glue__:{"native":{"static":{isFontCompatible:function(){notImplemented("FontDescription.isFontCompatible")},
isDeviceFontCompatible:function(){notImplemented("FontDescription.isDeviceFontCompatible")}},instance:{renderingMode:{get:function(){return this._renderingMode},set:function(a){somewhatImplemented("FontDescription.renderingMode");this._renderingMode=a}},fontLookup:{get:function(){return this._fontLookup},set:function(a){somewhatImplemented("FontDescription.fontLookup");this._fontLookup=a}},fontName:{get:function(){return this._fontName},set:function(a){somewhatImplemented("FontDescription.fontName");
this._fontName=a}},fontPosture:{get:function(){return this._fontPosture},set:function(a){somewhatImplemented("FontDescription.fontPosture");this._fontPosture=a}},fontWeight:{get:function(){return this._fontWeight},set:function(a){somewhatImplemented("FontDescription.fontWeight");this._fontWeight=a}},cffHinting:{get:function(){return this._cffHinting},set:function(a){somewhatImplemented("FontDescription.cffHinting");this._cffHinting=a}},locked:{get:function(){notImplemented("FontDescription.locked");
return this._locked},set:function(a){notImplemented("FontDescription.locked");this._locked=a}}}},script:{"static":{},instance:{}}}}}.call(this),GroupElementDefinition=function(){return{__class__:"flash.text.engine.GroupElement",initialize:function(){},__glue__:{"native":{"static":{},instance:{getElementAt:function(){notImplemented("GroupElement.getElementAt")},setElements:function(a){somewhatImplemented("GroupElement.setElements");this._elements=a},groupElements:function(){notImplemented("GroupElement.groupElements")},
ungroupElements:function(){notImplemented("GroupElement.ungroupElements")},mergeTextElements:function(){notImplemented("GroupElement.mergeTextElements")},splitTextElement:function(){notImplemented("GroupElement.splitTextElement")},replaceElements:function(){notImplemented("GroupElement.replaceElements")},getElementAtCharIndex:function(){notImplemented("GroupElement.getElementAtCharIndex")},elementCount:{get:function(){notImplemented("GroupElement.elementCount");return this._elementCount}}}}}}}.call(this),
SpaceJustifierDefinition=function(){return{__class__:"flash.text.engine.SpaceJustifier",initialize:function(){this._letterSpacing=!1;this._optimumSpacing=1;this._minimumSpacing=0.5;this._maximumSpacing=1.5},__glue__:{"native":{"static":{},instance:{cloneSpacing:function(a){somewhatImplemented("SpaceJustifier.cloneSpacing");a._optimumSpacing=this._optimumSpacing;a._minimumSpacing=this._minimumSpacing;a._maximumSpacing=this._maximumSpacing},letterSpacing:{get:function(){return this._letterSpacing},
set:function(a){somewhatImplemented("SpaceJustifier.letterSpacing");this._letterSpacing=a}},minimumSpacing:{get:function(){return this._minimumSpacing},set:function(a){somewhatImplemented("SpaceJustifier.minimumSpacing");this._minimumSpacing=a}},optimumSpacing:{get:function(){return this._optimumSpacing},set:function(a){somewhatImplemented("SpaceJustifier.optimumSpacing");this._optimumSpacing=a}},maximumSpacing:{get:function(){return this._maximumSpacing},set:function(a){somewhatImplemented("SpaceJustifier.maximumSpacing");
this._maximumSpacing=a}}}}}}}.call(this),TextBlockDefinition=function(){return{__class__:"flash.text.engine.TextBlock",initialize:function(){this._lastLine=this._firstLine=null},__glue__:{"native":{"static":{},instance:{getTextJustifier:function(){return this._textJustifier},setTextJustifier:function(a){somewhatImplemented("TextBlock.setTextJustifier");this._textJustifier=a},getTabStops:function(){return this._tabStops},setTabStops:function(a){somewhatImplemented("TextBlock.setTabStops");this._tabStops=
a},findNextAtomBoundary:function(){notImplemented("TextBlock.findNextAtomBoundary")},findPreviousAtomBoundary:function(){notImplemented("TextBlock.findPreviousAtomBoundary")},findNextWordBoundary:function(){notImplemented("TextBlock.findNextWordBoundary")},findPreviousWordBoundary:function(){notImplemented("TextBlock.findPreviousWordBoundary")},getTextLineAtCharIndex:function(){notImplemented("TextBlock.getTextLineAtCharIndex")},DoCreateTextLine:function(a,e){somewhatImplemented("TextBlock.DoCreateTextLine");
if(a)return null;var b=new flash.text.engine.TextLine;b._textBlock=this;b._specifiedWidth=e;b._rawTextLength=0;b._textWidth=0;b._textHeight=0;b._ascent=0;b._descent=0;b._unjustifiedTextWidth=0;b._validity="valid";b._previousLine=null;b._nextLine=null;return this._lastLine=this._firstLine=b},releaseLineCreationData:function(){notImplemented("TextBlock.releaseLineCreationData")},releaseLines:function(){notImplemented("TextBlock.releaseLines")},dump:function(){notImplemented("TextBlock.dump")},applyNonLinearFontScaling:{get:function(){return this._applyNonLinearFontScaling},
set:function(a){somewhatImplemented("TextBlock.applyNonLinearFontScaling");this._applyNonLinearFontScaling=a}},baselineFontDescription:{get:function(){return this._baselineFontDescription},set:function(a){somewhatImplemented("TextBlock.baselineFontDescription");this._baselineFontDescription=a}},baselineFontSize:{get:function(){return this._baselineFontSize},set:function(a){somewhatImplemented("TextBlock.baselineFontSize");this._baselineFontSize=a}},baselineZero:{get:function(){return this._baselineZero},
set:function(a){somewhatImplemented("TextBlock.baselineZero");this._baselineZero=a}},content:{get:function(){return this._content},set:function(a){somewhatImplemented("TextBlock.content");this._content=a}},bidiLevel:{get:function(){return this._bidiLevel},set:function(a){somewhatImplemented("TextBlock.bidiLevel");this._bidiLevel=a}},firstInvalidLine:{get:function(){notImplemented("TextBlock.firstInvalidLine");return this._firstInvalidLine}},firstLine:{get:function(){somewhatImplemented("TextBlock.firstLine");
return this._firstLine}},lastLine:{get:function(){somewhatImplemented("TextBlock.lastLine");return this._lastLine}},textLineCreationResult:{get:function(){notImplemented("TextBlock.textLineCreationResult");return this._textLineCreationResult}},lineRotation:{get:function(){return this._lineRotation},set:function(a){somewhatImplemented("TextBlock.lineRotation");this._lineRotation=a}}}}}}}.call(this),TextElementDefinition=function(){return{__class__:"flash.text.engine.TextElement",initialize:function(){},
__glue__:{"native":{"static":{},instance:{replaceText:function(a,e,b){somewhatImplemented("TextElement.replaceText");var d=this._text||"";this._text=d.slice(0,a)+b+d.slice(e)},text:{set:function(a){somewhatImplemented("TextElement.text");this._text=a}}}}}}}.call(this),TextJustifierDefinition=function(){return{__class__:"flash.text.engine.TextJustifier",initialize:function(){this._lineJustification=this._locale=null},__glue__:{"native":{"static":{},instance:{setLocale:function(a){somewhatImplemented("TextJustifier.setLocale");
this._locale=a},locale:{get:function(){return this._locale}},lineJustification:{get:function(){return this._lineJustification},set:function(a){somewhatImplemented("TextJustifier.lineJustification");this._lineJustification=a}}}}}}}.call(this),TextLineDefinition=function(){return{__class__:"flash.text.engine.TextLine",initialize:function(){},__glue__:{"native":{"static":{},instance:{getAtomIndexAtPoint:function(){notImplemented("TextLine.getAtomIndexAtPoint")},getAtomIndexAtCharIndex:function(){notImplemented("TextLine.getAtomIndexAtCharIndex")},
getAtomBounds:function(){notImplemented("TextLine.getAtomBounds")},getAtomBidiLevel:function(){notImplemented("TextLine.getAtomBidiLevel")},getAtomTextRotation:function(){notImplemented("TextLine.getAtomTextRotation")},getAtomTextBlockBeginIndex:function(){notImplemented("TextLine.getAtomTextBlockBeginIndex")},getAtomTextBlockEndIndex:function(){notImplemented("TextLine.getAtomTextBlockEndIndex")},getAtomCenter:function(){notImplemented("TextLine.getAtomCenter")},getAtomWordBoundaryOnLeft:function(){notImplemented("TextLine.getAtomWordBoundaryOnLeft")},
getAtomGraphic:function(){notImplemented("TextLine.getAtomGraphic")},getBaselinePosition:function(){notImplemented("TextLine.getBaselinePosition")},dump:function(){notImplemented("TextLine.dump")},textBlock:{get:function(){notImplemented("TextLine.textBlock");return this._textBlock}},hasGraphicElement:{get:function(){notImplemented("TextLine.hasGraphicElement");return this._hasGraphicElement}},hasTabs:{get:function(){notImplemented("TextLine.hasTabs");return this._hasTabs}},nextLine:{get:function(){somewhatImplemented("TextLine.nextLine");
return this._nextLine}},previousLine:{get:function(){somewhatImplemented("TextLine.previousLine");return this._previousLine}},ascent:{get:function(){somewhatImplemented("TextLine.ascent");return this._ascent}},descent:{get:function(){somewhatImplemented("TextLine.descent");return this._descent}},textHeight:{get:function(){somewhatImplemented("TextLine.textHeight");return this._textHeight}},textWidth:{get:function(){somewhatImplemented("TextLine.textWidth");return this._textWidth}},totalAscent:{get:function(){notImplemented("TextLine.totalAscent");
return this._totalAscent}},totalDescent:{get:function(){notImplemented("TextLine.totalDescent");return this._totalDescent}},totalHeight:{get:function(){notImplemented("TextLine.totalHeight");return this._totalHeight}},textBlockBeginIndex:{get:function(){notImplemented("TextLine.textBlockBeginIndex");return this._textBlockBeginIndex}},rawTextLength:{get:function(){somewhatImplemented("TextLine.rawTextLength");return this._rawTextLength}},specifiedWidth:{get:function(){somewhatImplemented("TextLine.specifiedWidth");
return this._specifiedWidth}},unjustifiedTextWidth:{get:function(){somewhatImplemented("TextLine.unjustifiedTextWidth");return this._unjustifiedTextWidth}},validity:{get:function(){return this._validity},set:function(a){somewhatImplemented("TextLine.validity");this._validity=a}},atomCount:{get:function(){notImplemented("TextLine.atomCount");return this._atomCount}},mirrorRegions:{get:function(){notImplemented("TextLine.mirrorRegions");return this._mirrorRegions}}}}}}}.call(this),ContextMenuDefinition=
function(){return{__class__:"flash.ui.ContextMenu",initialize:function(){},__glue__:{"native":{"static":{_checkSupported:function(){notImplemented("ContextMenu._checkSupported")}},instance:{cloneLinkAndClipboardProperties:function(){notImplemented("ContextMenu.cloneLinkAndClipboardProperties")},builtInItems:{get:function(){somewhatImplemented("ContextMenu.builtInItems");return this._builtInItems},set:function(a){somewhatImplemented("ContextMenu.builtInItems");this._builtInItems=a}},customItems:{get:function(){somewhatImplemented("ContextMenu.customItems");
return this._customItems},set:function(a){somewhatImplemented("ContextMenu.customItems");this._customItems=a}},link:{get:function(){notImplemented("ContextMenu.link");return this._link},set:function(a){notImplemented("ContextMenu.link");this._link=a}},clipboardMenu:{get:function(){notImplemented("ContextMenu.clipboardMenu");return this._clipboardMenu},set:function(a){notImplemented("ContextMenu.clipboardMenu");this._clipboardMenu=a}},clipboardItems:{get:function(){notImplemented("ContextMenu.clipboardItems");
return this._clipboardItems},set:function(a){notImplemented("ContextMenu.clipboardItems");this._clipboardItems=a}}}}}}}.call(this),ContextMenuItemDefinition=function(){return{__class__:"flash.ui.ContextMenuItem",initialize:function(){},__glue__:{"native":{"static":{},instance:{caption:{get:function(){somewhatImplemented("ContextMenuItem.caption");return this._caption},set:function(a){somewhatImplemented("ContextMenuItem.caption");this._caption=a}},separatorBefore:{get:function(){somewhatImplemented("ContextMenuItem.separatorBefore");
return this._separatorBefore},set:function(a){somewhatImplemented("ContextMenuItem.separatorBefore");this._separatorBefore=a}},visible:{get:function(){somewhatImplemented("ContextMenuItem.visible");return this._visible},set:function(a){somewhatImplemented("ContextMenuItem.visible");this._visible=a}}}}}}}.call(this),ShumwayKeyboardListener={_lastKeyCode:0,_captureKeyPress:!1,_charCodeMap:[],focus:null,handleEvent:function(a){var e=a.keyCode;if("keydown"===a.type){this._lastKeyCode=e;if(this._captureKeyPress=
8===e||9===e||13===e||32===e||48<=e&&90>=e||145<e)return;this._charCodeMap[e]=0}else if("keypress"===a.type)if(this._captureKeyPress)e=this._lastKeyCode,this._charCodeMap[e]=a.charCode;else return;this.focus&&this.focus._dispatchEvent(new flash.events.KeyboardEvent("keyup"===a.type?"keyUp":"keyDown",!0,!1,"keyup"===a.type?this._charCodeMap[e]:a.charCode,"keyup"===a.type?a.keyCode:this._lastKeyCode,a.keyLocation,a.ctrlKey,a.altKey,a.shiftKey))}};window.addEventListener("keydown",ShumwayKeyboardListener);
window.addEventListener("keypress",ShumwayKeyboardListener);window.addEventListener("keyup",ShumwayKeyboardListener);
var KeyboardDefinition=function(){var a={get capsLock(){return!1},get hasVirtualKeyboard(){return!1},get numLock(){return!1},get physicalKeyboardType(){return"alphanumeric"},get isAccessible(){return!0}},e=Object.getOwnPropertyDescriptor;a.__glue__={script:{"static":scriptProperties("public","A ALTERNATE AUDIO B BACK BACKQUOTE BACKSLASH BACKSPACE BLUE C CAPS_LOCK CHANNEL_DOWN CHANNEL_UP COMMA COMMAND CONTROL D DELETE DOWN DVR E END ENTER EQUAL ESCAPE EXIT F F1 F10 F11 F12 F13 F14 F15 F2 F3 F4 F5 F6 F7 F8 F9 FAST_FORWARD G GREEN GUIDE H HELP HOME I INFO INPUT INSERT J K KEYNAME_BEGIN KEYNAME_BREAK KEYNAME_CLEARDISPLAY KEYNAME_CLEARLINE KEYNAME_DELETE KEYNAME_DELETECHAR KEYNAME_DELETELINE KEYNAME_DOWNARROW KEYNAME_END KEYNAME_EXECUTE KEYNAME_F1 KEYNAME_F10 KEYNAME_F11 KEYNAME_F12 KEYNAME_F13 KEYNAME_F14 KEYNAME_F15 KEYNAME_F16 KEYNAME_F17 KEYNAME_F18 KEYNAME_F19 KEYNAME_F2 KEYNAME_F20 KEYNAME_F21 KEYNAME_F22 KEYNAME_F23 KEYNAME_F24 KEYNAME_F25 KEYNAME_F26 KEYNAME_F27 KEYNAME_F28 KEYNAME_F29 KEYNAME_F3 KEYNAME_F30 KEYNAME_F31 KEYNAME_F32 KEYNAME_F33 KEYNAME_F34 KEYNAME_F35 KEYNAME_F4 KEYNAME_F5 KEYNAME_F6 KEYNAME_F7 KEYNAME_F8 KEYNAME_F9 KEYNAME_FIND KEYNAME_HELP KEYNAME_HOME KEYNAME_INSERT KEYNAME_INSERTCHAR KEYNAME_INSERTLINE KEYNAME_LEFTARROW KEYNAME_MENU KEYNAME_MODESWITCH KEYNAME_NEXT KEYNAME_PAGEDOWN KEYNAME_PAGEUP KEYNAME_PAUSE KEYNAME_PREV KEYNAME_PRINT KEYNAME_PRINTSCREEN KEYNAME_REDO KEYNAME_RESET KEYNAME_RIGHTARROW KEYNAME_SCROLLLOCK KEYNAME_SELECT KEYNAME_STOP KEYNAME_SYSREQ KEYNAME_SYSTEM KEYNAME_UNDO KEYNAME_UPARROW KEYNAME_USER L LAST LEFT LEFTBRACKET LIVE M MASTER_SHELL MENU MINUS N NEXT NUMBER_0 NUMBER_1 NUMBER_2 NUMBER_3 NUMBER_4 NUMBER_5 NUMBER_6 NUMBER_7 NUMBER_8 NUMBER_9 NUMPAD NUMPAD_0 NUMPAD_1 NUMPAD_2 NUMPAD_3 NUMPAD_4 NUMPAD_5 NUMPAD_6 NUMPAD_7 NUMPAD_8 NUMPAD_9 NUMPAD_ADD NUMPAD_DECIMAL NUMPAD_DIVIDE NUMPAD_ENTER NUMPAD_MULTIPLY NUMPAD_SUBTRACT O P PAGE_DOWN PAGE_UP PAUSE PERIOD PLAY PREVIOUS Q QUOTE R RECORD RED REWIND RIGHT RIGHTBRACKET S SEARCH SEMICOLON SETUP SHIFT SKIP_BACKWARD SKIP_FORWARD SLASH SPACE STOP STRING_BEGIN STRING_BREAK STRING_CLEARDISPLAY STRING_CLEARLINE STRING_DELETE STRING_DELETECHAR STRING_DELETELINE STRING_DOWNARROW STRING_END STRING_EXECUTE STRING_F1 STRING_F10 STRING_F11 STRING_F12 STRING_F13 STRING_F14 STRING_F15 STRING_F16 STRING_F17 STRING_F18 STRING_F19 STRING_F2 STRING_F20 STRING_F21 STRING_F22 STRING_F23 STRING_F24 STRING_F25 STRING_F26 STRING_F27 STRING_F28 STRING_F29 STRING_F3 STRING_F30 STRING_F31 STRING_F32 STRING_F33 STRING_F34 STRING_F35 STRING_F4 STRING_F5 STRING_F6 STRING_F7 STRING_F8 STRING_F9 STRING_FIND STRING_HELP STRING_HOME STRING_INSERT STRING_INSERTCHAR STRING_INSERTLINE STRING_LEFTARROW STRING_MENU STRING_MODESWITCH STRING_NEXT STRING_PAGEDOWN STRING_PAGEUP STRING_PAUSE STRING_PREV STRING_PRINT STRING_PRINTSCREEN STRING_REDO STRING_RESET STRING_RIGHTARROW STRING_SCROLLLOCK STRING_SELECT STRING_STOP STRING_SYSREQ STRING_SYSTEM STRING_UNDO STRING_UPARROW STRING_USER SUBTITLE T TAB U UP V VOD W X Y YELLOW Z CharCodeStrings".split(" "))},"native":{instance:{capsLock:e(a,
"capsLock"),hasVirtualKeyboard:e(a,"hasVirtualKeyboard"),numLock:e(a,"numLock"),physicalKeyboardType:e(a,"physicalKeyboardType"),isAccessible:e(a,"isAccessible")}}};return a}.call(this),MouseDefinition=function(){return{__class__:"flash.ui.Mouse",__glue__:{"native":{"static":{cursor:{get:function(){return"auto"},set:function(){notImplemented()}},supportsCursor:{get:function(){return!0}},supportsNativeCursor:{get:function(){return!0}},hide:function(){},show:function(){},registerCursor:function(){notImplemented()},
unregisterCursor:function(){notImplemented()}}}}}}.call(this),MouseCursorDataDefinition=function(){return{__class__:"flash.ui.MouseCursorData",initialize:function(){},__glue__:{"native":{"static":{},instance:{data:{get:function(){notImplemented("MouseCursorData.data");return this._data},set:function(a){notImplemented("MouseCursorData.data");this._data=a}},hotSpot:{get:function(){notImplemented("MouseCursorData.hotSpot");return this._hotSpot},set:function(a){notImplemented("MouseCursorData.hotSpot");
this._hotSpot=a}},frameRate:{get:function(){notImplemented("MouseCursorData.frameRate");return this._frameRate},set:function(a){notImplemented("MouseCursorData.frameRate");this._frameRate=a}}}}}}}.call(this),DictionaryDefinition=function(){return{__class__:"flash.utils.Dictionary",initialize:function(){},__glue__:{"native":{"static":{},instance:{init:function(){notImplemented("Dictionary.init")}}}}}}.call(this),TimerDefinition=function(){return{__class__:"flash.utils.Timer",initialize:function(){this._running=
!1},__glue__:{"native":{instance:{running:{get:function(){return this._running}},_start:function(a,e){this._running=!0;this.interval=setInterval(e,a)},stop:function(){this._running=!1;clearInterval(this.interval)},_tick:function(){this._running&&this._dispatchEvent(new flash.events.TimerEvent("timer",!0,!1))}}}}}}.call(this),AccessibilityDefinition=function(){return{__class__:"flash.accessibility.Accessibility",initialize:function(){},__glue__:{"native":{"static":{sendEvent:function(){notImplemented("Accessibility.sendEvent")},
updateProperties:function(){notImplemented("Accessibility.updateProperties")},active:{get:function(){somewhatImplemented("Accessibility.active");return!1}}},instance:{}}}}}.call(this),AS2ButtonDefinition=function(){var a={__class__:"avm1lib.AS2Button",initialize:function(){}};a.__glue__={"native":{instance:{_as3Object:{get:function(){return this.$nativeObject}},_init:function(a){Object.defineProperty(this,"$nativeObject",{value:a});a.$as2Object=this;initDefaultListeners(this)}}},script:{instance:Glue.ALL}};
return a}.call(this),AS2GlobalsDefinition=function(){var a={__class__:"avm1lib.AS2Globals",initialize:function(){flash.text.TextFormat.prototype.asDefinePublicProperty("getTextExtent",{value:TextFormatDefinition.as2GetTextExtent,writable:!1,enumerable:!1,configurable:!1})}};a.__glue__={"native":{instance:{ASSetPropFlags:function(){},_addToPendingScripts:function(a,b,d){AS2Context.instance.addToPendingScripts(function(){b.apply(a,d)})},_setLevel:function(a,b){AS2Context.instance.stage._as2SetLevel(a,
b)},trace:function(a){avm2.applicationDomain.getProperty(Multiname.fromSimpleName("trace"),!0,!0)(a)}},"static":{_addInternalClasses:function(a){a.asSetPublicProperty("Object",Stubs.Object);a.asSetPublicProperty("Function",Stubs.Function);a.asSetPublicProperty("Array",Stubs.Array);a.asSetPublicProperty("Number",Stubs.Number);a.asSetPublicProperty("Math",avm2.systemDomain.getClass("Math"));a.asSetPublicProperty("Boolean",Stubs.Boolean);a.asSetPublicProperty("Date",Stubs.Date);a.asSetPublicProperty("RegExp",
Stubs.RegExp);a.asSetPublicProperty("String",Stubs.String)}}},script:{instance:Glue.ALL}};return a}.call(this),AS2MovieClipDefinition=function(){var a={__class__:"avm1lib.AS2MovieClip",initialize:function(){},_insertChildAtDepth:function(a,b){return this.$nativeObject._insertChildAtDepth(a,b)},_duplicate:function(a,b,d){return this.$nativeObject._duplicate(a,b,d)},_constructSymbol:function(a){var b=AS2Context.instance.classes&&AS2Context.instance.classes[a],d=flash.display.MovieClip.class;a=d.createAsSymbol(AS2Context.instance.assets[a]);
a._avm1SymbolClass=b;d.instanceConstructor.call(a);this.$nativeObject.addChild(a);return a},_gotoLabel:function(a){this.$nativeObject.gotoLabel(a)},_callFrame:function(a){this.$nativeObject._callFrame(a)},init:function(a){a&&(Object.defineProperty(this,"$nativeObject",{value:a}),a.$as2Object=this,initDefaultListeners(this))}};a.__glue__={"native":{instance:{_as3Object:{get:function(){return this.$nativeObject}},_init:a.init,_insertChildAtDepth:a._insertChildAtDepth,_duplicate:a._duplicate,_constructSymbol:a._constructSymbol,
_callFrame:a._callFrame,_gotoLabel:a._gotoLabel}},script:{instance:Glue.ALL}};return a}.call(this),AS2MovieClipLoaderDefinition=function(){var a={__class__:"avm1lib.AS2MovieClipLoader",initialize:function(){},get _bytesLoaded(){return this.$nativeObject._contentLoaderInfo._bytesLoaded}},e=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{$nativeObject:{get:function(){return this.$nativeObject}},_bytesLoaded:e(a,"_bytesLoaded")}},script:{instance:Glue.ALL}};return a}.call(this),AS2TextFieldDefinition=
function(){var a={__class__:"avm1lib.AS2TextField",initialize:function(){this._variable=""}};a.__glue__={"native":{instance:{variable:{get:function(){return this._variable},set:function(a){if(a!==this._variable){this._variable=a;var b=this.$nativeObject,d;if(0<=a.indexOf(".")||0<=a.indexOf(":")){var g=a.split(/[.:\/]/g);a=g.pop();"_root"==g[0]||""===g[0]?(d=b.root._getAS2Object(),g.shift(),""===g[0]&&g.shift()):d=b._parent._getAS2Object();for(;0<g.length;){var f=g.shift();d=d.asGetPublicProperty(f)||
d[f];if(!d)throw Error("Cannot find "+f+" variable");}}else d=b._parent._getAS2Object();d.asHasProperty(void 0,a,0)||d.asSetPublicProperty(a,b.text);b._addEventListener("advanceFrame",function(){b.text=""+d.asGetPublicProperty(a)})}}},_as3Object:{get:function(){return this.$nativeObject}},_init:function(a){Object.defineProperty(this,"$nativeObject",{value:a});a.$as2Object=this;initDefaultListeners(this)}}},script:{instance:Glue.ALL}};return a}.call(this),AS2UtilsDefinition=function(){return{__class__:"avm1lib.AS2Utils",
initialize:function(){},__glue__:{"native":{"static":{getAS2Object:function(a){return a&&a._getAS2Object?a._getAS2Object():null},addProperty:function(a,e,b,d,g){a.asDefinePublicProperty(e,{get:b,set:d||void 0,enumerable:g,configurable:!0})},resolveTarget:function(a){return AS2Context.instance.resolveTarget(a)},resolveLevel:function(a){return AS2Context.instance.resolveLevel(a)},currentStage:{get:function(){return AS2Context.instance.stage}},_installObjectMethods:function(){var a=Stubs.Object,e=a.asGetPublicProperty("prototype");
a.asSetPublicProperty("registerClass",function(a,d){(AS2Context.instance.classes||(AS2Context.instance.classes={}))[a]=d});e.asDefinePublicProperty("addProperty",{value:function(a,d,e){if("string"!==typeof a||""===a||"function"!==typeof d||"function"!==typeof e&&null!==e)return!1;this.asDefinePublicProperty(a,{get:d,set:e||void 0,configurable:!0,enumerable:!0});return!0},writable:!1,enumerable:!1,configurable:!1})}}}}}}.call(this);
function initDefaultListeners(a){var e=a.asGetPublicProperty("$defaultListeners");if(e)for(var b=0;b<e.length;b++){var d=e[b];d.asGetPublicProperty("setter").call(a,d.value)}}function bindNativeClassDefinition(a,e){natives[a]=function(a,d,g,f){a=new Class(void 0,g,ApplicationDomain.coerceCallable);a.extend(f);a.linkNatives(e);return a}}
var Stubs=new function(){function a(a,b,d){Object.defineProperty(a,d,{get:function(){var e=avm2.systemDomain.getClass(b);!0;Object.defineProperty(a,d,{value:e.instanceConstructor,writable:!1});return a[d]},configurable:!0})}function e(a,b,d){return{classSimpleName:a,nativeName:b,definition:d}}var b=this,d=createEmptyObject(),g={__glue__:{script:{instance:Glue.ALL,"static":Glue.ALL}}};this.getClassNames=function(){return Object.keys(d)};this.onClassCreated=function(a,b){var e=b.classInfo.instanceInfo.name.getOriginalName();
e in d&&b.link(d[e]||g)};"Boolean Date String Function Object Number Math Array RegExp".split(" ").forEach(function(d){a(b,d,d)});"Error DefinitionError EvalError RangeError ReferenceError SecurityError SyntaxError TypeError URIError VerifyError UninitializedError ArgumentError".split(" ").forEach(function(d){a(b,d,d)});[e("flash.display.DisplayObject","DisplayObjectClass",DisplayObjectDefinition),e("flash.display.InteractiveObject","InteractiveObjectClass",InteractiveObjectDefinition),e("flash.display.DisplayObjectContainer",
"ContainerClass",DisplayObjectContainerDefinition),e("flash.display.Sprite","SpriteClass",SpriteDefinition),e("flash.display.MovieClip","MovieClipClass",MovieClipDefinition),e("flash.display.Shape","ShapeClass",ShapeDefinition),e("flash.display.Bitmap","BitmapClass",BitmapDefinition),e("flash.display.BitmapData","BitmapDataClass",BitmapDataDefinition),e("flash.display.Stage","StageClass",StageDefinition),e("flash.display.Loader","LoaderClass",LoaderDefinition),e("flash.display.LoaderInfo","LoaderInfoClass",
LoaderInfoDefinition),e("flash.display.Graphics","GraphicsClass",GraphicsDefinition),e("flash.display.SimpleButton","SimpleButtonClass",SimpleButtonDefinition),e("flash.display.MorphShape","MorphShapeClass",MorphShapeDefinition),e("flash.display.NativeMenu","MenuClass",NativeMenuDefinition),e("flash.display.NativeMenuItem","MenuItemClass",NativeMenuItemDefinition),e("flash.display.FrameLabel","FrameLabelClass",FrameLabelDefinition),e("flash.display.Scene"),e("flash.display.BlendMode"),e("flash.display.Shader",
"ShaderClass",ShaderDefinition),e("flash.display.ShaderData","ShaderDataClass",ShaderDataDefinition),e("flash.filters.BevelFilter","BevelFilterClass",BevelFilterDefinition),e("flash.filters.BitmapFilter","BitmapFilterClass",BitmapFilterDefinition),e("flash.filters.BlurFilter","BlurFilterClass",BlurFilterDefinition),e("flash.filters.ColorMatrixFilter","ColorMatrixFilterClass",ColorMatrixFilterDefinition),e("flash.filters.ConvolutionFilter","ConvolutionFilterClass",ConvolutionFilterDefinition),e("flash.filters.DisplacementMapFilter",
"DisplacementMapFilterClass",DisplacementMapFilterDefinition),e("flash.filters.DropShadowFilter","DropShadowFilterClass",DropShadowFilterDefinition),e("flash.filters.GlowFilter","GlowFilterClass",GlowFilterDefinition),e("flash.filters.GradientBevelFilter","GradientBevelFilterClass",GradientBevelFilterDefinition),e("flash.filters.GradientGlowFilter","GradientGlowFilterClass",GradientGlowFilterDefinition),e("flash.filters.ShaderFilter","ShaderFilterClass",ShaderFilterDefinition),e("flash.geom.Point",
"PointClass",PointDefinition),e("flash.geom.Rectangle","RectangleClass",RectangleDefinition),e("flash.geom.Matrix","MatrixClass",MatrixDefinition),e("flash.geom.Matrix3D","Matrix3DClass",Matrix3DDefinition),e("flash.geom.Vector3D","Vector3DClass",Vector3DDefinition),e("flash.geom.Transform","TransformClass",TransformDefinition),e("flash.geom.ColorTransform","ColorTransformClass",ColorTransformDefinition),e("flash.events.EventDispatcher","EventDispatcherClass",EventDispatcherDefinition),e("flash.events.Event",
"EventClass",EventDefinition),e("flash.events.IOErrorEvent"),e("flash.events.NetStatusEvent"),e("flash.events.KeyboardEvent","KeyboardEventClass",KeyboardEventDefinition),e("flash.events.MouseEvent","MouseEventClass",MouseEventDefinition),e("flash.events.TextEvent","TextEventClass",TextEventDefinition),e("flash.events.TimerEvent","TimerEventClass",TimerEventDefinition),e("flash.events.ProgressEvent"),e("flash.events.NetStatusEvent"),e("flash.external.ExternalInterface","ExternalInterfaceClass",ExternalInterfaceDefinition),
e("flash.ui.ContextMenu","ContextMenuClass",ContextMenuDefinition),e("flash.ui.ContextMenuItem","ContextMenuItemClass",ContextMenuItemDefinition),e("flash.ui.Keyboard","KeyboardClass",KeyboardDefinition),e("flash.ui.Mouse","MouseClass",MouseDefinition),e("flash.ui.MouseCursorData","MouseCursorDataClass",MouseCursorDataDefinition),e("flash.text.Font","FontClass",FontDefinition),e("flash.text.TextField","TextFieldClass",TextFieldDefinition),e("flash.text.StaticText","StaticTextClass",StaticTextDefinition),
e("flash.text.StyleSheet","StyleSheetClass",StyleSheetDefinition),e("flash.text.TextFormat","TextFormatClass",TextFormatDefinition),e("flash.text.TextLineMetrics"),e("flash.text.engine.ContentElement","ContentElementClass",ContentElementDefinition),e("flash.text.engine.ElementFormat","ElementFormatClass",ElementFormatDefinition),e("flash.text.engine.FontDescription","FontDescriptionClass",FontDescriptionDefinition),e("flash.text.engine.GroupElement","GroupElementClass",GroupElementDefinition),e("flash.text.engine.SpaceJustifier",
"SpaceJustifierClass",SpaceJustifierDefinition),e("flash.text.engine.TextBlock","TextBlockClass",TextBlockDefinition),e("flash.text.engine.TextElement","TextElementClass",TextElementDefinition),e("flash.text.engine.TextJustifier","TextJustifierClass",TextJustifierDefinition),e("flash.text.engine.TextLine","TextLineClass",TextLineDefinition),e("flash.media.Sound","SoundClass",SoundDefinition),e("flash.media.SoundChannel","SoundChannelClass",SoundChannelDefinition),e("flash.media.SoundMixer","SoundMixerClass",
SoundMixerDefinition),e("flash.media.SoundTransform","SoundTransformClass",SoundTransformDefinition),e("flash.media.Video","VideoClass",VideoDefinition),e("flash.media.ID3Info","ID3InfoClass",ID3InfoDefinition),e("flash.media.Microphone","MicrophoneClass",MicrophoneDefinition),e("flash.net.FileFilter","FileFilterClass",FileFilterDefinition),e("flash.net.NetConnection","NetConnectionClass",NetConnectionDefinition),e("flash.net.NetStream","NetStreamClass",NetStreamDefinition),e("flash.net.Responder",
"ResponderClass",ResponderDefinition),e("flash.net.URLRequest","URLRequestClass",URLRequestDefinition),e("flash.net.URLStream","URLStreamClass",URLStreamDefinition),e("flash.net.URLLoader","URLLoaderClass",URLLoaderDefinition),e("flash.net.SharedObject","SharedObjectClass",SharedObjectDefinition),e("flash.net.ObjectEncoding","ObjectEncodingClass",ObjectEncodingDefinition),e("flash.net.LocalConnection","LocalConnectionClass",LocalConnectionDefinition),e("flash.net.Socket","SocketClass",SocketDefinition),
e("flash.net.URLVariables"),e("packageInternal flash.system.FSCommand","FSCommandClass",FSCommandDefinition),e("flash.system.Capabilities","CapabilitiesClass",CapabilitiesDefinition),e("flash.system.System","SystemClass",SystemDefinition),e("flash.system.Security","SecurityClass",SecurityDefinition),e("flash.system.SecurityDomain","SecurityDomainClass",SecurityDomainDefinition),e("flash.system.ApplicationDomain","ApplicationDomainClass",ApplicationDomainDefinition),e("flash.accessibility.Accessibility",
"AccessibilityClass",AccessibilityDefinition),e("flash.utils.Timer","TimerClass",TimerDefinition),e("avm1lib.AS2Utils","AS2Utils",AS2UtilsDefinition),e("avm1lib.AS2Broadcaster"),e("avm1lib.AS2Key"),e("avm1lib.AS2Mouse"),e("avm1lib.AS2MovieClip","AS2MovieClip",AS2MovieClipDefinition),e("avm1lib.AS2Button","AS2Button",AS2ButtonDefinition),e("avm1lib.AS2TextField","AS2TextField",AS2TextFieldDefinition),e("avm1lib.AS2Stage"),e("avm1lib.AS2System"),e("avm1lib.AS2Color"),e("avm1lib.AS2Globals","AS2Globals",
AS2GlobalsDefinition),e("avm1lib.AS2MovieClipLoader","AS2MovieClipLoader",AS2MovieClipLoaderDefinition)].forEach(function(b){for(var e=Multiname.fromSimpleName(b.classSimpleName),g=e.getOriginalName().split("."),p=this,r=0,v=g.length-1;r<v;r++)p[g[r]]||(p[g[r]]={}),p=p[g[r]];a(p,b.classSimpleName,g[g.length-1]);b.nativeName&&bindNativeClassDefinition(b.nativeName,b.definition);d[e.getOriginalName()]=b.definition})};natives["FlashUtilScript::getAliasName"]=function(){return function(a){return a.debugName}};
natives["FlashUtilScript::getDefinitionByName"]=natives.getDefinitionByName;natives["FlashUtilScript::getTimer"]=function(){var a=Date.now();return function(){return Date.now()-a}};natives["FlashUtilScript::escapeMultiByte"]=function(){return escape};natives["FlashUtilScript::unescapeMultiByte"]=function(){return unescape};
natives["FlashNetScript::navigateToURL"]=function(){return function(a,e){(null===a||void 0===a)&&throwError("TypeError",Errors.NullPointerError,"request");avm2.systemDomain.getClass("flash.net.URLRequest").isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.net.URLRequest");var b=a.url;/^fscommand:/i.test(b)?avm2.applicationDomain.getProperty(Multiname.fromSimpleName("flash.system.fscommand"),!0,!0).call(null,b.substring(10),e):window.open(FileLoadingService.resolveUrl(b),
e||"_parent")}};natives["FlashNetScript::sendToURL"]=function(){return function(a){(null===a||void 0===a)&&throwError("TypeError",Errors.NullPointerError,"request");avm2.systemDomain.getClass("flash.net.URLRequest").isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.net.URLRequest");var e=FileLoadingService.createSession();e.onprogress=function(){};e.open(a)}};
natives["Toplevel::registerClassAlias"]=function(){return function(a,e){a||throwError("TypeError",Errors.NullPointerError,"aliasName");e||throwError("TypeError",Errors.NullPointerError,"classObject");AMFUtils.aliasesCache.classes.set(e,a);AMFUtils.aliasesCache.names[a]=e}};
natives["Toplevel::getClassByAlias"]=function(){return function(a){a||throwError("TypeError",Errors.NullPointerError,"aliasName");var e=AMFUtils.aliasesCache.names[a];e||throwError("ReferenceError",Errors.ClassNotFoundError,a);return e}};
